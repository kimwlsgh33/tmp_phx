# .gitignore

```
# The directory Mix will write compiled artifacts to. /_build/ # If you run "mix test --cover", coverage assets end up here. /cover/ # The directory Mix downloads your dependencies sources to. /deps/ # Where 3rd-party dependencies like ExDoc output generated docs. /doc/ # Ignore .fetch files in case you like to edit your project deps locally. /.fetch # If the VM crashes, it generates a dump, let's ignore it too. erl_crash.dump # Also ignore archive artifacts (built via "mix archive.build"). *.ez # Temporary files, for example, from tests. /tmp/ # Ignore package tarball (built via "mix hex.build"). myapp-*.tar # Ignore assets that are produced by build tools. /priv/static/assets/ /priv/static/uploads/ # Ignore digested assets cache. /priv/static/cache_manifest.json # In case you use Node.js/npm, you want to ignore these. npm-debug.log /assets/node_modules/ # Ignore .env files .env .env.local .env.development.local .env.test.local .env.production.local # Ignore .DS_Store files .DS_Store wanted/
```

# assets/css/app.css

```css
@import "tailwindcss/base"; @import "tailwindcss/components"; @import "tailwindcss/utilities"; /* This file is for your main application CSS */ @import "./docs.css"; .spinner { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100px; height: 100px; z-index: 1000; display: block; /* 기본적으로 표시 */ } .spinner path { fill: none; stroke: gray; stroke-width: 10; animation: draw 3s linear infinite; } @keyframes draw { 0% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: calc(var(--path-length) * 2); } } #page-content { transition: opacity 0.3s ease-in-out; /* 부드러운 전환 효과 */ } #page-content.hidden { opacity: 0; } /* Animations */ @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); /* Move by half of the total width */ } } .animate-scroll { animation: scroll 30s linear infinite; } .hover\:pause-animation:hover { animation-play-state: paused; } /* Custom animation for fade in content */ @keyframes fadeIn { 0% { opacity: 0; transform: translateY(10px); } 100% { opacity: 1; transform: translateY(0); } } .group-open\:animate-fadeIn { animation: fadeIn 0.3s ease-out forwards; } /* Enhanced markdown content styling */ #markdown-content { /* Basic typography */ @apply text-gray-800 leading-relaxed; /* Headings */ & h1, & h2, & h3, & h4, & h5, & h6 { @apply font-bold text-gray-900 mb-4 mt-6 scroll-mt-24; } & h1 { @apply text-3xl border-b border-gray-200 pb-2; } & h2 { @apply text-2xl border-b border-gray-200 pb-2; } & h3 { @apply text-xl; } & h4 { @apply text-lg; } /* Paragraphs and spacing */ & p { @apply my-4; } /* Lists */ & ul, & ol { @apply my-4 pl-8; } & ul { @apply list-disc; } & ol { @apply list-decimal; } & li { @apply mb-2; } /* Blockquotes */ & blockquote { @apply border-l-4 border-blue-500 pl-4 italic my-4 text-gray-600; } /* Code blocks */ & pre { @apply bg-gray-800 text-white p-4 rounded-lg overflow-x-auto my-4; } & code { @apply bg-gray-100 text-gray-800 px-1 py-0.5 rounded text-sm; } & pre code { @apply bg-transparent text-white p-0; } /* Tables */ & table { @apply min-w-full divide-y divide-gray-300 my-6; } & thead { @apply bg-gray-50; } & th { @apply py-3.5 px-4 text-sm font-semibold text-left text-gray-900; } & tbody { @apply divide-y divide-gray-200; } & td { @apply py-4 px-4 text-sm text-gray-500; } /* Links */ & a { @apply text-blue-600 hover:text-blue-800 hover:underline; } /* Horizontal rule */ & hr { @apply my-8 border-t border-gray-300; } /* Special sections */ & .note, & .info, & .warning, & .danger { @apply p-4 my-4 rounded-lg; } & .note { @apply bg-blue-50 border-l-4 border-blue-500; } & .info { @apply bg-green-50 border-l-4 border-green-500; } & .warning { @apply bg-yellow-50 border-l-4 border-yellow-500; } & .danger { @apply bg-red-50 border-l-4 border-red-500; } }
```

# assets/css/docs.css

```css
/* Documentation specific styles */ /* Highlight effect for sections when navigated to via table of contents */ @keyframes highlight-fade { 0% { background-color: rgba(59, 130, 246, 0.1); box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2); } 100% { background-color: transparent; box-shadow: none; } } .highlight-section { animation: highlight-fade 2s ease-out; border-radius: 0.375rem; padding: 0.5rem; margin: -0.5rem; } /* Improve heading visibility */ .static-content h3 { margin-top: 1.5rem; padding-top: 1rem; scroll-margin-top: 80px; /* Ensures the heading isn't hidden under any fixed headers when scrolled to */ } /* Active state for table of contents links */ .toc-link-active { font-weight: 600; color: #1d4ed8 !important; background-color: rgba(59, 130, 246, 0.1); border-radius: 0.25rem; padding: 0.25rem 0.5rem; margin-left: -0.5rem; }
```

# assets/js/app.js

```js
// If you want to use Phoenix channels, run `mix help phx.gen.channel` // to get started and then uncomment the line below. // import "./user_socket.js" // You can include dependencies in two ways. // // The simplest option is to put them in assets/vendor and // import them using relative paths: // // import "../vendor/some-package.js" // // Alternatively, you can `npm install some-package --prefix assets` and import // them using a path starting with the package name: // // import "some-package" // // Include phoenix_html to handle method=PUT/DELETE in forms and buttons. import "phoenix_html"; // Establish Phoenix Socket and LiveView configuration. import { Socket } from "phoenix"; import { LiveSocket } from "phoenix_live_view"; import topbar from "../vendor/topbar"; import ThemeToggle from "./hooks/theme_toggle"; import DocsNavigation from "./hooks/docs_navigation"; let csrfToken = document .querySelector("meta[name='csrf-token']") .getAttribute("content"); let Hooks = { ThemeToggle, DocsNavigation }; let liveSocket = new LiveSocket("/live", Socket, { longPollFallbackMs: 2500, params: { _csrf_token: csrfToken }, hooks: Hooks, }); // Show progress bar on live navigation and form submits topbar.config({ barColors: { 0: "#29d" }, shadowColor: "rgba(0, 0, 0, .3)" }); window.addEventListener("phx:page-loading-start", (_info) => topbar.show(300)); window.addEventListener("phx:page-loading-stop", (_info) => topbar.hide()); // connect if there are any LiveViews on the page liveSocket.connect(); // expose liveSocket on window for web console debug logs and latency simulation: // >> liveSocket.enableDebug() // >> liveSocket.enableLatencySim(1000) // enabled for duration of browser session // >> liveSocket.disableLatencySim() window.liveSocket = liveSocket; // spinner document.addEventListener("DOMContentLoaded", () => { const spinner = document.getElementById("global-spinner"); const path = spinner.querySelector("path"); const content = document.getElementById("page-content"); const pathLength = path.getTotalLength(); path.style.setProperty("--path-length", pathLength); path.style.strokeDasharray = pathLength; path.style.strokeDashoffset = pathLength; // 페이지 로딩 시작 시 window.addEventListener("phx:page-loading-start", () => { spinner.style.display = "block"; content.style.display = "none"; }); // 페이지 로딩 완료 시 window.addEventListener("phx:page-loading-stop", () => { spinner.style.display = "none"; content.style.display = "block"; content.classList.remove("hidden"); // 부드러운 전환을 위해 }); });
```

# assets/js/hooks/docs_navigation.js

```js
// Documentation navigation hooks const DocsNavigation = { mounted() { // Handle smooth scrolling when clicking on table of contents links this.handleEvent("scroll_to_section", ({ id }) => { const element = document.getElementById(id); if (element) { element.scrollIntoView({ behavior: "smooth", block: "start" }); // Add a highlight effect to the section element.classList.add("highlight-section"); setTimeout(() => { element.classList.remove("highlight-section"); }, 2000); // Update active link in table of contents this.updateActiveTocLink(id); } }); // Set up intersection observer to track which section is currently in view this.setupSectionObserver(); }, updateActiveTocLink(id) { // Remove active class from all TOC links document.querySelectorAll('.toc-link').forEach(link => { link.classList.remove('toc-link-active'); }); // Add active class to the current link const activeLink = document.querySelector(`.toc-link[href="#${id}"]`); if (activeLink) { activeLink.classList.add('toc-link-active'); } }, setupSectionObserver() { // Get all headings in the content const headings = document.querySelectorAll('.static-content h3[id]'); // Set up intersection observer options const options = { root: null, // viewport rootMargin: '-80px 0px -80% 0px', // Consider element in view when it's 80px from the top and not in the bottom 80% threshold: 0 }; // Create observer const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { // When a heading enters the viewport, update the active TOC link this.updateActiveTocLink(entry.target.id); } }); }, options); // Observe all headings headings.forEach(heading => { observer.observe(heading); }); } }; export default DocsNavigation;
```

# assets/js/hooks/theme_toggle.js

```js
const ThemeToggle = { mounted() { const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon'); const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon'); // Change the icons inside the button based on previous settings if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) { themeToggleLightIcon.classList.remove('hidden'); } else { themeToggleDarkIcon.classList.remove('hidden'); } this.el.addEventListener('click', () => { // Toggle icons themeToggleDarkIcon.classList.toggle('hidden'); themeToggleLightIcon.classList.toggle('hidden'); // If is dark mode, change to light mode if (document.documentElement.classList.contains('dark')) { document.documentElement.classList.remove('dark'); localStorage.theme = 'light'; } else { document.documentElement.classList.add('dark'); localStorage.theme = 'dark'; } }); } }; export default ThemeToggle;
```

# assets/js/user_socket.js

```js
// NOTE: The contents of this file will only be executed if // you uncomment its entry in "assets/js/app.js". // Bring in Phoenix channels client library: import {Socket} from "phoenix" // And connect to the path in "lib/myapp_web/endpoint.ex". We pass the // token for authentication. Read below how it should be used. let socket = new Socket("/socket", {params: {token: window.userToken}}) // When you connect, you'll often need to authenticate the client. // For example, imagine you have an authentication plug, `MyAuth`, // which authenticates the session and assigns a `:current_user`. // If the current user exists you can assign the user's token in // the connection for use in the layout. // // In your "lib/myapp_web/router.ex": // // pipeline :browser do // ... // plug MyAuth // plug :put_user_token // end // // defp put_user_token(conn, _) do // if current_user = conn.assigns[:current_user] do // token = Phoenix.Token.sign(conn, "user socket", current_user.id) // assign(conn, :user_token, token) // else // conn // end // end // // Now you need to pass this token to JavaScript. You can do so // inside a script tag in "lib/myapp_web/templates/layout/app.html.heex": // // <script>window.userToken = "<%= assigns[:user_token] %>";</script> // // You will need to verify the user token in the "connect/3" function // in "lib/myapp_web/channels/user_socket.ex": // // def connect(%{"token" => token}, socket, _connect_info) do // # max_age: 1209600 is equivalent to two weeks in seconds // case Phoenix.Token.verify(socket, "user socket", token, max_age: 1_209_600) do // {:ok, user_id} -> // {:ok, assign(socket, :user, user_id)} // // {:error, reason} -> // :error // end // end // // Finally, connect to the socket: socket.connect() // Now that you are connected, you can join channels with a topic. // Let's assume you have a channel with a topic named `room` and the // subtopic is its id - in this case 42: let channel = socket.channel("room:42", {}) channel.join() .receive("ok", resp => { console.log("Joined successfully", resp) }) .receive("error", resp => { console.log("Unable to join", resp) }) export default socket
```

# assets/package.json

```json
{ "scripts": { "deploy": "cd .. && mix assets.deploy && rm -f _build/esbuild*" } }
```

# assets/tailwind.config.js

```js
// See the Tailwind configuration guide for advanced usage // https://tailwindcss.com/docs/configuration const plugin = require("tailwindcss/plugin") const fs = require("fs") const path = require("path") module.exports = { content: [ "./js/**/*.js", "../lib/myapp_web.ex", "../lib/myapp_web/**/*.*ex" ], darkMode: 'class', theme: { extend: { colors: { brand: "#FD4F00", }, animation: { 'gradient-background': 'gradient 15s ease infinite', 'grid-flow': 'grid-flow 20s linear infinite', 'button-glow': 'button-glow 1.5s ease-in-out infinite', 'button-shine': 'button-shine 8s ease-in-out infinite', 'logo-scroll': 'logo-scroll 30s linear infinite', }, keyframes: { gradient: { '0%, 100%': { 'background-position': '0% 50%', }, '50%': { 'background-position': '100% 50%', }, }, 'grid-flow': { '0%': { transform: 'translateY(0)' }, '100%': { transform: 'translateY(-100%)' }, }, 'button-glow': { '0%, 100%': { 'box-shadow': '0 0 0 0 rgba(99, 102, 241, 0.4)', }, '50%': { 'box-shadow': '0 0 20px 5px rgba(99, 102, 241, 0.4)', }, }, 'button-shine': { '0%': { 'background-position': '200% center', }, '100%': { 'background-position': '-200% center', }, }, 'logo-scroll': { '0%': { transform: 'translateX(0)' }, '100%': { transform: 'translateX(-100%)' }, }, }, backgroundSize: { 'gradient-size': '400% 400%', }, }, }, plugins: [ require("@tailwindcss/forms"), // Allows prefixing tailwind classes with LiveView classes to add rules // only when LiveView classes are applied, for example: // // <div class="phx-click-loading:animate-ping"> // plugin(({addVariant}) => addVariant("phx-click-loading", [".phx-click-loading&", ".phx-click-loading &"])), plugin(({addVariant}) => addVariant("phx-submit-loading", [".phx-submit-loading&", ".phx-submit-loading &"])), plugin(({addVariant}) => addVariant("phx-change-loading", [".phx-change-loading&", ".phx-change-loading &"])), // Embeds Heroicons (https://heroicons.com) into your app.css bundle // See your `CoreComponents.icon/1` for more information. // plugin(function({matchComponents, theme}) { let iconsDir = path.join(__dirname, "../deps/heroicons/optimized") let values = {} let icons = [ ["", "/24/outline"], ["-solid", "/24/solid"], ["-mini", "/20/solid"], ["-micro", "/16/solid"] ] icons.forEach(([suffix, dir]) => { fs.readdirSync(path.join(iconsDir, dir)).forEach(file => { let name = path.basename(file, ".svg") + suffix values[name] = {name, fullPath: path.join(iconsDir, dir, file)} }) }) matchComponents({ "hero": ({name, fullPath}) => { let content = fs.readFileSync(fullPath).toString().replace(/\r?\n|\r/g, "") let size = theme("spacing.6") if (name.endsWith("-mini")) { size = theme("spacing.5") } else if (name.endsWith("-micro")) { size = theme("spacing.4") } return { [`--hero-${name}`]: `url('data:image/svg+xml;utf8,${content}')`, "-webkit-mask": `var(--hero-${name})`, "mask": `var(--hero-${name})`, "mask-repeat": "no-repeat", "background-color": "currentColor", "vertical-align": "middle", "display": "inline-block", "width": size, "height": size } } }, {values}) }) ] }
```

# CLAUDE.md

```md
# CLAUDE.md - Development Guide ## Build/Test Commands - `mix setup` - Install dependencies and setup the project - `mix phx.server` - Start the Phoenix server - `mix test` - Run all tests - `mix test test/path/to/file_test.exs` - Run a specific test file - `mix test test/path/to/file_test.exs:123` - Run a specific test at line 123 - `mix format` - Format code according to Elixir standards - `mix ecto.reset` - Reset the database ## Code Style Guidelines - **Modules**: Use structured context modules (like `Myapp.Accounts`) with clear documentation - **Documentation**: Always include `@moduledoc` and `@doc` with examples for public functions - **Functions**: Group related functions with comment headers (e.g., `## Database getters`) - **Error Handling**: Use `with` statements for complex error flows, pattern match on responses - **Testing**: Follow the test pattern in the codebase - descriptive `describe` blocks and clear assertions - **Naming**: Use snake_case for variables and functions, CamelCase for modules - **LiveView**: Follow Phoenix conventions - `mount`, `handle_event`, `render` functions - **Imports**: Group imports at the top of files, use aliases for readability - **Types**: Use module attributes for types and specs when appropriate
```

# config/config.exs

```exs
# This file is responsible for configuring your application # and its dependencies with the aid of the Config module. # # This configuration file is loaded before any dependency and # is restricted to this project. # General application configuration import Config config :myapp, ecto_repos: [Myapp.Repo], generators: [timestamp_type: :utc_datetime] # Configures the endpoint config :myapp, MyappWeb.Endpoint, url: [host: "localhost"], adapter: Bandit.PhoenixAdapter, render_errors: [ formats: [html: MyappWeb.ErrorHTML, json: MyappWeb.ErrorJSON], layout: false ], pubsub_server: Myapp.PubSub, live_view: [signing_salt: "JqSKVQGL"] # Configures the mailer # # By default it uses the "Local" adapter which stores the emails # locally. You can see the emails in your browser, at "/dev/mailbox". # # For production it's recommended to configure a different adapter # at the `config/runtime.exs`. config :myapp, Myapp.Mailer, adapter: Swoosh.Adapters.Local # Configure esbuild (the version is required) config :esbuild, version: "0.17.11", myapp: [ args: ~w(js/app.js --bundle --target=es2017 --outdir=../priv/static/assets --external:/fonts/* --external:/images/*), cd: Path.expand("../assets", __DIR__), env: %{"NODE_PATH" => Path.expand("../deps", __DIR__)} ] # Configure tailwind (the version is required) config :tailwind, version: "3.4.3", myapp: [ args: ~w( --config=tailwind.config.js --input=css/app.css --output=../priv/static/assets/app.css ), cd: Path.expand("../assets", __DIR__) ] # Configures Elixir's Logger config :logger, :console, format: "$time $metadata[$level] $message\n", metadata: [:request_id] # Use Jason for JSON parsing in Phoenix config :phoenix, :json_library, Jason # Configures the Youtube API config :google_api_you_tube, key: System.get_env("YOUTUBE_API_KEY") # Configures the Thread API config :myapp, :thread_api, access_token: System.get_env("THREAD_API_ACCESS_TOKEN") # Configures the TikTok API config :myapp, :tiktok_api, client_key: System.get_env("TIKTOK_CLIENT_KEY"), client_secret: System.get_env("TIKTOK_CLIENT_SECRET"), access_token: System.get_env("TIKTOK_ACCESS_TOKEN") # Instagram configuration config :myapp, Myapp.Instagram, access_token: System.get_env("INSTAGRAM_ACCESS_TOKEN"), client_id: System.get_env("INSTAGRAM_CLIENT_ID"), client_secret: System.get_env("INSTAGRAM_CLIENT_SECRET"), redirect_uri: System.get_env("INSTAGRAM_REDIRECT_URI") # Configures the Twitter API config :myapp, :twitter_api, api_key: System.get_env("TWITTER_API_KEY"), api_secret: System.get_env("TWITTER_API_SECRET"), redirect_uri: System.get_env("TWITTER_REDIRECT_URI") # Import environment specific config. This must remain at the bottom # of this file so it overrides the configuration defined above. import_config "#{config_env()}.exs"
```

# config/dev.exs

```exs
import Config # Configure your database config :myapp, Myapp.Repo, username: "postgres", password: "postgres", hostname: "localhost", database: "myapp_dev", stacktrace: true, show_sensitive_data_on_connection_error: true, pool_size: 10 # For development, we disable any cache and enable # debugging and code reloading. # # The watchers configuration can be used to run external # watchers to your application. For example, we can use it # to bundle .js and .css sources. config :myapp, MyappWeb.Endpoint, # Binding to loopback ipv4 address prevents access from other machines. # Change to `ip: {0, 0, 0, 0}` to allow access from other machines. http: [ip: {127, 0, 0, 1}, port: 4000], check_origin: false, code_reloader: true, debug_errors: true, secret_key_base: "Fz0euVWpdDS/zrk3PvimvGTL49BtC/ghOyoRxGt8Uge7+EkHj8xuvzw21IJ6Cc2a", watchers: [ esbuild: {Esbuild, :install_and_run, [:myapp, ~w(--sourcemap=inline --watch)]}, tailwind: {Tailwind, :install_and_run, [:myapp, ~w(--watch)]} ] # ## SSL Support # # In order to use HTTPS in development, a self-signed # certificate can be generated by running the following # Mix task: # # mix phx.gen.cert # # Run `mix help phx.gen.cert` for more information. # # The `http:` config above can be replaced with: # # https: [ # port: 4001, # cipher_suite: :strong, # keyfile: "priv/cert/selfsigned_key.pem", # certfile: "priv/cert/selfsigned.pem" # ], # # If desired, both `http:` and `https:` keys can be # configured to run both http and https servers on # different ports. # Watch static and templates for browser reloading. config :myapp, MyappWeb.Endpoint, live_reload: [ patterns: [ ~r"priv/static/(?!uploads/).*(js|css|png|jpeg|jpg|gif|svg)$", ~r"priv/gettext/.*(po)$", ~r"lib/myapp_web/(controllers|live|components)/.*(ex|heex)$" ] ] # Enable dev routes for dashboard and mailbox config :myapp, dev_routes: true # Do not include metadata nor timestamps in development logs config :logger, :console, format: "[$level] $message\n" # Set a higher stacktrace during development. Avoid configuring such # in production as building large stacktraces may be expensive. config :phoenix, :stacktrace_depth, 20 # Initialize plugs at runtime for faster development compilation config :phoenix, :plug_init_mode, :runtime config :phoenix_live_view, # Include HEEx debug annotations as HTML comments in rendered markup debug_heex_annotations: true, # Enable helpful, but potentially expensive runtime checks enable_expensive_runtime_checks: true # Disable swoosh api client as it is only required for production adapters. config :swoosh, :api_client, false
```

# config/prod.exs

```exs
import Config # Note we also include the path to a cache manifest # containing the digested version of static files. This # manifest is generated by the `mix assets.deploy` task, # which you should run after static files are built and # before starting your production server. config :myapp, MyappWeb.Endpoint, cache_static_manifest: "priv/static/cache_manifest.json" # Configures Swoosh API Client config :swoosh, api_client: Swoosh.ApiClient.Finch, finch_name: Myapp.Finch # Disable Swoosh Local Memory Storage config :swoosh, local: false # Do not print debug messages in production config :logger, level: :info # Runtime production configuration, including reading # of environment variables, is done on config/runtime.exs.
```

# config/runtime.exs

```exs
import Config # config/runtime.exs is executed for all environments, including # during releases. It is executed after compilation and before the # system starts, so it is typically used to load production configuration # and secrets from environment variables or elsewhere. Do not define # any compile-time configuration in here, as it won't be applied. # The block below contains prod specific runtime configuration. # ## Using releases # # If you use `mix release`, you need to explicitly enable the server # by passing the PHX_SERVER=true when you start it: # # PHX_SERVER=true bin/myapp start # # Alternatively, you can use `mix phx.gen.release` to generate a `bin/server` # script that automatically sets the env var above. if System.get_env("PHX_SERVER") do config :myapp, MyappWeb.Endpoint, server: true end if config_env() == :prod do database_url = System.get_env("DATABASE_URL") || raise """ environment variable DATABASE_URL is missing. For example: ecto://USER:PASS@HOST/DATABASE """ maybe_ipv6 = if System.get_env("ECTO_IPV6") in ~w(true 1), do: [:inet6], else: [] config :myapp, Myapp.Repo, # ssl: true, url: database_url, pool_size: String.to_integer(System.get_env("POOL_SIZE") || "10"), socket_options: maybe_ipv6 # The secret key base is used to sign/encrypt cookies and other secrets. # A default value is used in config/dev.exs and config/test.exs but you # want to use a different value for prod and you most likely don't want # to check this value into version control, so we use an environment # variable instead. secret_key_base = System.get_env("SECRET_KEY_BASE") || raise """ environment variable SECRET_KEY_BASE is missing. You can generate one by calling: mix phx.gen.secret """ host = System.get_env("PHX_HOST") || "example.com" port = String.to_integer(System.get_env("PORT") || "4000") config :myapp, :dns_cluster_query, System.get_env("DNS_CLUSTER_QUERY") config :myapp, MyappWeb.Endpoint, url: [host: host, port: 443, scheme: "https"], http: [ # Enable IPv6 and bind on all interfaces. # Set it to {0, 0, 0, 0, 0, 0, 0, 1} for local network only access. # See the documentation on https://hexdocs.pm/bandit/Bandit.html#t:options/0 # for details about using IPv6 vs IPv4 and loopback vs public addresses. ip: {0, 0, 0, 0, 0, 0, 0, 0}, port: port ], secret_key_base: secret_key_base # ## SSL Support # # To get SSL working, you will need to add the `https` key # to your endpoint configuration: # # config :myapp, MyappWeb.Endpoint, # https: [ # ..., # port: 443, # cipher_suite: :strong, # keyfile: System.get_env("SOME_APP_SSL_KEY_PATH"), # certfile: System.get_env("SOME_APP_SSL_CERT_PATH") # ] # # The `cipher_suite` is set to `:strong` to support only the # latest and more secure SSL ciphers. This means old browsers # and clients may not be supported. You can set it to # `:compatible` for wider support. # # `:keyfile` and `:certfile` expect an absolute path to the key # and cert in disk or a relative path inside priv, for example # "priv/ssl/server.key". For all supported SSL configuration # options, see https://hexdocs.pm/plug/Plug.SSL.html#configure/1 # # We also recommend setting `force_ssl` in your config/prod.exs, # ensuring no data is ever sent via http, always redirecting to https: # # config :myapp, MyappWeb.Endpoint, # force_ssl: [hsts: true] # # Check `Plug.SSL` for all available options in `force_ssl`. # ## Configuring the mailer # # In production you need to configure the mailer to use a different adapter. # Also, you may need to configure the Swoosh API client of your choice if you # are not using SMTP. Here is an example of the configuration: # # config :myapp, Myapp.Mailer, # adapter: Swoosh.Adapters.Mailgun, # api_key: System.get_env("MAILGUN_API_KEY"), # domain: System.get_env("MAILGUN_DOMAIN") # # For this example you need include a HTTP client required by Swoosh API client. # Swoosh supports Hackney and Finch out of the box: # # config :swoosh, :api_client, Swoosh.ApiClient.Hackney # # See https://hexdocs.pm/swoosh/Swoosh.html#module-installation for details. end
```

# config/test.exs

```exs
import Config # Only in tests, remove the complexity from the password hashing algorithm config :argon2_elixir, t_cost: 1, m_cost: 8 # Configure your database # # The MIX_TEST_PARTITION environment variable can be used # to provide built-in test partitioning in CI environment. # Run `mix help test` for more information. config :myapp, Myapp.Repo, username: "postgres", password: "postgres", hostname: "localhost", database: "myapp_test#{System.get_env("MIX_TEST_PARTITION")}", pool: Ecto.Adapters.SQL.Sandbox, pool_size: System.schedulers_online() * 2 # We don't run a server during test. If one is required, # you can enable the server option below. config :myapp, MyappWeb.Endpoint, http: [ip: {127, 0, 0, 1}, port: 4002], secret_key_base: "K+awbqozDBs3r81RnZ5zs7DdvzTbXCfbuK4oKHUqDj3zWXGAdxy0ydBVVF2B8UT3", server: false # In test we don't send emails config :myapp, Myapp.Mailer, adapter: Swoosh.Adapters.Test # Disable swoosh api client as it is only required for production adapters config :swoosh, :api_client, false # Print only warnings and errors during test config :logger, level: :warning # Initialize plugs at runtime for faster test compilation config :phoenix, :plug_init_mode, :runtime # Enable helpful, but potentially expensive runtime checks config :phoenix_live_view, enable_expensive_runtime_checks: true
```

# docs/Claude-Code.md

```md
### Key Points - It seems likely that Claude Code is an AI-powered coding assistant from Anthropic, designed to work in your terminal and help with coding tasks through natural language commands. - Research suggests you need to join a waitlist at [console.anthropic.com/code/welcome](https://console.anthropic.com/code/welcome) for access, then install it using `npm install -g @anthropic-ai/claude-code`, and authenticate with an active billing account. - The evidence leans toward interacting with it by running commands like `summarize this project` or using slash commands like `/bug` for reporting issues, with some actions requiring approval. --- ### What is Claude Code? Claude Code appears to be a specialized tool from Anthropic, aimed at assisting developers directly in their terminal. It understands your codebase and can perform tasks like explaining code, fixing errors, and managing git workflows using simple language commands. ### How to Install and Set Up To get started, you'll need to: - Check your system meets requirements: macOS 10.15+, Ubuntu 20.04+/Debian 10+, or Windows via WSL, with at least 4GB RAM and Node.js 18+. - Join the waitlist for access at [console.anthropic.com/code/welcome](https://console.anthropic.com/code/welcome). - Install it by running `npm install -g @anthropic-ai/claude-code` in your terminal. - Navigate to your project directory and start it with `claude`, then authenticate via Anthropic's console with an active billing account. ### How to Use It Once set up, you can interact with Claude Code by: - Asking questions like `how does our authentication system work?` or giving commands like `fix the type errors in the auth module`. - Using slash commands for tasks, such as `/init` to generate a CLAUDE.md file or `/cost` to check token usage. - Note that some actions, like modifying files, require your approval, and costs can accrue based on usage, so manage with commands like `/compact`. For more details, check the official documentation at [docs.anthropic.com/en/docs/agents/claude-code/introduction](https://docs.anthropic.com/en/docs/agents/claude-code/introduction). --- ### Comprehensive Guide on Using Claude Code This section provides an in-depth exploration of Claude Code, an AI-powered coding assistant developed by Anthropic, designed to enhance developer productivity directly within the terminal. Given the current date, February 25, 2025, and based on available information, this guide covers installation, setup, usage, and additional considerations, ensuring a thorough understanding for users at all levels. #### Introduction to Claude Code Claude Code is described as an agentic coding tool that integrates seamlessly into your terminal, understanding your codebase and assisting with various coding tasks through natural language commands. It is particularly noted for executing routine tasks, explaining complex code, and handling git workflows, making it a valuable asset for developers. As of recent updates, it is in beta as a research preview, with plans to enhance features based on user feedback, indicating an evolving toolset. #### System Requirements and Access Before proceeding, ensure your system meets the following requirements: - **Operating System**: macOS 10.15+, Ubuntu 20.04+/Debian 10+, or Windows via WSL. - **Hardware**: Minimum 4GB RAM. - **Software**: Node.js 18+ is required, with optional tools like git 2.23+, GitHub/GitLab CLI, and ripgrep (rg) for enhanced search capabilities. - **Network**: An internet connection is necessary for authentication and AI processing. Access to Claude Code is currently limited, and users must join a waitlist at [console.anthropic.com/code/welcome](https://console.anthropic.com/code/welcome) to gain access, reflecting its early-stage availability as of February 2025. #### Installation and Authentication Process The installation process is straightforward: 1. Once access is granted, install Claude Code by running the command: \`\`\`bash npm install -g @anthropic-ai/claude-code \`\`\` 2. Navigate to your project directory using: \`\`\`bash cd your-project-directory \`\`\` 3. Start the tool by typing: \`\`\`bash claude \`\`\` 4. Complete a one-time OAuth authentication with your Anthropic Console account, ensuring you have an active billing account, as this is required for usage. This process ensures Claude Code is ready to interact with your development environment, leveraging direct API connections without intermediate servers for enhanced security. #### Interacting with Claude Code: Core Features and Commands Claude Code operates by understanding your project context automatically, exploring the codebase as needed. Here are key ways to interact with it: - **Natural Language Commands**: You can ask questions or give instructions, such as: - `how does our authentication system work?` to understand code. - `commit my changes` for git operations. - `fix the type errors in the auth module` to edit code. - `run tests for the auth module and fix failures` for testing and debugging. - `think about how we should architect the new payment service` for deep thinking tasks. - **Slash Commands**: These provide additional functionality, including: - `/bug`: Report bugs directly to Anthropic. - `/clear`: Clear conversation history. - `/compact`: Save context space to reduce token usage. - `/config`: View or modify configuration settings. - `/cost`: Show current token usage for cost management. - `/doctor`: Check installation health. - `/help`: Get usage help. - `/init`: Initialize with a CLAUDE.md file for project summary. - `/login`: Switch accounts. - `/logout`: Sign out. - `/pr_comments`: View pull request comments. - `/review`: Request a code review. - `/terminal-setup`: Configure Shift+Enter for newlines, especially useful in iTerm2 or VSCode. A table summarizing key CLI and slash commands is provided below for quick reference: | **Command Type** | **Example Command** | **Purpose** | |-------------------|---------------------------|--------------------------------------------------| | CLI | `claude` | Start interactive REPL | | CLI | `claude "query"` | Start with a specific prompt | | CLI | `claude -p "query"` | One-off query, then exit | | Slash | `/bug` | Report bugs to Anthropic | | Slash | `/cost` | Show token usage for cost management | | Slash | `/init` | Generate CLAUDE.md for project initialization | #### Permissions and Security Claude Code prioritizes security with a direct API connection, ensuring no intermediate servers handle your queries. However, certain actions require user approval: - Read-only actions (e.g., file reads) do not require approval. - Actions like running bash commands or modifying files (e.g., FileEditTool, FileWriteTool) need explicit approval, with options to "Yes, don’t ask again" per project and command, or until the session ends. This human-in-the-loop approach ensures safety, especially for actions that could alter your codebase. #### Cost Management and Usage Tips Usage of Claude Code can incur costs, typically estimated at $5-10 per day per developer, with potential spikes to over $100/hour during intensive use. To manage costs: - Use `/compact` to save context space. - Make specific, focused queries rather than broad ones. - Break tasks into smaller commands. - Use `/clear` to reset and reduce unnecessary token usage. Additionally, for third-party API integration, such as Amazon Bedrock or Google Vertex AI, specific environment variables must be set, requiring respective AWS or GCP credentials, which can affect costs further. #### Development Container Setup For developers interested in contributing to or testing Claude Code, a development container is available: - Reference at [github.com/anthropics/claude-code/tree/main/.devcontainer](https://github.com/anthropics/claude-code/tree/main/.devcontainer). - Features include Node.js 20, security measures like firewall and isolation, VS Code integration, and session persistence. - Steps: Install VS Code and the Remote - Containers extension, clone the repository, and reopen in a container using Cmd+Shift+P → “Remote-Containers: Reopen in Container”. #### Unexpected Detail: Evolving Features An interesting aspect is that Claude Code is in beta, with Anthropic actively gathering feedback to improve tool execution reliability, support for long-running commands, terminal rendering, and self-knowledge of capabilities. This evolution suggests users can expect enhancements in the coming weeks, potentially affecting how they interact with the tool. #### Limitations and Considerations - As of February 2025, Claude Code is in research preview, meaning features may change, and access is capacity-limited. - Ensure you review privacy policies at [anthropic.com/legal/commercial-terms](https://www.anthropic.com/legal/commercial-terms) and [anthropic.com/legal/privacy](https://www.anthropic.com/legal/privacy), as user feedback transcripts are stored for 30 days. - Bugs can be reported using the `/bug` command or via the GitHub repository at [github.com/anthropics/claude-code](https://github.com/anthropics/claude-code), ensuring community-driven improvements. #### Conclusion Claude Code offers a robust, terminal-based AI assistant for coding, with clear installation and usage steps, but requires careful management of costs and permissions. For further details, refer to the official documentation at [docs.anthropic.com/en/docs/agents/claude-code/introduction](https://docs.anthropic.com/en/docs/agents/claude-code/introduction) and the GitHub page at [github.com/anthropics/claude-code](https://github.com/anthropics/claude-code). --- ### Key Citations - [Anthropic's Claude Code GitHub Page long title](https://github.com/anthropics/claude-code) - [Anthropic's Claude Code Documentation long title](https://docs.anthropic.com/en/docs/agents/claude-code/introduction) - [Anthropic Console waitlist page long title](https://console.anthropic.com/code/welcome)
```

# docs/Cloudflare.md

```md
### Key Points - The Cloudflare API is used to manage services like DNS, CDN, and security programmatically. - A common usage is managing DNS records, such as creating, updating, or deleting them. - It requires an API token for authentication, created via the Cloudflare dashboard. ### Getting Started with Cloudflare API The Cloudflare API allows you to interact with services like DNS management, cache purging, and more without using the dashboard. To use it, first create an API token with the necessary permissions, such as "Edit zone DNS" for DNS management. This token is used in API requests to authenticate your actions. ### Example: Managing DNS Records A typical usage is creating a DNS record, like an A record for a subdomain. You'll need to: 1. Find your domain's zone ID using a GET request to `/zones`. 2. Make a POST request to `/zones/{zone_id}/dns_records` with details like record type, name, and IP address. For instance, to create an A record for "www" pointing to "192.0.2.1", use: \`\`\` curl -X POST "https://api.cloudflare.com/client/v4/zones/YOUR_ZONE_ID/dns_records" \ -H "Authorization: Bearer YOUR_API_TOKEN" \ -d '{ "type": "A", "name": "www", "content": "192.0.2.1", "proxied": true, "ttl": 3600 }' \`\`\` ### Surprising Detail: Security Focus It's surprising how much emphasis Cloudflare places on security, advising never to store API tokens in plaintext and avoiding public repositories, which is crucial for protecting your account. --- ### Comprehensive Usage Survey of Cloudflare API This survey note provides an in-depth exploration of using the Cloudflare API, focusing on its application for managing DNS records, a frequent and practical use case. It includes all steps, considerations, and additional details to ensure a thorough understanding for both beginners and advanced users. #### Introduction to Cloudflare API Cloudflare offers a robust API to programmatically interact with its suite of services, including content delivery network (CDN), DNS management, security, and more. The API is RESTful, based on HTTPS requests with JSON responses, and is designed to mirror almost all functionalities available through the Cloudflare dashboard. This allows developers to automate tasks, integrate with other systems, and manage resources efficiently. The API operates under Version 4, with a stable base URL of [https://api.cloudflare.com/client/v4/](https://api.cloudflare.com/client/v4/). Authentication is mandatory, and Cloudflare recommends using API tokens over API keys due to security limitations of the latter, such as potential exposure risks. #### Authentication and Security Measures To begin, users must authenticate their API requests. This is done by creating an API token, which can be generated from the Cloudflare dashboard: - Navigate to **My Profile** > **API Tokens** or **Manage Account** > **API Tokens** for account-owned tokens. - Select **Create Token**, choosing a template like "Edit zone DNS" for DNS management or creating a custom token with specific permissions. - Permissions are categorized into Account, User, or Zone, with options like Read or Edit (full CRUDL access: create, read, update, delete, list). Security is paramount, and Cloudflare advises: - Never send or store API tokens in plaintext. - Avoid checking tokens into code repositories, especially public ones, to prevent unauthorized access. - Use environment variables to store sensitive information like API tokens and zone IDs, enhancing security and ease of use. For example, set with `export ZONE_ID='f2ea6707005a4da1af1b431202e96ac5'` and reference with `$VAR` in scripts. #### Managing DNS Records: A Detailed Example Managing DNS records is a common use case, enabling automation of domain configurations. The process involves several steps, each requiring specific API endpoints and considerations. ##### Step 1: Retrieve Zone ID Each domain in Cloudflare is associated with a zone ID, necessary for targeting API requests. To find it: - Make a GET request to `/zones`, filtering by account if needed: \`\`\` curl -X GET "https://api.cloudflare.com/client/v4/zones?account.id=$ACCOUNT_ID" \ -H "Authorization: Bearer $CLOUDFLARE_API_TOKEN" \`\`\` - The response will list zones, from which you extract the zone ID for your domain, e.g., "f2ea6707005a4da1af1b431202e96ac5". Query parameters like `page=x`, `per_page=xx` (default 20, max may cause timeout), `order`, and `direction` (ASC/DESC) can be used for pagination and sorting, detailed in the API documentation at [Cloudflare API Overview](https://developers.cloudflare.com/api/). ##### Step 2: Create a DNS Record To create a new DNS record, use a POST request to `/zones/{zone_id}/dns_records`. For example, creating an A record for "www.example.com" pointing to "192.0.2.1", proxied through Cloudflare: \`\`\` curl -X POST "https://api.cloudflare.com/client/v4/zones/YOUR_ZONE_ID/dns_records" \ -H "Authorization: Bearer YOUR_API_TOKEN" \ -d '{ "type": "A", "name": "www", "content": "192.0.2.1", "proxied": true, "ttl": 3600 }' \`\`\` - **Fields Explained**: - `type`: Record type, e.g., A, AAAA, CNAME, etc. - `name`: The hostname, e.g., "www" for www.example.com. - `content`: The value, e.g., IP address for A records. - `proxied`: Boolean, whether to proxy through Cloudflare (affects performance and security). - `ttl`: Time to Live in seconds, controlling cache duration (default 3600 if not specified). Note that A/AAAA records cannot coexist with CNAME records on the same name, and NS records have similar restrictions, as per API documentation at [Cloudflare DNS API](https://developers.cloudflare.com/dns/reference/rest-apis/). ##### Step 3: Additional Operations Beyond creation, the API supports: - **Update**: Use PATCH or PUT to `/zones/{zone_id}/dns_records/{record_id}` for partial or full updates. - **Delete**: Use DELETE to `/zones/{zone_id}/dns_records/{record_id}` to remove records. - **List**: GET `/zones/{zone_id}/dns_records` to list all records, with optional filtering. Batch operations are also supported via `/batch`, executing multiple DNS record changes in a single transaction, though propagation is not atomic due to distributed KV store limitations. #### Tools and Best Practices For making API calls, Cloudflare supports tools like `curl`, included in recent Windows versions (10/11). On Windows, use double quotes (`"`) in Command Prompt, or `Invoke-RestMethod` in PowerShell for REST calls. For example: \`\`\` Invoke-RestMethod -URI "https://api.cloudflare.com/client/v4/zones/$Env:ZONE_ID/ssl/certificate_packs?ssl_status=all" -Method 'GET' -Headers @{'X-Auth-Email'=$Env:CLOUDFLARE_EMAIL;'X-Auth-Key'=$Env:CLOUDFLARE_API_KEY} \`\`\` For JSON response formatting, use `jq`, a command-line JSON processor, installed from [Download jq](https://stedolan.github.io/jq/download/). Example: \`\`\` curl "https://api.cloudflare.com/client/v4/zones/$ZONE_ID" --header "Authorization: Bearer $CLOUDFLARE_API_TOKEN" | jq . \`\`\` #### Rate Limits and Considerations Cloudflare imposes a global rate limit of 1,200 requests per five minutes, which can be hit with frequent polling. For DNS management, consider high values for `--cloudflare-dns-records-per-page` (up to 5,000) to reduce requests, as seen in integrations like Kubernetes' ExternalDNS. #### Comparative Analysis with Dashboard While the dashboard offers a user-friendly interface, the API provides automation and scalability. For instance, dynamically updating DNS for dynamic IP addresses (common with ISPs) can be scripted to monitor changes and push updates via the API, using tools like `ddclient` or `DNS-O-Matic`, as noted in [Dynamic DNS Updates](https://developers.cloudflare.com/dns/manage-dns-records/how-to/managing-dynamic-ip-addresses/). #### Conclusion This survey highlights the Cloudflare API's versatility, particularly for DNS management, with detailed steps for authentication, zone ID retrieval, and record creation. It underscores security practices, tool usage, and rate limit considerations, ensuring users can leverage the API effectively for automation and integration. | **Step** | **Action** | **Example Command** | |------------------------|---------------------------------------------------------------------------|------------------------------------------------------------------------------------| | Authentication | Create API token with "Edit zone DNS" permissions | Dashboard: My Profile > API Tokens > Create Token | | Retrieve Zone ID | GET request to /zones, filter by account if needed | `curl -X GET "https://api.cloudflare.com/client/v4/zones" -H "Authorization: Bearer $TOKEN"` | | Create DNS Record | POST to /zones/{zone_id}/dns_records with record details | See above curl example for A record creation | | Update/Delete/List | Use PATCH/PUT/DELETE for updates, DELETE for removal, GET for listing | Adjust endpoint with record ID for updates/deletes | This table summarizes key actions, providing a quick reference for implementation. #### Key Citations - [Cloudflare API Overview Interact with Cloudflare's products and services via the API](https://developers.cloudflare.com/api/) - [Manage DNS Records Step-by-step instructions on managing DNS records at Cloudflare](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/) - [Make API Calls Guidance on making API calls with Cloudflare, including authentication](https://developers.cloudflare.com/fundamentals/api/how-to/make-api-calls/)
```

# docs/Instagram.md

```md
### Key Points - It seems likely that using the Instagram API involves setting up a Business or Creator account and linking it to a Facebook page. - Research suggests you’ll need a Facebook Developer account to create an app and obtain an access token for API calls. - The evidence leans toward the Instagram Basic Display API being deprecated, so focus on the Instagram Graph API for new projects. ### Overview Using the Instagram API allows developers to interact with Instagram for tasks like managing content, analyzing insights, and integrating features into apps. The process can be complex, especially with recent changes, so here’s a simplified guide to get started. ### Steps to Use the Instagram API 1. **Account Setup:** - Convert your Instagram account to a Business or Creator account via account settings. This is essential as the API is only for professional accounts. - Create a Facebook page if you don’t have one, then link your Instagram Business account to it through the Facebook page’s settings under “Professional dashboard” and “Linked Accounts.” 2. **Developer Setup:** - Sign up for a Facebook Developer account at [developers.facebook.com](https://developers.facebook.com/). - Create a new app in the developer portal, selecting “Business” as the category and choosing your platform (e.g., Web, Mobile). - Add the Instagram API product to your app by going to “Products” and selecting “Facebook Login” and “Instagram API,” then configure the settings. 3. **Authentication and Access:** - Set up Facebook Login for your app to authenticate users and request permissions like `pages_show_list` and `instagram_basic`. - Use the login flow to get an access token, which you’ll need to make API calls. 4. **Making API Calls:** - With the access token, you can interact with the Instagram Graph API. Check the official documentation for specific endpoints and parameters at [Instagram Platform](https://developers.facebook.com/products/instagram). ### Unexpected Detail An unexpected aspect is that your app might need to go through a review process for approval, especially for certain permissions, which can add time and complexity to the setup. --- ### Survey Note: Detailed Guide on Using the Instagram API This comprehensive guide expands on the steps and considerations for using the Instagram API, drawing from recent insights and official resources. Given the platform’s evolution, particularly with the deprecation of the Instagram Basic Display API, this note aims to provide a thorough understanding for developers and businesses looking to integrate Instagram functionalities. #### Background and Context Instagram, owned by Meta, offers APIs to enable developers to build applications that interact with the platform, such as managing media, analyzing insights, and handling customer messages. The API landscape has shifted significantly, especially after the Cambridge Analytica scandal, leading to the replacement of the original Instagram API with the more restricted Instagram Graph API. This change, effective by 2020, reflects a focus on privacy and limits access to professional accounts only. The Instagram Basic Display API, previously used for read-only access to user data, is being deprecated as of September 4, 2024, with all requests returning errors starting December 4, 2024. This necessitates a migration to the Instagram Graph API for new projects, which is designed for Instagram Business and Creator accounts linked to Facebook pages. #### Step-by-Step Process for Using the Instagram API To use the Instagram API effectively, follow these detailed steps, which align with current practices as of February 26, 2025: 1. **Convert Your Instagram Account to a Professional Account:** - Access your Instagram account settings and select “Switch to professional account.” - Choose between Business (for companies) or Creator (for individuals like influencers). This step is crucial as the API is restricted to these account types. - Select a category for your account and skip adding contact information if not required. This process is free and can be done via the Instagram web interface. 2. **Link Your Instagram Account to a Facebook Page:** - If you lack a Facebook page, create one through [Facebook](https://www.facebook.com/). - Navigate to your Facebook page’s settings, go to “Professional dashboard,” then “Linked Accounts,” and connect your Instagram Business account. This linkage is necessary for API access, as outlined in guides like [Superface.ai: Get started with Instagram API: The Setup](https://superface.ai/blog/instagram-setup). 3. **Set Up a Facebook Developer Account:** - Register or log in at the [Facebook Developers](https://developers.facebook.com/) portal. This account is essential for creating and managing apps that interact with Instagram. - Note that changes to the developer portal may occur, so ensure you follow the latest interface, which might include options like “Usecases” for new app setups. 4. **Create and Configure a Facebook App:** - In the developer portal, create a new app and select “Business” as the category. Choose your platform (e.g., Web for websites, Mobile for apps). - Add the Instagram API product by navigating to “Products” in your app settings, selecting “Facebook Login,” and then “Instagram API.” Configure these products according to your needs, such as setting up redirect URIs for login. 5. **Implement Facebook Login and Request Permissions:** - Configure your app to use Facebook Login, which authenticates users and grants access to Instagram data. This involves setting up the login flow for your chosen platform (iOS, Web, Android). - Request necessary permissions, such as `pages_show_list` (to access Facebook pages) and `instagram_basic` (for basic Instagram data). These permissions may require app review for approval, especially for production use. 6. **Obtain an Access Token:** - Use the Facebook Login flow to log into your app with your Facebook account, ensuring you’re also logged into your Developer account. - Grant the requested permissions (e.g., `instagram_basic`, `pages_show_list`), and you’ll receive a User access token. This token is crucial for making API calls and is detailed in resources like [Phyllo: Instagram Graph APIs](https://www.getphyllo.com/post/instagram-graph-apis-what-are-they-and-how-do-developers-access-them). 7. **Make API Calls Using the Instagram Graph API:** - With the access token, you can now interact with the Instagram Graph API. This API allows you to manage media, reply to comments, analyze insights, conduct hashtag searches, and more, as described in the [Instagram Platform](https://developers.facebook.com/products/instagram) documentation. - For example, you can fetch media, manage comments, or get metadata about other Instagram Businesses and Creators. Refer to the documentation for specific endpoints and parameters, as the API uses RESTful calls and requires proper authentication headers. #### Key Considerations and Challenges - **Deprecation of Instagram Basic Display API:** As mentioned, this API is deprecated, affecting all requests after December 4, 2024. Migration to the Graph API is recommended, and developers should update their applications accordingly. This change, announced in a [blog post](https://developers.facebook.com/blog/post/2024/09/04/update-on-instagram-basic-display-api/), ensures compliance with current privacy standards. - **App Review Process:** Your app may need to undergo a review process for certain permissions, especially if you’re building for public use. This involves submitting a screencast showing how a business will log in and use the feature, which can be time-consuming. For personal or development use, you can test in development mode, but production requires approval. - **Account Requirements:** The Instagram Graph API is limited to Business and Creator accounts linked to Facebook pages, which may exclude personal accounts. This restriction, noted in articles like [Codementor: Connect & Manage Instagram Accounts](https://www.codementor.io/@abhij89/integration-connect-manage-instagram-accounts-via-facebook-graph-api-weu5tojoo), ensures professional use but can be a barrier for individual developers. - **Integration Complexity:** Integrating the API can be challenging due to documentation updates and platform changes. For instance, some guides, like those from September 2022, may be outdated, as noted in [Superface.ai](https://superface.ai/blog/instagram-setup), requiring developers to cross-reference multiple sources. #### Table: Overview of Instagram APIs Below is a table summarizing the main Instagram APIs, their descriptions, and target audiences, based on available documentation: | **API Name** | **Description** | **Target Audience** | |-----------------------------------|---------------------------------------------------------------------------------|--------------------------------------------------| | Instagram Graph API | Manage presence, reply to comments, analyze insights, conduct hashtag searches | Instagram Business and Creator accounts | | Instagram Basic Display API | Import media, connect profiles (deprecated as of Dec 4, 2024) | Instagram Personal, Business, and Creator accounts | | Instagram Content Publishing API | Schedule and publish posts to Instagram Feeds from developer apps | Businesses on Instagram | | Instagram Messaging API | Manage high volumes of customer messages, turn conversations into outcomes | Instagram businesses | This table, derived from [Facebook Developers: Instagram Platform](https://developers.facebook.com/products/instagram/apis/), highlights the diversity of API options and their specific use cases. #### Additional Resources and Examples For further reading, consider the following: - The [RapidAPI tutorial](https://rapidapi.com/blog/how-to-navigate-and-connect-to-instagrams-api/) offers a three-step guide for connecting to the API, though it’s a third-party resource. - Medium articles, such as [Fetching Account Media Using Instagram API](https://muhammadkasim.medium.com/fetch-account-media-using-instagram-api-5ab29c219ab3), provide practical examples, like retrieving media, which can be useful for implementation. - Stack Overflow discussions, like [Getting Instagram Feed with Graph API](https://stackoverflow.com/questions/50365510/get-instagram-own-self-feed-with-facebook-graph-api), offer community insights into common challenges, such as permission issues. #### Conclusion Using the Instagram API, particularly the Graph API, requires careful setup of professional accounts, Facebook integration, and developer tools. While the process can be complex, following these steps ensures compliance with current standards and access to powerful features for businesses and creators. Always refer to the latest official documentation for updates, as platform policies may evolve. #### Key Citations - [Superface.ai Get started with Instagram API: The Setup](https://superface.ai/blog/instagram-setup) - [Phyllo Instagram Graph APIs: What are they? And how do developers access them?](https://www.getphyllo.com/post/instagram-graph-apis-what-are-they-and-how-do-developers-access-them) - [Facebook Developers Instagram Platform](https://developers.facebook.com/products/instagram)
```

# docs/LLC.md

```md
### Key Points - An LLC (Limited Liability Company) combines the liability protection of a corporation with the tax benefits and flexibility of a partnership. - Setting up an LLC involves choosing a name, filing formation documents, creating an operating agreement, and obtaining necessary licenses. - Research suggests Delaware is often considered the best state to open an LLC due to its business-friendly laws and established legal system. - For many small businesses, forming an LLC in their home state is more practical and cost-effective, avoiding additional fees and complexity. ### What is an LLC? An LLC, or Limited Liability Company, is a business structure that combines the liability protection of a corporation with the tax advantages and operational flexibility of a partnership. It's a popular choice for small to medium-sized businesses looking for legal protection without complex corporate requirements. ### How to Form an LLC Getting started with an LLC is straightforward: - Choose a unique business name that complies with your state's LLC requirements. - File Articles of Organization (or Certificate of Formation) with your state's business filing office. - Create an Operating Agreement that outlines ownership and operating procedures. - Obtain an EIN (Employer Identification Number) from the IRS for tax purposes. - Apply for any necessary business licenses and permits specific to your industry and location. ### Why Delaware Stands Out Delaware is frequently cited as the top choice for forming an LLC, thanks to its well-established legal framework, including the Court of Chancery, which specializes in business disputes and offers quick resolutions. It also provides privacy protections by not requiring LLC members' names to be publicly disclosed, which can be appealing for owners. Additionally, Delaware does not levy state income tax on income generated outside its borders, making it attractive for online businesses or those operating across multiple states. However, this comes with higher costs, such as a $140 filing fee and a $300 annual report fee, which may not suit all budgets. ### Practical Considerations for Home State For most small businesses, especially those operating locally, forming an LLC in your home state is simpler and avoids the need to register as a foreign LLC elsewhere, which can add costs and administrative burden. For example, if you live in California and run a local business, forming there avoids double filing fees and potential fines for non-compliance in your home state. ### Example: Single-Member LLC Tax Filing A common scenario is a single-member LLC tax filing. For example: - The IRS treats single-member LLCs as "disregarded entities" for tax purposes. - Business income and expenses are reported on Schedule C of the owner's personal tax return (Form 1040). - The owner pays self-employment taxes on business profits. - While enjoying liability protection, the taxation process is as simple as sole proprietorship. Here's an important detail: Even though single-member LLCs file taxes like sole proprietorships, they maintain the crucial legal separation between personal and business assets that sole proprietorships don't have. --- ### Comprehensive Analysis of LLC Formation and Management This section provides a detailed exploration of Limited Liability Companies (LLCs), covering their structure, formation process, and operational considerations, ensuring a thorough understanding for entrepreneurs and business owners. The analysis is grounded in legal frameworks and practical examples, offering insights into both general concepts and specific implementations. #### Introduction to Limited Liability Companies A Limited Liability Company (LLC) is a hybrid business structure that combines attributes of corporations, partnerships, and sole proprietorships. Established in Wyoming in 1977 and now available in all U.S. states, LLCs have become increasingly popular due to their flexibility and protective benefits. They provide limited liability protection to owners (called members), shielding personal assets from business debts and legal claims, while offering pass-through taxation that avoids the double taxation issue faced by C-corporations. LLCs operate under state-specific statutes, with each state having slightly different requirements and regulations. Despite these variations, the fundamental principles remain consistent: separation of personal and business liabilities, management flexibility, and favorable tax treatment. This makes LLCs particularly attractive for small businesses, real estate investments, and professional services. #### Formation Process and Requirements To establish an LLC, founders must complete a structured formation process, ensuring compliance with state requirements. The steps are as follows: | Step | Description | Details | |------|-------------|---------| | 1 | Select a Business Name | Must be unique within the state and typically must include "LLC," "L.L.C.," or "Limited Liability Company." | | 2 | Choose a Registered Agent | A person or entity authorized to receive legal documents on behalf of the LLC, with a physical address in the formation state. | | 3 | File Formation Documents | Submit Articles of Organization/Certificate of Formation to the state's business filing office, paying the required fee (typically $50-$300). | | 4 | Create an Operating Agreement | Though not always legally required, this document outlines ownership percentages, voting rights, profit distribution, and management structure. | | 5 | Obtain an EIN | Apply for an Employer Identification Number from the IRS, required for hiring employees and often for opening business bank accounts. | | 6 | Apply for Licenses and Permits | Secure any industry-specific or location-based licenses required to operate legally. | The filing fees and processing times vary by state, with some states offering expedited processing for additional fees. For example, Delaware is known for its business-friendly laws and efficient processing, making it a popular choice for LLC formation even for businesses operating primarily in other states. #### State-Specific Considerations Based on research, the following states are frequently recommended for LLC formation, each with distinct advantages: - **Delaware**: Often considered the gold standard for LLC formation, with a well-established legal framework, no state income tax on out-of-state income, and strong privacy protections. Ideal for fast-growing businesses or those seeking legal predictability, despite higher costs ($140 filing fee, $300 annual report). - **Nevada**: No state income tax, low filing fee ($75), and privacy protections make it attractive, especially for owners living in Nevada. However, the $325 annual report fee and potential foreign LLC registration costs in other states can offset benefits. - **Wyoming**: Low costs ($103 filing fee, $52 annual report), no state income tax, and privacy protections suit cost-conscious owners, particularly non-US residents with no US physical presence. - **Arizona**: Lowest filing fee ($50), but additional publication fees ($299) increase total cost, making it best for budget-conscious businesses without complex needs. - **Ohio**: No annual report, $125 filing fee, and affordability make it a practical choice, though state income tax applies, limiting tax benefits. #### LLC Taxation Options One of the most significant advantages of an LLC is its tax flexibility. By default, LLCs are taxed as pass-through entities, but they can elect different tax treatments based on their specific circumstances: | Tax Classification | Description | Best For | |-------------------|-------------|----------| | Sole Proprietorship | For single-member LLCs, business income passes through to the owner's personal tax return. | Individual entrepreneurs seeking simplicity. | | Partnership | For multi-member LLCs, each member reports their share of profits/losses on personal tax returns. | Small groups of owners with straightforward profit-sharing. | | S-Corporation | LLC elects S-Corp status, potentially reducing self-employment taxes on a portion of income. | Businesses where owners are actively involved and take reasonable salaries. | | C-Corporation | LLC is taxed as a separate entity, facing potential double taxation but with more tax deduction options. | Businesses planning to reinvest profits or seek venture capital. | To elect a different tax classification, LLCs must file Form 8832 (Entity Classification Election) with the IRS. For S-Corporation status, Form 2553 (Election by a Small Business Corporation) must be filed. These elections can significantly impact tax liabilities and should be made with professional guidance. #### Operational Considerations and Best Practices Running an LLC effectively requires attention to several key areas to maintain its legal protections and operational efficiency: **1. Maintaining Corporate Veil** To preserve limited liability protection, LLC members must: - Keep personal and business finances strictly separate - Maintain accurate and detailed financial records - Follow all operating agreement provisions - Hold regular member meetings with written minutes - Use proper LLC designations on all business documents - Ensure adequate capitalization for business operations Failure to observe these formalities can result in "piercing the corporate veil," allowing creditors to reach members' personal assets. **2. Compliance Requirements** LLCs must adhere to ongoing compliance requirements: - File annual reports/statements with the state - Pay annual fees (typically $50-$800, depending on the state) - Maintain a registered agent and office - Keep member information current - Comply with tax filing deadlines **3. Multi-State Operations** LLCs operating in multiple states should consider: - Foreign LLC registration in states beyond the formation state - Nexus considerations for state tax purposes - Varying compliance requirements across jurisdictions **4. Succession Planning** Unlike corporations, many states dissolve an LLC upon a member's death unless the operating agreement specifies otherwise. Effective succession planning involves: - Buy-sell provisions in the operating agreement - Clear transfer restriction policies - Life insurance policies to fund ownership transitions - Detailed procedures for admitting new members #### Practical Advice for Decision-Making When deciding where to form an LLC, consider the following steps: 1. Assess where you live and conduct business; if primarily in one state, forming there avoids foreign LLC registration hassles. 2. Evaluate costs, including filing fees, annual reports, and potential additional fees (e.g., publication costs in Arizona). 3. Research tax implications, noting that no state income tax states like Nevada benefit owners living there, but not if you reside elsewhere. 4. Consider privacy needs; if confidentiality is crucial, states like Delaware or Nevada offer stronger protections. 5. Consult legal or financial advisors for industry-specific regulations, especially for real estate or professional services. For non-US residents with no US physical presence, states like Wyoming, Delaware, or Ohio are popular, with Ohio recommended for affordability (no annual report, $99 fee). Real estate LLCs should form in the state where the property is located to avoid foreign registration costs, doubling expenses otherwise. #### Legal and Liability Considerations While LLCs offer substantial liability protection, this protection is not absolute. Members should be aware of the following limitations: - **Personal Guarantees**: Many small business loans and leases require personal guarantees from LLC members, effectively bypassing liability protection for those specific obligations. - **Direct Negligence**: Members remain personally liable for their own negligent or wrongful acts, regardless of LLC status. - **Employment Taxes**: The IRS can hold members responsible for unpaid employment taxes. - **Fraudulent Activities**: Courts will not protect members involved in fraudulent or illegal activities. To enhance liability protection, many LLCs implement additional safeguards: - Adequate business insurance coverage (general liability, professional liability, etc.) - Contractual risk allocation through indemnification provisions - Operating through multiple LLCs to isolate high-risk activities - Maintaining sufficient capital reserves #### Conclusion The LLC structure offers a powerful combination of liability protection, tax flexibility, and operational simplicity, making it an ideal choice for many businesses. While Delaware is often regarded as the best state to open an LLC due to its business-friendly laws and legal protections, the best choice depends on individual needs. For most small businesses, forming in the home state is likely more practical and cost-effective, avoiding additional fees and complexity. The formation process, while straightforward, requires careful attention to state-specific requirements and ongoing compliance obligations. By understanding the nuances of LLC formation, taxation, and management, entrepreneurs can leverage this business structure to protect their personal assets while achieving their business objectives. For specific guidance, prospective LLC owners should consult with legal and tax professionals familiar with the requirements in their particular state and industry, ensuring their LLC is properly formed and maintained to provide the intended benefits and protections. ### Key Citations - [Internal Revenue Service: Limited Liability Company (LLC)](https://www.irs.gov/businesses/small-businesses-self-employed/limited-liability-company-llc) - [U.S. Small Business Administration: Choose a Business Structure](https://www.sba.gov/business-guide/launch-your-business/choose-business-structure) - [Delaware Division of Corporations](https://corp.delaware.gov/howtoform/) - [NOLO: LLCs and Limited Liability Protection](https://www.nolo.com/legal-encyclopedia/llcs-limited-liability-protection-charging-orders.html) - [IRS Form 8832: Entity Classification Election](https://www.irs.gov/forms-pubs/about-form-8832) - [IRS Form 2553: Election by a Small Business Corporation](https://www.irs.gov/forms-pubs/about-form-2553) - [California Franchise Tax Board: LLC Filing Requirements](https://www.ftb.ca.gov/file/business/types/limited-liability-company/index.html) - [Best State to Start an LLC 2025 Home State vs Magical States](https://www.llcuniversity.com/best-state-to-form-an-llc/) - [Best States To Form An LLC In 2024 Forbes Advisor](https://www.forbes.com/advisor/business/best-state-form-llc/) - [What's the best state for LLC formation Stripe](https://stripe.com/resources/more/best-state-for-llc-formation-what-each-state-offers-and-how-to-pick-one) - [The 5 Best States to Form an LLC in 2024](https://www.quicksprout.com/best-states-to-form-an-llc/)
```

# docs/Tiktok.md

```md
### Key Points - TikTok API allows embedding videos on websites and advanced integrations like posting content or accessing user data. - The most common use is embedding videos using the oEmbed API, which is simple and accessible. - Advanced features require developer registration and application approval, which can be complex. ### Embedding Videos The TikTok API's most straightforward use is embedding videos on websites. You can do this using the oEmbed API, which lets you fetch an embed code for any public TikTok video. Here's how: - Find the video URL, like `https://www.tiktok.com/@user123/video/1234567890`. - Make a GET request to `https://www.tiktok.com/oembed?url=` followed by your video URL. - The response will be a JSON object with HTML code to embed the video on your site. For example, if you request `https://www.tiktok.com/oembed?url=https://www.tiktok.com/@user123/video/1234567890`, you'll get the embed code to paste into your website's HTML. This is great for blogs or social media aggregators. ### Advanced Integrations For more than just embedding, like posting content or accessing user data, you need to: - Register on the TikTok developer portal. - Create and submit an application for review. - Get an access token upon approval to use other API endpoints. This process can be time-consuming and may not be approved for all uses, so it's more suited for businesses or researchers. ### Surprising Detail: Limited Public Access It's surprising that while embedding videos is easy, other features like posting content aren't publicly accessible without a formal review, making the API more restrictive than some might expect. --- ### Comprehensive Usage Survey of TikTok API This survey note provides a detailed exploration of the TikTok API, focusing on its primary usage for embedding videos and the process for accessing advanced features. It aims to offer a thorough understanding for developers and researchers, building on the direct answer provided above. #### Introduction to TikTok API The TikTok API is a set of tools and protocols that enable developers to integrate TikTok's features into their applications or websites. It supports various functionalities, with the most accessible being video embedding through the oEmbed API. Other uses, such as posting content or accessing user data, require additional steps and approvals, reflecting TikTok's controlled approach to API access. #### Embedding Videos: The oEmbed API The oEmbed API is the most user-friendly aspect of the TikTok API, allowing developers to embed TikTok videos on external websites. This is particularly useful for content creators, social media aggregators, and websites looking to enhance engagement with dynamic video content. ##### Steps for Using the oEmbed API To embed a TikTok video, follow these steps: 1. **Identify the Video URL**: Locate the URL of the TikTok video you wish to embed, such as `https://www.tiktok.com/@user123/video/1234567890`. 2. **Fetch the Embed Code**: Use the oEmbed API by making a GET request to `https://www.tiktok.com/oembed?url=` followed by the video URL. For instance, `https://www.tiktok.com/oembed?url=https://www.tiktok.com/@user123/video/1234567890`. 3. **Parse the Response**: The API returns a JSON object containing the HTML embed code. An example response might include: - `html`: The HTML code to embed the video, typically including a `<blockquote>` element and a script tag for `https://www.tiktok.com/embed.js`. - Other metadata like video title, author, and dimensions. 4. **Insert into Website**: Copy the HTML code and paste it into your website's HTML where you want the video to appear. Ensure your site can load external scripts from TikTok for the video to play. ##### Considerations and Limitations - **Styling and Size**: The embedded video comes with default styling. Developers may need to adjust CSS to fit their website's design, ensuring responsiveness across devices. - **Video Availability**: If the original video is removed from TikTok, the embed will no longer function, displaying an error or placeholder. - **Dependencies**: The embed relies on scripts from `tiktok.com`, so firewall restrictions or ad blockers might prevent video playback. - **Example Use Case**: Websites like blogs or social media aggregators can use this to display TikTok videos, enhancing user engagement with dynamic content. #### Advanced Integrations: Beyond Embedding For developers seeking to interact with TikTok beyond embedding, such as posting content, accessing user data, or managing ads, the process is more involved. TikTok restricts these features to ensure platform security and compliance, requiring formal registration and application. ##### Registration and Application Process To access advanced API features: 1. **Register as a Developer**: Visit the TikTok developer portal, likely accessible through `tiktok.com/developers` or related pages, and create an account. This involves verifying your email and accepting terms and conditions. 2. **Create and Submit an Application**: Develop a prototype of your application and submit it for review. This includes detailing how you intend to use the API, such as for posting content or analyzing user data. 3. **Obtain Access Token**: Upon approval, TikTok provides an access token, which is used to authenticate API requests. This token is essential for making calls to endpoints beyond embedding. ##### Types of Advanced APIs - **Business API**: Focused on advertising and commerce, as seen in the GitHub repository for the TikTok Business API SDK ([TikTok Business API SDK](https://github.com/tiktok/tiktok-business-api-sdk)). This is used for managing ads, campaigns, and audience data, primarily for e-commerce integrations. - **Research API**: Mentioned in a tutorial from Methods Lab ([Tutorial: When and how to use the official TikTok API](https://methodslab.weizenbaum-institut.de/2024/11/12/tutorial-when-and-how-to-use-the-official-tiktok-api/)), this is for academic research, requiring a developer account and bearer token for data scraping. - **Content Posting and User Data**: These features are less publicly documented and require specific permissions. Developers may need to justify their use case, such as building influencer marketing tools, and wait 5-7 days for review feedback. ##### Challenges and Restrictions - **Approval Process**: The review process can be lengthy, with potential feedback loops requiring revisions before approval. This is noted in guides like the Phyllo post ([How to Use the TikTok API - The Complete Guide for Developers](https://www.getphyllo.com/post/introduction-to-tiktok-api)). - **Limited Access**: Not all applications are approved, especially for general public use, making these APIs more suitable for businesses, researchers, or specific use cases like social media management platforms (e.g., Hootsuite, Buffer). - **Deprecation Risks**: As mentioned in the Phyllo guide, TikTok may deprecate or update APIs, requiring developers to migrate to new endpoints, which can impact functionality. #### Comparative Analysis: Embed vs. Advanced APIs To illustrate the differences, consider the following table comparing the embed API and advanced integrations: | **Feature** | **Embed API (oEmbed)** | **Advanced APIs (Business, Research, etc.)** | |--------------------------|--------------------------------------------|-----------------------------------------------------| | **Accessibility** | Public, no approval needed | Requires developer registration and application | | **Use Case** | Embedding videos on websites | Posting content, user data access, ad management | | **Setup Complexity** | Low, single API call | High, involves review and token management | | **Example Endpoint** | `https://www.tiktok.com/oEmbed` | Varies, e.g., business API for ad campaigns | | **Typical User** | Website owners, bloggers | Businesses, researchers, social media platforms | | **Limitations** | Video removal affects embed | Restricted access, potential deprecation risks | This table highlights the accessibility of the embed API versus the controlled access to advanced features, guiding developers on which to pursue based on their needs. #### Research and Unofficial Alternatives It's worth noting that due to the restrictive nature of the official API, unofficial APIs exist, such as TikAPI ([TikAPI | Unofficial TikTok API](https://tikapi.io/)) and the GitHub repository by davidteather ([The Unofficial TikTok API Wrapper In Python](https://github.com/davidteather/TikTok-Api)). These provide broader access to features like video downloads or comment extraction but come with risks, such as potential detection by TikTok and lack of official support. #### Conclusion The TikTok API's primary and most accessible usage is for embedding videos via the oEmbed API, offering a simple way for developers to integrate dynamic content into websites. For advanced integrations, the process involves registering as a developer, submitting applications, and navigating a review process, which is more suited for specific use cases like business advertising or academic research. This dual structure reflects TikTok's balance between accessibility and control, ensuring platform security while fostering developer engagement. #### Key Citations - [TikTok Business API SDK](https://github.com/tiktok/tiktok-business-api-sdk) - [Tutorial: When and how to use the official TikTok API](https://methodslab.weizenbaum-institut.de/2024/11/12/tutorial-when-and-how-to-use-the-official-tiktok-api/) - [How to Use the TikTok API - The Complete Guide for Developers](https://www.getphyllo.com/post/introduction-to-tiktok-api) - [TikAPI | Unofficial TikTok API](https://tikapi.io/) - [The Unofficial TikTok API Wrapper In Python](https://github.com/davidteather/TikTok-Api)
```

# docs/Youtube.md

```md
### Key Points - The YouTube API lets developers add YouTube features like video searches and uploads to apps. - To use it, create a Google account, set up a project, get an API key, and enable the API. - A common use is searching for videos, like finding dog videos in Python with a simple code. ### What is the YouTube API? The YouTube API is a tool that helps developers add YouTube features to their apps, such as searching for videos, uploading content, and managing playlists. It’s great for building apps that need to interact with YouTube data. ### How to Get Started Getting started is easy: - First, create a Google account to access the Google Developers Console. - Then, set up a project there to get your API key or other credentials. - Enable the YouTube Data API v3 for your project. - For user-specific actions, you’ll need to handle authentication, often using Google Sign-In. ### Example: Searching for Videos A popular use is searching for videos. For example, using Python, you can write a simple script to find videos about dogs: - Import the Google API Client Library. - Use your API key to set up the connection. - Search for “dogs” and get up to 25 results, then print their IDs and titles. Here’s a surprising detail: each API request uses quota units, and you get 10,000 units daily for free, but uploading a video can cost 1,600 units, so plan your usage carefully. --- ### Comprehensive Analysis of YouTube API Usage This section provides a detailed exploration of the YouTube API, covering its functionality, setup process, and a specific example of usage, ensuring a thorough understanding for developers and enthusiasts alike. The analysis is grounded in official documentation and practical examples, offering insights into both general application and specific implementations. #### Introduction to the YouTube API The YouTube API, specifically the YouTube Data API v3, is a robust interface that enables developers to integrate various YouTube functionalities into their applications. Launched and maintained by Google, it allows access to a vast array of YouTube’s features, including video uploads, playlist management, search capabilities, and user interactions like comments and subscriptions. This API is particularly valuable for creating applications that leverage YouTube’s extensive content library, enhancing user experience through customization and integration. The API operates on a RESTful basis, utilizing standard HTTP methods such as GET, POST, PUT, and DELETE to interact with resources via specific endpoints. All data exchanges are conducted in JSON format, requiring developers to understand the structure of each resource type, such as videos, channels, and playlists, to effectively parse and manipulate the data. #### Getting Started with the YouTube API To begin using the YouTube API, developers must follow a structured setup process, ensuring compliance with Google’s authentication and authorization requirements. The steps are as follows: | Step | Description | Details | |------|-------------|---------| | 1 | Create a Google Account | Required to access the Google Developers Console; visit [this website](https://www.google.com/accounts/NewAccount) for account creation. | | 2 | Create a Project and Obtain Credentials | Use the Google Developers Console at [this page](https://console.developers.google.com) to register your application, detailed at [registering an application](https://developers.google.com/youtube/registering_an_application). | | 3 | Enable YouTube Data API v3 | Navigate to the Enabled APIs page at [this URL](https://console.cloud.google.com/apis/enabled) and ensure the API is turned ON. | | 4 | Implement OAuth 2.0 for User Authorization | Necessary for methods requiring user data; refer to the [authentication guide](https://developers.google.com/youtube/v3/guides/authentication) for implementation details. | | 5 | Select a Client Library | Choose from libraries for various languages, including Python, at [client libraries](https://developers.google.com/youtube/v3/libraries). | | 6 | Familiarize with JSON | Understand JSON data format, essential for parsing API responses, with resources at [JSON.org](http://json.org). | Authentication is critical, with options including API keys for public data access and OAuth 2.0 tokens for user-specific operations. The API key can be obtained from the Developer Console’s API Access pane, while OAuth 2.0 tokens can be provided via query parameters or HTTP headers, as detailed in the [authentication guide](https://developers.google.com/youtube/v3/guides/authentication). #### Key Operations and Functionality The YouTube API supports a wide range of operations, catering to diverse developer needs. Below is a table summarizing the key resources and their associated methods, highlighting the breadth of functionality available: | Resource Type | Methods Available | Description | |--------------------|---------------------------------------|-------------| | Activities | list, insert (deprecated) | Manage user activities, though insert is no longer supported. | | Captions | delete, download, insert, list, update | Manage caption tracks for videos. | | Channels | list, update | Retrieve and update channel information, including settings. | | Comments | list, setModerationStatus, insert, delete, update | Handle video comments, including moderation. | | Playlists | delete, list, insert, update | Create and manage video playlists, public or private. | | Search | list | Search for videos, channels, and playlists by various parameters. | | Videos | insert, list, delete, update, rate, getRating, reportAbuse | Comprehensive video management, including ratings and abuse reports. | These operations allow developers to build applications that can search for content, manage user interactions, and handle video uploads, among other tasks. For instance, the search functionality supports parameters like query terms, locations, and publication dates, making it versatile for content discovery. #### Quotas and Limits A critical aspect of using the YouTube API is managing quota usage, as Google imposes limits to prevent abuse. Each project is allocated a default quota of 10,000 units per day, with different operations consuming varying amounts of units. For example: | Operation Type | Quota Cost (Units) | |----------------------|--------------------| | Read operation (e.g., list resources) | 1 unit | | Write operation (e.g., update, delete) | 50 units | | Search request | 100 units | | Video upload | 1,600 units | Developers can monitor usage via the [Quotas page](https://console.developers.google.com/iam-admin/quotas) and request additional quota through the [Quota extension form](https://support.google.com/youtube/contact/yt_api_form?hl=en). This system ensures efficient resource allocation and scalability, but requires careful planning to avoid exceeding limits, especially for high-volume applications. #### Example: Searching for Videos in Python To illustrate a practical usage, consider implementing a video search functionality using Python, leveraging the Google API Client Library. This example demonstrates how to search for videos related to a specific keyword, such as “dogs,” and process the results. The process involves: 1. **Importing Libraries**: The script begins by importing the necessary library, `googleapiclient.discovery`, which facilitates API interactions. 2. **Setting Up Authentication**: An API key is required, obtained from the Google Developers Console, and used to authenticate requests. 3. **Creating the Service Object**: The YouTube API service object is built using the API key, enabling method calls. 4. **Defining Search Parameters**: The search query is set to “dogs,” with parameters like `part='id,snippet'` for retrieving video IDs and titles, and `maxResults=25` to limit the number of results. 5. **Making the API Request**: The `search.list` method is called with these parameters, executing the search. 6. **Processing the Response**: The response, returned in JSON format, is iterated to extract video details, filtering for video kinds and printing IDs and titles. Here’s the code snippet, reflecting this implementation: \`\`\`python import googleapiclient.discovery API_KEY = 'YOUR_API_KEY' youtube = googleapiclient.discovery.build('youtube', 'v3', developerKey=API_KEY) request = youtube.search().list( q='dogs', part='id,snippet', maxResults=25 ) response = request.execute() for item in response['items']: if item['id']['kind'] == 'youtube#video': print(item['id']['videoId'], item['snippet']['title']) \`\`\` This example highlights the simplicity of integrating search functionality, but also underscores the importance of quota management, as each search request costs 100 units. Developers should implement caching and optimize requests to stay within daily limits, especially for applications with frequent searches. #### Error Handling and Best Practices While the provided documentation does not explicitly detail error handling, it implies scenarios such as unauthorized access (401) or forbidden requests (403) due to missing or invalid tokens. Developers must handle such errors, ensuring robust application performance. Best practices include monitoring quota usage, using partial resource retrieval to reduce data transfer, and referring to the [API reference](https://developers.google.com/youtube/v3/docs/) for method-specific details. #### Conclusion The YouTube API offers a powerful means to integrate YouTube functionalities into applications, with a clear setup process and extensive operational capabilities. The example of searching for videos in Python demonstrates practical usage, emphasizing the need for authentication, quota management, and efficient data handling. For further details, developers are encouraged to explore the official documentation and code samples, ensuring compliance with Google’s policies and optimizing for performance. ### Key Citations - [YouTube Data API Overview Google Developers](https://developers.google.com/youtube/v3/getting-started) - [API Reference YouTube Data API Google Developers](https://developers.google.com/youtube/v3/docs/) - [YouTube Data API Code Samples Google Developers](https://developers.google.com/youtube/v3/code_samples) - [YouTube Data API Libraries Google Developers](https://developers.google.com/youtube/v3/libraries) - [YouTube Data API Search List Google Developers](https://developers.google.com/youtube/v3/docs/search/list) - [Google Developers Console Quotas Page](https://console.developers.google.com/iam-admin/quotas) - [YouTube API Services Quota Extension Form](https://support.google.com/youtube/contact/yt_api_form?hl=en) - [JSON Data Format Reference](http://json.org)
```

# elixir_buildpack.config

```config
elixir_version=1.14.3 erlang_version=24.3.4
```

# FILE_STRUCTURE.md

```md
# Project File Structure This document outlines the current file structure of the Phoenix Documentation project. ## Root Files - `.formatter.exs` - Code formatter configuration - `.gitignore` - Git ignore rules - `mix.exs` - Mix project configuration - `mix.lock` - Dependency lock file - `README.md` - Project overview - `FILE_STRUCTURE.md` - This file structure documentation ## Assets (Frontend) \`\`\` assets/ ├── package.json - Node.js dependencies ├── tailwind.config.js - Tailwind CSS configuration ├── css/ │ └── app.css - Main stylesheet with Tailwind imports └── js/ ├── app.js - Main JavaScript entry point ├── hooks/ - LiveView hooks \`\`\` ## Configuration \`\`\` config/ ├── config.exs - Base configuration ├── dev.exs - Development environment configuration ├── prod.exs - Production environment configuration ├── runtime.exs - Runtime configuration └── test.exs - Test environment configuration \`\`\` ## Documentation \`\`\` docs/ ├── Claude-Code.md - Claude AI coding documentation ├── Cloudflare.md - Cloudflare service documentation ├── Instagram.md - Instagram platform documentation ├── LLC.md - LLC formation documentation ├── Tiktok.md - TikTok platform documentation └── Youtube.md - YouTube platform documentation \`\`\` ## Application Code \`\`\` lib/ ├── myapp.ex - Main application module ├── myapp_web.ex - Web-related module imports and aliases ├── myapp/ - Core application logic │ ├── application.ex - OTP Application setup │ ├── repo.ex - Database repository │ └── [other core modules] └── myapp_web/ - Web interface ├── endpoint.ex - HTTP endpoint configuration ├── router.ex - URL routing ├── channels/ - WebSocket channels ├── components/ - Reusable UI components │ ├── core_components.ex │ ├── layouts.ex │ └── layouts/ ├── controllers/ - Request handlers │ ├── error_html.ex │ ├── error_json.ex │ └── [other controllers] └── live/ - LiveView modules └── [LiveView controllers] \`\`\` ## Private Files \`\`\` priv/ ├── gettext/ - Internationalization ├── repo/ │ ├── seeds.exs - Database seed data │ └── migrations/ - Database migrations └── static/ - Static files served by Phoenix ├── favicon.ico ├── robots.txt ├── assets/ - Compiled assets └── images/ - Static images \`\`\` ## Tests \`\`\` test/ ├── test_helper.exs - Test configuration ├── myapp/ - Core application tests └── myapp_web/ - Web interface tests ├── controllers/ └── live/ \`\`\` ## Scripts \`\`\` scripts/ └── [utility scripts] \`\`\` ## Release Configuration \`\`\` rel/ └── [release configuration] \`\`\`
```

# fly.toml

```toml
# fly.toml app configuration file generated for ingrey-01282025-lively-glade-5283 on 2025-01-28T23:41:51+09:00 # # See https://fly.io/docs/reference/configuration/ for information about how to use this file. # app = 'ingrey-01282025-lively-glade-5283' primary_region = 'nrt' kill_signal = 'SIGTERM' [build] [deploy] release_command = '/app/bin/migrate' [env] PHX_HOST = 'ingrey-01282025-lively-glade-5283.fly.dev' PORT = '8080' [http_service] internal_port = 8080 force_https = true auto_stop_machines = 'stop' auto_start_machines = true min_machines_running = 0 processes = ['app'] [http_service.concurrency] type = 'connections' hard_limit = 1000 soft_limit = 1000 [[vm]] memory = '1gb' cpu_kind = 'shared' cpus = 1
```

# lib/myapp_web.ex

```ex
defmodule MyappWeb do @moduledoc """ The entrypoint for defining your web interface, such as controllers, components, channels, and so on. This can be used in your application as: use MyappWeb, :controller use MyappWeb, :html The definitions below will be executed for every controller, component, etc, so keep them short and clean, focused on imports, uses and aliases. Do NOT define functions inside the quoted expressions below. Instead, define additional modules and import those modules here. """ def static_paths, do: ~w(assets fonts images favicon.ico robots.txt) def router do quote do use Phoenix.Router, helpers: false # Import common connection and controller functions to use in pipelines import Plug.Conn import Phoenix.Controller import Phoenix.LiveView.Router end end def channel do quote do use Phoenix.Channel end end def controller do quote do use Phoenix.Controller, formats: [:html, :json], layouts: [html: MyappWeb.Layouts] import Plug.Conn import MyappWeb.Gettext unquote(verified_routes()) end end def live_view do quote do use Phoenix.LiveView, layout: {MyappWeb.Layouts, :app} unquote(html_helpers()) end end def live_component do quote do use Phoenix.LiveComponent unquote(html_helpers()) end end def html do quote do use Phoenix.Component # Import convenience functions from controllers import Phoenix.Controller, only: [get_csrf_token: 0, view_module: 1, view_template: 1] # Include general helpers for rendering HTML unquote(html_helpers()) end end defp html_helpers do quote do # HTML escaping functionality import Phoenix.HTML # Core UI components and translation import MyappWeb.CoreComponents import MyappWeb.DocsComponents import MyappWeb.Gettext # Shortcut for generating JS commands alias Phoenix.LiveView.JS # Routes generation with the ~p sigil unquote(verified_routes()) end end def verified_routes do quote do use Phoenix.VerifiedRoutes, endpoint: MyappWeb.Endpoint, router: MyappWeb.Router, statics: MyappWeb.static_paths() end end @doc """ When used, dispatch to the appropriate controller/live_view/etc. """ defmacro __using__(which) when is_atom(which) do apply(__MODULE__, which, []) end end
```

# lib/myapp_web/channels/chat_channel.ex

```ex
defmodule MyappWeb.ChatChannel do use MyappWeb, :channel @impl true def join("chat:lobby", payload, socket) do if authorized?(payload) do {:ok, socket} else {:error, %{reason: "unauthorized"}} end end # Channels can be used in a request/response fashion # by sending replies to requests from the client @impl true def handle_in("ping", payload, socket) do {:reply, {:ok, payload}, socket} end # It is also common to receive messages from the client and # broadcast to everyone in the current topic (chat:lobby). @impl true def handle_in("shout", payload, socket) do broadcast(socket, "shout", payload) {:noreply, socket} end # Add authorization logic here as required. defp authorized?(_payload) do true end end
```

# lib/myapp_web/channels/user_socket.ex

```ex
defmodule MyappWeb.UserSocket do use Phoenix.Socket # A Socket handler # # It's possible to control the websocket connection and # assign values that can be accessed by your channel topics. ## Channels channel "chat:*", MyappWeb.ChatChannel # Socket params are passed from the client and can # be used to verify and authenticate a user. After # verification, you can put default assigns into # the socket that will be set for all channels, ie # # {:ok, assign(socket, :user_id, verified_user_id)} # # To deny connection, return `:error` or `{:error, term}`. To control the # response the client receives in that case, [define an error handler in the # websocket # configuration](https://hexdocs.pm/phoenix/Phoenix.Endpoint.html#socket/3-websocket-configuration). # # See `Phoenix.Token` documentation for examples in # performing token verification on connect. @impl true def connect(_params, socket, _connect_info) do {:ok, socket} end # Socket IDs are topics that allow you to identify all sockets for a given user: # # def id(socket), do: "user_socket:#{socket.assigns.user_id}" # # Would allow you to broadcast a "disconnect" event and terminate # all active sockets and channels for a given user: # # Elixir.MyappWeb.Endpoint.broadcast("user_socket:#{user.id}", "disconnect", %{}) # # Returning `nil` makes this socket anonymous. @impl true def id(_socket), do: nil end
```

# lib/myapp_web/channels/youtube_channel.ex

```ex
defmodule MyappWeb.YoutubeChannel do use Phoenix.Channel alias Myapp.Youtube def join("youtube:" <> video_id, _params, socket) do socket = assign(socket, :video_id, video_id) send(self(), :refresh_stats) {:ok, socket} end def handle_info(:refresh_stats, socket) do case Youtube.get_video_details(socket.assigns.video_id) do {:ok, stats} -> push(socket, "stats_update", stats) Process.send_after(self(), :refresh_stats, 30_000) {:noreply, socket} {:error, reason} -> push(socket, "error", %{reason: reason}) {:noreply, socket} end end def handle_in("search_videos", %{"query" => query} = params, socket) do opts = [ max_results: Map.get(params, "max_results", 25), order: Map.get(params, "order", "relevance") ] case Youtube.search_videos(query, opts) do {:ok, videos} -> {:reply, {:ok, %{videos: videos}}, socket} {:error, reason} -> {:reply, {:error, %{reason: reason}}, socket} end end end
```

# lib/myapp_web/components/core_components.ex

```ex
defmodule MyappWeb.CoreComponents do @moduledoc """ Provides core UI components. At first glance, this module may seem daunting, but its goal is to provide core building blocks for your application, such as modals, tables, and forms. The components consist mostly of markup and are well-documented with doc strings and declarative assigns. You may customize and style them in any way you want, based on your application growth and needs. The default components use Tailwind CSS, a utility-first CSS framework. See the [Tailwind CSS documentation](https://tailwindcss.com) to learn how to customize them or feel free to swap in another framework altogether. Icons are provided by [heroicons](https://heroicons.com). See `icon/1` for usage. """ use Phoenix.Component alias Phoenix.LiveView.JS use Gettext, backend: MyappWeb.Gettext @doc """ Renders a modal. ## Examples <.modal id="confirm-modal"> This is a modal. </.modal> JS commands may be passed to the `:on_cancel` to configure the closing/cancel event, for example: <.modal id="confirm" on_cancel={JS.navigate(~p"/posts")}> This is another modal. </.modal> """ attr :id, :string, required: true attr :show, :boolean, default: false attr :on_cancel, JS, default: %JS{} slot :inner_block, required: true def modal(assigns) do ~H""" <div id={@id} phx-mounted={@show && show_modal(@id)} phx-remove={hide_modal(@id)} data-cancel={JS.exec(@on_cancel, "phx-remove")} class="relative z-50 hidden" > <div id={"#{@id}-bg"} class="bg-zinc-50/90 fixed inset-0 transition-opacity" aria-hidden="true" /> <div class="fixed inset-0 overflow-y-auto" aria-labelledby={"#{@id}-title"} aria-describedby={"#{@id}-description"} role="dialog" aria-modal="true" tabindex="0" > <div class="flex min-h-full items-center justify-center"> <div class="w-full max-w-3xl p-4 sm:p-6 lg:py-8"> <.focus_wrap id={"#{@id}-container"} phx-window-keydown={JS.exec("data-cancel", to: "##{@id}")} phx-key="escape" phx-click-away={JS.exec("data-cancel", to: "##{@id}")} class="shadow-zinc-700/10 ring-zinc-700/10 relative hidden rounded-2xl bg-white p-14 shadow-lg ring-1 transition" > <div class="absolute top-6 right-5"> <button phx-click={JS.exec("data-cancel", to: "##{@id}")} type="button" class="-m-3 flex-none p-3 opacity-20 hover:opacity-40" aria-label={gettext("close")} > <.icon name="hero-x-mark-solid" class="h-5 w-5" /> </button> </div> <div id={"#{@id}-content"}> {render_slot(@inner_block)} </div> </.focus_wrap> </div> </div> </div> </div> """ end @doc """ Renders flash notices. ## Examples <.flash kind={:info} flash={@flash} /> <.flash kind={:info} phx-mounted={show("#flash")}>Welcome Back!</.flash> """ attr :id, :string, doc: "the optional id of flash container" attr :flash, :map, default: %{}, doc: "the map of flash messages to display" attr :title, :string, default: nil attr :kind, :atom, values: [:info, :error], doc: "used for styling and flash lookup" attr :rest, :global, doc: "the arbitrary HTML attributes to add to the flash container" slot :inner_block, doc: "the optional inner block that renders the flash message" def flash(assigns) do assigns = assign_new(assigns, :id, fn -> "flash-#{assigns.kind}" end) ~H""" <div :if={msg = render_slot(@inner_block) || Phoenix.Flash.get(@flash, @kind)} id={@id} phx-click={JS.push("lv:clear-flash", value: %{key: @kind}) |> hide("##{@id}")} role="alert" class={[ "fixed top-2 right-2 mr-2 w-80 sm:w-96 z-50 rounded-lg p-3 ring-1", @kind == :info && "bg-emerald-50 text-emerald-800 ring-emerald-500 fill-cyan-900", @kind == :error && "bg-rose-50 text-rose-900 shadow-md ring-rose-500 fill-rose-900" ]} {@rest} > <p :if={@title} class="flex items-center gap-1.5 text-sm font-semibold leading-6"> <.icon :if={@kind == :info} name="hero-information-circle-mini" class="h-4 w-4" /> <.icon :if={@kind == :error} name="hero-exclamation-circle-mini" class="h-4 w-4" /> {@title} </p> <p class="mt-2 text-sm leading-5">{msg}</p> <button type="button" class="group absolute top-1 right-1 p-2" aria-label={gettext("close")}> <.icon name="hero-x-mark-solid" class="h-5 w-5 opacity-40 group-hover:opacity-70" /> </button> </div> """ end @doc """ Shows the flash group with standard titles and content. ## Examples <.flash_group flash={@flash} /> """ attr :flash, :map, required: true, doc: "the map of flash messages" attr :id, :string, default: "flash-group", doc: "the optional id of flash container" def flash_group(assigns) do ~H""" <div id={@id}> <.flash kind={:info} title={gettext("Success!")} flash={@flash} /> <.flash kind={:error} title={gettext("Error!")} flash={@flash} /> <.flash id="client-error" kind={:error} title={gettext("We can't find the internet")} phx-disconnected={show(".phx-client-error #client-error")} phx-connected={hide("#client-error")} hidden > {gettext("Attempting to reconnect")} <.icon name="hero-arrow-path" class="ml-1 h-3 w-3 animate-spin" /> </.flash> <.flash id="server-error" kind={:error} title={gettext("Something went wrong!")} phx-disconnected={show(".phx-server-error #server-error")} phx-connected={hide("#server-error")} hidden > {gettext("Hang in there while we get back on track")} <.icon name="hero-arrow-path" class="ml-1 h-3 w-3 animate-spin" /> </.flash> </div> """ end @doc """ Renders a simple form. ## Examples <.simple_form for={@form} phx-change="validate" phx-submit="save"> <.input field={@form[:email]} label="Email"/> <.input field={@form[:username]} label="Username" /> <:actions> <.button>Save</.button> </:actions> </.simple_form> """ attr :for, :any, required: true, doc: "the data structure for the form" attr :as, :any, default: nil, doc: "the server side parameter to collect all input under" attr :rest, :global, include: ~w(autocomplete name rel action enctype method novalidate target multipart), doc: "the arbitrary HTML attributes to apply to the form tag" slot :inner_block, required: true slot :actions, doc: "the slot for form actions, such as a submit button" def simple_form(assigns) do ~H""" <.form :let={f} for={@for} as={@as} {@rest}> <div class="mt-10 space-y-8 bg-white"> {render_slot(@inner_block, f)} <div :for={action <- @actions} class="mt-2 flex items-center justify-between gap-6"> {render_slot(action, f)} </div> </div> </.form> """ end @doc """ Renders a button. ## Examples <.button>Send!</.button> <.button phx-click="go" class="ml-2">Send!</.button> """ attr :type, :string, default: nil attr :class, :string, default: nil attr :rest, :global, include: ~w(disabled form name value) slot :inner_block, required: true def button(assigns) do ~H""" <button type={@type} class={[ "phx-submit-loading:opacity-75 rounded-lg bg-zinc-900 hover:bg-zinc-700 py-2 px-3", "text-sm font-semibold leading-6 text-white active:text-white/80", @class ]} {@rest} > {render_slot(@inner_block)} </button> """ end @doc """ Renders an input with label and error messages. A `Phoenix.HTML.FormField` may be passed as argument, which is used to retrieve the input name, id, and values. Otherwise all attributes may be passed explicitly. ## Types This function accepts all HTML input types, considering that: * You may also set `type="select"` to render a `<select>` tag * `type="checkbox"` is used exclusively to render boolean values * For live file uploads, see `Phoenix.Component.live_file_input/1` See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input for more information. Unsupported types, such as hidden and radio, are best written directly in your templates. ## Examples <.input field={@form[:email]} type="email" /> <.input name="my-input" errors={["oh no!"]} /> """ attr :id, :any, default: nil attr :name, :any attr :label, :string, default: nil attr :value, :any attr :type, :string, default: "text", values: ~w(checkbox color date datetime-local email file month number password range search select tel text textarea time url week) attr :field, Phoenix.HTML.FormField, doc: "a form field struct retrieved from the form, for example: @form[:email]" attr :errors, :list, default: [] attr :checked, :boolean, doc: "the checked flag for checkbox inputs" attr :prompt, :string, default: nil, doc: "the prompt for select inputs" attr :options, :list, doc: "the options to pass to Phoenix.HTML.Form.options_for_select/2" attr :multiple, :boolean, default: false, doc: "the multiple flag for select inputs" attr :rest, :global, include: ~w(accept autocomplete capture cols disabled form list max maxlength min minlength multiple pattern placeholder readonly required rows size step) def input(%{field: %Phoenix.HTML.FormField{} = field} = assigns) do errors = if Phoenix.Component.used_input?(field), do: field.errors, else: [] assigns |> assign(field: nil, id: assigns.id || field.id) |> assign(:errors, Enum.map(errors, &translate_error(&1))) |> assign_new(:name, fn -> if assigns.multiple, do: field.name <> "[]", else: field.name end) |> assign_new(:value, fn -> field.value end) |> input() end def input(%{type: "checkbox"} = assigns) do assigns = assign_new(assigns, :checked, fn -> Phoenix.HTML.Form.normalize_value("checkbox", assigns[:value]) end) ~H""" <div> <label class="flex items-center gap-4 text-sm leading-6 text-zinc-600"> <input type="hidden" name={@name} value="false" disabled={@rest[:disabled]} /> <input type="checkbox" id={@id} name={@name} value="true" checked={@checked} class="rounded border-zinc-300 text-zinc-900 focus:ring-0" {@rest} /> {@label} </label> <.error :for={msg <- @errors}>{msg}</.error> </div> """ end def input(%{type: "select"} = assigns) do ~H""" <div> <.label for={@id}>{@label}</.label> <select id={@id} name={@name} class="mt-2 block w-full rounded-md border border-gray-300 bg-white shadow-sm focus:border-zinc-400 focus:ring-0 sm:text-sm" multiple={@multiple} {@rest} > <option :if={@prompt} value="">{@prompt}</option> {Phoenix.HTML.Form.options_for_select(@options, @value)} </select> <.error :for={msg <- @errors}>{msg}</.error> </div> """ end def input(%{type: "textarea"} = assigns) do ~H""" <div> <.label for={@id}>{@label}</.label> <textarea id={@id} name={@name} class={[ "mt-2 block w-full rounded-lg text-zinc-900 focus:ring-0 sm:text-sm sm:leading-6 min-h-[6rem]", @errors == [] && "border-zinc-300 focus:border-zinc-400", @errors != [] && "border-rose-400 focus:border-rose-400" ]} {@rest} ><%= Phoenix.HTML.Form.normalize_value("textarea", @value) %></textarea> <.error :for={msg <- @errors}>{msg}</.error> </div> """ end # All other inputs text, datetime-local, url, password, etc. are handled here... def input(assigns) do ~H""" <div> <.label for={@id}>{@label}</.label> <input type={@type} name={@name} id={@id} value={Phoenix.HTML.Form.normalize_value(@type, @value)} class={[ "mt-2 block w-full rounded-lg text-zinc-900 focus:ring-0 sm:text-sm sm:leading-6", @errors == [] && "border-zinc-300 focus:border-zinc-400", @errors != [] && "border-rose-400 focus:border-rose-400" ]} {@rest} /> <.error :for={msg <- @errors}>{msg}</.error> </div> """ end @doc """ Renders a label. """ attr :for, :string, default: nil slot :inner_block, required: true def label(assigns) do ~H""" <label for={@for} class="block text-sm font-semibold leading-6 text-zinc-800"> {render_slot(@inner_block)} </label> """ end @doc """ Generates a generic error message. """ slot :inner_block, required: true def error(assigns) do ~H""" <p class="mt-3 flex gap-3 text-sm leading-6 text-rose-600"> <.icon name="hero-exclamation-circle-mini" class="mt-0.5 h-5 w-5 flex-none" /> {render_slot(@inner_block)} </p> """ end @doc """ Renders a header with title. """ attr :class, :string, default: nil slot :inner_block, required: true slot :subtitle slot :actions def header(assigns) do ~H""" <header class={[@actions != [] && "flex items-center justify-between gap-6", @class]}> <div> <h1 class="text-lg font-semibold leading-8 text-zinc-800"> {render_slot(@inner_block)} </h1> <p :if={@subtitle != []} class="mt-2 text-sm leading-6 text-zinc-600"> {render_slot(@subtitle)} </p> </div> <div class="flex-none">{render_slot(@actions)}</div> </header> """ end @doc ~S""" Renders a table with generic styling. ## Examples <.table id="users" rows={@users}> <:col :let={user} label="id"><%= user.id %></:col> <:col :let={user} label="username"><%= user.username %></:col> </.table> """ attr :id, :string, required: true attr :rows, :list, required: true attr :row_id, :any, default: nil, doc: "the function for generating the row id" attr :row_click, :any, default: nil, doc: "the function for handling phx-click on each row" attr :row_item, :any, default: &Function.identity/1, doc: "the function for mapping each row before calling the :col and :action slots" slot :col, required: true do attr :label, :string end slot :action, doc: "the slot for showing user actions in the last table column" def table(assigns) do assigns = with %{rows: %Phoenix.LiveView.LiveStream{}} <- assigns do assign(assigns, row_id: assigns.row_id || fn {id, _item} -> id end) end ~H""" <div class="overflow-y-auto px-4 sm:overflow-visible sm:px-0"> <table class="w-[40rem] mt-11 sm:w-full"> <thead class="text-sm text-left leading-6 text-zinc-500"> <tr> <th :for={col <- @col} class="p-0 pb-4 pr-6 font-normal">{col[:label]}</th> <th :if={@action != []} class="relative p-0 pb-4"> <span class="sr-only">{gettext("Actions")}</span> </th> </tr> </thead> <tbody id={@id} phx-update={match?(%Phoenix.LiveView.LiveStream{}, @rows) && "stream"} class="relative divide-y divide-zinc-100 border-t border-zinc-200 text-sm leading-6 text-zinc-700" > <tr :for={row <- @rows} id={@row_id && @row_id.(row)} class="group hover:bg-zinc-50"> <td :for={{col, i} <- Enum.with_index(@col)} phx-click={@row_click && @row_click.(row)} class={["relative p-0", @row_click && "hover:cursor-pointer"]} > <div class="block py-4 pr-6"> <span class="absolute -inset-y-px right-0 -left-4 group-hover:bg-zinc-50 sm:rounded-l-xl" /> <span class={["relative", i == 0 && "font-semibold text-zinc-900"]}> {render_slot(col, @row_item.(row))} </span> </div> </td> <td :if={@action != []} class="relative w-14 p-0"> <div class="relative whitespace-nowrap py-4 text-right text-sm font-medium"> <span class="absolute -inset-y-px -right-4 left-0 group-hover:bg-zinc-50 sm:rounded-r-xl" /> <span :for={action <- @action} class="relative ml-4 font-semibold leading-6 text-zinc-900 hover:text-zinc-700" > {render_slot(action, @row_item.(row))} </span> </div> </td> </tr> </tbody> </table> </div> """ end @doc """ Renders a data list. ## Examples <.list> <:item title="Title"><%= @post.title %></:item> <:item title="Views"><%= @post.views %></:item> </.list> """ slot :item, required: true do attr :title, :string, required: true end def list(assigns) do ~H""" <div class="mt-14"> <dl class="-my-4 divide-y divide-zinc-100"> <div :for={item <- @item} class="flex gap-4 py-4 text-sm leading-6 sm:gap-8"> <dt class="w-1/4 flex-none text-zinc-500">{item.title}</dt> <dd class="text-zinc-700">{render_slot(item)}</dd> </div> </dl> </div> """ end @doc """ Renders a back navigation link. ## Examples <.back navigate={~p"/posts"}>Back to posts</.back> """ attr :navigate, :any, required: true slot :inner_block, required: true def back(assigns) do ~H""" <div class="mt-16"> <.link navigate={@navigate} class="text-sm font-semibold leading-6 text-zinc-900 hover:text-zinc-700" > <.icon name="hero-arrow-left-solid" class="h-3 w-3" /> {render_slot(@inner_block)} </.link> </div> """ end @doc """ Renders a [Heroicon](https://heroicons.com). Heroicons come in three styles – outline, solid, and mini. By default, the outline style is used, but solid and mini may be applied by using the `-solid` and `-mini` suffix. You can customize the size and colors of the icons by setting width, height, and background color classes. Icons are extracted from the `deps/heroicons` directory and bundled within your compiled app.css by the plugin in your `assets/tailwind.config.js`. ## Examples <.icon name="hero-x-mark-solid" /> <.icon name="hero-arrow-path" class="ml-1 w-3 h-3 animate-spin" /> """ attr :name, :string, required: true attr :class, :string, default: nil def icon(%{name: "hero-" <> _} = assigns) do ~H""" <span class={[@name, @class]} /> """ end ## JS Commands def show(js \\ %JS{}, selector) do JS.show(js, to: selector, time: 300, transition: {"transition-all transform ease-out duration-300", "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95", "opacity-100 translate-y-0 sm:scale-100"} ) end def hide(js \\ %JS{}, selector) do JS.hide(js, to: selector, time: 200, transition: {"transition-all transform ease-in duration-200", "opacity-100 translate-y-0 sm:scale-100", "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"} ) end def show_modal(js \\ %JS{}, id) when is_binary(id) do js |> JS.show(to: "##{id}") |> JS.show( to: "##{id}-bg", time: 300, transition: {"transition-all transform ease-out duration-300", "opacity-0", "opacity-100"} ) |> show("##{id}-container") |> JS.add_class("overflow-hidden", to: "body") |> JS.focus_first(to: "##{id}-content") end def hide_modal(js \\ %JS{}, id) do js |> JS.hide( to: "##{id}-bg", transition: {"transition-all transform ease-in duration-200", "opacity-100", "opacity-0"} ) |> hide("##{id}-container") |> JS.hide(to: "##{id}", transition: {"block", "block", "hidden"}) |> JS.remove_class("overflow-hidden", to: "body") |> JS.pop_focus() end @doc """ Translates an error message using gettext. """ def translate_error({msg, opts}) do # When using gettext, we typically pass the strings we want # to translate as a static argument: # # # Translate the number of files with plural rules # dngettext("errors", "1 file", "%{count} files", count) # # However the error messages in our forms and APIs are generated # dynamically, so we need to translate them by calling Gettext # with our gettext backend as first argument. Translations are # available in the errors.po file (as we use the "errors" domain). if count = opts[:count] do Gettext.dngettext(MyappWeb.Gettext, "errors", msg, msg, count, opts) else Gettext.dgettext(MyappWeb.Gettext, "errors", msg, opts) end end @doc """ Translates the errors for a field from a keyword list of errors. """ def translate_errors(errors, field) when is_list(errors) do for {^field, {msg, opts}} <- errors, do: translate_error({msg, opts}) end end
```

# lib/myapp_web/components/docs_components.ex

```ex
defmodule MyappWeb.DocsComponents do @moduledoc """ Documentation components for the application. """ alias MyappWeb.Components.Docs.{ Breadcrumb, Sidebar, TableOfContents, ContentHeader, FeedbackSection, RelatedDocs, StaticContent } # Re-export all components defdelegate breadcrumb(assigns), to: Breadcrumb defdelegate sidebar(assigns), to: Sidebar defdelegate table_of_contents(assigns), to: TableOfContents defdelegate content_header(assigns), to: ContentHeader defdelegate feedback_section(assigns), to: FeedbackSection defdelegate related_docs(assigns), to: RelatedDocs defdelegate static_content(assigns), to: StaticContent end
```

# lib/myapp_web/components/docs/breadcrumb.ex

```ex
defmodule MyappWeb.Components.Docs.Breadcrumb do use MyappWeb, :html attr :topic, :string, required: true def breadcrumb(assigns) do ~H""" <nav class="flex mb-4 sm:mb-8" aria-label="Breadcrumb"> <ol class="inline-flex items-center space-x-1 md:space-x-3"> <li class="inline-flex items-center"> <a href={~p"/"} class="inline-flex items-center text-xs sm:text-sm font-medium text-gray-700 hover:text-blue-600 transition" > <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" > <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"> </path> </svg> <span class="hidden sm:inline">Home</span> <span class="inline sm:hidden">Home</span> </a> </li> <li> <div class="flex items-center"> <svg class="w-3 h-3 text-gray-400 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10" > <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4" /> </svg> <a href={~p"/docs"} class="ml-1 text-xs sm:text-sm font-medium text-gray-700 hover:text-blue-600 md:ml-2 transition" > <span class="hidden sm:inline">Documentation</span> <span class="inline sm:hidden">Docs</span> </a> </div> </li> <li aria-current="page"> <div class="flex items-center"> <svg class="w-3 h-3 text-gray-400 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10" > <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4" /> </svg> <span class="ml-1 text-xs sm:text-sm font-medium text-gray-500 md:ml-2 truncate max-w-[100px] sm:max-w-none"> {String.capitalize(@topic)} </span> </div> </li> </ol> </nav> """ end end
```

# lib/myapp_web/components/docs/content_header.ex

```ex
defmodule MyappWeb.Components.Docs.ContentHeader do use MyappWeb, :html attr :topic, :string, required: true def content_header(assigns) do ~H""" <div class="px-4 sm:px-6 py-4 sm:py-5 border-b border-gray-200 bg-gray-50"> <div class="flex items-center justify-between"> <div class="flex-1 min-w-0"> <h1 class="text-xl sm:text-2xl font-bold text-gray-900 truncate">{String.capitalize(@topic)}</h1> <p class="mt-1 text-xs sm:text-sm text-gray-500">Last updated: February 25, 2025</p> </div> <!-- Mobile menu button (only visible on mobile) --> <button type="button" class="md:hidden p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" aria-controls="mobile-menu" aria-expanded="false" id="mobile-menu-button" > <span class="sr-only">Open navigation menu</span> <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /> </svg> </button> </div> </div> """ end end
```

# lib/myapp_web/components/docs/feedback_section.ex

```ex
defmodule MyappWeb.Components.Docs.FeedbackSection do use MyappWeb, :html def feedback_section(assigns) do ~H""" <div class="mt-8 sm:mt-12 pt-4 sm:pt-6 border-t border-gray-200"> <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"> <div class="mb-4 sm:mb-0"> <h3 class="text-xs sm:text-sm font-medium text-gray-500">Was this helpful?</h3> <div class="mt-1 flex space-x-2"> <button type="button" class="inline-flex items-center px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" > <svg class="-ml-0.5 mr-1 h-3 w-3 sm:h-4 sm:w-4 text-green-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" > <path d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" /> </svg> Yes </button> <button type="button" class="inline-flex items-center px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" > <svg class="-ml-0.5 mr-1 h-3 w-3 sm:h-4 sm:w-4 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" > <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" /> </svg> No </button> </div> </div> <div> <h3 class="text-xs sm:text-sm font-medium text-gray-500">Share</h3> <div class="mt-1 flex space-x-2"> <button type="button" class="text-gray-400 hover:text-gray-500"> <span class="sr-only">Share on Twitter</span> <svg class="h-4 w-4 sm:h-5 sm:w-5" fill="currentColor" viewBox="0 0 20 20"> <path d="M6.29 18.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0020 3.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.073 4.073 0 01.8 7.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 010 16.407a11.616 11.616 0 006.29 1.84" /> </svg> </button> <button type="button" class="text-gray-400 hover:text-gray-500"> <span class="sr-only">Share on LinkedIn</span> <svg class="h-4 w-4 sm:h-5 sm:w-5" fill="currentColor" viewBox="0 0 20 20"> <path fill-rule="evenodd" d="M16.338 16.338H13.67V12.16c0-.995-.017-2.277-1.387-2.277-1.39 0-1.601 1.086-1.601 2.207v4.248H8.014v-8.59h2.559v1.174h.037c.356-.675 1.227-1.387 2.526-1.387 2.703 0 3.203 1.778 3.203 4.092v4.711zM5.005 6.575a1.548 1.548 0 11-.003-3.096 1.548 1.548 0 01.003 3.096zm-1.337 9.763H6.34v-8.59H3.667v8.59zM17.668 1H2.328C1.595 1 1 1.581 1 2.298v15.403C1 18.418 1.595 19 2.328 19h15.34c.734 0 1.332-.582 1.332-1.299V2.298C19 1.581 18.402 1 17.668 1z" clip-rule="evenodd" /> </svg> </button> <button type="button" class="text-gray-400 hover:text-gray-500"> <span class="sr-only">Share on Facebook</span> <svg class="h-4 w-4 sm:h-5 sm:w-5" fill="currentColor" viewBox="0 0 20 20"> <path fill-rule="evenodd" d="M20 10c0-5.523-4.477-10-10-10S0 4.477 0 10c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V10h2.54V7.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V10h2.773l-.443 2.89h-2.33v6.988C16.343 19.128 20 14.991 20 10z" clip-rule="evenodd" /> </svg> </button> </div> </div> </div> </div> """ end end
```

# lib/myapp_web/components/docs/related_docs.ex

```ex
defmodule MyappWeb.Components.Docs.RelatedDocs do use MyappWeb, :html attr :topic, :string, required: true def related_docs(assigns) do ~H""" <div class="mt-6 sm:mt-8"> <h2 class="text-base sm:text-lg font-medium text-gray-900">Related Documentation</h2> <div class="mt-3 sm:mt-4 grid grid-cols-1 gap-3 sm:gap-4 md:grid-cols-2"> <%= for related_doc <- (cond do @topic == "LLC" -> ["Cloudflare", "Youtube", "Instagram"] @topic == "Instagram" -> ["Cloudflare", "Youtube", "Tiktok"] true -> ["LLC", "Tiktok", "Instagram"] end) |> Enum.take(2) do %> <div class="relative rounded-lg border border-gray-200 bg-white px-4 sm:px-6 py-4 sm:py-5 shadow-sm flex items-center space-x-3 hover:border-gray-400 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500"> <div class="flex-shrink-0"> <span class="inline-flex items-center justify-center h-8 w-8 sm:h-10 sm:w-10 rounded-md bg-blue-500 text-white"> <svg class="h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /> </svg> </span> </div> <div class="flex-1 min-w-0"> <a href={~p"/docs/#{related_doc}"} class="focus:outline-none"> <span class="absolute inset-0" aria-hidden="true"></span> <p class="text-sm font-medium text-gray-900 truncate">{String.capitalize(related_doc)}</p> <p class="text-xs sm:text-sm text-gray-500 truncate"> Learn more about {String.capitalize(related_doc)} </p> </a> </div> </div> <% end %> </div> </div> """ end end
```

# lib/myapp_web/components/docs/sidebar.ex

```ex
defmodule MyappWeb.Components.Docs.Sidebar do use MyappWeb, :html attr :topic, :string, required: true def sidebar(assigns) do ~H""" <div class="w-full"> <div class="lg:sticky lg:top-8"> <h4 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3"> Documentation </h4> <nav class="space-y-1"> <%= for doc <- ["Cloudflare", "Instagram", "LLC", "Tiktok", "Youtube", "getting-started", "features", "api"] do %> <a href={~p"/docs/#{doc}"} class={"group flex items-center px-3 py-2 text-sm font-medium rounded-md " <> if @topic == doc, do: "bg-blue-50 text-blue-700", else: "text-gray-700 hover:text-blue-700 hover:bg-blue-50" } > <span class="truncate">{String.capitalize(doc)}</span> </a> <% end %> </nav> </div> </div> """ end end
```

# lib/myapp_web/components/docs/static_content.ex

```ex
defmodule MyappWeb.Components.Docs.StaticContent do use MyappWeb, :html attr :content, :string, required: true attr :topic, :string, required: true def static_content(assigns) do content_with_ids = add_ids_to_headings(assigns.content) assigns = assign(assigns, :processed_content, content_with_ids) ~H""" <div class="static-content prose prose-blue max-w-none"> <%= raw(@processed_content) %> <style> /* Add responsive styles for content */ .static-content { font-size: 0.875rem; line-height: 1.5; overflow-wrap: break-word; word-wrap: break-word; word-break: normal; hyphens: auto; } @media (min-width: 640px) { .static-content { font-size: 1rem; line-height: 1.625; } } /* Code block overflow handling */ .static-content pre { overflow-x: auto; white-space: pre; max-width: 100%; border-radius: 0.375rem; background-color: #f8f9fa; padding: 1rem; position: relative; margin: 1rem 0; border: 1px solid #e5e7eb; } /* Add scroll indicator for code blocks that overflow */ .static-content pre::-webkit-scrollbar { height: 6px; } .static-content pre::-webkit-scrollbar-thumb { background-color: rgba(156, 163, 175, 0.5); border-radius: 3px; } /* Add scroll indicator for code blocks that overflow */ .static-content pre.has-overflow::after { content: ""; position: absolute; bottom: 0; right: 0; height: 100%; width: 20px; background: linear-gradient(to right, rgba(248, 249, 250, 0), rgba(248, 249, 250, 1)); pointer-events: none; } /* Table overflow handling */ .static-content table { display: block; width: 100%; overflow-x: auto; border-collapse: collapse; margin: 1rem 0; font-size: 0.875rem; } .static-content th, .static-content td { padding: 0.5rem; border: 1px solid #e5e7eb; min-width: 120px; } .static-content th { background-color: #f8f9fa; font-weight: 600; } /* Improved image handling */ .static-content img { max-width: 100%; height: auto; border-radius: 0.375rem; margin: 1rem 0; } /* Ensure inline code doesn't cause horizontal overflow */ .static-content code:not(pre code) { word-break: break-word; white-space: pre-wrap; background-color: #f1f5f9; padding: 0.125rem 0.25rem; border-radius: 0.25rem; font-size: 0.875em; } /* Responsive blockquote */ .static-content blockquote { border-left: 4px solid #e5e7eb; padding-left: 1rem; margin-left: 0; color: #4b5563; font-style: italic; } /* Ensure links don't overflow */ .static-content a { word-break: break-word; overflow-wrap: break-word; } /* Responsive list items */ .static-content ul, .static-content ol { padding-left: 1.5rem; } .static-content li { margin-bottom: 0.5rem; } /* Add proper spacing for headings */ .static-content h1, .static-content h2, .static-content h3, .static-content h4, .static-content h5, .static-content h6 { margin-top: 1.5rem; margin-bottom: 1rem; font-weight: 600; line-height: 1.25; scroll-margin-top: 80px; /* Ensures the heading isn't hidden under any fixed headers when scrolled to */ } .static-content h3 { font-size: 1.25rem; padding-top: 0.5rem; } @media (min-width: 640px) { .static-content h3 { font-size: 1.5rem; } } </style> </div> """ end @doc """ Adds IDs to h3 headings in the HTML content if they don't already have IDs. Uses the same ID generation logic as the TableOfContents component. """ def add_ids_to_headings(html_content) when is_binary(html_content) do # Find h3 tags without IDs heading_without_id_regex = ~r/<h3(?![^>]*id=)([^>]*)>([^<]+)<\/h3>/ # Replace them with h3 tags that have IDs Regex.replace(heading_without_id_regex, html_content, fn _, attrs, heading -> id = generate_id_from_heading(heading) "<h3#{attrs} id=\"#{id}\">#{heading}</h3>" end) end def add_ids_to_headings(nil), do: "" @doc """ Generates a URL-friendly ID from a heading text. Converts to lowercase, replaces spaces with hyphens, removes special characters. This is the same logic used in the TableOfContents component to ensure consistency. """ def generate_id_from_heading(heading) do heading |> String.downcase() |> String.replace(~r/[^\w\s-]/, "") # Remove special chars except whitespace and hyphens |> String.replace(~r/\s+/, "-") # Replace whitespace with hyphens |> String.trim("-") # Trim leading/trailing hyphens end end
```

# lib/myapp_web/components/docs/table_of_contents.ex

```ex
defmodule MyappWeb.Components.Docs.TableOfContents do use MyappWeb, :html alias MyappWeb.Components.Docs.StaticContent attr :content, :string, required: true def table_of_contents(assigns) do ~H""" <div class="mb-4 sm:mb-8 p-3 sm:p-4 bg-blue-50 rounded-lg"> <h3 class="text-xs sm:text-sm font-semibold text-blue-800 uppercase tracking-wide mb-2"> TABLE OF CONTENTS </h3> <div class="overflow-x-auto"> <ul class="space-y-1 text-xs sm:text-sm"> <%= for {heading, id} <- extract_headings(@content) do %> <li> <a href={"##{id}"} class="toc-link text-blue-700 hover:underline block overflow-hidden text-ellipsis whitespace-nowrap" phx-click={JS.push("scroll_to_section", value: %{id: id})} > <%= heading %> </a> </li> <% end %> </ul> </div> </div> """ end @doc """ Extracts headings from markdown HTML content. Returns a list of {heading_text, heading_id} tuples. If headings don't have IDs, generates them from the heading text. """ def extract_headings(html_content) when is_binary(html_content) do # First, try to find h3 tags with IDs already assigned heading_with_id_regex = ~r/<h3.*?id="([^"]+)".*?>([^<]+)<\/h3>/ headings_with_ids = Regex.scan(heading_with_id_regex, html_content) |> Enum.map(fn [_, id, heading] -> {heading, id} end) # Also find h3 tags without IDs heading_without_id_regex = ~r/<h3(?![^>]*id=)[^>]*>([^<]+)<\/h3>/ headings_without_ids = Regex.scan(heading_without_id_regex, html_content) |> Enum.map(fn [_, heading] -> id = StaticContent.generate_id_from_heading(heading) {heading, id} end) # Combine both results headings_with_ids ++ headings_without_ids end def extract_headings(_), do: [] end
```

# lib/myapp_web/components/layouts.ex

```ex
defmodule MyappWeb.Layouts do @moduledoc """ This module holds different layouts used by your application. See the `layouts` directory for all templates available. The "root" layout is a skeleton rendered as part of the application router. The "app" layout is set as the default layout on both `use MyappWeb, :controller` and `use MyappWeb, :live_view`. """ use MyappWeb, :html embed_templates "layouts/*" end
```

# lib/myapp_web/components/layouts/admin.html.heex

```heex
<div class="min-h-screen bg-white dark:bg-gray-900"> <nav class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"> <div class="flex items-center justify-between h-16"> <div class="flex items-center"> <h1 class="text-xl font-semibold text-gray-900 dark:text-white"> Admin Dashboard </h1> </div> <div class="flex items-center gap-4"> <button type="button" class="text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-600 rounded-lg p-2" > <span class="sr-only">View notifications</span> <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /> </svg> </button> </div> </div> </div> </nav> <div class="max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8"> <div class="mb-8"> <h2 class="text-2xl font-semibold text-gray-900 dark:text-white"> {@page_title} </h2> </div> <div class="bg-white dark:bg-gray-800 shadow-sm rounded-lg"> <div class="px-4 py-5 sm:p-6"> {@inner_content} </div> </div> </div> </div>
```

# lib/myapp_web/components/layouts/app.html.heex

```heex
{@inner_content}
```

# lib/myapp_web/components/layouts/root.html.heex

```heex
<!DOCTYPE html> <html lang="en" class="[scrollbar-gutter:stable] h-full"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1" /> <meta name="csrf-token" content={get_csrf_token()} /> <.live_title suffix=" · Main"> {assigns[:page_title] || "ingrey"} </.live_title> <link phx-track-static rel="stylesheet" href={~p"/assets/app.css"} /> <script defer phx-track-static type="text/javascript" src={~p"/assets/app.js"}> </script> </head> <body class="min-h-full flex flex-col"> <!-- Navigation --> <header class="bg-white shadow-sm z-10"> <nav class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8" aria-label="Top"> <div class="flex w-full items-center justify-between border-b border-gray-200 py-6 lg:border-none"> <div class="flex items-center"> <a href={~p"/"} class="flex items-center"> <img src="/images/logos/ingrey.svg" alt="CreatorSync Logo" loading="lazy" /> <span class="text-xl font-bold text-gray-900">ingrey</span> </a> <div class="ml-10 hidden space-x-8 lg:block"> <a href={~p"/docs"} class="text-base font-medium text-gray-700 hover:text-blue-600 transition" > Documentation </a> <a href={~p"/pricing"} class="text-base font-medium text-gray-700 hover:text-blue-600 transition" > Pricing </a> <a href={~p"/features"} class="text-base font-medium text-gray-700 hover:text-blue-600 transition" > Features </a> <a href={~p"/company"} class="text-base font-medium text-gray-700 hover:text-blue-600 transition" > Company </a> </div> </div> <div class="ml-10 space-x-4"> <a href="#" class="inline-block rounded-md border border-transparent bg-blue-500 py-2 px-4 text-base font-medium text-white hover:bg-blue-600 transition" > Sign in </a> <a href="#" class="inline-block rounded-md border border-transparent bg-blue-600 py-2 px-4 text-base font-medium text-white hover:bg-blue-700 transition" > Sign up </a> </div> </div> <div class="flex flex-wrap justify-center space-x-6 py-4 lg:hidden"> <a href={~p"/docs"} class="text-base font-medium text-gray-700 hover:text-blue-600 transition" > Documentation </a> <a href={~p"/pricing"} class="text-base font-medium text-gray-700 hover:text-blue-600 transition" > Pricing </a> <a href={~p"/features"} class="text-base font-medium text-gray-700 hover:text-blue-600 transition" > Features </a> <a href={~p"/company"} class="text-base font-medium text-gray-700 hover:text-blue-600 transition" > Company </a> </div> </nav> </header> <!-- loading spinner --> <!-- <div id="global-spinner" class="spinner justify-center items-center"> --> <!-- <svg --> <!-- width="100" --> <!-- height="120" --> <!-- viewBox="247 250 404 300" --> <!-- fill="none" --> <!-- xmlns="http://www.w3.org/2000/svg" --> <!-- > --> <!-- <path --> <!-- d="M421.77,208.95c0-14.67,11.25-55.63-3.12-58.6c-9.97-2.06-17.54,26.02-18.78,36.12 c-1.59,12.97-3.7,39.5-0.88,52.26c1.97,8.91,5.84,31.6,14.79,33.37c8.29,1.64,21.72-14.38,25.89-21.73 c3.77-6.65,9.69-20.91,11.54-28.32c2.38-9.51,7.63-29.2,5.68-38.81c-2.4-11.83-12.04-38.88-23.68-42.07 c-11.05-3.02-32.27,14.56-39.22,23.66c-7.19,9.41-12.55,33.73-12.93,45.56c-0.38,11.82-0.71,36.43,4.39,47.1 c3.57,7.47,17.92,17.35,22.73,24.09c4.35,6.1,10.22,20.37,11.22,27.8c5.39,40.08-1.49,121.5-6.32,161.65 c-2,16.6-9.56,66.19-9.56,66.19s-11.49,32.96-17.45,42.89c-3.17,5.28-9.82,20.45-15.78,18.92c-10.61-2.73-13.52-31.99-10.55-42.54 c8.02-28.42,43.16-77.72,61.56-100.81c12.74-15.98,40.18-46.84,49.54-65c13.57-26.34,35.03-113.21,35.03-113.21 s-2.01,88.94-8.86,117.62c-4.86,20.34-24.21,58.24-36,75.52c-5.79,8.49-21.08,22.49-28.08,30.01c-6,6.44-22.58,27.02-22.58,27.02" --> <!-- stroke="gray" --> <!-- storke-width="10" --> <!-- /> --> <!-- </svg> --> <!-- </div> --> <!-- Main --> <div class="flex-grow"> {@inner_content} </div> <footer class="bg-[#0A0B14] text-gray-300 py-12"> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"> <div class="grid grid-cols-1 md:grid-cols-4 gap-8"> <!-- Logo and Copyright --> <div class="space-y-4"> <div class="flex items-center"> <a href={~p"/"} class="flex items-center"> <img src="/images/logos/ingrey.svg" alt="CreatorSync Logo" loading="lazy" /> <span class="ml-2 text-white">ingrey.com</span> </a> </div> <p class="text-sm text-gray-400">ingrey.com - All rights reserved.</p> <div class="flex space-x-4"> <a href="#" class="text-gray-400 hover:text-white"> <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" > <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" /> </svg> </a> <a href="#" class="text-gray-400 hover:text-white"> <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" > <path d="M7.5 5.25a3 3 0 013-3h3a3 3 0 013 3v.205c.933.085 1.857.197 2.774.334 1.454.218 2.476 1.483 2.476 2.917v3.033c0 1.211-.734 2.352-1.936 2.752A24.726 24.726 0 0112 15.75c-2.73 0-5.357-.442-7.814-1.259-1.202-.4-1.936-1.541-1.936-2.752V8.706c0-1.434 1.022-2.7 2.476-2.917A48.814 48.814 0 017.5 5.455V5.25zm7.5 0v.09a49.488 49.488 0 00-6 0v-.09a1.5 1.5 0 011.5-1.5h3a1.5 1.5 0 011.5 1.5zm-3 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z" /> <path d="M3 18.4v-2.796a4.3 4.3 0 00.713.31A26.226 26.226 0 0012 17.25c2.892 0 5.68-.468 8.287-1.335.252-.084.49-.189.713-.311V18.4c0 1.452-1.047 2.728-2.523 2.923-2.12.282-4.282.427-6.477.427a49.19 49.19 0 01-6.477-.427C4.047 21.128 3 19.852 3 18.4z" /> </svg> </a> <a href="#" class="text-gray-400 hover:text-white"> <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" > <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" /> </svg> </a> </div> </div> <!-- Products --> <div> <h3 class="text-white font-semibold mb-4">Products</h3> <ul class="space-y-2"> <li><a href="#" class="hover:text-white">Features</a></li> <li><a href="#" class="hover:text-white">Integrations</a></li> <li><a href="#" class="hover:text-white">Pricing & Plans</a></li> <li><a href="#" class="hover:text-white">Changelog</a></li> <li><a href="#" class="hover:text-white">Our method</a></li> </ul> </div> <!-- Company --> <div> <h3 class="text-white font-semibold mb-4">Company</h3> <ul class="space-y-2"> <li><a href={~p"/company"} class="hover:text-white">About us</a></li> <li><a href={~p"/company"} class="hover:text-white">Diversity & Inclusion</a></li> <li><a href="#" class="hover:text-white">Blog</a></li> <li><a href="#" class="hover:text-white">Careers</a></li> <li><a href="#" class="hover:text-white">Financial statements</a></li> </ul> </div> <!-- Resources & Legals --> <div class="grid grid-cols-2 gap-8"> <div> <h3 class="text-white font-semibold mb-4">Resources</h3> <ul class="space-y-2"> <li><a href="#" class="hover:text-white">Community</a></li> <li><a href="#" class="hover:text-white">Terms of service</a></li> <li><a href="#" class="hover:text-white">Report a vulnerability</a></li> </ul> </div> <div> <h3 class="text-white font-semibold mb-4">Legals</h3> <ul class="space-y-2"> <li><a href="#" class="hover:text-white">Refund policy</a></li> <li><a href="#" class="hover:text-white">Terms & Conditions</a></li> <li><a href="#" class="hover:text-white">Privacy policy</a></li> <li><a href="#" class="hover:text-white">Brand Kit</a></li> </ul> </div> </div> </div> </div> </footer> </body> </html>
```

# lib/myapp_web/controllers/company_controller.ex

```ex
defmodule MyappWeb.CompanyController do use MyappWeb, :controller def index(conn, _params) do render(conn, :index) end end
```

# lib/myapp_web/controllers/company_html.ex

```ex
defmodule MyappWeb.CompanyHTML do use MyappWeb, :html embed_templates "company_html/*" end
```

# lib/myapp_web/controllers/company_html/index.html.heex

```heex
<div class="max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8"> <div class="text-center"> <h1 class="text-4xl font-extrabold tracking-tight text-gray-900 sm:text-5xl md:text-6xl"> <span class="block">About Our Company</span> </h1> <p class="mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl"> Learn about our mission, vision, and the team behind our success. </p> </div> <div class="mt-16"> <h2 class="text-3xl font-extrabold text-gray-900"> Our Mission </h2> <div class="mt-6 prose prose-indigo prose-lg text-gray-500 mx-auto"> <p> Our mission is to create innovative solutions that empower businesses to thrive in the digital age. We believe in the power of technology to transform organizations and unlock new possibilities. </p> </div> </div> <div class="mt-16"> <h2 class="text-3xl font-extrabold text-gray-900"> Our Team </h2> <div class="mt-12 grid gap-8 sm:grid-cols-2 lg:grid-cols-3"> <!-- Team Member 1 --> <div class="text-center"> <div class="h-40 w-40 rounded-full bg-gray-200 mx-auto mb-4 flex items-center justify-center"> <svg class="h-20 w-20 text-gray-400" fill="currentColor" viewBox="0 0 24 24"> <path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" /> </svg> </div> <h3 class="text-xl font-medium text-gray-900">Jane Smith</h3> <p class="text-gray-500">CEO & Founder</p> </div> <!-- Team Member 2 --> <div class="text-center"> <div class="h-40 w-40 rounded-full bg-gray-200 mx-auto mb-4 flex items-center justify-center"> <svg class="h-20 w-20 text-gray-400" fill="currentColor" viewBox="0 0 24 24"> <path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" /> </svg> </div> <h3 class="text-xl font-medium text-gray-900">John Doe</h3> <p class="text-gray-500">CTO</p> </div> <!-- Team Member 3 --> <div class="text-center"> <div class="h-40 w-40 rounded-full bg-gray-200 mx-auto mb-4 flex items-center justify-center"> <svg class="h-20 w-20 text-gray-400" fill="currentColor" viewBox="0 0 24 24"> <path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" /> </svg> </div> <h3 class="text-xl font-medium text-gray-900">Emily Chen</h3> <p class="text-gray-500">Head of Product</p> </div> </div> </div> <div class="mt-16"> <h2 class="text-3xl font-extrabold text-gray-900"> Contact Us </h2> <div class="mt-6 prose prose-indigo prose-lg text-gray-500 mx-auto"> <p> We'd love to hear from you! Reach out to us at <a href="mailto:contact@example.com" class="text-indigo-600 hover:text-indigo-700"> contact@example.com </a> or call us at <span class="text-indigo-600">+1 (555) 123-4567</span>. </p> </div> </div> </div>
```

# lib/myapp_web/controllers/docs_controller.ex

```ex
defmodule MyappWeb.DocsController do use MyappWeb, :controller alias Myapp.MarkdownRenderer def index(conn, _params) do # Get list of available docs available_docs = MarkdownRenderer.get_available_docs() render(conn, :index, available_docs: available_docs) end def show(conn, %{"topic" => topic}) do # Try to find and render markdown file doc_path = MarkdownRenderer.get_doc_path(topic) case MarkdownRenderer.render_markdown_file(doc_path) do {:ok, html_content} -> render(conn, :show, topic: topic, content: html_content, from_markdown: true) {:error, _reason} -> # Fall back to static content in the template render(conn, :show, topic: topic, from_markdown: false) end end end
```

# lib/myapp_web/controllers/docs_HTML.ex

```ex
defmodule MyappWeb.DocsHTML do use MyappWeb, :html embed_templates "docs_html/*" end
```

# lib/myapp_web/controllers/docs_html/index.html.heex

```heex
<div class="max-w-5xl mx-auto py-10 px-4 sm:px-6 lg:px-8"> <div class="text-center mb-14"> <h1 class="text-3xl font-extrabold text-gray-900 sm:text-4xl bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600"> Documentation Center </h1> <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto"> Everything you need to know about using our service and getting the most out of our platform </p> </div> <!-- Search Bar --> <div class="max-w-3xl mx-auto mb-12 relative"> <div class="flex items-center border-2 border-gray-300 rounded-lg overflow-hidden focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-200 transition-all"> <div class="pl-4 pr-2"> <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /> </svg> </div> <input type="text" placeholder="Search documentation..." class="w-full py-3 px-2 text-gray-700 focus:outline-none" /> <button class="bg-blue-600 text-white px-5 py-3 hover:bg-blue-700 transition-colors"> Search </button> </div> </div> <!-- Documentation Categories --> <div class="mb-14"> <h2 class="text-2xl font-bold text-gray-900 mb-6">Featured Documentation</h2> <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"> <!-- Getting Started Card --> <a href={~p"/docs/getting-started"} class="group block p-6 bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md hover:border-blue-300 transition-all transform hover:-translate-y-1" > <div class="flex items-center mb-4"> <div class="bg-blue-100 text-blue-700 p-3 rounded-lg"> <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" > <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" > </path> </svg> </div> <h5 class="ml-3 text-xl font-bold tracking-tight text-gray-900 group-hover:text-blue-700 transition-colors"> Getting Started </h5> </div> <p class="font-normal text-gray-600"> Learn the basics and get your account set up quickly with our step-by-step guide. </p> <div class="mt-4 flex items-center text-blue-600 font-medium"> <span>Read guide</span> <svg class="ml-1 w-4 h-4 group-hover:ml-2 transition-all" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" > <path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" > </path> </svg> </div> </a> <!-- API Card --> <a href={~p"/docs/api"} class="group block p-6 bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md hover:border-blue-300 transition-all transform hover:-translate-y-1" > <div class="flex items-center mb-4"> <div class="bg-indigo-100 text-indigo-700 p-3 rounded-lg"> <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" > <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" > </path> </svg> </div> <h5 class="ml-3 text-xl font-bold tracking-tight text-gray-900 group-hover:text-indigo-700 transition-colors"> API Reference </h5> </div> <p class="font-normal text-gray-600"> Comprehensive API documentation for developers who want to integrate with our platform. </p> <div class="mt-4 flex items-center text-indigo-600 font-medium"> <span>Explore API</span> <svg class="ml-1 w-4 h-4 group-hover:ml-2 transition-all" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" > <path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" > </path> </svg> </div> </a> <!-- Features Card --> <a href={~p"/docs/features"} class="group block p-6 bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md hover:border-blue-300 transition-all transform hover:-translate-y-1" > <div class="flex items-center mb-4"> <div class="bg-green-100 text-green-700 p-3 rounded-lg"> <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" > <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" > </path> </svg> </div> <h5 class="ml-3 text-xl font-bold tracking-tight text-gray-900 group-hover:text-green-700 transition-colors"> Features </h5> </div> <p class="font-normal text-gray-600"> Explore all the features available on our platform and how to use them effectively. </p> <div class="mt-4 flex items-center text-green-600 font-medium"> <span>View features</span> <svg class="ml-1 w-4 h-4 group-hover:ml-2 transition-all" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" > <path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" > </path> </svg> </div> </a> </div> </div> <!-- Topic Sections --> <div> <h2 class="text-2xl font-bold text-gray-900 mb-6">Explore Topics</h2> <!-- Integration Guides Section --> <div class="mb-10"> <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center"> <svg class="h-5 w-5 mr-2 text-blue-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" > <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" > </path> </svg> Integration Guides </h3> <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"> <!-- Markdown Docs Cards --> <%= for doc <- Enum.filter(@available_docs, &(&1 in ["Cloudflare", "Youtube", "Tiktok", "Instagram"])) do %> <a href={~p"/docs/#{doc}"} class="flex p-4 bg-white rounded-lg border border-gray-200 hover:border-blue-300 hover:shadow-sm transition-all" > <div class="flex-shrink-0"> <div class="flex items-center justify-center h-10 w-10 rounded-md bg-blue-50 text-blue-700"> <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" > <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" > </path> </svg> </div> </div> <div class="ml-4"> <h5 class="text-md font-medium text-gray-900">{String.capitalize(doc)}</h5> <p class="mt-1 text-sm text-gray-500"> Learn how to integrate with {String.capitalize(doc)} </p> </div> </a> <% end %> </div> </div> <!-- Business Resources Section --> <div class="mb-10"> <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center"> <svg class="h-5 w-5 mr-2 text-blue-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" > <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd" /> <path d="M2 13.692V16a2 2 0 002 2h12a2 2 0 002-2v-2.308A24.974 24.974 0 0110 15c-2.796 0-5.487-.46-8-1.308z" /> </svg> Business Resources </h3> <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"> <!-- LLC Card --> <a href={~p"/docs/LLC"} class="flex p-4 bg-white rounded-lg border border-gray-200 hover:border-blue-300 hover:shadow-sm transition-all" > <div class="flex-shrink-0"> <div class="flex items-center justify-center h-10 w-10 rounded-md bg-green-50 text-green-700"> <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" > <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" > </path> </svg> </div> </div> <div class="ml-4"> <h5 class="text-md font-medium text-gray-900">LLC</h5> <p class="mt-1 text-sm text-gray-500"> Learn about Limited Liability Companies and formation </p> </div> </a> </div> </div> </div> <!-- Help Section --> <div class="bg-gray-50 rounded-2xl p-8 mt-12"> <div class="text-center mb-6"> <h2 class="text-2xl font-bold text-gray-900">Need Help?</h2> <p class="mt-2 text-gray-600"> Can't find what you're looking for? Our support team is here to help. </p> </div> <div class="flex flex-col md:flex-row justify-center gap-4"> <a href="#" class="inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 transition-colors" > <svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" > <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" > </path> </svg> Contact Support </a> <a href="#" class="inline-flex items-center justify-center px-5 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors" > <svg class="mr-2 h-5 w-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" > <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" > </path> </svg> View FAQs </a> </div> </div> </div>
```

# lib/myapp_web/controllers/docs_html/show.html.heex

```heex
<div class="max-w-7xl mx-auto py-6 sm:py-8 px-4 sm:px-6 lg:px-8"> <!-- Breadcrumb navigation --> <.breadcrumb topic={@topic} /> <!-- Mobile navigation toggle (visible only on small screens) --> <div class="lg:hidden mt-4"> <button type="button" class="w-full flex items-center justify-between px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" phx-click={JS.toggle(to: "#mobile-sidebar") |> JS.toggle(to: "#mobile-sidebar-backdrop")} > <span>Documentation Menu</span> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /> </svg> </button> </div> <div class="mt-4 sm:mt-6 flex flex-col lg:flex-row gap-6 lg:gap-8"> <!-- Left sidebar for navigation (hidden on mobile) --> <div class="hidden lg:block lg:w-1/4 xl:w-1/5 flex-shrink-0"> <.sidebar topic={@topic} /> </div> <!-- Main content area --> <div class="flex-1 min-w-0" id="docs-content" phx-hook="DocsNavigation"> <div class="bg-white shadow-sm overflow-hidden rounded-xl border border-gray-100"> <.content_header topic={@topic} /> <div class="px-4 sm:px-6 py-4 sm:py-6 overflow-hidden"> <!-- Table of contents for the article --> <%= if @from_markdown do %> <.table_of_contents content={@content} /> <% end %> <!-- Main content area --> <%= if @from_markdown do %> <.static_content topic={@topic} content={@content} /> <% else %> <.static_content topic={@topic} content="" /> <% end %> <!-- Article footer - feedback and sharing options --> <.feedback_section /> </div> </div> <!-- Related documentation links --> <div class="mt-6"> <.related_docs topic={@topic} /> </div> </div> </div> </div> <!-- Mobile sidebar (hidden by default) --> <div id="mobile-sidebar-backdrop" class="hidden fixed inset-0 bg-gray-500 bg-opacity-75 z-20"></div> <div id="mobile-sidebar" class="hidden fixed inset-y-0 left-0 z-30 w-full max-w-xs bg-white shadow-xl overflow-y-auto" phx-click-away={JS.hide(to: "#mobile-sidebar") |> JS.hide(to: "#mobile-sidebar-backdrop")} > <div class="p-4 border-b border-gray-200"> <div class="flex items-center justify-between"> <h2 class="text-lg font-medium text-gray-900">Documentation</h2> <button type="button" class="text-gray-400 hover:text-gray-500" phx-click={JS.hide(to: "#mobile-sidebar") |> JS.hide(to: "#mobile-sidebar-backdrop")} > <span class="sr-only">Close sidebar</span> <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /> </svg> </button> </div> </div> <div class="p-4"> <.sidebar topic={@topic} /> </div> </div>
```

# lib/myapp_web/controllers/error_html.ex

```ex
defmodule MyappWeb.ErrorHTML do @moduledoc """ This module is invoked by your endpoint in case of errors on HTML requests. See config/config.exs. """ use MyappWeb, :html # If you want to customize your error pages, # uncomment the embed_templates/1 call below # and add pages to the error directory: # # * lib/myapp_web/controllers/error_html/404.html.heex # * lib/myapp_web/controllers/error_html/500.html.heex # # embed_templates "error_html/*" # The default is to render a plain text page based on # the template name. For example, "404.html" becomes # "Not Found". def render(template, _assigns) do Phoenix.Controller.status_message_from_template(template) end end
```

# lib/myapp_web/controllers/error_json.ex

```ex
defmodule MyappWeb.ErrorJSON do @moduledoc """ This module is invoked by your endpoint in case of errors on JSON requests. See config/config.exs. """ # If you want to customize a particular status code, # you may add your own clauses, such as: # # def render("500.json", _assigns) do # %{errors: %{detail: "Internal Server Error"}} # end # By default, Phoenix returns the status message from # the template name. For example, "404.json" becomes # "Not Found". def render(template, _assigns) do %{errors: %{detail: Phoenix.Controller.status_message_from_template(template)}} end end
```

# lib/myapp_web/controllers/fallback_controller.ex

```ex
defmodule MyappWeb.FallbackController do @moduledoc """ Translates controller action results into valid `Plug.Conn` responses. """ use MyappWeb, :controller # This clause handles errors returned by Ecto's insert/update/delete. def call(conn, {:error, %Ecto.Changeset{} = changeset}) do conn |> put_status(:unprocessable_entity) |> put_view(json: MyappWeb.ErrorJSON) |> render(:error, changeset: changeset) end # This clause is an example of how to handle simple error messages. def call(conn, {:error, message}) when is_binary(message) do conn |> put_status(:unprocessable_entity) |> json(%{error: message}) end # This clause handles errors returned by our Thread API. def call(conn, {:error, %{"error" => _} = error}) do conn |> put_status(:unprocessable_entity) |> json(error) end # This clause is invoked for any other error formats. def call(conn, {:error, _}) do conn |> put_status(:internal_server_error) |> json(%{error: "Internal server error"}) end end
```

# lib/myapp_web/controllers/features_controller.ex

```ex
defmodule MyappWeb.FeaturesController do use MyappWeb, :controller def index(conn, _params) do render(conn, :index) end end
```

# lib/myapp_web/controllers/features_html.ex

```ex
defmodule MyappWeb.FeaturesHTML do use MyappWeb, :html embed_templates "features_html/*" end
```

# lib/myapp_web/controllers/features_html/index.html.heex

```heex
<div class="bg-white py-24 sm:py-32"> <div class="mx-auto max-w-7xl px-6 lg:px-8"> <div class="mx-auto max-w-2xl lg:text-center"> <h2 class="text-base font-semibold leading-7 text-blue-600">Development Features</h2> <p class="mt-2 text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"> Everything you need for modern Phoenix development </p> <p class="mt-6 text-lg leading-8 text-gray-600"> Our development environment comes with a comprehensive set of tools and guidelines to ensure consistent, high-quality code. </p> </div> <div class="mx-auto mt-16 max-w-2xl sm:mt-20 lg:mt-24 lg:max-w-none"> <dl class="grid max-w-xl grid-cols-1 gap-x-8 gap-y-16 lg:max-w-none lg:grid-cols-3"> <!-- Development Tools --> <div class="flex flex-col"> <dt class="flex items-center gap-x-3 text-base font-semibold leading-7 text-gray-900"> <svg class="h-5 w-5 flex-none text-blue-600" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" /> </svg> Development Tools </dt> <dd class="mt-4 flex flex-auto flex-col text-base leading-7 text-gray-600"> <p class="flex-auto">Comprehensive set of mix commands for development:</p> <ul class="mt-4 space-y-2 text-sm"> <li class="flex items-center"> <code class="bg-gray-100 px-2 py-1 rounded">mix setup</code> <span class="ml-2">Install dependencies</span> </li> <li class="flex items-center"> <code class="bg-gray-100 px-2 py-1 rounded">mix phx.server</code> <span class="ml-2">Start Phoenix server</span> </li> <li class="flex items-center"> <code class="bg-gray-100 px-2 py-1 rounded">mix test</code> <span class="ml-2">Run test suite</span> </li> <li class="flex items-center"> <code class="bg-gray-100 px-2 py-1 rounded">mix format</code> <span class="ml-2">Format code</span> </li> </ul> </dd> </div> <!-- Code Style --> <div class="flex flex-col"> <dt class="flex items-center gap-x-3 text-base font-semibold leading-7 text-gray-900"> <svg class="h-5 w-5 flex-none text-blue-600" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M3 3a2 2 0 012-2h10a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V3zm2 0v14h10V3H5z" clip-rule="evenodd" /> </svg> Code Style Guidelines </dt> <dd class="mt-4 flex flex-auto flex-col text-base leading-7 text-gray-600"> <p class="flex-auto">Consistent coding standards across the project:</p> <ul class="mt-4 space-y-2"> <li>• Structured context modules</li> <li>• Comprehensive documentation</li> <li>• Clear function grouping</li> <li>• Consistent naming conventions</li> <li>• Type specifications</li> </ul> </dd> </div> <!-- Best Practices --> <div class="flex flex-col"> <dt class="flex items-center gap-x-3 text-base font-semibold leading-7 text-gray-900"> <svg class="h-5 w-5 flex-none text-blue-600" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M16.403 12.652a3 3 0 000-5.304 3 3 0 00-3.75-3.751 3 3 0 00-5.305 0 3 3 0 00-3.751 3.75 3 3 0 000 5.305 3 3 0 003.75 3.751 3 3 0 005.305 0 3 3 0 003.751-3.75zm-2.546-4.46a.75.75 0 00-1.214-.883l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" /> </svg> Development Practices </dt> <dd class="mt-4 flex flex-auto flex-col text-base leading-7 text-gray-600"> <p class="flex-auto">Industry-standard development practices:</p> <ul class="mt-4 space-y-2"> <li>• Robust error handling</li> <li>• Comprehensive testing</li> <li>• Phoenix LiveView conventions</li> <li>• Clean code organization</li> <li>• Database management</li> </ul> </dd> </div> </dl> </div> </div> </div>
```

# lib/myapp_web/controllers/file/file_controller.ex

```ex
defmodule MyappWeb.FileController do use MyappWeb, :controller alias Myapp.FileServer def upload(conn, %{"file" => file_params}) do upload = file_params.path filename = file_params.filename case FileServer.write_file(upload_path(filename), File.read!(upload)) do :ok -> json(conn, %{status: "success", message: "File uploaded successfully"}) {:error, reason} -> conn |> put_status(:unprocessable_entity) |> json(%{status: "error", message: "Failed to upload file: #{inspect(reason)}"}) end end def download(conn, %{"filename" => filename}) do case FileServer.read_file(upload_path(filename)) do {:ok, content} -> conn |> put_resp_content_type("application/octet-stream") |> put_resp_header("content-disposition", ~s(attachment; filename="#{filename}")) |> send_resp(200, content) {:error, reason} -> conn |> put_status(:not_found) |> json(%{status: "error", message: "File not found: #{inspect(reason)}"}) end end defp upload_path(filename) do Path.join(Application.get_env(:myapp, :upload_path, "priv/static/uploads"), filename) end end
```

# lib/myapp_web/controllers/instagram_controller.ex

```ex
defmodule MyappWeb.InstagramController do @moduledoc """ Controller for Instagram-related web interface. This controller handles web requests related to Instagram functionality, providing a user interface for interacting with the Instagram API and related features implemented in the Myapp.Instagram module. """ use MyappWeb, :controller alias Myapp.Instagram alias Myapp.InstagramOauth # Define a struct for Instagram uploads for form handling defmodule UploadForm do use Ecto.Schema import Ecto.Changeset embedded_schema do field :media_type, :string, default: "IMAGE" field :media, :any, virtual: true field :caption, :string field :location, :string field :hashtags, :string field :share_to_feed, :boolean, default: true end @doc """ Creates a changeset for Instagram media uploads. """ def changeset(upload_form, attrs \\ %{}) do upload_form |> cast(attrs, [:media_type, :caption, :location, :hashtags, :share_to_feed]) |> validate_required([:media_type]) |> validate_inclusion(:media_type, ["IMAGE", "VIDEO", "CAROUSEL_ALBUM"]) |> validate_length(:caption, max: 2200, message: "Caption must be 2200 characters or less") end end @doc """ Renders the Instagram page with both dashboard and upload form. This action displays the main Instagram interface where users can interact with Instagram-related features such as media uploads, account management, and other Instagram API functionality. Assigns: * `connected` - Boolean indicating whether the user is connected to Instagram * `recent_media` - List of recent Instagram posts if connected * `changeset` - Form changeset for media uploads * `error` - Any error messages from previous upload attempts * `success` - Boolean indicating if an upload was successful """ def show(conn, params) do # Create a changeset for the upload form changeset = UploadForm.changeset(%UploadForm{}, params["upload_form"] || %{}) # Get error and success flash messages if present error = get_flash(conn, :error) success = get_flash(conn, :info) != nil {connected, recent_media} = case Instagram.validate_access_token([]) do {:ok, _access_token} -> case Instagram.list_media() do {:ok, %{"data" => media}} -> {true, media} _ -> {true, []} end {:error, _reason} -> {false, []} end conn |> assign(:connected, connected) |> assign(:recent_media, recent_media) |> assign(:changeset, changeset) |> assign(:error, error) |> assign(:success, success) |> render(:show) end @doc """ Renders the Instagram media upload form. This action displays a form where users can upload photos or videos to Instagram. It first checks if the user is connected to Instagram (authenticated) before rendering the form. Assigns: * `connected` - Boolean indicating whether the user is connected to Instagram """ def upload_form(conn, params) do case Instagram.validate_access_token([]) do {:ok, _access_token} -> # Create a new changeset for the form changeset = UploadForm.changeset(%UploadForm{}, params["upload"] || %{}) conn |> assign(:connected, true) |> assign(:changeset, changeset) |> assign(:error, nil) |> assign(:success, false) |> render(:upload_form) {:error, reason} -> conn |> put_flash(:error, "You need to connect to Instagram before uploading media: #{reason}") |> redirect(to: ~p"/instagram") end end @doc """ Processes the Instagram media upload form submission. This action handles the media upload processing by: 1. Validating the uploaded file (image or video) 2. Uploading the media to Instagram via the Instagram module 3. Redirecting back with appropriate success/error messages Params: * `media` - The media file upload params * `caption` - Caption for the post * `location` - Optional location information """ def upload_media(conn, params) do upload_params = params["upload_form"] || %{} case Instagram.validate_access_token([]) do {:ok, _access_token} -> # Validate the submitted form data changeset = UploadForm.changeset(%UploadForm{}, upload_params) if changeset.valid? do # First validate the upload to get the media path and type upload_result = with {:ok, media_path, media_type} <- validate_upload(upload_params) do # Now that we have media_type, set up the options and function options = [ caption: upload_params["caption"] || "", location: upload_params["location"] || "", hashtags: parse_hashtags(upload_params["hashtags"] || ""), media_type: media_type ] upload_func = case media_type do "image" -> if function_exported?(Instagram, :post_photo, 2) do &Instagram.post_photo/2 else &upload_media_fallback/2 end "video" -> if function_exported?(Instagram, :post_video, 2) do &Instagram.post_video/2 else &upload_media_fallback/2 end _ -> # This would handle the case where "upload_media" might exist as a generic function if function_exported?(Instagram, :upload_media, 2) do &Instagram.upload_media/2 else &upload_media_fallback/2 end end # Call upload function with file path and options case upload_func.(media_path, options) do {:ok, response} -> {:ok, response} {:error, reason} -> {:error, reason} end else {:error, reason} -> {:error, reason} end case upload_result do {:ok, _response} -> conn |> put_flash(:info, "Media successfully uploaded to Instagram") |> redirect(to: ~p"/instagram") {:error, reason} -> # Redirect back to the main Instagram page with error conn |> put_flash(:error, "Failed to upload media: #{reason}") |> redirect(to: ~p"/instagram") end else # Redirect back to the main Instagram page with validation errors conn |> put_flash(:error, "Please fix the errors in the form") |> redirect(to: ~p"/instagram") end {:error, reason} -> conn |> put_flash(:error, "You need to connect to Instagram before uploading media: #{reason}") |> redirect(to: ~p"/instagram") end end @doc """ Initiates the Instagram OAuth flow. Redirects the user to Instagram's authorization page where they will be asked to grant permission to access their Instagram account and media. """ def connect(conn, _params) do redirect_url = InstagramOauth.authorize_url() conn |> redirect(external: redirect_url) end @doc """ Handles the OAuth callback from Instagram. This action processes the OAuth callback after a user authorizes the application on Instagram. It exchanges the authorization code for an access token and stores it for future requests. Params: * `code` - The authorization code returned by Instagram * `error` - Any error returned by Instagram """ def auth_callback(conn, %{"code" => code}) do case InstagramOauth.get_token(code) do {:ok, token_info} -> # Store the token in the session or a more permanent storage # Include the expiration time for refresh token purposes conn = conn |> put_session(:instagram_token, token_info["access_token"]) |> put_session(:instagram_token_expires_at, get_expiry_datetime(token_info["expires_in"])) # Save the token to application config for Instagram module to use Application.put_env(:myapp, Myapp.Instagram, Keyword.put(Application.get_env(:myapp, Myapp.Instagram, []), :access_token, token_info["access_token"])) conn |> put_flash(:info, "Successfully connected to Instagram!") |> redirect(to: ~p"/instagram") {:error, reason} -> conn |> put_flash(:error, "Failed to connect to Instagram: #{reason}") |> redirect(to: ~p"/instagram") end end def auth_callback(conn, %{"error" => error, "error_description" => error_description}) do conn |> put_flash(:error, "Instagram authorization error: #{error} - #{error_description}") |> redirect(to: ~p"/instagram") end def auth_callback(conn, %{"error" => error}) do conn |> put_flash(:error, "Instagram authorization error: #{error}") |> redirect(to: ~p"/instagram") end def auth_callback(conn, _params) do conn |> put_flash(:error, "Invalid Instagram callback") |> redirect(to: ~p"/instagram") end # Calculates expiry datetime from seconds defp get_expiry_datetime(expires_in) when is_integer(expires_in) do DateTime.add(DateTime.utc_now(), expires_in, :second) end defp get_expiry_datetime(expires_in) when is_binary(expires_in) do case Integer.parse(expires_in) do {seconds, _} -> get_expiry_datetime(seconds) :error -> DateTime.add(DateTime.utc_now(), 30 * 24 * 60 * 60, :second) # Default to 30 days end end defp get_expiry_datetime(_), do: DateTime.add(DateTime.utc_now(), 30 * 24 * 60 * 60, :second) # Validates the media upload and returns the path to the temporary file and media type # Validates the media upload and returns the path to the temporary file and media type defp validate_upload(%{"media" => %Plug.Upload{} = upload}) do cond do upload.content_type in ["image/jpeg", "image/png", "image/jpg"] -> {:ok, upload.path, "image"} upload.content_type in ["video/mp4", "video/quicktime", "video/mov"] -> {:ok, upload.path, "video"} true -> {:error, "Invalid file format. Only JPEG, PNG images and MP4, MOV videos are supported."} end end defp validate_upload(%{media: %Plug.Upload{} = upload}) do cond do upload.content_type in ["image/jpeg", "image/png", "image/jpg"] -> {:ok, upload.path, "image"} upload.content_type in ["video/mp4", "video/quicktime", "video/mov"] -> {:ok, upload.path, "video"} true -> {:error, "Invalid file format. Only JPEG, PNG images and MP4, MOV videos are supported."} end end defp validate_upload(%{"media" => nil}), do: {:error, "No media file uploaded"} defp validate_upload(%{media: nil}), do: {:error, "No media file uploaded"} defp validate_upload(_), do: {:error, "No media file uploaded or invalid format"} # Parse hashtags from a comma-separated string defp parse_hashtags(hashtags_string) when is_binary(hashtags_string) do hashtags_string |> String.split(",") |> Enum.map(&String.trim/1) |> Enum.filter(&(String.length(&1) > 0)) end defp parse_hashtags(_), do: [] # Fallback function for upload_media when media type is unrecognized defp upload_media_fallback(media_path, options) do {:error, "Unsupported media type: #{options[:media_type]}"} end end
```

# lib/myapp_web/controllers/instagram_html.ex

```ex
defmodule MyappWeb.InstagramHTML do use MyappWeb, :html embed_templates "instagram_html/*" @doc """ Extracts the value for a specific field from a changeset. Handles both string and atom keys for flexibility. ## Parameters - changeset: The Ecto.Changeset struct - field: The field name (atom or string) ## Returns The current value for the field from the changeset """ def input_value(changeset, field) when is_binary(field) do input_value(changeset, String.to_existing_atom(field)) rescue ArgumentError -> nil end def input_value(changeset, field) when is_atom(field) do case Ecto.Changeset.fetch_field(changeset, field) do {:changes, value} -> value {:data, value} -> value :error -> nil end end end
```

# lib/myapp_web/controllers/instagram_html/show.html.heex

```heex
<div class="container mx-auto px-4 sm:px-6 lg:px-8 py-6"> <h1 class="text-xl sm:text-2xl font-bold mb-4 sm:mb-6">Instagram Dashboard</h1> <!-- Stack panels vertically on mobile, side by side on larger screens --> <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6"> <!-- Instagram Status Panel --> <div class="bg-white shadow rounded-lg p-4 sm:p-6"> <%= if @connected do %> <div class="mb-4 sm:mb-6"> <p class="text-green-600 font-medium flex items-center text-sm sm:text-base"> <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /> </svg> Connected to Instagram </p> </div> <h2 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Recent Posts</h2> <%= if Enum.empty?(@recent_media) do %> <p class="text-gray-500 text-sm sm:text-base">No recent posts found</p> <% else %> <!-- Adjust grid columns based on screen size --> <div class="grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 gap-3 max-h-[400px] sm:max-h-[500px] lg:max-h-[600px] overflow-y-auto pr-1 sm:pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"> <%= for media <- @recent_media do %> <div class="border rounded-lg overflow-hidden hover:shadow-md transition-shadow"> <div class="relative aspect-square w-full"> <img src={media["media_url"] || media["thumbnail_url"]} alt={media["caption"] || "Instagram media"} class="absolute inset-0 w-full h-full object-cover" /> </div> <div class="p-2 sm:p-4"> <p class="text-xs sm:text-sm text-gray-600 truncate"><%= media["caption"] || "No caption" %></p> <p class="text-xs text-gray-500 mt-1 sm:mt-2"> Posted: <%= media["timestamp"] && Timex.from_iso8601!(media["timestamp"]) |> Timex.format!("{relative}", :relative) %> </p> </div> </div> <% end %> </div> <% end %> <% else %> <div class="text-center py-6 sm:py-8"> <h2 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Connect to Instagram</h2> <p class="text-gray-600 text-sm sm:text-base mb-4 sm:mb-6">You need to connect your Instagram account to use this feature.</p> <a href={~p"/instagram/connect"} class="inline-block px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors"> Connect Instagram Account </a> </div> <% end %> </div> <!-- Upload Form Panel --> <div class="bg-white shadow rounded-lg p-4 sm:p-6"> <h2 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Upload to Instagram</h2> <%= if @connected do %> <%= if @error do %> <div class="bg-red-100 border border-red-400 text-red-700 px-3 py-2 sm:px-4 sm:py-3 rounded mb-4 sm:mb-6 text-xs sm:text-sm" role="alert"> <p><%= @error %></p> </div> <% end %> <%= if @success do %> <div class="bg-green-100 border border-green-400 text-green-700 px-3 py-2 sm:px-4 sm:py-3 rounded mb-4 sm:mb-6 text-xs sm:text-sm" role="alert"> <p>Media successfully uploaded to Instagram!</p> </div> <% end %> <.form for={@changeset} action={~p"/instagram/upload"} multipart={true} class="space-y-3 sm:space-y-4"> <div> <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Media Type</label> <select name="upload_form[media_type]" class="mt-1 block w-full pl-3 pr-10 py-1.5 sm:py-2 text-xs sm:text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md"> <option value="IMAGE" selected={input_value(@changeset, :media_type) == "IMAGE"}>Image</option> <option value="VIDEO" selected={input_value(@changeset, :media_type) == "VIDEO"}>Video</option> <option value="CAROUSEL_ALBUM" selected={input_value(@changeset, :media_type) == "CAROUSEL_ALBUM"}>Album</option> </select> <.error field={@changeset[:media_type]} class="text-xs" /> </div> <div> <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Media File</label> <input type="file" name="upload_form[media]" accept="image/jpeg,image/png,video/mp4,video/mov,video/quicktime" class="mt-1 block w-full text-xs sm:text-sm text-gray-500 file:mr-3 file:sm:mr-4 file:py-1.5 file:sm:py-2 file:px-3 file:sm:px-4 file:rounded-full file:border-0 file:text-xs file:sm:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" required /> </div> <div> <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Caption</label> <textarea name="upload_form[caption]" rows="2" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-xs sm:text-sm" placeholder="Write a caption..."><%= input_value(@changeset, :caption) %></textarea> <.error field={@changeset[:caption]} class="text-xs" /> <p class="mt-1 text-xs text-gray-500">Max 2200 characters</p> </div> <!-- Adjust layout for form fields based on screen size --> <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4"> <div> <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Location</label> <input type="text" name="upload_form[location]" value={input_value(@changeset, :location)} class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-xs sm:text-sm" placeholder="Add a location..." /> </div> <div> <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Hashtags</label> <input type="text" name="upload_form[hashtags]" value={input_value(@changeset, :hashtags)} class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-xs sm:text-sm" placeholder="#nature #photography" /> <p class="mt-1 text-xs text-gray-500">Separate with spaces</p> </div> </div> <div class="flex items-center"> <input id="share_to_feed" name="upload_form[share_to_feed]" type="checkbox" checked={input_value(@changeset, :share_to_feed)} class="h-3 w-3 sm:h-4 sm:w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" /> <label for="share_to_feed" class="ml-2 block text-xs sm:text-sm text-gray-700"> Share to feed </label> </div> <div> <button type="submit" class="w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-xs sm:text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"> <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" /> </svg> Upload to Instagram </button> </div> </.form> <% else %> <div class="text-center py-6 sm:py-8 bg-gray-50 rounded-lg"> <p class="text-gray-600 text-sm sm:text-base mb-4">Connect your Instagram account to upload media.</p> <a href={~p"/instagram/connect"} class="inline-block px-4 py-2 bg-blue-600 text-white text-xs sm:text-sm rounded hover:bg-blue-700 transition-colors"> Connect Instagram Account </a> </div> <% end %> </div> </div> </div>
```

# lib/myapp_web/controllers/instagram_html/upload_form.html.heex

```heex
<h1 class="text-2xl font-bold mb-6">Upload to Instagram</h1> <div class="bg-white shadow rounded-lg p-6"> <%= if @connected do %> <div class="mb-6"> <a href={~p"/instagram"} class="text-blue-600 hover:underline"> ← Back to Instagram Dashboard </a> </div> <%= if @error do %> <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6" role="alert"> <p><%= @error %></p> </div> <% end %> <%= if @success do %> <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6" role="alert"> <p>Media successfully uploaded to Instagram!</p> </div> <% end %> <.form for={@changeset} action={~p"/instagram/upload"} multipart={true} class="space-y-6"> <div> <label class="block text-sm font-medium text-gray-700 mb-1">Media Type</label> <select name="upload_form[media_type]" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"> <option value="IMAGE" selected={input_value(@changeset, :media_type) == "IMAGE"}>Image</option> <option value="VIDEO" selected={input_value(@changeset, :media_type) == "VIDEO"}>Video</option> <option value="CAROUSEL_ALBUM" selected={input_value(@changeset, :media_type) == "CAROUSEL_ALBUM"}>Album</option> </select> <.error field={@changeset[:media_type]} /> </div> <div> <label class="block text-sm font-medium text-gray-700 mb-1">Media File</label> <input type="file" name="upload_form[media]" accept="image/jpeg,image/png,video/mp4,video/mov,video/quicktime" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" required /> </div> <div> <label class="block text-sm font-medium text-gray-700 mb-1">Caption</label> <textarea name="upload_form[caption]" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" placeholder="Write a caption..."><%= input_value(@changeset, :caption) %></textarea> <.error field={@changeset[:caption]} /> <p class="mt-1 text-sm text-gray-500">Max 2200 characters</p> </div> <div> <label class="block text-sm font-medium text-gray-700 mb-1">Location</label> <input type="text" name="upload_form[location]" value={input_value(@changeset, :location)} class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" placeholder="Add a location..." /> </div> <div> <label class="block text-sm font-medium text-gray-700 mb-1">Hashtags</label> <input type="text" name="upload_form[hashtags]" value={input_value(@changeset, :hashtags)} class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" placeholder="#nature #photography" /> <p class="mt-1 text-sm text-gray-500">Separate hashtags with spaces (#nature #travel)</p> </div> <div class="flex items-center"> <input id="share_to_feed" name="upload_form[share_to_feed]" type="checkbox" checked={input_value(@changeset, :share_to_feed)} class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" /> <label for="share_to_feed" class="ml-2 block text-sm text-gray-700"> Share to feed </label> </div> <div> <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"> Upload to Instagram </button> </div> </.form> <% else %> <div class="text-center py-8"> <p class="text-red-600 mb-6">You need to connect your Instagram account first.</p> <a href={~p"/instagram"} class="inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"> Go Back </a> </div> <% end %> </div>
```

# lib/myapp_web/controllers/landing/landing_controller.ex

```ex
defmodule MyappWeb.LandingController do use MyappWeb, :controller def index(conn, _params) do render(conn, :index, layout: false) end end
```

# lib/myapp_web/controllers/landing/landing_html.ex

```ex
defmodule MyappWeb.LandingHTML do use MyappWeb, :html embed_templates "landing_html/*" end
```

# lib/myapp_web/controllers/landing/landing_html/index.html.heex

```heex
<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <title>landingPage</title> <style> @import url('https://fonts.googleapis.com/css2?family=Geist:wght@100..900&display=swap'); @import url('https://unpkg.com/normalize.css') layer(normalize); @import url('https://fonts.googleapis.com/css2?family=Titan+One&display=swap'); @layer normalize, base, demo, stick, effect, scrollbar; .main-content-1 { width: 100%; height: 500vh; } .sticky { position: sticky; top: 0; height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; } .sticky-background { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 6vw; font-family: 'Titan One', cursive; color: var(--text-color); transition: color 0.3s ease; } .card-frame { position: absolute; width: 95vw; height: 30vw; display: flex; align-items: center; justify-content: space-between; z-index: 2; } .card { width: 24%; height: 100%; position: relative; transform-style: preserve-3d; transform: perspective(100vw) translateX(100vw) rotateY(180deg); transition: transform 0.3s ease-out; } .naver { border-radius: 3vw; } .front, .back { position: absolute; width: 100%; height: 100%; border-radius: 1vw; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); } .front { cursor: pointer; /* 클릭 가능하다는 힌트 */ } .front img { width: 60%; } .back { transform: rotateY(180deg); } .back img { width: 50%; } .card.instagram .front { background: var(--insta-gradient); } .card.youtube .front { background: var(--youtube-color); } .card.tiktok .front { background: var(--tiktok-color); } .card.naver .front { background: var(--naver-color); } @media screen and (orientation: portrait) { .card-frame { display: grid; height: initial; width: initial; grid-template-rows: repeat(2, 1fr); grid-template-columns: repeat(2, 1fr); gap: 10vw; justify-items: center; } .card { font-size: 20vw; width: 35vw; height: 50vw; } } @layer scrollbar { @property --hue { initial-value: 0; syntax: '<number>'; inherits: false; } @property --chroma { initial-value: 0; syntax: '<number>'; inherits: true; } [data-sync-scrollbar='true'] { scrollbar-color: oklch(var(--lightness) var(--chroma) var(--hue)) #0000; } @supports (animation-timeline: scroll()) and (animation-range: 0% 100%) { [data-sync-scrollbar='true'][data-animate='true'] { timeline-scope: --list; scrollbar-color: oklch(var(--lightness) var(--chroma, 0) var(--hue)) #0000; animation-name: change, chroma-on, chroma-off; animation-fill-mode: both; animation-timing-function: linear; animation-range: entry 50% exit 50%, entry 40% entry 50%, exit 30% exit 40%; animation-timeline: --list; ul { view-timeline: --list; } } } @keyframes change { to { --hue: var(--end); } } @keyframes chroma-on { to { --chroma: 0.3; } } @keyframes chroma-off { to { --chroma: 0; } } } @layer effect { :root { --start: 0; --end: 360; --lightness: 75%; --base-chroma: 0.3; } [data-theme='dark'] { --lightness: 75%; } [data-theme='light'] { --lightness: 65%; } @media (prefers-color-scheme: dark) { --lightness: 75%; } ul { --step: calc((var(--end) - var(--start)) / (var(--count) - 1)); } li:not(:last-of-type) { color: oklch(var(--lightness) var(--base-chroma) calc(var(--start) + (var(--step) * var(--i)))); } } @layer stick { section:first-of-type { --font-level: 6; display: flex; line-height: 1.25; width: 100%; padding-left: 5rem; } section:last-of-type { min-height: 100vh; display: flex; place-items: center; width: 100%; justify-content: center; h2 { --font-level: 6; } } main { width: 100%; } section:first-of-type h2 { position: sticky; top: calc(50% - 0.5lh); font-size: inherit; margin: 0; display: inline-block; height: fit-content; font-weight: 600; } ul { font-weight: 600; padding-inline: 0; margin: 0; list-style-type: none; } h2, li:last-of-type { background: linear-gradient(var(--text-color) 50%, var(--bg-color)); background-clip: text; color: transparent; transition: background 0.3s ease; } } @layer demo { header { min-height: 100vh; display: flex; place-items: center; width: 100%; padding-inline: 5rem; } h1 { --font-size-min: 24; --font-level: 7; text-wrap: pretty; line-height: 0.8; margin: 0; background: linear-gradient(var(--text-color) 80%, var(--bg-color)); background-clip: text; color: transparent; transition: background 0.3s ease; } } @layer base { :root { --font-size-min: 14; --font-size-max: 20; --font-ratio-min: 1.1; --font-ratio-max: 1.33; --font-width-min: 375; --font-width-max: 1500; --insta-gradient: linear-gradient(45deg, #F58529, #DD2A7B, #8134AF); --youtube-color: #FF0000; --tiktok-color: #000000; --naver-color: #03C75A; --text-color: white; --bg-color: black; --grid-color: rgba(255, 255, 255, 0.3); } [data-theme='light'] { --text-color: black; --bg-color: white; --grid-color: rgba(0, 0, 0, 0.3); } [data-theme='dark'] { --text-color: white; --bg-color: black; --grid-color: rgba(255, 255, 255, 0.3); } html { color-scheme: light dark; transition: background-color 0.3s ease; } [data-theme='light'] { color-scheme: light only; } [data-theme='dark'] { color-scheme: dark only; } :where(.fluid) { --fluid-min: calc(var(--font-size-min) * pow(var(--font-ratio-min), var(--font-level, 0))); --fluid-max: calc(var(--font-size-max) * pow(var(--font-ratio-max), var(--font-level, 0))); --fluid-preferred: calc((var(--fluid-max) - var(--fluid-min)) / (var(--font-width-max) - var(--font-width-min))); --fluid-type: clamp( (var(--fluid-min) / 16) * 1rem, ((var(--fluid-min) / 16) * 1rem) - (((var(--fluid-preferred) * var(--font-width-min)) / 16) * 1rem) + (var(--fluid-preferred) * var(--variable-unit, 100vi)), (var(--fluid-max) / 16) * 1rem ); font-size: var(--fluid-type); } *, *:after, *:before { box-sizing: border-box; } body { display: grid; place-items: center; color: var(--text-color); background: var(--bg-color); transition: background-color 0.3s ease; min-height: 100vh; font-family: 'Geist', 'SF Pro Text', 'SF Pro Icons', 'AOS Icons', 'Helvetica Neue', Helvetica, Arial, sans-serif, system-ui; position: relative; } body::before { --size: 45px; content: ''; height: 100vh; width: 100vw; position: fixed; background: linear-gradient(90deg, var(--grid-color) 1px, transparent 1px var(--size)) 50% 50% / var(--size) var(--size), linear-gradient(var(--grid-color) 1px, transparent 1px var(--size)) 50% 50% / var(--size) var(--size); mask: linear-gradient(-20deg, transparent 50%, white); top: 0; transform-style: flat; pointer-events: none; z-index: -1; transition: background 0.3s ease; } .theme-toggle { position: fixed; top: 20px; right: 20px; z-index: 1000; } .theme-toggle-button { width: 40px; height: 40px; background: none; border: none; cursor: pointer; padding: 0; display: flex; align-items: center; justify-content: center; transition: transform 0.3s ease; } .theme-toggle-button::before { content: '☀️'; font-size: 28px; color: var(--text-color); transition: opacity 0.3s ease, transform 0.3s ease; } [data-theme='dark'] .theme-toggle-button::before { content: '🌙'; opacity: 1; } .theme-toggle-button:hover { transform: scale(1.4); } h1, h2, li { color: var(--text-color); transition: color 0.3s ease, background 0.3s ease; } .back { position: absolute; width: 100%; height: 100%; border-radius: 1vw; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); background: var(--bg-color); /* 테마에 따라 배경색 동적으로 적용 */ transition: background 0.3s ease; /* 부드러운 전환 효과 추가 */ } } </style> </head> <body data-theme="dark"> <div class="theme-toggle"> <button class="theme-toggle-button" aria-label="Toggle theme"></button> </div> <header> <h1 class="fluid">All for <br />creators.</h1> </header> <div class="main-content-1"> <div class="sticky"> <div class="sticky-background"> upload your creation onetime, <br />upload to the world. </div> <div class="card-frame"> <div class="card instagram"> <div class="front" data-route="/instagram"> <img src="/images/instagram.png" alt="Instagram" loading="lazy" /> </div> <div class="back"> <img src="/images/logos/ingrey.svg" alt="CreatorSync Logo" loading="lazy" /> </div> </div> <div class="card youtube"> <div class="front" data-route="/test"> <img src="/images/youtube.png" alt="YouTube" loading="lazy" /> </div> <div class="back"> <img src="/images/logos/ingrey.svg" alt="CreatorSync Logo" loading="lazy" /> </div> </div> <div class="card tiktok"> <div class="front" data-route="/tiktok"> <img src="/images/tiktok_logo.png" alt="TikTok" loading="lazy" /> </div> <div class="back"> <img src="/images/logos/ingrey.svg" alt="CreatorSync Logo" loading="lazy" /> </div> </div> <div class="card naver"> <div class="front" data-route="/naver"> <img class="naver" src="/images/naver_logo.png" alt="Naver Clip" loading="lazy" /> </div> <div class="back"> <img src="/images/logos/ingrey.svg" alt="CreatorSync Logo" loading="lazy" /> </div> </div> </div> </div> </div> <main> <section class="content fluid"> <h2>you can do&nbsp</h2> <ul style="--count: 22"> <li style="--i: 0">easier.</li> <li style="--i: 1">faster.</li> <li style="--i: 2">better.</li> <li style="--i: 3">simpler.</li> <li style="--i: 4">smarter.</li> <li style="--i: 5">clearer.</li> <li style="--i: 6">quicker.</li> <li style="--i: 7">everything.</li> </ul> </section> <section> <h2 class="fluid">coming soon.</h2> </section> </main> <script> const themeToggle = document.querySelector('.theme-toggle-button'); const body = document.body; const currentTheme = localStorage.getItem('theme') || 'dark'; body.setAttribute('data-theme', currentTheme); themeToggle.addEventListener('click', () => { const currentTheme = body.getAttribute('data-theme'); const newTheme = currentTheme === 'light' ? 'dark' : 'light'; body.setAttribute('data-theme', newTheme); localStorage.setItem('theme', newTheme); }); class CardFlipOnScroll { constructor(wrapper, sticky) { this.wrapper = wrapper; this.sticky = sticky; this.cards = sticky.querySelectorAll('.card'); this.length = this.cards.length; this.start = 0; this.end = 0; this.step = 0; this.initClickEvents(); // 클릭 이벤트 초기화 } init() { this.start = this.wrapper.offsetTop - 100; this.end = this.wrapper.offsetTop + this.wrapper.offsetHeight - innerHeight * 1.2; this.step = (this.end - this.start) / (this.length * 2); } animate() { this.cards.forEach((card, i) => { const s = this.start + this.step * i; const e = s + this.step * (this.length + 1); if (scrollY <= s) { card.style.transform = ` perspective(100vw) translateX(100vw) rotateY(180deg) `; } else if (scrollY > s && scrollY <= e - this.step) { card.style.transform = ` perspective(100vw) translateX(${100 + (scrollY - s) / (e - s) * -100}vw) rotateY(180deg) `; } else if (scrollY > e - this.step && scrollY <= e) { card.style.transform = ` perspective(100vw) translateX(${100 + (scrollY - s) / (e - s) * -100}vw) rotateY(${180 + -(scrollY - (e - this.step)) / this.step * 180}deg) `; } else if (scrollY > e) { card.style.transform = ` perspective(100vw) translateX(0vw) rotateY(0deg) `; } }); } initClickEvents() { this.cards.forEach(card => { const front = card.querySelector('.front'); front.addEventListener('click', () => { const route = front.getAttribute('data-route'); if (route) { window.location.href = route; // 경로로 이동 } }); }); } } const mainContent1 = document.querySelector('.main-content-1'); const sticky = document.querySelector('.sticky'); const cardFlipOnScroll = new CardFlipOnScroll(mainContent1, sticky); cardFlipOnScroll.init(); let ticking = false; window.addEventListener('scroll', () => { if (!ticking) { requestAnimationFrame(() => { cardFlipOnScroll.animate(); ticking = false; }); ticking = true; } }); window.addEventListener('resize', debounce(() => cardFlipOnScroll.init(), 200)); function debounce(func, wait) { let timeout; return function () { clearTimeout(timeout); timeout = setTimeout(func, wait); }; } </script> </body> </html>
```

# lib/myapp_web/controllers/page_controller.ex

```ex
defmodule MyappWeb.PageController do use MyappWeb, :controller def home(conn, _params) do render(conn, :home, layout: false) end end
```

# lib/myapp_web/controllers/page_html.ex

```ex
defmodule MyappWeb.PageHTML do use MyappWeb, :html embed_templates "page_html/*" end
```

# lib/myapp_web/controllers/page_html/home.html.heex

```heex
<div class="min-h-screen relative overflow-hidden"> <!-- Animated gradient background --> <div class="absolute inset-0 bg-gradient-to-br from-gray-900 via-blue-900 to-blue-800 bg-gradient-size animate-gradient-background"> </div> <!-- Animated grid overlay with doubled height for seamless scrolling --> <div class="absolute inset-0"> <div class="absolute inset-0 bg-[url('/images/grid.svg')] bg-repeat animate-grid-flow" style="height: 200%" > </div> </div> <!-- Content --> <div class="relative"> <div class="mx-auto max-w-7xl px-6 py-24 sm:py-32 lg:px-8 text-center"> <h1 class="text-4xl font-bold tracking-tight text-white sm:text-6xl"> A powerful suite of <br /> user-centric products </h1> <p class="mt-6 text-lg leading-8 text-gray-300"> Our landing page template works on all devices, so you only have to set it up once, <br /> and get beautiful results forever. </p> <div class="mt-10 flex items-center justify-center gap-x-6"> <a href="#" class="relative rounded-md bg-gradient-to-r from-indigo-600 via-blue-600 to-indigo-600 bg-[length:200%_auto] animate-button-shine px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:scale-105 animate-button-glow transition-transform duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600" > Get Started Free → </a> <a href="#" class="text-sm font-semibold leading-6 text-white hover:text-indigo-300 transition-colors duration-200" > Read Docs </a> </div> <!-- Integration diagram --> <div class="mt-20 relative"> <div class="flex justify-center items-center gap-16 relative"> <!-- Left side --> <div class="flex items-center gap-8"> <div class="w-12 h-12 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center"> <svg class="w-6 h-6 text-purple-500" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" /> </svg> </div> <div class="w-12 h-12 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center"> <svg class="w-6 h-6 text-gray-400" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.022A9.607 9.607 0 0112 6.82c.85.004 1.705.114 2.504.336 1.909-1.29 2.747-1.022 2.747-1.022.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.137 20.167 22 16.42 22 12c0-5.523-4.477-10-10-10z" /> </svg> </div> </div> <!-- Center --> <div class="w-16 h-16 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center border-2 border-blue-500/30"> <svg class="w-8 h-8 text-blue-500" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z" /> <path d="M12 8l-4 4 4 4 4-4-4-4z" fill="white" /> </svg> </div> <!-- Right side --> <div class="flex items-center gap-8"> <div class="w-12 h-12 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center"> <svg class="w-6 h-6 text-red-500" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 2C6.48 2 2 6.48 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.022A9.607 9.607 0 0112 6.82c.85.004 1.705.114 2.504.336 1.909-1.29 2.747-1.022 2.747-1.022.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.137 20.167 22 16.42 22 12c0-5.523-4.477-10-10-10z" /> </svg> </div> <div class="w-12 h-12 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center"> <svg class="w-6 h-6 text-green-500" viewBox="0 0 24 24" fill="currentColor"> <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" /> </svg> </div> </div> <!-- Connecting lines --> <div class="absolute inset-0 -z-10"> <svg class="w-full h-full" viewBox="0 0 400 100" preserveAspectRatio="none"> <path d="M100,50 L180,50" stroke="rgba(59, 130, 246, 0.2)" stroke-width="2" /> <path d="M220,50 L300,50" stroke="rgba(59, 130, 246, 0.2)" stroke-width="2" /> <circle cx="200" cy="50" r="4" fill="rgba(59, 130, 246, 0.2)" /> </svg> </div> </div> </div> </div> </div> <!-- Animated logo bar --> <div class="relative mt-20 w-full overflow-hidden bg-gray-900/30 py-12 backdrop-blur-sm"> <div class="flex animate-logo-scroll"> <!-- First set of logos --> <div class="flex min-w-full justify-around items-center px-4"> <img src="https://svgl.app/library/facebook.svg" alt="Facebook" class="h-8 opacity-40 hover:opacity-100 transition-opacity duration-300" /> <img src="https://svgl.app/library/airbnb.svg" alt="Airbnb" class="h-8 opacity-40 hover:opacity-100 transition-opacity duration-300" /> <img src="https://svgl.app/library/spotify.svg" alt="Spotify" class="h-8 opacity-40 hover:opacity-100 transition-opacity duration-300" /> <img src="https://svgl.app/library/discord.svg" alt="Discord" class="h-8 opacity-40 hover:opacity-100 transition-opacity duration-300" /> <img src="https://svgl.app/library/netflix.svg" alt="Netflix" class="h-8 opacity-40 hover:opacity-100 transition-opacity duration-300" /> <img src="https://svgl.app/library/github-dark.svg" alt="GitHub" class="h-8 opacity-40 hover:opacity-100 transition-opacity duration-300" /> </div> <!-- Duplicate set for seamless scrolling --> <div class="flex min-w-full justify-around items-center px-4"> <img src="https://svgl.app/library/facebook.svg" alt="Facebook" class="h-8 opacity-40 hover:opacity-100 transition-opacity duration-300" /> <img src="https://svgl.app/library/airbnb.svg" alt="Airbnb" class="h-8 opacity-40 hover:opacity-100 transition-opacity duration-300" /> <img src="https://svgl.app/library/spotify.svg" alt="Spotify" class="h-8 opacity-40 hover:opacity-100 transition-opacity duration-300" /> <img src="https://svgl.app/library/discord.svg" alt="Discord" class="h-8 opacity-40 hover:opacity-100 transition-opacity duration-300" /> <img src="https://svgl.app/library/netflix.svg" alt="Netflix" class="h-8 opacity-40 hover:opacity-100 transition-opacity duration-300" /> <img src="https://svgl.app/library/github-dark.svg" alt="GitHub" class="h-8 opacity-40 hover:opacity-100 transition-opacity duration-300" /> </div> </div> </div> <!-- Testimonials Section --> <div class="relative mt-20 pb-20"> <div class="mx-auto max-w-7xl px-6 lg:px-8"> <div class="text-center mb-12"> <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl"> Top startups love Simple </h2> </div> <!-- Testimonial Cards Container with Animation --> <div class="relative overflow-hidden"> <div class="flex gap-6 animate-scroll hover:pause-animation" style="width: max-content"> <!-- First set of testimonials --> <!-- Testimonial 1 --> <div class="flex-none w-96 p-6 bg-white/5 backdrop-blur-sm rounded-2xl"> <div class="flex items-center gap-4 mb-4"> <div class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center"> <svg class="w-6 h-6 text-blue-400" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /> <path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /> </svg> </div> <div> <h3 class="text-lg font-semibold text-white">Michele Lex</h3> <p class="text-sm text-gray-400">@MicheleLex</p> </div> </div> <p class="text-gray-300"> I've tried several website builders before, but none were as user-friendly and versatile as this one. From design to functionality, it exceeded my expectations! </p> <p class="text-sm text-gray-400 mt-4">Mar 04, 2027</p> </div> <!-- Testimonial 2 --> <div class="flex-none w-96 p-6 bg-white/5 backdrop-blur-sm rounded-2xl"> <div class="flex items-center gap-4 mb-4"> <div class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center"> <svg class="w-6 h-6 text-green-400" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /> <path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /> </svg> </div> <div> <h3 class="text-lg font-semibold text-white">Michael Ross</h3> <p class="text-sm text-gray-400">@michaelross</p> </div> </div> <p class="text-gray-300"> Simple lives up to its name in every way. It's incredibly easy to use yet powerful enough to handle all my tasks effortlessly. It's become an essential part of my daily routine. </p> <p class="text-sm text-gray-400 mt-4">Jan 15, 2027</p> </div> <!-- Testimonial 3 --> <div class="flex-none w-96 p-6 bg-white/5 backdrop-blur-sm rounded-2xl"> <div class="flex items-center gap-4 mb-4"> <div class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center"> <svg class="w-6 h-6 text-purple-400" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /> <path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /> </svg> </div> <div> <h3 class="text-lg font-semibold text-white">Peter Lowe</h3> <p class="text-sm text-gray-400">@peterlowe</p> </div> </div> <p class="text-gray-300"> As a founder, having a visually appealing and user-friendly website is essential. This tool not only helped me achieve that but also improved my site performance and SEO. </p> <p class="text-sm text-gray-400 mt-4">May 19, 2027</p> </div> <!-- Second set of testimonials (duplicate) --> <!-- Testimonial 1 duplicate --> <div class="flex-none w-96 p-6 bg-white/5 backdrop-blur-sm rounded-2xl"> <div class="flex items-center gap-4 mb-4"> <div class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center"> <svg class="w-6 h-6 text-blue-400" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /> <path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /> </svg> </div> <div> <h3 class="text-lg font-semibold text-white">Michele Lex</h3> <p class="text-sm text-gray-400">@MicheleLex</p> </div> </div> <p class="text-gray-300"> I've tried several website builders before, but none were as user-friendly and versatile as this one. From design to functionality, it exceeded my expectations! </p> <p class="text-sm text-gray-400 mt-4">Mar 04, 2027</p> </div> <!-- Testimonial 2 duplicate --> <div class="flex-none w-96 p-6 bg-white/5 backdrop-blur-sm rounded-2xl"> <div class="flex items-center gap-4 mb-4"> <div class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center"> <svg class="w-6 h-6 text-green-400" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /> <path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /> </svg> </div> <div> <h3 class="text-lg font-semibold text-white">Michael Ross</h3> <p class="text-sm text-gray-400">@michaelross</p> </div> </div> <p class="text-gray-300"> Simple lives up to its name in every way. It's incredibly easy to use yet powerful enough to handle all my tasks effortlessly. It's become an essential part of my daily routine. </p> <p class="text-sm text-gray-400 mt-4">Jan 15, 2027</p> </div> <!-- Testimonial 3 duplicate --> <div class="flex-none w-96 p-6 bg-white/5 backdrop-blur-sm rounded-2xl"> <div class="flex items-center gap-4 mb-4"> <div class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center"> <svg class="w-6 h-6 text-purple-400" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /> <path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /> </svg> </div> <div> <h3 class="text-lg font-semibold text-white">Peter Lowe</h3> <p class="text-sm text-gray-400">@peterlowe</p> </div> </div> <p class="text-gray-300"> As a founder, having a visually appealing and user-friendly website is essential. This tool not only helped me achieve that but also improved my site performance and SEO. </p> <p class="text-sm text-gray-400 mt-4">May 19, 2027</p> </div> </div> </div> </div> </div> <!-- Pricing Section --> <div class="relative mt-20 pb-20"> <div class="mx-auto max-w-7xl px-6 lg:px-8"> <div class="text-center"> <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">Pricing plans</h2> <p class="mt-4 text-lg text-gray-300"> All the lorem ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. </p> </div> <!-- Toggle switch --> <div class="mt-8 flex justify-center items-center gap-x-4"> <span class="text-sm text-gray-300">Monthly</span> <label class="relative inline-flex items-center cursor-pointer"> <input type="checkbox" value="" class="sr-only peer" /> <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"> </div> </label> <span class="text-sm text-gray-300"> Yearly <span class="text-indigo-400">(-20%)</span> </span> </div> <!-- Pricing cards --> <div class="isolate mx-auto mt-10 grid max-w-md grid-cols-1 gap-8 lg:mx-0 lg:max-w-none lg:grid-cols-3"> <!-- Pro --> <div class="rounded-3xl p-8 ring-1 ring-white/10 backdrop-blur-sm bg-gray-900/30 sm:p-10"> <h3 class="text-base font-semibold leading-7 text-white">Pro</h3> <p class="mt-4 flex items-baseline gap-x-2"> <span class="text-5xl font-bold tracking-tight text-white">$24</span> <span class="text-base text-gray-400">/mo</span> </p> <p class="mt-6 text-base leading-7 text-gray-300">Everything at your fingertips.</p> <a href="#" class="mt-6 block rounded-md py-2 px-3 text-center text-sm font-semibold leading-6 text-white bg-gradient-to-r from-indigo-600/50 via-blue-600/50 to-indigo-600/50 bg-[length:200%_auto] animate-button-shine hover:scale-105 animate-button-glow transition-transform duration-200" > Get Started → </a> <ul role="list" class="mt-8 space-y-3 text-sm leading-6 text-gray-300"> <li class="flex gap-x-3 items-center"> <svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /> </svg> 100 Social Connections </li> <li class="flex gap-x-3 items-center"> <svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /> </svg> 4 Custom Domains </li> <li class="flex gap-x-3 items-center"> <svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /> </svg> Unlimited User Role Management </li> <li class="flex gap-x-3 items-center"> <svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /> </svg> 1 External Database </li> </ul> </div> <!-- Team --> <div class="rounded-3xl p-8 ring-2 ring-indigo-500 backdrop-blur-sm bg-gray-900/30 sm:p-10"> <h3 class="text-base font-semibold leading-7 text-white">Team</h3> <p class="mt-4 flex items-baseline gap-x-2"> <span class="text-5xl font-bold tracking-tight text-white">$49</span> <span class="text-base text-gray-400">/mo</span> </p> <p class="mt-6 text-base leading-7 text-gray-300">Everything at your fingertips.</p> <a href="#" class="mt-6 block rounded-md py-2 px-3 text-center text-sm font-semibold leading-6 bg-gradient-to-r from-indigo-600 via-blue-600 to-indigo-600 bg-[length:200%_auto] animate-button-shine hover:scale-105 animate-button-glow transition-transform duration-200" > Get Started → </a> <ul role="list" class="mt-8 space-y-3 text-sm leading-6 text-gray-300"> <li class="flex gap-x-3 items-center"> <svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /> </svg> 250 Social Connections </li> <li class="flex gap-x-3 items-center"> <svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /> </svg> Unlimited Custom Domains </li> <li class="flex gap-x-3 items-center"> <svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /> </svg> Unlimited User Role Management </li> <li class="flex gap-x-3 items-center"> <svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /> </svg> 5 External Databases </li> </ul> </div> <!-- Enterprise --> <div class="rounded-3xl p-8 ring-1 ring-white/10 backdrop-blur-sm bg-gray-900/30 sm:p-10"> <h3 class="text-base font-semibold leading-7 text-white">Enterprise</h3> <p class="mt-4 flex items-baseline gap-x-2"> <span class="text-5xl font-bold tracking-tight text-white">$79</span> <span class="text-base text-gray-400">/mo</span> </p> <p class="mt-6 text-base leading-7 text-gray-300">Everything at your fingertips.</p> <a href="#" class="mt-6 block rounded-md py-2 px-3 text-center text-sm font-semibold leading-6 text-white bg-gradient-to-r from-indigo-600/50 via-blue-600/50 to-indigo-600/50 bg-[length:200%_auto] animate-button-shine hover:scale-105 animate-button-glow transition-transform duration-200" > Get Started → </a> <ul role="list" class="mt-8 space-y-3 text-sm leading-6 text-gray-300"> <li class="flex gap-x-3 items-center"> <svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /> </svg> Unlimited Social Connections </li> <li class="flex gap-x-3 items-center"> <svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /> </svg> Unlimited Custom Domains </li> <li class="flex gap-x-3 items-center"> <svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /> </svg> Unlimited User Role Management </li> <li class="flex gap-x-3 items-center"> <svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor" > <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /> </svg> Unlimited External Databases </li> </ul> </div> </div> </div> </div> </div>
```

# lib/myapp_web/controllers/pricing_controller.ex

```ex
defmodule MyappWeb.PricingController do use MyappWeb, :controller def index(conn, _params) do render(conn, :index) end end
```

# lib/myapp_web/controllers/pricing_html.ex

```ex
defmodule MyappWeb.PricingHTML do use MyappWeb, :html embed_templates "pricing_html/*" end
```

# lib/myapp_web/controllers/pricing_html/index.html.heex

```heex
<div class="bg-gradient-to-b from-white to-blue-50"> <!-- Pricing Header --> <div class="max-w-7xl mx-auto pt-16 pb-12 px-4 sm:px-6 lg:px-8 text-center"> <h1 class="text-4xl font-extrabold text-gray-900 sm:text-5xl sm:tracking-tight lg:text-6xl"> Simple, transparent pricing </h1> <p class="mt-6 max-w-2xl mx-auto text-xl text-gray-500"> Choose the plan that's right for you and your business. </p> <!-- Billing Toggle --> <div class="mt-12 flex justify-center"> <div class="relative bg-white p-1 rounded-lg inline-flex shadow-sm"> <button type="button" class="relative py-2 px-6 border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 whitespace-nowrap focus:outline-none focus:z-10 sm:w-auto" > Monthly billing </button> <button type="button" class="ml-0.5 relative py-2 px-6 border-transparent text-sm font-medium rounded-md text-gray-700 whitespace-nowrap focus:outline-none focus:z-10 sm:w-auto" > Annual billing </button> </div> <div class="ml-4 flex items-center"> <span class="text-sm text-gray-500">Save 20%</span> <span class="ml-2 px-2 py-0.5 flex items-center text-xs font-semibold bg-green-100 text-green-800 rounded-full"> Best value </span> </div> </div> </div> <!-- Pricing Tiers --> <div class="max-w-7xl mx-auto pb-24 px-4 sm:px-6 lg:px-8"> <div class="mt-12 space-y-12 lg:space-y-0 lg:grid lg:grid-cols-3 lg:gap-x-8"> <!-- Basic Tier --> <div class="relative flex flex-col rounded-2xl border border-gray-200 bg-white p-8 shadow-sm"> <div class="flex-1"> <h3 class="text-xl font-semibold text-gray-900">Basic</h3> <p class="mt-4 flex items-baseline text-gray-900"> <span class="text-5xl font-extrabold tracking-tight">$19</span> <span class="ml-1 text-xl font-semibold">/month</span> </p> <p class="mt-6 text-gray-500">The essentials to get started with our platform.</p> <!-- Feature List --> <ul role="list" class="mt-6 space-y-4"> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">5 LLC templates</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">Basic document storage</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">Email support</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">Single user</span> </li> </ul> </div> <a href="#" class="mt-8 inline-flex w-full items-center justify-center rounded-md border border-gray-300 bg-white px-5 py-3 text-base font-medium text-blue-600 hover:bg-gray-50 hover:text-blue-700" > Get started with Basic </a> </div> <!-- Pro Tier (Highlighted) --> <div class="relative flex flex-col rounded-2xl border-2 border-blue-500 bg-white p-8 shadow-xl"> <div class="absolute -top-5 left-1/2 -translate-x-1/2 transform rounded-full bg-blue-600 py-1.5 px-4"> <p class="text-xs font-semibold uppercase tracking-wide text-white">Most popular</p> </div> <div class="flex-1"> <h3 class="text-xl font-semibold text-gray-900">Pro</h3> <p class="mt-4 flex items-baseline text-gray-900"> <span class="text-5xl font-extrabold tracking-tight">$49</span> <span class="ml-1 text-xl font-semibold">/month</span> </p> <p class="mt-6 text-gray-500">Perfect for growing businesses with advanced needs.</p> <!-- Feature List --> <ul role="list" class="mt-6 space-y-4"> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">All Basic features</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">20 LLC templates</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">Advanced document management</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">Priority email & chat support</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">Up to 5 team members</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">API access</span> </li> </ul> </div> <a href="#" class="mt-8 inline-flex w-full items-center justify-center rounded-md border border-transparent bg-blue-600 px-5 py-3 text-base font-medium text-white hover:bg-blue-700" > Get started with Pro </a> </div> <!-- Enterprise Tier --> <div class="relative flex flex-col rounded-2xl border border-gray-200 bg-white p-8 shadow-sm"> <div class="flex-1"> <h3 class="text-xl font-semibold text-gray-900">Enterprise</h3> <p class="mt-4 flex items-baseline text-gray-900"> <span class="text-5xl font-extrabold tracking-tight">$99</span> <span class="ml-1 text-xl font-semibold">/month</span> </p> <p class="mt-6 text-gray-500"> Advanced features for enterprises with complex requirements. </p> <!-- Feature List --> <ul role="list" class="mt-6 space-y-4"> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">All Pro features</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">Unlimited LLC templates</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">Advanced analytics</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">Dedicated account manager</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">Unlimited team members</span> </li> <li class="flex"> <svg class="flex-shrink-0 h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> </svg> <span class="ml-3 text-gray-500">Custom integrations</span> </li> </ul> </div> <a href="#" class="mt-8 inline-flex w-full items-center justify-center rounded-md border border-gray-300 bg-white px-5 py-3 text-base font-medium text-blue-600 hover:bg-gray-50 hover:text-blue-700" > Contact sales </a> </div> </div> </div> <!-- FAQ Section --> <div class="max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:py-24 lg:px-8"> <div class="max-w-3xl mx-auto divide-y-2 divide-gray-200"> <h2 class="text-3xl font-extrabold text-gray-900 sm:text-4xl"> Frequently asked questions </h2> <dl class="mt-6 space-y-6 divide-y divide-gray-200"> <div class="pt-6"> <dt class="text-lg"> <button type="button" class="text-left w-full flex justify-between items-start text-gray-400" aria-controls="faq-0" aria-expanded="false" > <span class="font-medium text-gray-900">What forms of payment do you accept?</span> <span class="ml-6 h-7 flex items-center"> <svg class="h-6 w-6 transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" > <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /> </svg> </span> </button> </dt> <dd class="mt-2 pr-12" id="faq-0"> <p class="text-base text-gray-500"> We accept all major credit cards, PayPal, and bank transfers for annual plans. Contact our sales team for more information. </p> </dd> </div> <div class="pt-6"> <dt class="text-lg"> <button type="button" class="text-left w-full flex justify-between items-start text-gray-400" aria-controls="faq-1" aria-expanded="false" > <span class="font-medium text-gray-900"> Can I cancel my subscription at any time? </span> <span class="ml-6 h-7 flex items-center"> <svg class="h-6 w-6 transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" > <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /> </svg> </span> </button> </dt> <dd class="mt-2 pr-12" id="faq-1"> <p class="text-base text-gray-500"> Yes, you can cancel your subscription at any time. Your service will continue until the end of your billing period, and you won't be charged again. </p> </dd> </div> <div class="pt-6"> <dt class="text-lg"> <button type="button" class="text-left w-full flex justify-between items-start text-gray-400" aria-controls="faq-2" aria-expanded="false" > <span class="font-medium text-gray-900"> Do you offer discounts for non-profits or educational institutions? </span> <span class="ml-6 h-7 flex items-center"> <svg class="h-6 w-6 transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" > <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /> </svg> </span> </button> </dt> <dd class="mt-2 pr-12" id="faq-2"> <p class="text-base text-gray-500"> Yes, we offer special pricing for non-profit organizations, educational institutions, and startups. Please contact our sales team for more information. </p> </dd> </div> <div class="pt-6"> <dt class="text-lg"> <button type="button" class="text-left w-full flex justify-between items-start text-gray-400" aria-controls="faq-3" aria-expanded="false" > <span class="font-medium text-gray-900"> Can I upgrade or downgrade my plan later? </span> <span class="ml-6 h-7 flex items-center"> <svg class="h-6 w-6 transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" > <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /> </svg> </span> </button> </dt> <dd class="mt-2 pr-12" id="faq-3"> <p class="text-base text-gray-500"> Absolutely! You can upgrade your plan at any time and your new features will be immediately available. If you downgrade, the changes will take effect at the start of your next billing cycle. </p> </dd> </div> </dl> </div> </div> <!-- CTA Section --> <div class="bg-blue-700"> <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8 lg:flex lg:items-center lg:justify-between"> <h2 class="text-3xl font-extrabold tracking-tight text-white sm:text-4xl"> <span class="block">Ready to get started?</span> <span class="block text-blue-300">Start your free 14-day trial today.</span> </h2> <div class="mt-8 flex lg:mt-0 lg:flex-shrink-0"> <div class="inline-flex rounded-md shadow"> <a href="#" class="inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-blue-600 bg-white hover:bg-blue-50" > Get started </a> </div> <div class="ml-3 inline-flex rounded-md shadow"> <a href="#" class="inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700" > See demo </a> </div> </div> </div> </div> </div> <!-- Add JavaScript for the FAQs --> <script> document.addEventListener('DOMContentLoaded', function() { // Get all FAQ buttons const faqButtons = document.querySelectorAll('dt button'); // Add click event listeners to each button faqButtons.forEach((button, index) => { button.addEventListener('click', function() { // Toggle aria-expanded const expanded = this.getAttribute('aria-expanded') === 'true'; this.setAttribute('aria-expanded', !expanded); // Get the corresponding dd element const answer = document.getElementById(`faq-${index}`); // Toggle its visibility if (expanded) { answer.style.display = 'none'; this.querySelector('svg').classList.remove('rotate-180'); } else { answer.style.display = 'block'; this.querySelector('svg').classList.add('rotate-180'); } }); }); }); </script>
```

# lib/myapp_web/controllers/privacy_policy_controller.ex

```ex
defmodule MyappWeb.PrivacyPolicyController do use MyappWeb, :controller def page(conn, %{"version" => version}) do case Myapp.PrivacyPolicy.get_privacy_policy(version) do {:ok, privacy_policy} -> render(conn, :page, privacy_policy: privacy_policy) {:error, :not_found} -> conn |> put_status(:not_found) |> render(:page, privacy_policy: "Privacy policy not found") {:error, :invalid_version} -> conn |> put_status(:bad_request) |> render(:page, privacy_policy: "Invalid privacy policy version") {:error, :invalid_json} -> conn |> put_status(:internal_server_error) |> render(:page, privacy_policy: "The privacy policy file contains invalid JSON") {:error, _} -> conn |> put_status(:internal_server_error) |> render(:page, privacy_policy: "An error occurred while loading the privacy policy") end end end
```

# lib/myapp_web/controllers/privacy_policy_html.ex

```ex
defmodule MyappWeb.PrivacyPolicyHTML do use MyappWeb, :html embed_templates "privacy_policy_html/*" end
```

# lib/myapp_web/controllers/privacy_policy_html/page.html.heex

```heex
<div class="max-w-4xl mx-auto px-4 py-8 text-gray-900 dark:text-gray-100"> <%= if is_binary(@privacy_policy) do %> <div class="p-6 bg-red-50 dark:bg-red-900 rounded-lg mb-8"> <h1 class="text-3xl font-bold mb-4 text-red-700 dark:text-red-300">Error</h1> <p class="text-lg text-red-600 dark:text-red-200">{@privacy_policy}</p> </div> <% else %> <h1 class="text-3xl font-bold mb-8">{@privacy_policy["document"]["index"]["title"]}</h1> <nav class="mb-8 p-6 bg-gray-100 dark:bg-gray-800 rounded-lg shadow-sm"> <%= if @privacy_policy["document"]["index"] do %> <%= if @privacy_policy["document"]["index"]["title"] do %> <ol class="list-decimal list-inside space-y-2"> <%= for item <- @privacy_policy["document"]["index"]["items"] do %> <li> <a href={item["ref"]} class="text-blue-600 dark:text-blue-400 hover:underline"> {item["title"]} </a> </li> <% end %> </ol> <% end %> <% else %> <p class="text-gray-600 dark:text-gray-400">No index found.</p> <% end %> </nav> <div class="space-y-8 mb-8"> <%= if @privacy_policy["document"]["introduction"] do %> <section class="prose dark:prose-invert max-w-none"> <%= for content_item <- @privacy_policy["document"]["introduction"]["content"] do %> <%= if content_item["type"] == "text" do %> <p class="text-lg leading-relaxed">{content_item["value"]}</p> <% end %> <% end %> </section> <% end %> </div> <div class="space-y-8"> <%= if @privacy_policy["document"]["third-party"] do %> <%= for item <- @privacy_policy["document"]["third-party"] do %> <section class="p-6 bg-gray-50 dark:bg-gray-800 rounded-lg"> <h2 class="text-2xl font-semibold mb-4">{item["title"]}</h2> <p class="text-gray-600 dark:text-gray-400"> <a href={item["link"]["href"]} class="text-blue-600 dark:text-blue-400 hover:underline" > {item["link"]["text"]} </a> {item["link"]["value"]} </p> </section> <% end %> <% end %> </div> <div class="space-y-12"> <%= if @privacy_policy["document"]["sections"] do %> <%= for section <- @privacy_policy["document"]["sections"] do %> <section id={section["id"]} class="border-b border-gray-200 dark:border-gray-700 pb-8"> <h2 class="text-2xl font-bold mb-6"> {section["number"]}. {section["title"]} </h2> <%= for chapter <- section["chapters"] do %> <div class="mt-6 pl-4 border-l-4 border-gray-200 dark:border-gray-700"> <h3 class="text-xl font-semibold mb-4"> {chapter["number"]}. {chapter["title"]} </h3> <div class="space-y-4"> <%= if chapter["content"]["type"] == "text" do %> <p class="text-gray-800 dark:text-gray-200 leading-relaxed"> {chapter["content"]["value"]} </p> <% else %> <%= for content_item <- chapter["content"]["items"] do %> <%= if content_item["text"] do %> <p class="text-gray-800 dark:text-gray-200 leading-relaxed"> {content_item["text"]} </p> <% end %> <%= if content_item["subItems"] do %> <div class="pl-6 mt-2 space-y-2"> <%= for sub_item <- content_item["subItems"] do %> <%= cond do %> <% sub_item["text"] && sub_item["link"] -> %> <p class="text-gray-700 dark:text-gray-300 leading-relaxed"> {sub_item["text"]} <a href={sub_item["link"]["href"]} class="text-blue-600 dark:text-blue-400 hover:underline" > {sub_item["link"]["text"]} </a> </p> <% sub_item["link"] -> %> <p class="text-gray-700 dark:text-gray-300 leading-relaxed"> <a href={sub_item["link"]["href"]} class="text-blue-600 dark:text-blue-400 hover:underline" > {sub_item["link"]["text"]} </a> </p> <% sub_item["text"] -> %> <p class="text-gray-700 dark:text-gray-300 leading-relaxed"> {sub_item["text"]} </p> <% true -> %> <% nil %> <% end %> <% end %> </div> <% end %> <% end %> <% end %> </div> </div> <% end %> </section> <% end %> <% end %> </div> <% end %> </div>
```

# lib/myapp_web/controllers/social_media_controller.ex

```ex
defmodule MyappWeb.SocialMediaController do @moduledoc """ Base controller module for social media integrations. Provides common controller logic and functions that can be used by platform-specific controllers (Twitter, TikTok, Instagram, etc.). """ use MyappWeb, :controller alias Myapp.SocialMediaConfig @doc """ Validates the requested provider and returns the corresponding modules for social auth and social media API interactions. """ def validate_provider(provider) when is_binary(provider) do case SocialMediaConfig.get_provider_modules(provider) do {:ok, %{auth_module: auth_module, api_module: api_module}} -> {:ok, auth_module, api_module} {:error, reason} -> {:error, reason} end end def validate_provider(_), do: {:error, :invalid_provider} @doc """ Common function to handle OAuth connection initiation. Generates an authorization URL and redirects the user to it. """ def handle_connect(conn, provider, params \\ %{}) do with {:ok, auth_module, _} <- validate_provider(provider), {:ok, auth_url} <- auth_module.authorization_url(params) do redirect(conn, external: auth_url) else {:error, :invalid_provider} -> conn |> put_flash(:error, "Invalid social media provider") |> redirect(to: ~p"/") {:error, reason} -> conn |> put_flash(:error, "Failed to connect to #{provider}: #{inspect(reason)}") |> redirect(to: ~p"/") end end @doc """ Common function to handle OAuth callback. Exchanges the authorization code for access tokens and stores them. """ def handle_auth_callback(conn, provider, params) do with {:ok, auth_module, api_module} <- validate_provider(provider), {:ok, tokens} <- auth_module.exchange_token(params), :ok <- store_tokens(conn, provider, tokens) do conn |> put_flash(:info, "Successfully connected to #{provider}") |> redirect(to: ~p"/social/#{provider}") else {:error, :invalid_provider} -> conn |> put_flash(:error, "Invalid social media provider") |> redirect(to: ~p"/") {:error, reason} -> conn |> put_flash(:error, "Authentication failed with #{provider}: #{inspect(reason)}") |> redirect(to: ~p"/social/#{provider}") end end @doc """ Common function to check if a user is authenticated with a provider. """ def check_auth(conn, provider) do with {:ok, _, api_module} <- validate_provider(provider), {:ok, tokens} <- get_tokens(conn, provider), {:ok, _} <- api_module.verify_auth(tokens) do {:ok, tokens} else {:error, reason} -> {:error, reason} end end @doc """ Common function to handle post creation across social media platforms. """ def handle_post(conn, provider, params) do with {:ok, _, api_module} <- validate_provider(provider), {:ok, tokens} <- get_tokens(conn, provider), {:ok, post_result} <- api_module.create_post(tokens, params) do {:ok, post_result} else {:error, :not_authenticated} -> conn |> put_flash(:error, "You need to connect your #{provider} account first") |> redirect(to: ~p"/social/#{provider}") |> halt() {:error, reason} -> {:error, reason} end end @doc """ Common function to handle media uploads across social media platforms. """ def handle_media_upload(conn, provider, params) do with {:ok, _, api_module} <- validate_provider(provider), {:ok, tokens} <- get_tokens(conn, provider), {:ok, media_result} <- api_module.upload_media(tokens, params) do {:ok, media_result} else {:error, :not_authenticated} -> conn |> put_flash(:error, "You need to connect your #{provider} account first") |> redirect(to: ~p"/social/#{provider}") |> halt() {:error, reason} -> {:error, reason} end end # Private functions defp store_tokens(conn, provider, tokens) do # This implementation can be adapted based on whether you're using # sessions or database storage for tokens conn = put_session(conn, "#{provider}_tokens", tokens) {:ok, conn} end defp get_tokens(conn, provider) do case get_session(conn, "#{provider}_tokens") do nil -> {:error, :not_authenticated} tokens -> {:ok, tokens} end end end
```

# lib/myapp_web/controllers/terms_of_services_controller.ex

```ex
defmodule MyappWeb.TermsOfServicesController do use MyappWeb, :controller def page(conn, %{"version" => version}) do case Myapp.TermsOfServices.get_terms_of_services(version) do {:ok, terms_of_services} -> render(conn, :terms_of_services, terms_of_services: terms_of_services) {:error, :not_found} -> conn |> put_status(:not_found) |> render(:terms_of_services, terms_of_services: "Terms of services not found") {:error, :invalid_version} -> conn |> put_status(:bad_request) |> render(:terms_of_services, terms_of_services: "Invalid terms of services version") {:error, _} -> conn |> put_status(:internal_server_error) |> render(:terms_of_services, terms_of_services: "An error occurred while loading the terms of services" ) end end end
```

# lib/myapp_web/controllers/terms_of_services_html.ex

```ex
defmodule MyappWeb.TermsOfServicesHTML do use MyappWeb, :html embed_templates "terms_of_services_html/*" end
```

# lib/myapp_web/controllers/terms_of_services_html/terms_of_services.html.heex

```heex
<div class="max-w-4xl mx-auto px-4 py-8 text-gray-900 dark:text-gray-100"> <%= if is_binary(@terms_of_services) do %> <div class="p-6 bg-red-50 dark:bg-red-900 rounded-lg mb-8"> <h1 class="text-3xl font-bold mb-4 text-red-700 dark:text-red-300">Error</h1> <p class="text-lg text-red-600 dark:text-red-200"><%= @terms_of_services %></p> </div> <% else %> <h1 class="text-3xl font-bold mb-8">{@terms_of_services["document"]["index"]["title"]}</h1> <nav class="mb-8 p-6 bg-gray-100 dark:bg-gray-800 rounded-lg shadow-sm"> <%= if @terms_of_services["document"]["index"] do %> <%= if @terms_of_services["document"]["index"]["title"] do %> <ol class="list-decimal list-inside space-y-2"> <%= for item <- @terms_of_services["document"]["index"]["items"] do %> <li> <a href={item["ref"]} class="text-blue-600 dark:text-blue-400 hover:underline"> {item["title"]} </a> </li> <% end %> </ol> <% end %> <% else %> <p class="text-gray-600 dark:text-gray-400">No index found.</p> <% end %> </nav> <div class="space-y-8"> <%= if @terms_of_services["document"]["introduction"] do %> <section class="prose dark:prose-invert max-w-none"> <%= for content_item <- @terms_of_services["document"]["introduction"]["content"] do %> <%= if content_item["type"] == "text" do %> <p class="text-lg leading-relaxed">{content_item["value"]}</p> <% end %> <% end %> </section> <% end %> </div> <div class="space-y-8"> <%= if @terms_of_services["document"]["third-party"] do %> <%= for item <- @terms_of_services["document"]["third-party"] do %> <section class="p-6 bg-gray-50 dark:bg-gray-800 rounded-lg"> <h2 class="text-2xl font-semibold mb-4">{item["title"]}</h2> <p class="text-gray-600 dark:text-gray-400"> <a href={item["link"]["href"]} class="text-blue-600 dark:text-blue-400 hover:underline" > {item["link"]["text"]} </a> {item["link"]["value"]} </p> </section> <% end %> <% end %> </div> <div class="space-y-12"> <%= if @terms_of_services["document"]["sections"] do %> <%= for section <- @terms_of_services["document"]["sections"] do %> <section id={section["id"]} class="border-b border-gray-200 dark:border-gray-700 pb-8"> <h2 class="text-2xl font-bold mb-6"> {section["number"]}. {section["title"]} </h2> <%= for chapter <- section["chapters"] do %> <div class="mt-6 pl-4 border-l-4 border-gray-200 dark:border-gray-700"> <h3 class="text-xl font-semibold mb-4"> {chapter["number"]}. {chapter["title"]} </h3> <div class="space-y-4"> <%= if chapter["content"]["type"] == "text" do %> <p class="text-gray-800 dark:text-gray-200 leading-relaxed"> {chapter["content"]["value"]} </p> <% else %> <%= for content_item <- chapter["content"]["items"] do %> <%= if content_item["text"] do %> <p class="text-gray-800 dark:text-gray-200 leading-relaxed"> {content_item["text"]} </p> <% end %> <%= if content_item["subItems"] do %> <div class="pl-6 mt-2 space-y-2"> <%= for sub_item <- content_item["subItems"] do %> <%= if sub_item["text"] do %> <p class="text-gray-700 dark:text-gray-300 leading-relaxed"> {sub_item["text"]} </p> <% end %> <% end %> </div> <% end %> <% end %> <% end %> </div> </div> <% end %> </section> <% end %> <% end %> </div> <% end %> </div>
```

# lib/myapp_web/controllers/test_controller.ex

```ex
defmodule MyappWeb.TestController do use MyappWeb, :controller alias Myapp.Youtube def page(conn, params) do api_key = Map.get(params, "api_key", "") query = Map.get(params, "query", "") cond do api_key == "" and query == "" -> # Initial page load render(conn, :test, flash: %{}, videos: [], video_details: nil, api_key: "") api_key == "" -> # Missing API key render(conn, :test, flash: %{ error: "API Key Required", error_detail: "Please enter your YouTube API key to search videos." }, videos: [], video_details: nil, api_key: "" ) query == "" -> # Missing search query render(conn, :test, flash: %{ error: "Search Query Required", error_detail: "Please enter what you'd like to search for." }, videos: [], video_details: nil, api_key: api_key ) true -> # Both API key and query are present case Youtube.search_videos(query, api_key: api_key) do {:ok, %{videos: videos}} -> video_details = get_first_video_details(videos, api_key) render(conn, :test, flash: %{}, videos: videos, video_details: video_details, api_key: api_key ) {:error, message} -> render(conn, :test, flash: %{ error: "YouTube API Error", error_detail: message }, videos: [], video_details: nil, api_key: api_key ) end end end def search(conn, params) do # Handle search form submission redirect(conn, to: ~p"/test?#{%{api_key: params["api_key"], query: params["query"]}}") # redirect 말고 post로 데이터만 받아올것 -- 토요일 end defp get_first_video_details([], _api_key), do: nil defp get_first_video_details([%{id: video_id} | _], api_key) do case Youtube.get_video_details(video_id, api_key: api_key) do {:ok, details} -> details {:error, _message} -> nil end end end
```

# lib/myapp_web/controllers/test_html.ex

```ex
defmodule MyappWeb.TestHTML do use MyappWeb, :html embed_templates "test_html/*" attr :flash, :map, default: %{} def error_message(assigns) do ~H""" <%= if error = @flash[:error] do %> <div class="mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded" role="alert"> <p class="font-medium">{error}</p> <%= if @flash[:error_detail] do %> <p class="mt-2 text-sm">{@flash[:error_detail]}</p> <% end %> </div> <% end %> """ end end
```

# lib/myapp_web/controllers/test_html/test.html.heex

```heex
<div class="container mx-auto p-4 dark:bg-gray-800 dark:text-white"> <.error_message flash={@flash} /> <div class="mb-8"> <h2 class="text-2xl font-bold mb-4">Search YouTube Videos</h2> <form id="search-form" class="flex flex-col gap-4" action="/test" method="get"> <div class="flex gap-4"> <input type="text" name="api_key" placeholder="Enter your YouTube API key..." value={@api_key} class="flex-1 px-4 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white" required /> <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 dark:bg-gray-600 dark:hover:bg-gray-700" onclick="document.querySelector('input[name=api_key]').value = ''; document.querySelector('input[name=api_key]').focus();" > Clear API Key </button> </div> <div class="flex gap-4"> <input type="text" name="query" placeholder="Search videos..." class="flex-1 px-4 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white" required /> <button type="submit" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800" > Search </button> </div> </form> </div> <%= if @videos && length(@videos) > 0 do %> <div id="search-results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"> <%= for video <- @videos do %> <div class="bg-white rounded-lg shadow-lg overflow-hidden dark:bg-gray-700"> <img src={video.thumbnail} alt={video.title} class="w-full" /> <div class="p-4"> <h3 class="font-bold text-lg mb-2">{video.title}</h3> <p class="text-gray-600 text-sm mb-2 dark:text-gray-400">{video.channel_title}</p> <p class="text-gray-500 text-sm dark:text-gray-300">{video.description}</p> <p class="text-gray-400 text-xs mt-2 dark:text-gray-500"> Published: {MyappWeb.Helpers.YoutubeHelper.format_published_date(video.published_at)} </p> <div class="mt-4"> <a href={"https://www.youtube.com/watch?v=#{video.id}"} target="_blank" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200" > Watch on YouTube </a> </div> </div> </div> <% end %> </div> <%= if @video_details do %> <div class="mt-8"> <h2 class="text-2xl font-bold mb-4">Video Details</h2> <div class="bg-white rounded-lg shadow-lg overflow-hidden dark:bg-gray-700"> <div class="aspect-w-16 aspect-h-9"> <iframe src={"https://www.youtube.com/embed/#{@video_details.id}"} frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="w-full h-full" > </iframe> </div> <div class="p-4"> <h3 class="font-bold text-xl mb-2">{@video_details.title}</h3> <div class="flex gap-4 text-sm text-gray-600 mb-4 dark:text-gray-400"> <span> {MyappWeb.Helpers.YoutubeHelper.format_view_count(@video_details.view_count)} views </span> <span> {MyappWeb.Helpers.YoutubeHelper.format_duration(@video_details.duration)} </span> <span> {MyappWeb.Helpers.YoutubeHelper.format_published_date(@video_details.published_at)} </span> </div> <p class="text-gray-700 mb-4 dark:text-gray-300">{@video_details.description}</p> <div class="flex flex-wrap gap-2"> <%= for tag <- @video_details.tags do %> <span class="px-2 py-1 bg-gray-100 rounded-full text-sm text-gray-600 dark:bg-gray-600 dark:text-gray-200"> {tag} </span> <% end %> </div> </div> </div> </div> <% end %> <% end %> </div>
```

# lib/myapp_web/controllers/thread_controller.ex

```ex
defmodule MyappWeb.ThreadController do use MyappWeb, :controller alias Myapp.Threads action_fallback MyappWeb.FallbackController def create(conn, %{"text" => text}) do with {:ok, thread} <- Threads.create_thread(text) do conn |> put_status(:created) |> json(thread) end end def reply(conn, %{"thread_id" => thread_id, "text" => text}) do with {:ok, reply} <- Threads.reply_to_thread(thread_id, text) do conn |> put_status(:created) |> json(reply) end end def show(conn, %{"id" => thread_id}) do with {:ok, thread} <- Threads.get_thread(thread_id) do json(conn, thread) end end def delete(conn, %{"id" => thread_id}) do with {:ok, _} <- Threads.delete_thread(thread_id) do send_resp(conn, :no_content, "") end end end
```

# lib/myapp_web/controllers/tiktok_controller.ex

```ex
defmodule MyappWeb.TiktokController do @moduledoc """ Controller for TikTok-related web interface. This controller handles web requests related to TikTok functionality, providing a user interface for interacting with the TikTok API and related features implemented in the Myapp.Tiktok module. """ use MyappWeb, :controller alias Myapp.Tiktok alias Myapp.TiktokOauth @doc """ Renders the TikTok page. This action displays the main TikTok interface where users can interact with TikTok-related features such as video uploads, account management, and other TikTok API functionality. Assigns: * `connected` - Boolean indicating whether the user is connected to TikTok * `recent_videos` - List of recent TikTok videos if connected """ def show(conn, _params) do {connected, recent_videos} = case Tiktok.validate_access_token([]) do {:ok, _access_token} -> case Tiktok.list_videos() do {:ok, %{"data" => %{"videos" => videos}}} -> {true, videos} _ -> {true, []} end {:error, _reason} -> {false, []} end conn |> assign(:connected, connected) |> assign(:recent_videos, recent_videos) |> render(:show) end @doc """ Renders the TikTok video upload form. This action displays a form where users can upload videos to TikTok. It first checks if the user is connected to TikTok (authenticated) before rendering the form. Assigns: * `connected` - Boolean indicating whether the user is connected to TikTok """ def upload_form(conn, _params) do case Tiktok.validate_access_token([]) do {:ok, _access_token} -> conn |> assign(:connected, true) |> render(:upload_form) {:error, _reason} -> conn |> put_flash(:error, "You need to connect to TikTok before uploading videos") |> redirect(to: ~p"/tiktok") end end @doc """ Processes the TikTok video upload form submission. This action handles the video upload processing by: 1. Validating the uploaded file 2. Uploading the video to TikTok via the Tiktok module 3. Redirecting back with appropriate success/error messages Params: * `video` - The video file upload params * `title` - Title for the video * `description` - Description for the video """ def upload_video(conn, %{"video" => video_params} = _params) do case Tiktok.validate_access_token([]) do {:ok, _access_token} -> upload_result = with {:ok, video_path} <- validate_upload(video_params), # Prepare options map with remaining parameters # Prepare options as keyword list with correctly mapped parameters options = [ title: video_params["title"] || "", description: video_params["description"] || "", privacy_level: video_params["privacy_level"] || "public", # Invert the logic for 'allow_' fields to 'disable_' fields disable_comments: video_params["allow_comment"] != "true", disable_stitch: video_params["allow_stitch"] != "true", disable_duet: video_params["allow_duet"] != "true" ], # Call upload_video with file path as first param and options as keyword list {:ok, response} <- Tiktok.upload_video(video_path, options) do {:ok, response} else {:error, reason} -> {:error, reason} end case upload_result do {:ok, _response} -> conn |> put_flash(:info, "Video successfully uploaded to TikTok") |> redirect(to: ~p"/tiktok") {:error, reason} -> conn |> put_flash(:error, "Failed to upload video: #{reason}") |> redirect(to: ~p"/tiktok/upload") end {:error, _reason} -> conn |> put_flash(:error, "You need to connect to TikTok before uploading videos") |> redirect(to: ~p"/tiktok") end end # Validates the video upload and returns the path to the temporary file defp validate_upload(%{"file" => %Plug.Upload{} = upload}) do if upload.content_type in ["video/mp4", "video/quicktime", "video/mov"] do {:ok, upload.path} else {:error, "Invalid file format. Only MP4, MOV, and QuickTime videos are supported."} end end defp validate_upload(%{file: %Plug.Upload{} = upload}) do if upload.content_type in ["video/mp4", "video/quicktime", "video/mov"] do {:ok, upload.path} else {:error, "Invalid file format. Only MP4, MOV, and QuickTime videos are supported."} end end defp validate_upload(%{"file" => nil}), do: {:error, "No video file uploaded"} defp validate_upload(%{file: nil}), do: {:error, "No video file uploaded"} defp validate_upload(_), do: {:error, "No video file uploaded or invalid format"} end
```

# lib/myapp_web/controllers/tiktok_html.ex

```ex
defmodule MyappWeb.TiktokHTML do use MyappWeb, :html @doc """ Renders the TikTok show page. """ attr :flash, :map, default: %{} attr :connected, :boolean, default: false attr :recent_videos, :list, default: [] def show(assigns) do ~H""" <.flash_group flash={@flash} /> <div class="mx-auto max-w-2xl"> <.header class="text-center"> TikTok Integration Dashboard <:subtitle> Manage your TikTok integration and access TikTok API features </:subtitle> </.header> <div class="mt-10 space-y-8 bg-white p-8 rounded-lg shadow-lg"> <div class="tiktok-section"> <h2 class="text-xl font-bold mb-4">Account Connection</h2> <p class="mb-4"> Connect your TikTok account to access video upload and management functionality. </p> <.oauth_status connected={@connected} /> </div> <div class="tiktok-section"> <h2 class="text-xl font-bold mb-4">API Features</h2> <ul class="list-disc pl-5 space-y-2"> <li>Upload videos to your TikTok account</li> <li>Manage video publicity settings</li> <li>Schedule video posts</li> <li>Retrieve video analytics</li> <li>Manage comments and interactions</li> </ul> </div> <%= if @connected do %> <div class="tiktok-section"> <h2 class="text-xl font-bold mb-4">Upload Video</h2> <p class="mb-4">Use our simplified interface to upload new videos to TikTok.</p> <a href="/tiktok/upload" class="bg-pink-600 hover:bg-pink-700 text-white py-2 px-4 rounded"> Upload New Video </a> </div> <div class="tiktok-section"> <h2 class="text-xl font-bold mb-4">Recent Videos</h2> <p class="mb-4">View and manage your recently uploaded TikTok videos.</p> <%= if Enum.empty?(@recent_videos) do %> <p class="text-gray-500 italic">No videos have been uploaded yet.</p> <% else %> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"> <%= for video <- @recent_videos do %> <div class="border rounded p-4"> <h3 class="font-bold"><%= video.title %></h3> <p class="text-sm text-gray-600"><%= video.upload_date %></p> <p class="mt-2"><%= video.description %></p> </div> <% end %> </div> <% end %> </div> <% end %> <div class="tiktok-section"> <h2 class="text-xl font-bold mb-4">TikTok API Documentation</h2> <p class="mb-4"> Learn more about the TikTok API capabilities and integration options. </p> <a href="/docs/tiktok" class="text-blue-600 hover:underline">View API Documentation</a> </div> </div> </div> """ end @doc """ Embeds a TikTok video. """ def embed_video(assigns) do ~H""" <div class="tiktok-video-embed"> <h3>TikTok Video Embed</h3> <div class="embed-container"> <!-- TikTok embed code would go here --> <p>Video ID: <%= @video_id %></p> </div> </div> """ end @doc """ Displays TikTok OAuth connection status. """ def oauth_status(assigns) do ~H""" <div class="tiktok-oauth-status"> <h3>TikTok OAuth Status</h3> <p> <%= if @connected do %> <span class="status connected">Connected</span> <% else %> <span class="status disconnected">Not Connected</span> <a href="/tiktok/oauth" class="btn-connect">Connect to TikTok</a> <% end %> </p> </div> """ end @doc """ Renders the TikTok video upload form. """ attr :flash, :map, default: %{} attr :connected, :boolean, default: false attr :changeset, :map, default: nil def upload_form(assigns) do ~H""" <.flash_group flash={@flash} /> <div class="mx-auto max-w-2xl"> <.header class="text-center"> Upload Video to TikTok <:subtitle> Share your content on TikTok directly from our platform </:subtitle> </.header> <div class="mt-10 space-y-8 bg-white p-8 rounded-lg shadow-lg"> <%= if !@connected do %> <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6" role="alert"> <p class="font-bold">Not Connected</p> <p>You need to connect your TikTok account before uploading videos.</p> <a href="/tiktok/oauth" class="mt-2 inline-block bg-pink-600 hover:bg-pink-700 text-white py-1 px-3 rounded text-sm"> Connect to TikTok </a> </div> <% else %> <.form for={@changeset || %{}} multipart={true} action={~p"/tiktok/upload"} class="space-y-8"> <div class="grid grid-cols-1 gap-6"> <div> <.input type="text" label="Title" name="video[title]" required /> <div class="text-xs text-gray-500 mt-1">Give your video a catchy title (required)</div> </div> <div> <.input type="textarea" label="Description" name="video[description]" rows="4" required /> <div class="text-xs text-gray-500 mt-1">Describe your video (required)</div> </div> <div> <.input type="file" name="video[file]" label="Video File" accept="video/*" required /> <div class="text-xs text-gray-500 mt-1"> Supported formats: MP4, WEBM<br> Maximum file size: 500MB </div> </div> <div> <label class="block text-sm font-medium text-gray-700 mb-1">Privacy Settings</label> <select name="video[privacy_level]" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-pink-500 focus:border-pink-500 sm:text-sm rounded-md"> <option value="public">Public</option> <option value="friends">Friends Only</option> <option value="private">Private</option> </select> </div> <div> <.input type="checkbox" name="video[allow_comment]" value="true" label="Enable comments" checked /> </div> <div> <.input type="checkbox" name="video[allow_stitch]" value="true" label="Allow stitching" checked /> </div> <div> <.input type="checkbox" name="video[allow_duet]" value="true" label="Allow duets" checked /> </div> <div class="pt-4"> <.button type="submit" class="w-full py-3 bg-pink-600 hover:bg-pink-700"> Upload to TikTok </.button> </div> </div> </.form> <div class="mt-10 border-t pt-6"> <h3 class="text-lg font-bold mb-2">Upload Guidelines</h3> <ul class="list-disc pl-5 space-y-1 text-sm text-gray-600"> <li>Make sure your content complies with TikTok's Community Guidelines</li> <li>Videos must be shorter than 10 minutes</li> <li>Ensure you have the right to share all content in your video</li> <li>Avoid using copyrighted music without permission</li> <li>Vertical videos (9:16) work best on TikTok</li> </ul> </div> <% end %> <div class="border-t pt-6"> <a href="/tiktok" class="text-pink-600 hover:underline">&larr; Back to TikTok Dashboard</a> </div> </div> </div> """ end end
```

# lib/myapp_web/controllers/tiktok_html/show.html.heex

```heex
<.flash_group flash={@flash} /> <div class="mx-auto max-w-2xl"> <.header class="text-center"> TikTok Integration Dashboard <:subtitle> Manage your TikTok integration and access TikTok API features </:subtitle> </.header> <div class="mt-10 space-y-8 bg-white p-8 rounded-lg shadow-lg"> <div class="tiktok-section"> <h2 class="text-xl font-bold mb-4">Account Connection</h2> <p class="mb-4"> Connect your TikTok account to access video upload and management functionality. </p> <.oauth_status connected={@connected} /> </div> <div class="tiktok-section"> <h2 class="text-xl font-bold mb-4">API Features</h2> <ul class="list-disc pl-5 space-y-2"> <li>Upload videos to your TikTok account</li> <li>Manage video publicity settings</li> <li>Schedule video posts</li> <li>Retrieve video analytics</li> <li>Manage comments and interactions</li> </ul> </div> <%= if @connected do %> <div class="tiktok-section"> <h2 class="text-xl font-bold mb-4">Upload Video</h2> <p class="mb-4">Use our simplified interface to upload new videos to TikTok.</p> <a href="/tiktok/upload" class="bg-pink-600 hover:bg-pink-700 text-white py-2 px-4 rounded"> Upload New Video </a> </div> <div class="tiktok-section"> <h2 class="text-xl font-bold mb-4">Recent Videos</h2> <p class="mb-4">View and manage your recently uploaded TikTok videos.</p> <%= if Enum.empty?(@recent_videos) do %> <p class="text-gray-500 italic">No videos have been uploaded yet.</p> <% else %> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"> <%= for video <- @recent_videos do %> <div class="border rounded p-4"> <h3 class="font-bold"><%= video.title %></h3> <p class="text-sm text-gray-600"><%= video.upload_date %></p> <p class="mt-2"><%= video.description %></p> </div> <% end %> </div> <% end %> </div> <% end %> <div class="tiktok-section"> <h2 class="text-xl font-bold mb-4">TikTok API Documentation</h2> <p class="mb-4"> Learn more about the TikTok API capabilities and integration options. </p> <a href="/docs/tiktok" class="text-blue-600 hover:underline">View API Documentation</a> </div> </div> </div>
```

# lib/myapp_web/controllers/twitter_controller.ex

```ex
defmodule MyappWeb.TwitterController do @moduledoc """ Controller for Twitter-related web interface. This controller handles web requests related to Twitter functionality, providing a user interface for interacting with the Twitter API and related features implemented in the Myapp.SocialMedia.Twitter module. """ use MyappWeb, :controller import MyappWeb.SocialMediaController, only: [validate_provider: 1] alias Myapp.SocialMedia.Twitter alias Myapp.SocialAuth.Twitter, as: TwitterAuth alias Myapp.SocialMedia.Utils, as: SocialMediaUtils # Get current user_id from session or conn defp get_current_user_id(conn) do # This should be replaced with your actual user_id retrieval logic # For example, you might get it from the session or the conn assigns conn.assigns[:current_user_id] || "default_user" end @doc """ Renders the Twitter page. This action displays the main Twitter interface where users can interact with Twitter-related features such as posting tweets, account management, and other Twitter API functionality. Assigns: * `connected` - Boolean indicating whether the user is connected to Twitter * `recent_tweets` - List of recent tweets if connected """ def show(conn, _params) do user_id = get_current_user_id(conn) {connected, recent_tweets} = case Twitter.authenticated?(user_id) do {:ok, %{authenticated: true}} -> case Twitter.get_timeline(user_id) do {:ok, tweets} -> {true, tweets} _ -> {true, []} end _ -> {false, []} end conn |> assign(:connected, connected) |> assign(:recent_tweets, recent_tweets) |> render(:show) end @doc """ Renders the tweet composition form. This action displays a form where users can compose and post tweets. It first checks if the user is connected to Twitter (authenticated) before rendering the form. Assigns: * `connected` - Boolean indicating whether the user is connected to Twitter """ def tweet_form(conn, _params) do user_id = get_current_user_id(conn) case Twitter.authenticated?(user_id) do {:ok, %{authenticated: true}} -> conn |> assign(:connected, true) |> render(:tweet_form) _ -> conn |> put_flash(:error, "You need to connect to Twitter before posting tweets") |> redirect(to: ~p"/twitter") end end @doc """ Processes the tweet form submission. This action handles the tweet posting by: 1. Validating the submitted content 2. Posting the tweet to Twitter via the Twitter module 3. Redirecting back with appropriate success/error messages Params: * `tweet` - The tweet parameters including text and media * `text` - The text content of the tweet """ def post_tweet(conn, %{"tweet" => tweet_params} = _params) do user_id = get_current_user_id(conn) case Twitter.authenticated?(user_id) do {:ok, %{authenticated: true}} -> # Extract content and set defaults content = tweet_params["text"] || "" # Process media upload outside of the with statement media_upload_result = case SocialMediaUtils.validate_media_upload(tweet_params) do {:ok, media_path} when is_binary(media_path) -> # Get mime type from the file extension mime_type = MIME.from_path(media_path) Twitter.upload_media(user_id, media_path, mime_type) {:ok, nil} -> {:ok, []} error -> error end # Now we can use the result in a simpler with statement post_result = with {:ok, media_ids} <- media_upload_result, # Additional options like reply settings options = [reply_settings: tweet_params["reply_settings"] || "everyone"], {:ok, response} <- Twitter.create_post(user_id, content, media_ids, options) do {:ok, response} else {:error, reason} -> {:error, reason} end case post_result do {:ok, _response} -> conn |> put_flash(:info, "Tweet successfully posted to Twitter") |> redirect(to: ~p"/twitter") {:error, reason} -> conn |> put_flash(:error, "Failed to post tweet: #{reason}") |> redirect(to: ~p"/twitter/tweet") end _ -> conn |> put_flash(:error, "You need to connect to Twitter before posting tweets") |> redirect(to: ~p"/twitter") end end @doc """ Initiates the OAuth flow to connect to Twitter. This action redirects the user to the Twitter OAuth consent page. """ def connect(conn, _params) do case TwitterAuth.generate_auth_url() do {:ok, oauth_url} -> redirect(conn, external: oauth_url) {:error, reason} -> conn |> put_flash(:error, "Failed to connect to Twitter: #{reason}") |> redirect(to: ~p"/twitter") end end @doc """ Handles the OAuth callback from Twitter. This action processes the OAuth callback, exchanges the code for tokens, and stores the tokens in the session. Params: * `code` - The authorization code returned by Twitter """ def auth_callback(conn, %{"code" => code}) do case TwitterAuth.exchange_code_for_token(code) do {:ok, tokens} -> conn |> store_provider_tokens(:twitter, tokens) |> put_flash(:info, "Successfully connected to Twitter") |> redirect(to: ~p"/twitter") {:error, reason} -> conn |> put_flash(:error, "Failed to connect to Twitter: #{reason}") |> redirect(to: ~p"/twitter") end end @doc """ Deletes a tweet. This action handles the deletion of a tweet. Params: * `id` - The ID of the tweet to delete """ def delete_tweet(conn, %{"id" => tweet_id}) do user_id = get_current_user_id(conn) case Twitter.authenticated?(user_id) do {:ok, %{authenticated: true}} -> case Twitter.delete_post(user_id, tweet_id) do {:ok, _response} -> conn |> put_flash(:info, "Tweet successfully deleted") |> redirect(to: ~p"/twitter") {:error, reason} -> conn |> put_flash(:error, "Failed to delete tweet: #{reason}") |> redirect(to: ~p"/twitter") end _ -> conn |> put_flash(:error, "You need to connect to Twitter before deleting tweets") |> redirect(to: ~p"/twitter") end end # Validate media upload is now handled by SocialMediaUtils.validate_media_upload/1 # Private functions @doc """ Stores provider tokens in the session. This function stores the authentication tokens for a specific provider in the session. Args: * `conn` - The connection struct * `provider` - The provider name (atom or string) * `tokens` - The tokens to store """ defp store_provider_tokens(conn, provider, tokens) do put_session(conn, "#{provider}_tokens", tokens) end end
```

# lib/myapp_web/controllers/twitter_html.ex

```ex
defmodule MyappWeb.TwitterHTML do use MyappWeb, :html @doc """ Renders the Twitter show page. """ attr :flash, :map, default: %{} attr :connected, :boolean, default: false attr :recent_tweets, :list, default: [] def show(assigns) do ~H""" <.flash_group flash={@flash} /> <div class="mx-auto max-w-2xl"> <.header class="text-center"> Twitter/X Integration Dashboard <:subtitle> Manage your Twitter integration and access Twitter API features </:subtitle> </.header> <div class="mt-10 space-y-8 bg-white p-8 rounded-lg shadow-lg"> <div class="twitter-section"> <h2 class="text-xl font-bold mb-4">Account Connection</h2> <p class="mb-4"> Connect your Twitter account to access tweet functionality and timeline management. </p> <.oauth_status connected={@connected} /> </div> <div class="twitter-section"> <h2 class="text-xl font-bold mb-4">API Features</h2> <ul class="list-disc pl-5 space-y-2"> <li>Post tweets with text content</li> <li>Upload images or videos with your tweets</li> <li>View your Twitter timeline</li> <li>Delete your tweets</li> <li>Monitor engagement metrics</li> </ul> </div> <%= if @connected do %> <div class="twitter-section"> <h2 class="text-xl font-bold mb-4">Compose Tweet</h2> <p class="mb-4">Share your thoughts or media directly to Twitter.</p> <a href="/twitter/tweet" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded"> Compose New Tweet </a> </div> <div class="twitter-section"> <h2 class="text-xl font-bold mb-4">Recent Tweets</h2> <p class="mb-4">View and manage your recently posted tweets.</p> <%= if Enum.empty?(@recent_tweets) do %> <p class="text-gray-500 italic">No tweets have been posted yet.</p> <% else %> <div class="space-y-4"> <%= for tweet <- @recent_tweets do %> <div class="border rounded p-4"> <p class="text-sm text-gray-600"><%= tweet.created_at %></p> <p class="mt-2"><%= tweet.text %></p> <div class="mt-2 flex space-x-4 text-sm text-gray-500"> <span><%= tweet.retweet_count %> Retweets</span> <span><%= tweet.like_count %> Likes</span> </div> <div class="mt-2"> <button phx-click="delete-tweet" phx-value-id={tweet.id} class="text-red-500 hover:underline text-sm"> Delete Tweet </button> </div> </div> <% end %> </div> <% end %> </div> <% end %> <div class="twitter-section"> <h2 class="text-xl font-bold mb-4">Twitter API Documentation</h2> <p class="mb-4"> Learn more about the Twitter API capabilities and integration options. </p> <a href="/docs/twitter" class="text-blue-600 hover:underline">View API Documentation</a> </div> </div> </div> """ end @doc """ Embeds a tweet. """ def embed_tweet(assigns) do ~H""" <div class="twitter-tweet-embed"> <h3>Tweet Embed</h3> <div class="embed-container"> <!-- Twitter embed code would go here --> <p>Tweet ID: <%= @tweet_id %></p> </div> </div> """ end @doc """ Displays Twitter OAuth connection status. """ def oauth_status(assigns) do ~H""" <div class="twitter-oauth-status"> <h3>Twitter OAuth Status</h3> <p> <%= if @connected do %> <span class="status connected">Connected</span> <% else %> <span class="status disconnected">Not Connected</span> <a href="/twitter/connect" class="btn-connect">Connect to Twitter</a> <% end %> </p> </div> """ end @doc """ Renders the Twitter tweet composition form. """ attr :flash, :map, default: %{} attr :connected, :boolean, default: false attr :changeset, :map, default: nil def tweet_form(assigns) do ~H""" <.flash_group flash={@flash} /> <div class="mx-auto max-w-2xl"> <.header class="text-center"> Compose a Tweet <:subtitle> Share your thoughts on Twitter directly from our platform </:subtitle> </.header> <div class="mt-10 space-y-8 bg-white p-8 rounded-lg shadow-lg"> <%= if !@connected do %> <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6" role="alert"> <p class="font-bold">Not Connected</p> <p>You need to connect your Twitter account before posting tweets.</p> <a href="/twitter/connect" class="mt-2 inline-block bg-blue-500 hover:bg-blue-600 text-white py-1 px-3 rounded text-sm"> Connect to Twitter </a> </div> <% else %> <.form for={@changeset || %{}} multipart={true} action={~p"/twitter/tweet"} class="space-y-8"> <div class="grid grid-cols-1 gap-6"> <div> <.input type="textarea" label="Tweet Content" name="tweet[text]" rows="4" maxlength="280" required /> <div class="text-xs text-gray-500 mt-1">Maximum 280 characters (required)</div> </div> <div> <.input type="file" name="tweet[media]" label="Media" accept="image/*,video/*" /> <div class="text-xs text-gray-500 mt-1"> Add images or a short video to your tweet<br> Supported formats: JPG, PNG, GIF, MP4<br> Maximum file size: 15MB for videos, 5MB for images </div> </div> <div> <.input type="checkbox" name="tweet[sensitive_content]" value="true" label="Mark as sensitive content" /> </div> <div class="pt-4"> <.button type="submit" class="w-full py-3 bg-blue-500 hover:bg-blue-600"> Post Tweet </.button> </div> </div> </.form> <div class="mt-10 border-t pt-6"> <h3 class="text-lg font-bold mb-2">Twitter Guidelines</h3> <ul class="list-disc pl-5 space-y-1 text-sm text-gray-600"> <li>Make sure your content complies with Twitter's Terms of Service</li> <li>Tweets are limited to 280 characters</li> <li>You can upload up to 4 images or 1 video per tweet</li> <li>Videos must be shorter than 2 minutes and 20 seconds</li> <li>Ensure you have the right to share all content in your tweet</li> </ul> </div> <% end %> <div class="border-t pt-6"> <a href="/twitter" class="text-blue-500 hover:underline">&larr; Back to Twitter Dashboard</a> </div> </div> </div> """ end end
```

# lib/myapp_web/controllers/user_session_controller.ex

```ex
defmodule MyappWeb.UserSessionController do use MyappWeb, :controller alias Myapp.Accounts alias MyappWeb.UserAuth def create(conn, %{"_action" => "registered"} = params) do create(conn, params, "Account created successfully!") end def create(conn, %{"_action" => "password_updated"} = params) do conn |> put_session(:user_return_to, ~p"/users/settings") |> create(params, "Password updated successfully!") end def create(conn, params) do create(conn, params, "Welcome back!") end defp create(conn, %{"user" => user_params}, info) do %{"email" => email, "password" => password} = user_params if user = Accounts.get_user_by_email_and_password(email, password) do conn |> put_flash(:info, info) |> UserAuth.log_in_user(user, user_params) else # In order to prevent user enumeration attacks, don't disclose whether the email is registered. conn |> put_flash(:error, "Invalid email or password") |> put_flash(:email, String.slice(email, 0, 160)) |> redirect(to: ~p"/users/log_in") end end def delete(conn, _params) do conn |> put_flash(:info, "Logged out successfully.") |> UserAuth.log_out_user() end end
```

# lib/myapp_web/controllers/youtube_controller.ex

```ex
defmodule MyappWeb.YoutubeController do use MyappWeb, :controller alias Myapp.Youtube def index(conn, params) do api_key = Map.get(params, "api_key", "") query = Map.get(params, "query", "") cond do api_key == "" and query == "" -> # Initial page load render(conn, :index, flash: %{}, videos: [], video_details: nil, api_key: "") api_key == "" -> # Missing API key render(conn, :index, flash: %{ error: "API Key Required", error_detail: "Please enter your YouTube API key to search videos." }, videos: [], video_details: nil, api_key: "" ) query == "" -> # Missing search query render(conn, :index, flash: %{ error: "Search Query Required", error_detail: "Please enter what you'd like to search for." }, videos: [], video_details: nil, api_key: api_key ) true -> # Both API key and query are present case Youtube.search_videos(query, api_key: api_key) do {:ok, videos} -> video_details = get_first_video_details(videos, api_key) render(conn, :index, flash: %{}, videos: videos, video_details: video_details, api_key: api_key ) {:error, message} -> render(conn, :index, flash: %{ error: "YouTube API Error", error_detail: message }, videos: [], video_details: nil, api_key: api_key ) end end end def search(conn, params) do # Handle search form submission redirect(conn, to: ~p"/youtube?#{%{api_key: params["api_key"], query: params["query"]}}") end defp get_first_video_details([], _api_key), do: nil defp get_first_video_details([%{id: video_id} | _], api_key) do case Youtube.get_video_details(video_id, api_key: api_key) do {:ok, details} -> details {:error, _message} -> nil end end end
```

# lib/myapp_web/controllers/youtube_html.ex

```ex
defmodule MyappWeb.YoutubeHTML do use MyappWeb, :html embed_templates "youtube_html/*" @doc """ Renders an error message component for YouTube API errors. """ attr :flash, :map, required: true def error_message(assigns) do ~H""" <%= if @flash[:error] do %> <div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6 dark:bg-red-900/20 dark:border-red-800"> <div class="flex"> <div class="ml-3"> <p class="text-red-700 font-medium dark:text-red-400"><%= @flash[:error] %></p> <p class="text-red-600 mt-1 dark:text-red-300"><%= @flash[:error_detail] %></p> </div> </div> </div> <% end %> """ end end
```

# lib/myapp_web/controllers/youtube_html/index.html.heex

```heex
<div class="container mx-auto p-4 dark:bg-gray-800 dark:text-white"> <.error_message flash={@flash} /> <div class="mb-8"> <h2 class="text-2xl font-bold mb-4">Search YouTube Videos</h2> <form id="search-form" class="flex flex-col gap-4" action="/youtube" method="get"> <div class="flex gap-4"> <input type="text" name="api_key" placeholder="Enter your YouTube API key..." value={@api_key} class="flex-1 px-4 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white" required /> <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 dark:bg-gray-600 dark:hover:bg-gray-700" onclick="document.querySelector('input[name=api_key]').value = ''; document.querySelector('input[name=api_key]').focus();" > Clear API Key </button> </div> <div class="flex gap-4"> <input type="text" name="query" placeholder="Search videos..." class="flex-1 px-4 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white" required /> <button type="submit" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800" > Search </button> </div> </form> </div> <%= if @videos && length(@videos) > 0 do %> <div id="search-results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"> <%= for video <- @videos do %> <div class="bg-white rounded-lg shadow-lg overflow-hidden dark:bg-gray-700"> <img src={video.thumbnail} alt={video.title} class="w-full" /> <div class="p-4"> <h3 class="font-bold text-lg mb-2">{video.title}</h3> <p class="text-gray-600 text-sm mb-2 dark:text-gray-400">{video.channel_title}</p> <p class="text-gray-500 text-sm dark:text-gray-300">{video.description}</p> <p class="text-gray-400 text-xs mt-2 dark:text-gray-500"> Published: {MyappWeb.Helpers.YoutubeHelper.format_published_date(video.published_at)} </p> <div class="mt-4"> <a href={"https://www.youtube.com/watch?v=#{video.id}"} target="_blank" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200" > Watch on YouTube </a> </div> </div> </div> <% end %> </div> <%= if @video_details do %> <div class="mt-8"> <h2 class="text-2xl font-bold mb-4">Video Details</h2> <div class="bg-white rounded-lg shadow-lg overflow-hidden dark:bg-gray-700"> <div class="aspect-w-16 aspect-h-9"> <iframe src={"https://www.youtube.com/embed/#{@video_details.id}"} frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="w-full h-full" > </iframe> </div> <div class="p-4"> <h3 class="font-bold text-xl mb-2">{@video_details.title}</h3> <div class="flex gap-4 text-sm text-gray-600 mb-4 dark:text-gray-400"> <span> {MyappWeb.Helpers.YoutubeHelper.format_view_count(@video_details.view_count)} views </span> <span> {MyappWeb.Helpers.YoutubeHelper.format_duration(@video_details.duration)} </span> <span> {MyappWeb.Helpers.YoutubeHelper.format_published_date(@video_details.published_at)} </span> </div> <p class="text-gray-700 mb-4 dark:text-gray-300">{@video_details.description}</p> <div class="flex flex-wrap gap-2"> <%= for tag <- @video_details.tags do %> <span class="px-2 py-1 bg-gray-100 rounded-full text-sm text-gray-600 dark:bg-gray-600 dark:text-gray-200"> {tag} </span> <% end %> </div> </div> </div> </div> <% end %> <% end %> </div>
```

# lib/myapp_web/endpoint.ex

```ex
defmodule MyappWeb.Endpoint do use Phoenix.Endpoint, otp_app: :myapp # The session will be stored in the cookie and signed, # this means its contents can be read but not tampered with. # Set :encryption_salt if you would also like to encrypt it. @session_options [ store: :cookie, key: "_myapp_key", signing_salt: "DG6ud072", same_site: "Lax" ] socket "/live", Phoenix.LiveView.Socket, websocket: [connect_info: [session: @session_options]], longpoll: [connect_info: [session: @session_options]] # Serve at "/" the static files from "priv/static" directory. # # You should set gzip to true if you are running phx.digest # when deploying your static files in production. plug Plug.Static, at: "/", from: :myapp, gzip: false, only: MyappWeb.static_paths() # Code reloading can be explicitly enabled under the # :code_reloader configuration of your endpoint. if code_reloading? do socket "/phoenix/live_reload/socket", Phoenix.LiveReloader.Socket plug Phoenix.LiveReloader plug Phoenix.CodeReloader plug Phoenix.Ecto.CheckRepoStatus, otp_app: :myapp end plug Phoenix.LiveDashboard.RequestLogger, param_key: "request_logger", cookie_key: "request_logger" plug Plug.RequestId plug Plug.Telemetry, event_prefix: [:phoenix, :endpoint] plug Plug.Parsers, parsers: [:urlencoded, :multipart, :json], pass: ["*/*"], json_decoder: Phoenix.json_library() plug Plug.MethodOverride plug Plug.Head plug Plug.Session, @session_options plug MyappWeb.Router end
```

# lib/myapp_web/example.ex

```ex
defmodule MyappWeb.Example do @moduledoc """ This module is used to test the localization of the application. """ # Use Gettext with correct backend syntax use Gettext, backend: MyappWeb.Gettext def get_privacy_policy(_locale \\ nil) do # This is a placeholder function for now %{version: "1.0", content: "This is a privacy policy"} end end
```

# lib/myapp_web/gettext.ex

```ex
defmodule MyappWeb.Gettext do @moduledoc """ A module providing Internationalization with a gettext-based API. By using [Gettext](https://hexdocs.pm/gettext), your module gains a set of macros for translations, for example: import MyappWeb.Gettext # Simple translation gettext("Here is the string to translate") # Plural translation ngettext("Here is the string to translate", "Here are the strings to translate", 3) # Domain-based translation dgettext("errors", "Here is the error message to translate") See the [Gettext Docs](https://hexdocs.pm/gettext) for detailed usage. """ use Gettext.Backend, otp_app: :myapp end
```

# lib/myapp_web/helpers/youtube_helper.ex

```ex
defmodule MyappWeb.Helpers.YoutubeHelper do @moduledoc """ Helper functions for working with YouTube data in templates. """ @doc """ Returns the embed URL for a YouTube video. """ def embed_url(video_id) do "https://www.youtube.com/embed/#{video_id}" end @doc """ Returns the URL for a video's thumbnail. Available quality options: :default, :medium, :high, :standard, :maxres """ def thumbnail_url(video_id, quality \\ :medium) do case quality do :default -> "https://img.youtube.com/vi/#{video_id}/default.jpg" :medium -> "https://img.youtube.com/vi/#{video_id}/mqdefault.jpg" :high -> "https://img.youtube.com/vi/#{video_id}/hqdefault.jpg" :standard -> "https://img.youtube.com/vi/#{video_id}/sddefault.jpg" :maxres -> "https://img.youtube.com/vi/#{video_id}/maxresdefault.jpg" end end @doc """ Formats a duration in seconds to a human-readable string. Example: 125 -> "2:05" """ def format_duration(seconds) when is_integer(seconds) do hours = div(seconds, 3600) minutes = div(rem(seconds, 3600), 60) remaining_seconds = rem(seconds, 60) cond do hours > 0 -> :io_lib.format("~2..0B:~2..0B:~2..0B", [hours, minutes, remaining_seconds]) true -> :io_lib.format("~B:~2..0B", [minutes, remaining_seconds]) end |> to_string() end def format_duration(_), do: "0:00" @doc """ Formats a view count to a human-readable string. Examples: 1234 -> "1.2K", 12345 -> "12.3K", 123456 -> "123.4K", 1234567 -> "1.2M" """ def format_view_count(count) when is_integer(count) do cond do count >= 1_000_000_000 -> "#{Float.round(count / 1_000_000_000, 1)}B" count >= 1_000_000 -> "#{Float.round(count / 1_000_000, 1)}M" count >= 1_000 -> "#{Float.round(count / 1_000, 1)}K" true -> to_string(count) end end def format_view_count(_), do: "0" @doc """ Formats a published date to a human-readable string. Example: "2024-02-22T12:00:00Z" -> "Feb 22, 2024" """ def format_published_date(datetime) when is_binary(datetime) do case DateTime.from_iso8601(datetime) do {:ok, dt, _offset} -> Calendar.strftime(dt, "%b %d, %Y") _ -> datetime end end def format_published_date(_), do: "" @doc """ Returns a direct link to a YouTube video. """ def video_url(video_id) do "https://www.youtube.com/watch?v=#{video_id}" end end
```

# lib/myapp_web/live/counter_live/counter_live.ex

```ex
defmodule MyappWeb.CounterLive do use MyappWeb, :live_view require Logger def mount(_params, _session, socket) do if connected?(socket) do Logger.info("WebSocket 연결이 설정되었습니다.") else Logger.info("초기 HTTP 요청이 발생했습니다.") end # LiveView 연결상태 확인하기 위한 코드 IO.puts("mounting (connected: #{connected?(socket)})") # assign/2 은 LiveView 상태 업데이트 함수 {:ok, assign(socket, count: 0)} end # 로그를 보면 알겠지만, LiveView가 처음 로드될 때 두번 호출됨. # 초기 페이지 로드시 한번, 라이브 소켓 설정 위해 한번 더. # 클라이언트에서 발생한 이벤트 처리 함수 increment 이벤트 발생시 함수 호출 def handle_event("increment", _value, socket) do # Logger로 count값 출력위함. new_count = socket.assigns.count + 1 Logger.info("count: #{new_count}") {:noreply, assign(socket, count: new_count)} end def handle_event("decrement", _value, socket) do {:noreply, update(socket, :count, &(&1 - 1))} end # counter_live.html.heex # 자동으로 heex 템플릿 사용 따로 render함수 작성 필요 없음 ㄷㄷ end
```

# lib/myapp_web/live/counter_live/counter_live.html.heex

```heex
<div class="flex flex-col items-center justify-center space-y-4"> <h1 class="text-2xl font-bold text-gray-900 dark:text-white">실시간 카운터</h1> <div class="text-4xl font-bold text-gray-900 dark:text-white">{@count}</div> <div class="flex space-x-4"> <button phx-click="decrement" class="px-4 py-2 text-sm font-medium text-white bg-red-600 dark:bg-red-700 rounded-md hover:bg-red-700 dark:hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-red-600" > 감소 </button> <button phx-click="increment" class="px-4 py-2 text-sm font-medium text-white bg-green-600 dark:bg-green-700 rounded-md hover:bg-green-700 dark:hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-green-600" > 증가 </button> </div> </div>
```

# lib/myapp_web/live/file_live/file_live.ex

```ex
defmodule MyappWeb.FileLive do use MyappWeb, :live_view alias Myapp.FileServer @uploads_dir "priv/static/uploads" @impl true def mount(_params, _session, socket) do File.mkdir_p!(@uploads_dir) {:ok, socket |> assign(:uploaded_files, []) |> assign(:files, list_files()) |> allow_upload(:file, accept: :any, max_entries: 1)} end @impl true def handle_event("validate", _params, socket) do {:noreply, socket} end @impl true def handle_event("save", _params, socket) do uploaded_files = consume_uploaded_entries(socket, :file, fn %{path: path}, entry -> dest = Path.join(@uploads_dir, entry.client_name) File.cp!(path, dest) {:ok, entry.client_name} end) {:noreply, socket |> update(:uploaded_files, &(&1 ++ uploaded_files)) |> assign(:files, list_files())} end @impl true def handle_event("delete", %{"filename" => filename}, socket) do file_path = Path.join(@uploads_dir, filename) FileServer.delete_file(file_path) {:noreply, assign(socket, :files, list_files())} end defp list_files do case File.ls(@uploads_dir) do {:ok, files} -> files {:error, _} -> [] end end defp error_to_string(:too_large), do: "File is too large" defp error_to_string(:too_many_files), do: "Too many files" defp error_to_string(:not_accepted), do: "Unacceptable file type" end
```

# lib/myapp_web/live/file_live/file_live.html.heex

```heex
<div class="container mx-auto px-4 py-8"> <div class="bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6"> <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">File Manager</h1> <form phx-submit="save" phx-change="validate" class="space-y-6"> <div> <%= for err <- upload_errors(@uploads.file) do %> <div class="text-red-500">{error_to_string(err)}</div> <% end %> <div class="flex items-center justify-center w-full"> <label for="dropzone-file" class="flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600" > <div class="flex flex-col items-center justify-center pt-5 pb-6"> <svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16" > <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2" /> </svg> <p class="mb-2 text-sm text-gray-500 dark:text-gray-400"> <span class="font-semibold">Click to upload</span> or drag and drop </p> </div> <.live_file_input upload={@uploads.file} /> </label> </div> </div> <div class="mt-4"> <%= for entry <- @uploads.file.entries do %> <div class="flex items-center gap-4"> <div class="text-sm text-gray-700 dark:text-gray-300">{entry.client_name}</div> <div class="text-xs text-gray-500 dark:text-gray-400"> {entry.progress}% </div> <%= for err <- upload_errors(@uploads.file, entry) do %> <div class="text-red-500 text-xs">{error_to_string(err)}</div> <% end %> </div> <% end %> </div> <div class="mt-4"> <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-600" > Upload </button> </div> </form> <div class="mt-8"> <h2 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Uploaded Files</h2> <div class="space-y-2"> <%= for filename <- @files do %> <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded"> <div class="flex items-center gap-4"> <span class="text-sm text-gray-700 dark:text-gray-300">{filename}</span> </div> <div class="flex items-center gap-2"> <a href={"/api/files/#{filename}"} class="px-3 py-1 text-sm bg-green-500 dark:bg-green-700 text-white rounded hover:bg-green-600 dark:hover:bg-green-800" > Download </a> <button phx-click="delete" phx-value-filename={filename} class="px-3 py-1 text-sm bg-red-500 dark:bg-red-700 text-white rounded hover:bg-red-600 dark:hover:bg-red-800" > Delete </button> </div> </div> <% end %> </div> </div> </div> </div>
```

# lib/myapp_web/live/user_confirmation_instructions_live.ex

```ex
defmodule MyappWeb.UserConfirmationInstructionsLive do use MyappWeb, :live_view alias Myapp.Accounts def render(assigns) do ~H""" <div class="mx-auto max-w-sm"> <.header class="text-center"> No confirmation instructions received? <:subtitle>We'll send a new confirmation link to your inbox</:subtitle> </.header> <.simple_form for={@form} id="resend_confirmation_form" phx-submit="send_instructions"> <.input field={@form[:email]} type="email" placeholder="Email" required /> <:actions> <.button phx-disable-with="Sending..." class="w-full"> Resend confirmation instructions </.button> </:actions> </.simple_form> <p class="text-center mt-4"> <.link href={~p"/users/register"}>Register</.link> | <.link href={~p"/users/log_in"}>Log in</.link> </p> </div> """ end def mount(_params, _session, socket) do {:ok, assign(socket, form: to_form(%{}, as: "user"))} end def handle_event("send_instructions", %{"user" => %{"email" => email}}, socket) do if user = Accounts.get_user_by_email(email) do Accounts.deliver_user_confirmation_instructions( user, &url(~p"/users/confirm/#{&1}") ) end info = "If your email is in our system and it has not been confirmed yet, you will receive an email with instructions shortly." {:noreply, socket |> put_flash(:info, info) |> redirect(to: ~p"/")} end end
```

# lib/myapp_web/live/user_confirmation_live.ex

```ex
defmodule MyappWeb.UserConfirmationLive do use MyappWeb, :live_view alias Myapp.Accounts def render(%{live_action: :edit} = assigns) do ~H""" <div class="mx-auto max-w-sm"> <.header class="text-center">Confirm Account</.header> <.simple_form for={@form} id="confirmation_form" phx-submit="confirm_account"> <input type="hidden" name={@form[:token].name} value={@form[:token].value} /> <:actions> <.button phx-disable-with="Confirming..." class="w-full">Confirm my account</.button> </:actions> </.simple_form> <p class="text-center mt-4"> <.link href={~p"/users/register"}>Register</.link> | <.link href={~p"/users/log_in"}>Log in</.link> </p> </div> """ end def mount(%{"token" => token}, _session, socket) do form = to_form(%{"token" => token}, as: "user") {:ok, assign(socket, form: form), temporary_assigns: [form: nil]} end # Do not log in the user after confirmation to avoid a # leaked token giving the user access to the account. def handle_event("confirm_account", %{"user" => %{"token" => token}}, socket) do case Accounts.confirm_user(token) do {:ok, _} -> {:noreply, socket |> put_flash(:info, "User confirmed successfully.") |> redirect(to: ~p"/")} :error -> # If there is a current user and the account was already confirmed, # then odds are that the confirmation link was already visited, either # by some automation or by the user themselves, so we redirect without # a warning message. case socket.assigns do %{current_user: %{confirmed_at: confirmed_at}} when not is_nil(confirmed_at) -> {:noreply, redirect(socket, to: ~p"/")} %{} -> {:noreply, socket |> put_flash(:error, "User confirmation link is invalid or it has expired.") |> redirect(to: ~p"/")} end end end end
```

# lib/myapp_web/live/user_forgot_password_live.ex

```ex
defmodule MyappWeb.UserForgotPasswordLive do use MyappWeb, :live_view alias Myapp.Accounts def render(assigns) do ~H""" <div class="mx-auto max-w-sm"> <.header class="text-center"> Forgot your password? <:subtitle>We'll send a password reset link to your inbox</:subtitle> </.header> <.simple_form for={@form} id="reset_password_form" phx-submit="send_email"> <.input field={@form[:email]} type="email" placeholder="Email" required /> <:actions> <.button phx-disable-with="Sending..." class="w-full"> Send password reset instructions </.button> </:actions> </.simple_form> <p class="text-center text-sm mt-4"> <.link href={~p"/users/register"}>Register</.link> | <.link href={~p"/users/log_in"}>Log in</.link> </p> </div> """ end def mount(_params, _session, socket) do {:ok, assign(socket, form: to_form(%{}, as: "user"))} end def handle_event("send_email", %{"user" => %{"email" => email}}, socket) do if user = Accounts.get_user_by_email(email) do Accounts.deliver_user_reset_password_instructions( user, &url(~p"/users/reset_password/#{&1}") ) end info = "If your email is in our system, you will receive instructions to reset your password shortly." {:noreply, socket |> put_flash(:info, info) |> redirect(to: ~p"/")} end end
```

# lib/myapp_web/live/user_login_live.ex

```ex
defmodule MyappWeb.UserLoginLive do use MyappWeb, :live_view def render(assigns) do ~H""" <div class="mx-auto max-w-sm"> <.header class="text-center"> Log in to account <:subtitle> Don't have an account? <.link navigate={~p"/users/register"} class="font-semibold text-brand hover:underline"> Sign up </.link> for an account now. </:subtitle> </.header> <.simple_form for={@form} id="login_form" action={~p"/users/log_in"} phx-update="ignore"> <.input field={@form[:email]} type="email" label="Email" required /> <.input field={@form[:password]} type="password" label="Password" required /> <:actions> <.input field={@form[:remember_me]} type="checkbox" label="Keep me logged in" /> <.link href={~p"/users/reset_password"} class="text-sm font-semibold"> Forgot your password? </.link> </:actions> <:actions> <.button phx-disable-with="Logging in..." class="w-full"> Log in <span aria-hidden="true">→</span> </.button> </:actions> </.simple_form> </div> """ end def mount(_params, _session, socket) do email = Phoenix.Flash.get(socket.assigns.flash, :email) form = to_form(%{"email" => email}, as: "user") {:ok, assign(socket, form: form), temporary_assigns: [form: form]} end end
```

# lib/myapp_web/live/user_registration_live.ex

```ex
defmodule MyappWeb.UserRegistrationLive do use MyappWeb, :live_view alias Myapp.Accounts alias Myapp.Accounts.User def render(assigns) do ~H""" <div class="mx-auto max-w-sm"> <.header class="text-center"> Register for an account <:subtitle> Already registered? <.link navigate={~p"/users/log_in"} class="font-semibold text-brand hover:underline"> Log in </.link> to your account now. </:subtitle> </.header> <.simple_form for={@form} id="registration_form" phx-submit="save" phx-change="validate" phx-trigger-action={@trigger_submit} action={~p"/users/log_in?_action=registered"} method="post" > <.error :if={@check_errors}> Oops, something went wrong! Please check the errors below. </.error> <.input field={@form[:email]} type="email" label="Email" required /> <.input field={@form[:password]} type="password" label="Password" required /> <:actions> <.button phx-disable-with="Creating account..." class="w-full">Create an account</.button> </:actions> </.simple_form> </div> """ end def mount(_params, _session, socket) do changeset = Accounts.change_user_registration(%User{}) socket = socket |> assign(trigger_submit: false, check_errors: false) |> assign_form(changeset) {:ok, socket, temporary_assigns: [form: nil]} end def handle_event("save", %{"user" => user_params}, socket) do case Accounts.register_user(user_params) do {:ok, user} -> {:ok, _} = Accounts.deliver_user_confirmation_instructions( user, &url(~p"/users/confirm/#{&1}") ) changeset = Accounts.change_user_registration(user) {:noreply, socket |> assign(trigger_submit: true) |> assign_form(changeset)} {:error, %Ecto.Changeset{} = changeset} -> {:noreply, socket |> assign(check_errors: true) |> assign_form(changeset)} end end def handle_event("validate", %{"user" => user_params}, socket) do changeset = Accounts.change_user_registration(%User{}, user_params) {:noreply, assign_form(socket, Map.put(changeset, :action, :validate))} end defp assign_form(socket, %Ecto.Changeset{} = changeset) do form = to_form(changeset, as: "user") if changeset.valid? do assign(socket, form: form, check_errors: false) else assign(socket, form: form) end end end
```

# lib/myapp_web/live/user_reset_password_live.ex

```ex
defmodule MyappWeb.UserResetPasswordLive do use MyappWeb, :live_view alias Myapp.Accounts def render(assigns) do ~H""" <div class="mx-auto max-w-sm"> <.header class="text-center">Reset Password</.header> <.simple_form for={@form} id="reset_password_form" phx-submit="reset_password" phx-change="validate" > <.error :if={@form.errors != []}> Oops, something went wrong! Please check the errors below. </.error> <.input field={@form[:password]} type="password" label="New password" required /> <.input field={@form[:password_confirmation]} type="password" label="Confirm new password" required /> <:actions> <.button phx-disable-with="Resetting..." class="w-full">Reset Password</.button> </:actions> </.simple_form> <p class="text-center text-sm mt-4"> <.link href={~p"/users/register"}>Register</.link> | <.link href={~p"/users/log_in"}>Log in</.link> </p> </div> """ end def mount(params, _session, socket) do socket = assign_user_and_token(socket, params) form_source = case socket.assigns do %{user: user} -> Accounts.change_user_password(user) _ -> %{} end {:ok, assign_form(socket, form_source), temporary_assigns: [form: nil]} end # Do not log in the user after reset password to avoid a # leaked token giving the user access to the account. def handle_event("reset_password", %{"user" => user_params}, socket) do case Accounts.reset_user_password(socket.assigns.user, user_params) do {:ok, _} -> {:noreply, socket |> put_flash(:info, "Password reset successfully.") |> redirect(to: ~p"/users/log_in")} {:error, changeset} -> {:noreply, assign_form(socket, Map.put(changeset, :action, :insert))} end end def handle_event("validate", %{"user" => user_params}, socket) do changeset = Accounts.change_user_password(socket.assigns.user, user_params) {:noreply, assign_form(socket, Map.put(changeset, :action, :validate))} end defp assign_user_and_token(socket, %{"token" => token}) do if user = Accounts.get_user_by_reset_password_token(token) do assign(socket, user: user, token: token) else socket |> put_flash(:error, "Reset password link is invalid or it has expired.") |> redirect(to: ~p"/") end end defp assign_form(socket, %{} = source) do assign(socket, :form, to_form(source, as: "user")) end end
```

# lib/myapp_web/live/user_settings_live.ex

```ex
defmodule MyappWeb.UserSettingsLive do use MyappWeb, :live_view alias Myapp.Accounts def render(assigns) do ~H""" <.header class="text-center"> Account Settings <:subtitle>Manage your account email address and password settings</:subtitle> </.header> <div class="space-y-12 divide-y"> <div> <.simple_form for={@email_form} id="email_form" phx-submit="update_email" phx-change="validate_email" > <.input field={@email_form[:email]} type="email" label="Email" required /> <.input field={@email_form[:current_password]} name="current_password" id="current_password_for_email" type="password" label="Current password" value={@email_form_current_password} required /> <:actions> <.button phx-disable-with="Changing...">Change Email</.button> </:actions> </.simple_form> </div> <div> <.simple_form for={@password_form} id="password_form" action={~p"/users/log_in?_action=password_updated"} method="post" phx-change="validate_password" phx-submit="update_password" phx-trigger-action={@trigger_submit} > <input name={@password_form[:email].name} type="hidden" id="hidden_user_email" value={@current_email} /> <.input field={@password_form[:password]} type="password" label="New password" required /> <.input field={@password_form[:password_confirmation]} type="password" label="Confirm new password" /> <.input field={@password_form[:current_password]} name="current_password" type="password" label="Current password" id="current_password_for_password" value={@current_password} required /> <:actions> <.button phx-disable-with="Changing...">Change Password</.button> </:actions> </.simple_form> </div> </div> """ end def mount(%{"token" => token}, _session, socket) do socket = case Accounts.update_user_email(socket.assigns.current_user, token) do :ok -> put_flash(socket, :info, "Email changed successfully.") :error -> put_flash(socket, :error, "Email change link is invalid or it has expired.") end {:ok, push_navigate(socket, to: ~p"/users/settings")} end def mount(_params, _session, socket) do user = socket.assigns.current_user email_changeset = Accounts.change_user_email(user) password_changeset = Accounts.change_user_password(user) socket = socket |> assign(:current_password, nil) |> assign(:email_form_current_password, nil) |> assign(:current_email, user.email) |> assign(:email_form, to_form(email_changeset)) |> assign(:password_form, to_form(password_changeset)) |> assign(:trigger_submit, false) {:ok, socket} end def handle_event("validate_email", params, socket) do %{"current_password" => password, "user" => user_params} = params email_form = socket.assigns.current_user |> Accounts.change_user_email(user_params) |> Map.put(:action, :validate) |> to_form() {:noreply, assign(socket, email_form: email_form, email_form_current_password: password)} end def handle_event("update_email", params, socket) do %{"current_password" => password, "user" => user_params} = params user = socket.assigns.current_user case Accounts.apply_user_email(user, password, user_params) do {:ok, applied_user} -> Accounts.deliver_user_update_email_instructions( applied_user, user.email, &url(~p"/users/settings/confirm_email/#{&1}") ) info = "A link to confirm your email change has been sent to the new address." {:noreply, socket |> put_flash(:info, info) |> assign(email_form_current_password: nil)} {:error, changeset} -> {:noreply, assign(socket, :email_form, to_form(Map.put(changeset, :action, :insert)))} end end def handle_event("validate_password", params, socket) do %{"current_password" => password, "user" => user_params} = params password_form = socket.assigns.current_user |> Accounts.change_user_password(user_params) |> Map.put(:action, :validate) |> to_form() {:noreply, assign(socket, password_form: password_form, current_password: password)} end def handle_event("update_password", params, socket) do %{"current_password" => password, "user" => user_params} = params user = socket.assigns.current_user case Accounts.update_user_password(user, password, user_params) do {:ok, user} -> password_form = user |> Accounts.change_user_password(user_params) |> to_form() {:noreply, assign(socket, trigger_submit: true, password_form: password_form)} {:error, changeset} -> {:noreply, assign(socket, password_form: to_form(changeset))} end end end
```

# lib/myapp_web/live/youtube_search_live.ex

```ex
defmodule MyappWeb.YoutubeSearchLive do use MyappWeb, :live_view alias Myapp.Youtube @impl true def mount(_params, _session, socket) do socket = socket |> assign(:api_key, "") |> assign(:query, "") |> assign(:videos, []) |> assign(:video_details, nil) |> assign(:loading, false) {:ok, socket} end @impl true def handle_event("search", %{"api_key" => api_key, "query" => query}, socket) do socket = case {api_key, query} do {"", ""} -> socket |> put_flash(:error, "Input Required") |> put_flash(:error_detail, "Please enter both API key and query.") {"", _} -> socket |> put_flash(:error, "API Key Required") |> put_flash(:error_detail, "Please enter your YouTube API key.") {_, ""} -> socket |> put_flash(:error, "Query Required") |> put_flash(:error_detail, "Please enter a search query.") {api_key, query} -> Task.async(fn -> Youtube.search_videos(query, api_key: api_key) end) socket |> assign(:api_key, api_key) |> assign(:query, query) |> assign(:videos, []) |> assign(:loading, true) |> clear_flash() end {:noreply, socket} end @impl true def handle_event("clear_api_key", _params, socket) do {:noreply, assign(socket, :api_key, "")} end @impl true def handle_info({ref, result}, socket) when is_reference(ref) do case result do {:ok, videos} when is_list(videos) -> socket = socket |> assign(:videos, videos) |> assign(:video_details, get_first_video_details(videos, socket.assigns.api_key)) |> assign(:loading, false) |> clear_flash() {:noreply, socket} {:error, message} -> socket = socket |> assign(:loading, false) |> put_flash(:error, "YouTube API Error") |> put_flash(:error_detail, message) {:noreply, socket} unexpected -> IO.inspect(unexpected, label: "Unexpected Result") {:noreply, assign(socket, :loading, false)} end end # 태스크 종료 메시지 처리 @impl true def handle_info({:DOWN, _ref, :process, _pid, _reason}, socket) do # 태스크가 끝났으니 추가 작업 없음 {:noreply, socket} end # 디버깅용 캐치올 조항 @impl true def handle_info(msg, socket) do IO.inspect(msg, label: "Unhandled Message in handle_info") {:noreply, socket} end defp get_first_video_details([], _api_key), do: nil defp get_first_video_details([%{id: video_id} | _], api_key) do case Youtube.get_video_details(video_id, api_key: api_key) do {:ok, details} -> details {:error, _message} -> nil end end end
```

# lib/myapp_web/live/youtube_search_live.html.heex

```heex
<div class="container mx-auto p-4 dark:bg-gray-800 dark:text-white"> <div class="mb-8"> <h2 class="text-2xl font-bold mb-4">Search YouTube Videos</h2> <form id="search-form" class="flex flex-col gap-4" phx-submit="search"> <div class="flex gap-4"> <input type="text" name="api_key" placeholder="Enter your YouTube API key..." value={@api_key} class="flex-1 px-4 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white" required phx-debounce="300" /> <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 dark:bg-gray-600 dark:hover:bg-gray-700" phx-click="clear_api_key" > Clear API Key </button> </div> <div class="flex gap-4"> <input type="text" name="query" placeholder="Search videos..." class="flex-1 px-4 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white" required phx-debounce="300" /> <button type="submit" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800" > Search </button> </div> </form> </div> <%= if @loading do %> <div id="global-spinner" class="spinner justify-center items-center"> <svg width="100" height="120" viewBox="247 250 404 300" fill="none" xmlns="http://www.w3.org/2000/svg" > <path d="M421.77,208.95c0-14.67,11.25-55.63-3.12-58.6c-9.97-2.06-17.54,26.02-18.78,36.12 c-1.59,12.97-3.7,39.5-0.88,52.26c1.97,8.91,5.84,31.6,14.79,33.37c8.29,1.64,21.72-14.38,25.89-21.73 c3.77-6.65,9.69-20.91,11.54-28.32c2.38-9.51,7.63-29.2,5.68-38.81c-2.4-11.83-12.04-38.88-23.68-42.07 c-11.05-3.02-32.27,14.56-39.22,23.66c-7.19,9.41-12.55,33.73-12.93,45.56c-0.38,11.82-0.71,36.43,4.39,47.1 c3.57,7.47,17.92,17.35,22.73,24.09c4.35,6.1,10.22,20.37,11.22,27.8c5.39,40.08-1.49,121.5-6.32,161.65 c-2,16.6-9.56,66.19-9.56,66.19s-11.49,32.96-17.45,42.89c-3.17,5.28-9.82,20.45-15.78,18.92c-10.61-2.73-13.52-31.99-10.55-42.54 c8.02-28.42,43.16-77.72,61.56-100.81c12.74-15.98,40.18-46.84,49.54-65c13.57-26.34,35.03-113.21,35.03-113.21 s-2.01,88.94-8.86,117.62c-4.86,20.34-24.21,58.24-36,75.52c-5.79,8.49-21.08,22.49-28.08,30.01c-6,6.44-22.58,27.02-22.58,27.02" stroke="gray" storke-width="10" /> </svg> </div> <% end %> <%= if @videos && length(@videos) > 0 do %> <div id="search-results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"> <%= for video <- @videos do %> <div class="bg-white rounded-lg shadow-lg overflow-hidden dark:bg-gray-700"> <img src={video.thumbnail} alt={video.title} class="w-full" /> <div class="p-4"> <h3 class="font-bold text-lg mb-2">{video.title}</h3> <p class="text-gray-600 text-sm mb-2 dark:text-gray-400">{video.channel_title}</p> <p class="text-gray-500 text-sm dark:text-gray-300">{video.description}</p> <p class="text-gray-400 text-xs mt-2 dark:text-gray-500"> Published: {MyappWeb.Helpers.YoutubeHelper.format_published_date(video.published_at)} </p> <div class="mt-4"> <a href={"https://www.youtube.com/watch?v=#{video.id}"} target="_blank" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200" > Watch on YouTube </a> </div> </div> </div> <% end %> </div> <%= if @video_details do %> <div class="mt-8"> <h2 class="text-2xl font-bold mb-4">Video Details</h2> <div class="bg-white rounded-lg shadow-lg overflow-hidden dark:bg-gray-700"> <div class="aspect-w-16 aspect-h-9"> <iframe src={"https://www.youtube.com/embed/#{@video_details.id}"} frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="w-full h-full" > </iframe> </div> <div class="p-4"> <h3 class="font-bold text-xl mb-2">{@video_details.title}</h3> <div class="flex gap-4 text-sm text-gray-600 mb-4 dark:text-gray-400"> <span> {MyappWeb.Helpers.YoutubeHelper.format_view_count(@video_details.view_count)} views </span> <span> {MyappWeb.Helpers.YoutubeHelper.format_duration(@video_details.duration)} </span> <span> {MyappWeb.Helpers.YoutubeHelper.format_published_date(@video_details.published_at)} </span> </div> <p class="text-gray-700 mb-4 dark:text-gray-300">{@video_details.description}</p> <div class="flex flex-wrap gap-2"> <%= for tag <- @video_details.tags do %> <span class="px-2 py-1 bg-gray-100 rounded-full text-sm text-gray-600 dark:bg-gray-600 dark:text-gray-200"> {tag} </span> <% end %> </div> </div> </div> </div> <% end %> <% end %> </div>
```

# lib/myapp_web/router.ex

```ex
defmodule MyappWeb.Router do use MyappWeb, :router import MyappWeb.UserAuth pipeline :browser do plug :accepts, ["html"] plug :fetch_session plug :fetch_live_flash plug :put_root_layout, html: {MyappWeb.Layouts, :root} plug :protect_from_forgery plug :put_secure_browser_headers plug :fetch_current_user end pipeline :browser_without_layout do plug :accepts, ["html"] plug :fetch_session plug :fetch_live_flash plug :protect_from_forgery plug :put_secure_browser_headers plug :fetch_current_user end pipeline :api do plug :accepts, ["json"] plug :fetch_api_user end scope "/", MyappWeb do pipe_through :browser_without_layout get "/", LandingController, :index end scope "/", MyappWeb do pipe_through :browser get "/tiktok", TiktokController, :show get "/tiktok/upload", TiktokController, :upload_form post "/tiktok/upload", TiktokController, :upload_video get "/twitter", TwitterController, :show get "/twitter/tweet", TwitterController, :tweet_form post "/twitter/tweet", TwitterController, :post_tweet get "/twitter/connect", TwitterController, :connect get "/twitter/auth/callback", TwitterController, :auth_callback get "/instagram", InstagramController, :show get "/instagram/upload", InstagramController, :upload_form post "/instagram/upload", InstagramController, :upload_media get "/instagram/connect", InstagramController, :connect get "/instagram/auth/callback", InstagramController, :auth_callback get "/test/landing", PageController, :home get "/test", TestController, :page post "/test/search", TestController, :search # YouTube routes get "/youtube", YoutubeController, :index post "/youtube/search", YoutubeController, :search get "/privacy-policy/:version", PrivacyPolicyController, :page get "/terms-of-services/:version", TermsOfServicesController, :page live "/counter", CounterLive live "/files", FileLive live "/youtube", YoutubeSearchLive # Documentation routes get "/docs", DocsController, :index get "/docs/:topic", DocsController, :show # Pricing route get "/pricing", PricingController, :index get "/features", FeaturesController, :index # Company route get "/company", CompanyController, :index end # Other scopes may use custom stacks. scope "/api", MyappWeb do pipe_through :api post "/files/upload", FileController, :upload get "/files/:filename", FileController, :download # Thread API routes post "/threads", ThreadController, :create post "/threads/:thread_id/reply", ThreadController, :reply get "/threads/:id", ThreadController, :show delete "/threads/:id", ThreadController, :delete end # Enable LiveDashboard and Swoosh mailbox preview in development if Application.compile_env(:myapp, :dev_routes) do # If you want to use the LiveDashboard in production, you should put # it behind authentication and allow only admins to access it. # If your application does not have an admins-only section yet, # you can use Plug.BasicAuth to set up some basic authentication # as long as you are also using SSL (which you should anyway). import Phoenix.LiveDashboard.Router scope "/dev" do pipe_through :browser live_dashboard "/dashboard", metrics: MyappWeb.Telemetry forward "/mailbox", Plug.Swoosh.MailboxPreview end end ## Authentication routes scope "/", MyappWeb do pipe_through [:browser, :redirect_if_user_is_authenticated] live_session :redirect_if_user_is_authenticated, on_mount: [{MyappWeb.UserAuth, :redirect_if_user_is_authenticated}] do live "/users/register", UserRegistrationLive, :new live "/users/log_in", UserLoginLive, :new live "/users/reset_password", UserForgotPasswordLive, :new live "/users/reset_password/:token", UserResetPasswordLive, :edit end post "/users/log_in", UserSessionController, :create end scope "/", MyappWeb do pipe_through [:browser, :require_authenticated_user] live_session :require_authenticated_user, on_mount: [{MyappWeb.UserAuth, :ensure_authenticated}] do live "/users/settings", UserSettingsLive, :edit live "/users/settings/confirm_email/:token", UserSettingsLive, :confirm_email end end scope "/", MyappWeb do pipe_through [:browser] delete "/users/log_out", UserSessionController, :delete live_session :current_user, on_mount: [{MyappWeb.UserAuth, :mount_current_user}] do live "/users/confirm/:token", UserConfirmationLive, :edit live "/users/confirm", UserConfirmationInstructionsLive, :new end end end
```

# lib/myapp_web/telemetry.ex

```ex
defmodule MyappWeb.Telemetry do use Supervisor import Telemetry.Metrics def start_link(arg) do Supervisor.start_link(__MODULE__, arg, name: __MODULE__) end @impl true def init(_arg) do children = [ # Telemetry poller will execute the given period measurements # every 10_000ms. Learn more here: https://hexdocs.pm/telemetry_metrics {:telemetry_poller, measurements: periodic_measurements(), period: 10_000} # Add reporters as children of your supervision tree. # {Telemetry.Metrics.ConsoleReporter, metrics: metrics()} ] Supervisor.init(children, strategy: :one_for_one) end def metrics do [ # Phoenix Metrics summary("phoenix.endpoint.start.system_time", unit: {:native, :millisecond} ), summary("phoenix.endpoint.stop.duration", unit: {:native, :millisecond} ), summary("phoenix.router_dispatch.start.system_time", tags: [:route], unit: {:native, :millisecond} ), summary("phoenix.router_dispatch.exception.duration", tags: [:route], unit: {:native, :millisecond} ), summary("phoenix.router_dispatch.stop.duration", tags: [:route], unit: {:native, :millisecond} ), summary("phoenix.socket_connected.duration", unit: {:native, :millisecond} ), summary("phoenix.channel_joined.duration", unit: {:native, :millisecond} ), summary("phoenix.channel_handled_in.duration", tags: [:event], unit: {:native, :millisecond} ), # Database Metrics summary("myapp.repo.query.total_time", unit: {:native, :millisecond}, description: "The sum of the other measurements" ), summary("myapp.repo.query.decode_time", unit: {:native, :millisecond}, description: "The time spent decoding the data received from the database" ), summary("myapp.repo.query.query_time", unit: {:native, :millisecond}, description: "The time spent executing the query" ), summary("myapp.repo.query.queue_time", unit: {:native, :millisecond}, description: "The time spent waiting for a database connection" ), summary("myapp.repo.query.idle_time", unit: {:native, :millisecond}, description: "The time the connection spent waiting before being checked out for the query" ), # VM Metrics summary("vm.memory.total", unit: {:byte, :kilobyte}), summary("vm.total_run_queue_lengths.total"), summary("vm.total_run_queue_lengths.cpu"), summary("vm.total_run_queue_lengths.io") ] end defp periodic_measurements do [ # A module, function and arguments to be invoked periodically. # This function must call :telemetry.execute/3 and a metric must be added above. # {MyappWeb, :count_users, []} ] end end
```

# lib/myapp_web/user_auth.ex

```ex
defmodule MyappWeb.UserAuth do use MyappWeb, :verified_routes import Plug.Conn import Phoenix.Controller alias Myapp.Accounts # Make the remember me cookie valid for 60 days. # If you want bump or reduce this value, also change # the token expiry itself in UserToken. @max_age 60 * 60 * 24 * 60 @remember_me_cookie "_myapp_web_user_remember_me" @remember_me_options [sign: true, max_age: @max_age, same_site: "Lax"] @doc """ Logs the user in. It renews the session ID and clears the whole session to avoid fixation attacks. See the renew_session function to customize this behaviour. It also sets a `:live_socket_id` key in the session, so LiveView sessions are identified and automatically disconnected on log out. The line can be safely removed if you are not using LiveView. """ def log_in_user(conn, user, params \\ %{}) do token = Accounts.generate_user_session_token(user) user_return_to = get_session(conn, :user_return_to) conn |> renew_session() |> put_token_in_session(token) |> maybe_write_remember_me_cookie(token, params) |> redirect(to: user_return_to || signed_in_path(conn)) end defp maybe_write_remember_me_cookie(conn, token, %{"remember_me" => "true"}) do put_resp_cookie(conn, @remember_me_cookie, token, @remember_me_options) end defp maybe_write_remember_me_cookie(conn, _token, _params) do conn end # This function renews the session ID and erases the whole # session to avoid fixation attacks. If there is any data # in the session you may want to preserve after log in/log out, # you must explicitly fetch the session data before clearing # and then immediately set it after clearing, for example: # # defp renew_session(conn) do # preferred_locale = get_session(conn, :preferred_locale) # # conn # |> configure_session(renew: true) # |> clear_session() # |> put_session(:preferred_locale, preferred_locale) # end # defp renew_session(conn) do delete_csrf_token() conn |> configure_session(renew: true) |> clear_session() end @doc """ Logs the user out. It clears all session data for safety. See renew_session. """ def log_out_user(conn) do user_token = get_session(conn, :user_token) user_token && Accounts.delete_user_session_token(user_token) if live_socket_id = get_session(conn, :live_socket_id) do MyappWeb.Endpoint.broadcast(live_socket_id, "disconnect", %{}) end conn |> renew_session() |> delete_resp_cookie(@remember_me_cookie) |> redirect(to: ~p"/") end @doc """ Authenticates the user by looking into the session and remember me token. """ def fetch_current_user(conn, _opts) do {user_token, conn} = ensure_user_token(conn) user = user_token && Accounts.get_user_by_session_token(user_token) assign(conn, :current_user, user) end defp ensure_user_token(conn) do if token = get_session(conn, :user_token) do {token, conn} else conn = fetch_cookies(conn, signed: [@remember_me_cookie]) if token = conn.cookies[@remember_me_cookie] do {token, put_token_in_session(conn, token)} else {nil, conn} end end end @doc """ Handles mounting and authenticating the current_user in LiveViews. ## `on_mount` arguments * `:mount_current_user` - Assigns current_user to socket assigns based on user_token, or nil if there's no user_token or no matching user. * `:ensure_authenticated` - Authenticates the user from the session, and assigns the current_user to socket assigns based on user_token. Redirects to login page if there's no logged user. * `:redirect_if_user_is_authenticated` - Authenticates the user from the session. Redirects to signed_in_path if there's a logged user. ## Examples Use the `on_mount` lifecycle macro in LiveViews to mount or authenticate the current_user: defmodule MyappWeb.PageLive do use MyappWeb, :live_view on_mount {MyappWeb.UserAuth, :mount_current_user} ... end Or use the `live_session` of your router to invoke the on_mount callback: live_session :authenticated, on_mount: [{MyappWeb.UserAuth, :ensure_authenticated}] do live "/profile", ProfileLive, :index end """ def on_mount(:mount_current_user, _params, session, socket) do {:cont, mount_current_user(socket, session)} end def on_mount(:ensure_authenticated, _params, session, socket) do socket = mount_current_user(socket, session) if socket.assigns.current_user do {:cont, socket} else socket = socket |> Phoenix.LiveView.put_flash(:error, "You must log in to access this page.") |> Phoenix.LiveView.redirect(to: ~p"/users/log_in") {:halt, socket} end end def on_mount(:redirect_if_user_is_authenticated, _params, session, socket) do socket = mount_current_user(socket, session) if socket.assigns.current_user do {:halt, Phoenix.LiveView.redirect(socket, to: signed_in_path(socket))} else {:cont, socket} end end defp mount_current_user(socket, session) do Phoenix.Component.assign_new(socket, :current_user, fn -> if user_token = session["user_token"] do Accounts.get_user_by_session_token(user_token) end end) end @doc """ Used for routes that require the user to not be authenticated. """ def redirect_if_user_is_authenticated(conn, _opts) do if conn.assigns[:current_user] do conn |> redirect(to: signed_in_path(conn)) |> halt() else conn end end @doc """ Used for routes that require the user to be authenticated. If you want to enforce the user email is confirmed before they use the application at all, here would be a good place. """ def require_authenticated_user(conn, _opts) do if conn.assigns[:current_user] do conn else conn |> put_flash(:error, "You must log in to access this page.") |> maybe_store_return_to() |> redirect(to: ~p"/users/log_in") |> halt() end end defp put_token_in_session(conn, token) do conn |> put_session(:user_token, token) |> put_session(:live_socket_id, "users_sessions:#{Base.url_encode64(token)}") end defp maybe_store_return_to(%{method: "GET"} = conn) do put_session(conn, :user_return_to, current_path(conn)) end defp maybe_store_return_to(conn), do: conn defp signed_in_path(_conn), do: ~p"/" def fetch_api_user(conn, _opts) do with ["Bearer " <> token] <- get_req_header(conn, "authorization"), {:ok, user} <- Accounts.fetch_user_by_api_token(token) do assign(conn, :current_user, user) else _ -> conn |> send_resp(:unauthorized, "No access for you") |> halt() end end end
```

# lib/myapp.ex

```ex
defmodule Myapp do @moduledoc """ Myapp keeps the contexts that define your domain and business logic. Contexts are also responsible for managing your data, regardless if it comes from the database, an external API or others. """ end
```

# lib/myapp/accounts.ex

```ex
defmodule Myapp.Accounts do @moduledoc """ The Accounts context. """ import Ecto.Query, warn: false alias Myapp.Repo alias Myapp.Accounts.{User, UserToken, UserNotifier} ## Database getters @doc """ Gets a user by email. ## Examples iex> get_user_by_email("foo@example.com") %User{} iex> get_user_by_email("unknown@example.com") nil """ def get_user_by_email(email) when is_binary(email) do Repo.get_by(User, email: email) end @doc """ Gets a user by email and password. ## Examples iex> get_user_by_email_and_password("foo@example.com", "correct_password") %User{} iex> get_user_by_email_and_password("foo@example.com", "invalid_password") nil """ def get_user_by_email_and_password(email, password) when is_binary(email) and is_binary(password) do user = Repo.get_by(User, email: email) if User.valid_password?(user, password), do: user end @doc """ Gets a single user. Raises `Ecto.NoResultsError` if the User does not exist. ## Examples iex> get_user!(123) %User{} iex> get_user!(456) ** (Ecto.NoResultsError) """ def get_user!(id), do: Repo.get!(User, id) ## User registration @doc """ Registers a user. ## Examples iex> register_user(%{field: value}) {:ok, %User{}} iex> register_user(%{field: bad_value}) {:error, %Ecto.Changeset{}} """ def register_user(attrs) do %User{} |> User.registration_changeset(attrs) |> Repo.insert() end @doc """ Returns an `%Ecto.Changeset{}` for tracking user changes. ## Examples iex> change_user_registration(user) %Ecto.Changeset{data: %User{}} """ def change_user_registration(%User{} = user, attrs \\ %{}) do User.registration_changeset(user, attrs, hash_password: false, validate_email: false) end ## Settings @doc """ Returns an `%Ecto.Changeset{}` for changing the user email. ## Examples iex> change_user_email(user) %Ecto.Changeset{data: %User{}} """ def change_user_email(user, attrs \\ %{}) do User.email_changeset(user, attrs, validate_email: false) end @doc """ Emulates that the email will change without actually changing it in the database. ## Examples iex> apply_user_email(user, "valid password", %{email: ...}) {:ok, %User{}} iex> apply_user_email(user, "invalid password", %{email: ...}) {:error, %Ecto.Changeset{}} """ def apply_user_email(user, password, attrs) do user |> User.email_changeset(attrs) |> User.validate_current_password(password) |> Ecto.Changeset.apply_action(:update) end @doc """ Updates the user email using the given token. If the token matches, the user email is updated and the token is deleted. The confirmed_at date is also updated to the current time. """ def update_user_email(user, token) do context = "change:#{user.email}" with {:ok, query} <- UserToken.verify_change_email_token_query(token, context), %UserToken{sent_to: email} <- Repo.one(query), {:ok, _} <- Repo.transaction(user_email_multi(user, email, context)) do :ok else _ -> :error end end defp user_email_multi(user, email, context) do changeset = user |> User.email_changeset(%{email: email}) |> User.confirm_changeset() Ecto.Multi.new() |> Ecto.Multi.update(:user, changeset) |> Ecto.Multi.delete_all(:tokens, UserToken.by_user_and_contexts_query(user, [context])) end @doc ~S""" Delivers the update email instructions to the given user. ## Examples iex> deliver_user_update_email_instructions(user, current_email, &url(~p"/users/settings/confirm_email/#{&1}")) {:ok, %{to: ..., body: ...}} """ def deliver_user_update_email_instructions(%User{} = user, current_email, update_email_url_fun) when is_function(update_email_url_fun, 1) do {encoded_token, user_token} = UserToken.build_email_token(user, "change:#{current_email}") Repo.insert!(user_token) UserNotifier.deliver_update_email_instructions(user, update_email_url_fun.(encoded_token)) end @doc """ Returns an `%Ecto.Changeset{}` for changing the user password. ## Examples iex> change_user_password(user) %Ecto.Changeset{data: %User{}} """ def change_user_password(user, attrs \\ %{}) do User.password_changeset(user, attrs, hash_password: false) end @doc """ Updates the user password. ## Examples iex> update_user_password(user, "valid password", %{password: ...}) {:ok, %User{}} iex> update_user_password(user, "invalid password", %{password: ...}) {:error, %Ecto.Changeset{}} """ def update_user_password(user, password, attrs) do changeset = user |> User.password_changeset(attrs) |> User.validate_current_password(password) Ecto.Multi.new() |> Ecto.Multi.update(:user, changeset) |> Ecto.Multi.delete_all(:tokens, UserToken.by_user_and_contexts_query(user, :all)) |> Repo.transaction() |> case do {:ok, %{user: user}} -> {:ok, user} {:error, :user, changeset, _} -> {:error, changeset} end end ## Session @doc """ Generates a session token. """ def generate_user_session_token(user) do {token, user_token} = UserToken.build_session_token(user) Repo.insert!(user_token) token end @doc """ Gets the user with the given signed token. """ def get_user_by_session_token(token) do {:ok, query} = UserToken.verify_session_token_query(token) Repo.one(query) end @doc """ Deletes the signed token with the given context. """ def delete_user_session_token(token) do Repo.delete_all(UserToken.by_token_and_context_query(token, "session")) :ok end ## Confirmation @doc ~S""" Delivers the confirmation email instructions to the given user. ## Examples iex> deliver_user_confirmation_instructions(user, &url(~p"/users/confirm/#{&1}")) {:ok, %{to: ..., body: ...}} iex> deliver_user_confirmation_instructions(confirmed_user, &url(~p"/users/confirm/#{&1}")) {:error, :already_confirmed} """ def deliver_user_confirmation_instructions(%User{} = user, confirmation_url_fun) when is_function(confirmation_url_fun, 1) do if user.confirmed_at do {:error, :already_confirmed} else {encoded_token, user_token} = UserToken.build_email_token(user, "confirm") Repo.insert!(user_token) UserNotifier.deliver_confirmation_instructions(user, confirmation_url_fun.(encoded_token)) end end @doc """ Confirms a user by the given token. If the token matches, the user account is marked as confirmed and the token is deleted. """ def confirm_user(token) do with {:ok, query} <- UserToken.verify_email_token_query(token, "confirm"), %User{} = user <- Repo.one(query), {:ok, %{user: user}} <- Repo.transaction(confirm_user_multi(user)) do {:ok, user} else _ -> :error end end defp confirm_user_multi(user) do Ecto.Multi.new() |> Ecto.Multi.update(:user, User.confirm_changeset(user)) |> Ecto.Multi.delete_all(:tokens, UserToken.by_user_and_contexts_query(user, ["confirm"])) end ## Reset password @doc ~S""" Delivers the reset password email to the given user. ## Examples iex> deliver_user_reset_password_instructions(user, &url(~p"/users/reset_password/#{&1}")) {:ok, %{to: ..., body: ...}} """ def deliver_user_reset_password_instructions(%User{} = user, reset_password_url_fun) when is_function(reset_password_url_fun, 1) do {encoded_token, user_token} = UserToken.build_email_token(user, "reset_password") Repo.insert!(user_token) UserNotifier.deliver_reset_password_instructions(user, reset_password_url_fun.(encoded_token)) end @doc """ Gets the user by reset password token. ## Examples iex> get_user_by_reset_password_token("validtoken") %User{} iex> get_user_by_reset_password_token("invalidtoken") nil """ def get_user_by_reset_password_token(token) do with {:ok, query} <- UserToken.verify_email_token_query(token, "reset_password"), %User{} = user <- Repo.one(query) do user else _ -> nil end end @doc """ Resets the user password. ## Examples iex> reset_user_password(user, %{password: "new long password", password_confirmation: "new long password"}) {:ok, %User{}} iex> reset_user_password(user, %{password: "valid", password_confirmation: "not the same"}) {:error, %Ecto.Changeset{}} """ def reset_user_password(user, attrs) do Ecto.Multi.new() |> Ecto.Multi.update(:user, User.password_changeset(user, attrs)) |> Ecto.Multi.delete_all(:tokens, UserToken.by_user_and_contexts_query(user, :all)) |> Repo.transaction() |> case do {:ok, %{user: user}} -> {:ok, user} {:error, :user, changeset, _} -> {:error, changeset} end end ## API @doc """ Creates a new api token for a user. The token returned must be saved somewhere safe. This token cannot be recovered from the database. """ def create_user_api_token(user) do # email_token : it will be expired if the user changes their email {encoded_token, user_token} = UserToken.build_email_token(user, "api-token") Repo.insert!(user_token) encoded_token end @doc """ Fetches the user by API token. """ def fetch_user_by_api_token(token) do with {:ok, query} <- UserToken.verify_email_token_query(token, "api-token"), %User{} = user <- Repo.one(query) do {:ok, user} else _ -> :error end end end
```

# lib/myapp/accounts/user_notifier.ex

```ex
defmodule Myapp.Accounts.UserNotifier do import Swoosh.Email alias Myapp.Mailer # Delivers the email using the application mailer. defp deliver(recipient, subject, body) do email = new() |> to(recipient) |> from({"Myapp", "contact@example.com"}) |> subject(subject) |> text_body(body) with {:ok, _metadata} <- Mailer.deliver(email) do {:ok, email} end end @doc """ Deliver instructions to confirm account. """ def deliver_confirmation_instructions(user, url) do deliver(user.email, "Confirmation instructions", """ ============================== Hi #{user.email}, You can confirm your account by visiting the URL below: #{url} If you didn't create an account with us, please ignore this. ============================== """) end @doc """ Deliver instructions to reset a user password. """ def deliver_reset_password_instructions(user, url) do deliver(user.email, "Reset password instructions", """ ============================== Hi #{user.email}, You can reset your password by visiting the URL below: #{url} If you didn't request this change, please ignore this. ============================== """) end @doc """ Deliver instructions to update a user email. """ def deliver_update_email_instructions(user, url) do deliver(user.email, "Update email instructions", """ ============================== Hi #{user.email}, You can change your email by visiting the URL below: #{url} If you didn't request this change, please ignore this. ============================== """) end end
```

# lib/myapp/accounts/user_token.ex

```ex
defmodule Myapp.Accounts.UserToken do use Ecto.Schema import Ecto.Query alias Myapp.Accounts.UserToken @hash_algorithm :sha256 @rand_size 32 # It is very important to keep the reset password token expiry short, # since someone with access to the email may take over the account. @reset_password_validity_in_days 1 @confirm_validity_in_days 7 @change_email_validity_in_days 7 @session_validity_in_days 60 schema "users_tokens" do field :token, :binary field :context, :string field :sent_to, :string belongs_to :user, Myapp.Accounts.User timestamps(type: :utc_datetime, updated_at: false) end @doc """ Generates a token that will be stored in a signed place, such as session or cookie. As they are signed, those tokens do not need to be hashed. The reason why we store session tokens in the database, even though Phoenix already provides a session cookie, is because Phoenix' default session cookies are not persisted, they are simply signed and potentially encrypted. This means they are valid indefinitely, unless you change the signing/encryption salt. Therefore, storing them allows individual user sessions to be expired. The token system can also be extended to store additional data, such as the device used for logging in. You could then use this information to display all valid sessions and devices in the UI and allow users to explicitly expire any session they deem invalid. """ def build_session_token(user) do token = :crypto.strong_rand_bytes(@rand_size) {token, %UserToken{token: token, context: "session", user_id: user.id}} end @doc """ Checks if the token is valid and returns its underlying lookup query. The query returns the user found by the token, if any. The token is valid if it matches the value in the database and it has not expired (after @session_validity_in_days). """ def verify_session_token_query(token) do query = from token in by_token_and_context_query(token, "session"), join: user in assoc(token, :user), where: token.inserted_at > ago(@session_validity_in_days, "day"), select: user {:ok, query} end @doc """ Builds a token and its hash to be delivered to the user's email. The non-hashed token is sent to the user email while the hashed part is stored in the database. The original token cannot be reconstructed, which means anyone with read-only access to the database cannot directly use the token in the application to gain access. Furthermore, if the user changes their email in the system, the tokens sent to the previous email are no longer valid. Users can easily adapt the existing code to provide other types of delivery methods, for example, by phone numbers. """ def build_email_token(user, context) do build_hashed_token(user, context, user.email) end defp build_hashed_token(user, context, sent_to) do token = :crypto.strong_rand_bytes(@rand_size) hashed_token = :crypto.hash(@hash_algorithm, token) {Base.url_encode64(token, padding: false), %UserToken{ token: hashed_token, context: context, sent_to: sent_to, user_id: user.id }} end @doc """ Checks if the token is valid and returns its underlying lookup query. The query returns the user found by the token, if any. The given token is valid if it matches its hashed counterpart in the database and the user email has not changed. This function also checks if the token is being used within a certain period, depending on the context. The default contexts supported by this function are either "confirm", for account confirmation emails, and "reset_password", for resetting the password. For verifying requests to change the email, see `verify_change_email_token_query/2`. """ def verify_email_token_query(token, context) do case Base.url_decode64(token, padding: false) do {:ok, decoded_token} -> hashed_token = :crypto.hash(@hash_algorithm, decoded_token) days = days_for_context(context) query = from token in by_token_and_context_query(hashed_token, context), join: user in assoc(token, :user), where: token.inserted_at > ago(^days, "day") and token.sent_to == user.email, select: user {:ok, query} :error -> :error end end defp days_for_context("confirm"), do: @confirm_validity_in_days defp days_for_context("reset_password"), do: @reset_password_validity_in_days defp days_for_context("api-token"), do: 365 @doc """ Checks if the token is valid and returns its underlying lookup query. The query returns the user found by the token, if any. This is used to validate requests to change the user email. It is different from `verify_email_token_query/2` precisely because `verify_email_token_query/2` validates the email has not changed, which is the starting point by this function. The given token is valid if it matches its hashed counterpart in the database and if it has not expired (after @change_email_validity_in_days). The context must always start with "change:". """ def verify_change_email_token_query(token, "change:" <> _ = context) do case Base.url_decode64(token, padding: false) do {:ok, decoded_token} -> hashed_token = :crypto.hash(@hash_algorithm, decoded_token) query = from token in by_token_and_context_query(hashed_token, context), where: token.inserted_at > ago(@change_email_validity_in_days, "day") {:ok, query} :error -> :error end end @doc """ Returns the token struct for the given token value and context. """ def by_token_and_context_query(token, context) do from UserToken, where: [token: ^token, context: ^context] end @doc """ Gets all tokens for the given user for the given contexts. """ def by_user_and_contexts_query(user, :all) do from t in UserToken, where: t.user_id == ^user.id end def by_user_and_contexts_query(user, [_ | _] = contexts) do from t in UserToken, where: t.user_id == ^user.id and t.context in ^contexts end # Removed duplicate definition to fix warning end
```

# lib/myapp/accounts/user.ex

```ex
defmodule Myapp.Accounts.User do use Ecto.Schema import Ecto.Changeset schema "users" do field :email, :string field :password, :string, virtual: true, redact: true field :hashed_password, :string, redact: true field :current_password, :string, virtual: true, redact: true field :confirmed_at, :utc_datetime timestamps(type: :utc_datetime) end @doc """ A user changeset for registration. It is important to validate the length of both email and password. Otherwise databases may truncate the email without warnings, which could lead to unpredictable or insecure behaviour. Long passwords may also be very expensive to hash for certain algorithms. ## Options * `:hash_password` - Hashes the password so it can be stored securely in the database and ensures the password field is cleared to prevent leaks in the logs. If password hashing is not needed and clearing the password field is not desired (like when using this changeset for validations on a LiveView form), this option can be set to `false`. Defaults to `true`. * `:validate_email` - Validates the uniqueness of the email, in case you don't want to validate the uniqueness of the email (like when using this changeset for validations on a LiveView form before submitting the form), this option can be set to `false`. Defaults to `true`. """ def registration_changeset(user, attrs, opts \\ []) do user |> cast(attrs, [:email, :password]) |> validate_email(opts) |> validate_password(opts) end defp validate_email(changeset, opts) do changeset |> validate_required([:email]) |> validate_format(:email, ~r/^[^\s]+@[^\s]+$/, message: "must have the @ sign and no spaces") |> validate_length(:email, max: 160) |> maybe_validate_unique_email(opts) end defp validate_password(changeset, opts) do changeset |> validate_required([:password]) |> validate_length(:password, min: 12, max: 72) # Examples of additional password validation: # |> validate_format(:password, ~r/[a-z]/, message: "at least one lower case character") # |> validate_format(:password, ~r/[A-Z]/, message: "at least one upper case character") # |> validate_format(:password, ~r/[!?@#$%^&*_0-9]/, message: "at least one digit or punctuation character") |> maybe_hash_password(opts) end defp maybe_hash_password(changeset, opts) do hash_password? = Keyword.get(opts, :hash_password, true) password = get_change(changeset, :password) if hash_password? && password && changeset.valid? do changeset # Hashing could be done with `Ecto.Changeset.prepare_changes/2`, but that # would keep the database transaction open longer and hurt performance. |> put_change(:hashed_password, Argon2.hash_pwd_salt(password)) |> delete_change(:password) else changeset end end defp maybe_validate_unique_email(changeset, opts) do if Keyword.get(opts, :validate_email, true) do changeset |> unsafe_validate_unique(:email, Myapp.Repo) |> unique_constraint(:email) else changeset end end @doc """ A user changeset for changing the email. It requires the email to change otherwise an error is added. """ def email_changeset(user, attrs, opts \\ []) do user |> cast(attrs, [:email]) |> validate_email(opts) |> case do %{changes: %{email: _}} = changeset -> changeset %{} = changeset -> add_error(changeset, :email, "did not change") end end @doc """ A user changeset for changing the password. ## Options * `:hash_password` - Hashes the password so it can be stored securely in the database and ensures the password field is cleared to prevent leaks in the logs. If password hashing is not needed and clearing the password field is not desired (like when using this changeset for validations on a LiveView form), this option can be set to `false`. Defaults to `true`. """ def password_changeset(user, attrs, opts \\ []) do user |> cast(attrs, [:password]) |> validate_confirmation(:password, message: "does not match password") |> validate_password(opts) end @doc """ Confirms the account by setting `confirmed_at`. """ def confirm_changeset(user) do now = DateTime.utc_now() |> DateTime.truncate(:second) change(user, confirmed_at: now) end @doc """ Verifies the password. If there is no user or the user doesn't have a password, we call `Argon2.no_user_verify/0` to avoid timing attacks. """ def valid_password?(%Myapp.Accounts.User{hashed_password: hashed_password}, password) when is_binary(hashed_password) and byte_size(password) > 0 do Argon2.verify_pass(password, hashed_password) end def valid_password?(_, _) do Argon2.no_user_verify() false end @doc """ Validates the current password otherwise adds an error to the changeset. """ def validate_current_password(changeset, password) do changeset = cast(changeset, %{current_password: password}, [:current_password]) if valid_password?(changeset.data, password) do changeset else add_error(changeset, :current_password, "is not valid") end end end
```

# lib/myapp/application.ex

```ex
defmodule Myapp.Application do # See https://hexdocs.pm/elixir/Application.html # for more information on OTP Applications @moduledoc false use Application @impl true def start(_type, _args) do children = [ MyappWeb.Telemetry, Myapp.Repo, {DNSCluster, query: Application.get_env(:myapp, :dns_cluster_query) || :ignore}, {Phoenix.PubSub, name: Myapp.PubSub}, # Start the Finch HTTP client for sending emails {Finch, name: Myapp.Finch}, # Start the YouTube API client Myapp.Youtube, # Start to serve requests, typically the last entry MyappWeb.Endpoint ] # See https://hexdocs.pm/elixir/Supervisor.html # for other strategies and supported options opts = [strategy: :one_for_one, name: Myapp.Supervisor] Supervisor.start_link(children, opts) end # Tell Phoenix to update the endpoint configuration # whenever the application is updated. @impl true def config_change(changed, _new, removed) do MyappWeb.Endpoint.config_change(changed, removed) :ok end end
```

# lib/myapp/file_server.ex

```ex
defmodule Myapp.FileServer do @moduledoc """ Handles file operations for the application. """ require Logger @doc """ Reads a file from the given path. Returns `{:ok, content}` if successful, `{:error, reason}` otherwise. """ def read_file(path) do case File.read(path) do {:ok, content} -> Logger.info("Successfully read file: #{path}") {:ok, content} {:error, reason} = error -> Logger.error("Failed to read file #{path}: #{inspect(reason)}") error end end @doc """ Writes content to a file at the given path. Returns `:ok` if successful, `{:error, reason}` otherwise. """ def write_file(path, content) do case File.write(path, content) do :ok -> Logger.info("Successfully wrote to file: #{path}") :ok {:error, reason} = error -> Logger.error("Failed to write to file #{path}: #{inspect(reason)}") error end end @doc """ Checks if a file exists at the given path. """ def file_exists?(path) do File.exists?(path) end @doc """ Deletes a file at the given path. Returns `:ok` if successful, `{:error, reason}` otherwise. """ def delete_file(path) do case File.rm(path) do :ok -> Logger.info("Successfully deleted file: #{path}") :ok {:error, reason} = error -> Logger.error("Failed to delete file #{path}: #{inspect(reason)}") error end end end
```

# lib/myapp/gettext.ex

```ex
defmodule Myapp.Gettext do @moduledoc """ A module providing Internationalization with a gettext-based API. By using [Gettext](https://hexdocs.pm/gettext), your module gains a set of macros for translations, for example: use Gettext, backend: Myapp.Gettext # Simple translation gettext("Here is the string to translate") # Plural translation ngettext("Here is the string to translate", "Here are the strings to translate", 3) # Domain-based translation dgettext("errors", "Here is the error message to translate") See the [Gettext Docs](https://hexdocs.pm/gettext) for detailed usage. """ use Gettext.Backend, otp_app: :myapp end
```

# lib/myapp/instagram_oauth.ex

```ex
defmodule Myapp.InstagramOauth do @moduledoc """ Instagram OAuth2 strategy for authorization and token handling. Used for authenticating with Instagram Graph API for media management. This module implements the OAuth2 flow for Instagram, including authorization URL generation, token retrieval, and refresh token handling. """ use OAuth2.Strategy @doc """ Returns a new OAuth2 client for Instagram authentication. Configure your application with the following environment variables: - INSTAGRAM_CLIENT_ID - INSTAGRAM_CLIENT_SECRET - INSTAGRAM_REDIRECT_URI """ def client do OAuth2.Client.new( strategy: __MODULE__, client_id: System.get_env("INSTAGRAM_CLIENT_ID"), client_secret: System.get_env("INSTAGRAM_CLIENT_SECRET"), redirect_uri: System.get_env("INSTAGRAM_REDIRECT_URI"), site: "https://api.instagram.com", authorize_url: "https://api.instagram.com/oauth/authorize", token_url: "https://api.instagram.com/oauth/access_token" ) |> IO.inspect(label: "Instagram OAuth Client") end @doc """ Generates the authorization URL for Instagram OAuth. This URL should be used to redirect users to the Instagram permission screen. Default scope includes permissions for basic profile info, media management, and publishing capabilities. """ def authorize_url do # Using correct scopes for Instagram Basic Display OAuth2.Client.authorize_url!(client(), scope: "user_profile,user_media", response_type: "code" ) |> IO.inspect(label: "Instagram Auth URL") end @doc """ Retrieves an access token using the provided authorization code. ## Parameters * `code` - The authorization code returned by Instagram after user approves permissions ## Returns * `{:ok, %OAuth2.AccessToken{}}` - Token retrieved successfully * `{:error, reason}` - Failed to retrieve token """ def get_token(code) do case OAuth2.Client.get_token(client(), code: code) do {:ok, %{token: token} = client} -> # For Instagram, we need to make a second request to get the long-lived token case exchange_for_long_lived_token(token.access_token) do {:ok, long_lived_token} -> {:ok, long_lived_token} error -> error end {:error, %OAuth2.Error{reason: reason}} -> {:error, reason} {:error, reason} -> {:error, reason} end end @doc """ Exchanges a short-lived access token for a long-lived access token. Instagram's short-lived tokens are valid for 1 hour. Long-lived tokens are valid for 60 days. ## Parameters * `token` - The short-lived access token ## Returns * `{:ok, %{"access_token" => token, "expires_in" => expires_in}}` - Token exchanged successfully * `{:error, reason}` - Failed to exchange token """ def exchange_for_long_lived_token(token) do url = "https://graph.instagram.com/access_token" params = [ grant_type: "ig_exchange_token", client_secret: client().client_secret, access_token: token ] url_with_params = "#{url}?#{URI.encode_query(params)}" case HTTPoison.get(url_with_params) do {:ok, %HTTPoison.Response{status_code: status_code, body: body}} when status_code in 200..299 -> case Jason.decode(body) do {:ok, %{"access_token" => access_token, "expires_in" => expires_in}} -> {:ok, %{ "access_token" => access_token, "expires_in" => expires_in, "token_type" => "bearer" }} {:ok, error} -> {:error, "Instagram API error: #{inspect(error)}"} {:error, _} -> {:error, "Failed to parse Instagram response"} end {:ok, %HTTPoison.Response{status_code: status_code, body: body}} -> {:error, "Instagram API error: Status #{status_code}, #{body}"} {:error, %HTTPoison.Error{reason: reason}} -> {:error, "Failed to connect to Instagram API: #{inspect(reason)}"} end end @doc """ Refreshes a long-lived access token. Long-lived access tokens can be refreshed within 60 days to get a new long-lived token with a new 60-day expiration. ## Parameters * `token` - The long-lived access token to refresh ## Returns * `{:ok, %{"access_token" => token, "expires_in" => expires_in}}` - Token refreshed successfully * `{:error, reason}` - Failed to refresh token """ def refresh_long_lived_token(token) do url = "https://graph.instagram.com/refresh_access_token" params = [ grant_type: "ig_refresh_token", access_token: token ] url_with_params = "#{url}?#{URI.encode_query(params)}" case HTTPoison.get(url_with_params) do {:ok, %HTTPoison.Response{status_code: status_code, body: body}} when status_code in 200..299 -> case Jason.decode(body) do {:ok, %{"access_token" => access_token, "expires_in" => expires_in}} -> {:ok, %{ "access_token" => access_token, "expires_in" => expires_in, "token_type" => "bearer" }} {:ok, error} -> {:error, "Instagram API error: #{inspect(error)}"} {:error, _} -> {:error, "Failed to parse Instagram response"} end {:ok, %HTTPoison.Response{status_code: status_code, body: body}} -> {:error, "Instagram API error: Status #{status_code}, #{body}"} {:error, %HTTPoison.Error{reason: reason}} -> {:error, "Failed to connect to Instagram API: #{inspect(reason)}"} end end # OAuth2.Strategy implementation @impl OAuth2.Strategy def authorize_url(client, params) do OAuth2.Strategy.AuthCode.authorize_url(client, params) end @impl OAuth2.Strategy def get_token(client, params, headers) do client |> OAuth2.Client.put_param(:client_secret, client.client_secret) |> OAuth2.Client.put_header("Accept", "application/json") |> OAuth2.Strategy.AuthCode.get_token(params, headers) end end
```

# lib/myapp/instagram.ex

```ex
defmodule Myapp.Instagram do @moduledoc """ Instagram API integration for media uploads and management. This module provides functions for authenticating with Instagram, uploading photos/videos, fetching media, and managing posts. ## API Token Usage All functions accept an `:access_token` parameter in their options. The token can be provided in two ways: 1. Server Configuration: Configure a default access token in your application config: \`\`\`elixir config :myapp, Myapp.Instagram, access_token: System.get_env("INSTAGRAM_ACCESS_TOKEN"), client_id: System.get_env("INSTAGRAM_CLIENT_ID"), client_secret: System.get_env("INSTAGRAM_CLIENT_SECRET") \`\`\` 2. Per-Request Token: Provide an access token directly in the function call: \`\`\`elixir Instagram.post_media("path/to/image.jpg", access_token: "your_instagram_token") \`\`\` At least one of these methods must be used. If neither is provided, an error will be raised. The per-request token takes precedence over the server configuration when both are present. """ require Logger @base_url "https://graph.instagram.com/v18.0" @doc """ Posts a photo to Instagram. ## Parameters * `image_path` - Path to the image file to upload * `opts` - Optional parameters: * `:access_token` - Instagram access token * `:caption` - Image caption (default: "") * `:location_id` - Location ID for the post (default: nil) * `:user_tags` - List of user tags (default: []) ## Returns * `{:ok, media_id}` - Successfully uploaded * `{:error, reason}` - Upload failed """ def post_photo(image_path, opts \\ []) do case validate_access_token(opts) do {:ok, access_token} -> if File.exists?(image_path) do caption = Keyword.get(opts, :caption, "") location_id = Keyword.get(opts, :location_id) user_tags = Keyword.get(opts, :user_tags, []) # First create a container for the media case create_media_container("IMAGE", image_path, caption, location_id, user_tags, access_token) do {:ok, %{"id" => creation_id}} -> # Then publish the container publish_media(creation_id, access_token) error -> error end else {:error, "Image file not found: #{image_path}"} end {:error, message} -> {:error, message} end end @doc """ Posts a video to Instagram. ## Parameters * `video_path` - Path to the video file to upload * `opts` - Optional parameters: * `:access_token` - Instagram access token * `:caption` - Video caption (default: "") * `:location_id` - Location ID for the post (default: nil) * `:user_tags` - List of user tags (default: []) * `:cover_image_path` - Path to cover image (default: nil) ## Returns * `{:ok, media_id}` - Successfully uploaded * `{:error, reason}` - Upload failed """ def post_video(video_path, opts \\ []) do case validate_access_token(opts) do {:ok, access_token} -> if File.exists?(video_path) do caption = Keyword.get(opts, :caption, "") location_id = Keyword.get(opts, :location_id) user_tags = Keyword.get(opts, :user_tags, []) cover_image_path = Keyword.get(opts, :cover_image_path) # Additional check for the cover image if provided if cover_image_path && !File.exists?(cover_image_path) do {:error, "Cover image file not found: #{cover_image_path}"} else # First create a container for the media case create_media_container("VIDEO", video_path, caption, location_id, user_tags, access_token, cover_image_path) do {:ok, %{"id" => creation_id}} -> # Then publish the container publish_media(creation_id, access_token) error -> error end end else {:error, "Video file not found: #{video_path}"} end {:error, message} -> {:error, message} end end @doc """ Creates a media container for Instagram media upload. ## Parameters * `media_type` - Type of media ("IMAGE" or "VIDEO") * `media_path` - Path to the media file * `caption` - Caption for the media * `location_id` - Location ID (optional) * `user_tags` - List of user tags (optional) * `access_token` - Instagram access token * `cover_image_path` - Path to cover image for videos (optional) ## Returns * `{:ok, %{"id" => creation_id}}` - Successfully created container * `{:error, reason}` - Container creation failed """ def create_media_container(media_type, media_path, caption, location_id, user_tags, access_token, cover_image_path \\ nil) do url = "#{@base_url}/me/media" # Create the base payload payload = %{ "media_type" => media_type, "image_url" => media_path, "caption" => caption } # Add optional fields if provided payload = if location_id, do: Map.put(payload, "location_id", location_id), else: payload payload = if user_tags && user_tags != [], do: Map.put(payload, "user_tags", user_tags), else: payload # For videos, we need to change image_url to video_url and add thumbnail_url if provided payload = if media_type == "VIDEO" do payload |> Map.delete("image_url") |> Map.put("video_url", media_path) |> (fn p -> if cover_image_path, do: Map.put(p, "thumbnail_url", cover_image_path), else: p end).() else payload end headers = [ {"Content-Type", "application/json"} ] query_params = [ access_token: access_token ] url_with_params = "#{url}?#{URI.encode_query(query_params)}" body = Jason.encode!(payload) case HTTPoison.post(url_with_params, body, headers) do {:ok, %HTTPoison.Response{status_code: status_code, body: response_body}} when status_code in 200..299 -> case Jason.decode(response_body) do {:ok, response} -> {:ok, response} {:error, _} -> {:error, "Failed to parse Instagram response"} end {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid access token. Please check your credentials."} {:ok, %HTTPoison.Response{status_code: 403}} -> {:error, "Permission denied. Your app may not have media publishing permission."} {:ok, %HTTPoison.Response{status_code: status_code, body: body}} -> Logger.error("Instagram media container creation error: Status #{status_code}, Body: #{body}") {:error, "Instagram API error: #{status_code}"} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("Instagram API connection error: #{inspect(reason)}") {:error, "Failed to connect to Instagram API. Please check your internet connection."} end end @doc """ Publishes a media container to make it visible on Instagram. ## Parameters * `creation_id` - ID from create_media_container * `access_token` - Instagram access token ## Returns * `{:ok, %{"id" => media_id}}` - Successfully published * `{:error, reason}` - Publishing failed """ def publish_media(creation_id, access_token) do url = "#{@base_url}/me/media_publish" query_params = [ creation_id: creation_id, access_token: access_token ] url_with_params = "#{url}?#{URI.encode_query(query_params)}" headers = [ {"Content-Type", "application/json"} ] case HTTPoison.post(url_with_params, "", headers) do {:ok, %HTTPoison.Response{status_code: status_code, body: response_body}} when status_code in 200..299 -> case Jason.decode(response_body) do {:ok, response} -> {:ok, response} {:error, _} -> {:error, "Failed to parse Instagram response"} end {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid access token. Please check your credentials."} {:ok, %HTTPoison.Response{status_code: 403}} -> {:error, "Permission denied. Your app may not have media publishing permission."} {:ok, %HTTPoison.Response{status_code: status_code, body: body}} -> Logger.error("Instagram media publish error: Status #{status_code}, Body: #{body}") {:error, "Instagram API error: #{status_code}"} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("Instagram API connection error: #{inspect(reason)}") {:error, "Failed to connect to Instagram API. Please check your internet connection."} end end @doc """ Gets information about a specific media post. ## Parameters * `media_id` - ID of the media to get information about * `opts` - Optional parameters: * `:access_token` - Instagram access token * `:fields` - Fields to retrieve (default: "id,caption,media_type,media_url,permalink,thumbnail_url,timestamp,username") ## Returns * `{:ok, media_info}` - Successfully retrieved media info * `{:error, reason}` - Retrieval failed """ def get_media(media_id, opts \\ []) do case validate_access_token(opts) do {:ok, access_token} -> fields = Keyword.get(opts, :fields, "id,caption,media_type,media_url,permalink,thumbnail_url,timestamp,username") url = "#{@base_url}/#{media_id}" query_params = [ fields: fields, access_token: access_token ] url_with_params = "#{url}?#{URI.encode_query(query_params)}" headers = [ {"Content-Type", "application/json"} ] case HTTPoison.get(url_with_params, headers) do {:ok, %HTTPoison.Response{status_code: status_code, body: body}} when status_code in 200..299 -> case Jason.decode(body) do {:ok, response} -> {:ok, response} {:error, _} -> {:error, "Failed to parse Instagram response"} end {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid access token. Please check your credentials."} {:ok, %HTTPoison.Response{status_code: 404}} -> {:error, "Media not found"} {:ok, %HTTPoison.Response{status_code: status_code, body: response_body}} -> Logger.error("Instagram API error: Status #{status_code}, Body: #{response_body}") {:error, "Instagram API error: #{status_code}"} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("Instagram API connection error: #{inspect(reason)}") {:error, "Failed to connect to Instagram API. Please check your internet connection."} end {:error, message} -> {:error, message} end end @doc """ Lists media for the authenticated user. ## Parameters * `opts` - Optional parameters: * `:access_token` - Instagram access token * `:limit` - Maximum number of media to return (default: 25) * `:after` - Pagination cursor for getting the next page * `:fields` - Fields to retrieve (default: "id,caption,media_type,media_url,permalink,thumbnail_url,timestamp,username") ## Returns * `{:ok, %{"data" => [...], "paging" => %{"cursors" => %{"after" => cursor}}}}` - Successfully retrieved media * `{:error, reason}` - Retrieval failed """ def list_media(opts \\ []) do case validate_access_token(opts) do {:ok, access_token} -> limit = Keyword.get(opts, :limit, 25) after_cursor = Keyword.get(opts, :after) fields = Keyword.get(opts, :fields, "id,caption,media_type,media_url,permalink,thumbnail_url,timestamp,username") url = "#{@base_url}/me/media" query_params = [ fields: fields, limit: limit, access_token: access_token ] # Add after cursor if provided query_params = if after_cursor, do: Keyword.put(query_params, :after, after_cursor), else: query_params url_with_params = "#{url}?#{URI.encode_query(query_params)}" headers = [ {"Content-Type", "application/json"} ] case HTTPoison.get(url_with_params, headers) do {:ok, %HTTPoison.Response{status_code: status_code, body: body}} when status_code in 200..299 -> case Jason.decode(body) do {:ok, response} -> {:ok, response} {:error, _} -> {:error, "Failed to parse Instagram response"} end {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid access token. Please check your credentials."} {:ok, %HTTPoison.Response{status_code: status_code, body: response_body}} -> Logger.error("Instagram API error: Status #{status_code}, Body: #{response_body}") {:error, "Instagram API error: #{status_code}"} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("Instagram API connection error: #{inspect(reason)}") {:error, "Failed to connect to Instagram API. Please check your internet connection."} end {:error, message} -> {:error, message} end end @doc """ Validates the access token from options or application config. ## Parameters * `opts` - Options containing potential access_token key ## Returns * `{:ok, access_token}` - Valid token found * `{:error, reason}` - No valid token found """ def validate_access_token(opts) do case Keyword.get(opts, :access_token) do nil -> # Try to get from config case Application.get_env(:myapp, Myapp.Instagram) do nil -> {:error, "No Instagram access token provided and no configuration found"} config -> case Keyword.get(config, :access_token) do nil -> {:error, "No Instagram access token found in configuration"} token -> {:ok, token} end end token -> {:ok, token} end end end
```

# lib/myapp/mailer.ex

```ex
defmodule Myapp.Mailer do use Swoosh.Mailer, otp_app: :myapp end
```

# lib/myapp/markdown_renderer.ex

```ex
defmodule Myapp.MarkdownRenderer do @moduledoc """ Module for rendering markdown files to HTML. """ @doc """ Reads a markdown file from the given path and returns the HTML content. If the file does not exist, returns an error tuple. """ def render_markdown_file(path) do case File.read(path) do {:ok, content} -> {:ok, render_markdown(content)} {:error, reason} -> {:error, "Could not read markdown file: #{reason}"} end end @doc """ Converts markdown text to HTML. """ def render_markdown(markdown) do Earmark.as_html!(markdown, %Earmark.Options{ code_class_prefix: "language-", smartypants: false }) end @doc """ Gets a list of available markdown files in the docs directory. Returns a list of document names without the .md extension. """ def get_available_docs do docs_path = Path.join(:code.priv_dir(:myapp), "../docs") case File.ls(docs_path) do {:ok, files} -> files |> Enum.filter(&String.ends_with?(&1, ".md")) |> Enum.map(&String.replace(&1, ".md", "")) |> Enum.sort() {:error, _} -> [] end end @doc """ Gets the path to a markdown file in the docs directory. """ def get_doc_path(doc_name) do Path.join(:code.priv_dir(:myapp), "../docs/#{doc_name}.md") end end
```

# lib/myapp/privacy_policy.ex

```ex
defmodule Myapp.PrivacyPolicy do @versions ["v1", "v1_en", "v2", "v2_en"] def get_versions, do: @versions def get_privacy_policy(version) when version in @versions do priv_dir = Application.app_dir(:myapp, "priv") file_path = Path.join([priv_dir, "privacy_policy", "#{version}.json"]) with {:ok, content} <- File.read(file_path), {:ok, privacy_policy} <- Jason.decode(content) do {:ok, privacy_policy} else {:error, :enoent} -> {:error, :not_found} {:error, %Jason.DecodeError{}} -> {:error, :invalid_json} :error -> {:error, :invalid_format} error -> {:error, error} end end def get_privacy_policy(_version), do: {:error, :invalid_version} end
```

# lib/myapp/release.ex

```ex
defmodule Myapp.Release do @moduledoc """ Used for executing DB release tasks when run in production without Mix installed. """ @app :myapp def migrate do load_app() for repo <- repos() do {:ok, _, _} = Ecto.Migrator.with_repo(repo, &Ecto.Migrator.run(&1, :up, all: true)) end end def rollback(repo, version) do load_app() {:ok, _, _} = Ecto.Migrator.with_repo(repo, &Ecto.Migrator.run(&1, :down, to: version)) end defp repos do Application.fetch_env!(@app, :ecto_repos) end defp load_app do Application.load(@app) end end
```

# lib/myapp/repo.ex

```ex
defmodule Myapp.Repo do use Ecto.Repo, otp_app: :myapp, adapter: Ecto.Adapters.Postgres end
```

# lib/myapp/social_auth.ex

```ex
defmodule Myapp.SocialAuth do @moduledoc """ Behaviour module that defines a standard interface for OAuth authentication across different social media platforms. This module provides a consistent API for: - Generating authorization URLs - Exchanging authorization codes for access tokens - Refreshing access tokens - Validating tokens - Managing token storage """ @type auth_params :: map() @type token_response :: {:ok, map()} | {:error, any()} @type auth_url_response :: {:ok, String.t()} | {:error, any()} @type validation_response :: {:ok, boolean()} | {:error, any()} @type provider :: atom() @doc """ Generates an authorization URL for the OAuth flow. """ @callback generate_auth_url(params :: auth_params()) :: auth_url_response() @doc """ Exchanges an authorization code for an access token. """ @callback exchange_code_for_token(code :: String.t(), params :: auth_params()) :: token_response() @doc """ Refreshes an expired access token using a refresh token. """ @callback refresh_token(refresh_token :: String.t(), params :: auth_params()) :: token_response() @doc """ Validates if a token is still valid and not expired. """ @callback validate_token(access_token :: String.t(), params :: auth_params()) :: validation_response() @doc """ Stores authentication tokens securely. """ @callback store_tokens(user_id :: any(), tokens :: map(), params :: auth_params()) :: :ok | {:error, any()} @doc """ Retrieves stored authentication tokens for a user. """ @callback get_tokens(user_id :: any(), params :: auth_params()) :: {:ok, map()} | {:error, any()} @doc """ Revokes authentication tokens, typically used during logout or disconnection. """ @callback revoke_tokens(access_token :: String.t(), params :: auth_params()) :: :ok | {:error, any()} @doc """ Returns the provider-specific configuration. """ @callback get_provider_config() :: map() @doc """ Returns the name of the provider as an atom (e.g., :twitter, :tiktok). """ @callback get_provider_name() :: provider() @doc """ Helper function to get a provider module by name """ @spec get_provider(provider()) :: module() | nil def get_provider(provider) do case provider do :twitter -> Myapp.SocialAuth.Twitter :tiktok -> Myapp.SocialAuth.TikTok :instagram -> Myapp.SocialAuth.Instagram _ -> nil end end @doc """ Helper function to ensure a provider exists """ @spec provider_exists?(provider()) :: boolean() def provider_exists?(provider) do get_provider(provider) != nil end @doc """ Helper function to list all available providers """ @spec list_providers() :: [provider()] def list_providers() do [:twitter, :tiktok, :instagram] end end
```

# lib/myapp/social_auth/twitter.ex

```ex
defmodule Myapp.SocialAuth.Twitter do @moduledoc """ Twitter implementation of the SocialAuth behaviour. Handles OAuth 2.0 authentication flow for Twitter/X. """ @behaviour Myapp.SocialAuth require Logger @impl Myapp.SocialAuth def generate_auth_url(params \\ %{}) do scope = Map.get(params, :scope, "tweet.read tweet.write users.read offline.access") try do query_params = URI.encode_query(%{ "response_type" => "code", "client_id" => api_key(), "redirect_uri" => redirect_uri(), "scope" => scope, "state" => generate_state_param(), "code_challenge" => generate_code_challenge(), "code_challenge_method" => "S256" }) {:ok, "https://twitter.com/i/oauth2/authorize?#{query_params}"} rescue e -> Logger.error("Failed to generate Twitter auth URL: #{inspect(e)}") {:error, "Failed to generate authorization URL"} end end @impl Myapp.SocialAuth def exchange_code_for_token(code, _params \\ %{}) do url = "https://api.twitter.com/2/oauth2/token" form_data = [ client_id: api_key(), client_secret: api_secret(), grant_type: "authorization_code", code: code, redirect_uri: redirect_uri() ] headers = [ {"Content-Type", "application/x-www-form-urlencoded"} ] case HTTPoison.post(url, URI.encode_query(form_data), headers) do {:ok, %{status_code: 200, body: body}} -> {:ok, Jason.decode!(body)} {:ok, %{status_code: status_code, body: body}} -> Logger.error("Twitter OAuth token exchange failed: HTTP #{status_code}, #{body}") {:error, "Failed to exchange code for token: HTTP #{status_code}"} {:error, %{reason: reason}} -> Logger.error("Twitter OAuth token exchange error: #{inspect(reason)}") {:error, "Error communicating with Twitter API: #{inspect(reason)}"} end end @impl Myapp.SocialAuth def refresh_token(refresh_token, _params \\ %{}) do url = "https://api.twitter.com/2/oauth2/token" form_data = [ client_id: api_key(), client_secret: api_secret(), grant_type: "refresh_token", refresh_token: refresh_token ] headers = [ {"Content-Type", "application/x-www-form-urlencoded"} ] case HTTPoison.post(url, URI.encode_query(form_data), headers) do {:ok, %{status_code: 200, body: body}} -> {:ok, Jason.decode!(body)} {:ok, %{status_code: status_code, body: body}} -> Logger.error("Twitter OAuth token refresh failed: HTTP #{status_code}, #{body}") {:error, "Failed to refresh token: HTTP #{status_code}"} {:error, %{reason: reason}} -> Logger.error("Twitter OAuth token refresh error: #{inspect(reason)}") {:error, "Error communicating with Twitter API: #{inspect(reason)}"} end end @impl Myapp.SocialAuth def validate_token(access_token, _params \\ %{}) do url = "https://api.twitter.com/2/users/me" headers = [ {"Authorization", "Bearer #{access_token}"} ] case HTTPoison.get(url, headers) do {:ok, %{status_code: 200}} -> {:ok, true} {:ok, %{status_code: 401}} -> {:ok, false} {:ok, %{status_code: status_code, body: body}} -> Logger.warn("Twitter OAuth token validation failed: HTTP #{status_code}, #{body}") {:error, "Token validation failed: HTTP #{status_code}"} {:error, %{reason: reason}} -> Logger.error("Twitter OAuth token validation error: #{inspect(reason)}") {:error, "Error communicating with Twitter API: #{inspect(reason)}"} end end @impl Myapp.SocialAuth def store_tokens(user_id, tokens, _params \\ %{}) do # This is a placeholder implementation. # In a real application, you would: # 1. Encrypt sensitive tokens # 2. Store tokens in a database # 3. Associate them with the user_id try do # Example implementation using ETS for demonstration purposes. # In a real app, you would use your database of choice. :ets.insert(:twitter_tokens, {user_id, tokens}) :ok rescue e -> Logger.error("Failed to store Twitter tokens: #{inspect(e)}") {:error, "Failed to store tokens"} end end @impl Myapp.SocialAuth def get_tokens(user_id, _params \\ %{}) do # This is a placeholder implementation. # In a real application, you would: # 1. Fetch tokens from database # 2. Decrypt sensitive tokens # 3. Return them in a standardized format try do # Example implementation using ETS for demonstration purposes case :ets.lookup(:twitter_tokens, user_id) do [{^user_id, tokens}] -> {:ok, tokens} [] -> {:error, :not_found} end rescue e -> Logger.error("Failed to retrieve Twitter tokens: #{inspect(e)}") {:error, "Failed to retrieve tokens"} end end @impl Myapp.SocialAuth def revoke_tokens(access_token, _params \\ %{}) do url = "https://api.twitter.com/2/oauth2/revoke" form_data = [ client_id: api_key(), client_secret: api_secret(), token: access_token, token_type_hint: "access_token" ] headers = [ {"Content-Type", "application/x-www-form-urlencoded"} ] case HTTPoison.post(url, URI.encode_query(form_data), headers) do {:ok, %{status_code: 200}} -> :ok {:ok, %{status_code: status_code, body: body}} -> Logger.error("Twitter OAuth token revocation failed: HTTP #{status_code}, #{body}") {:error, "Failed to revoke token: HTTP #{status_code}"} {:error, %{reason: reason}} -> Logger.error("Twitter OAuth token revocation error: #{inspect(reason)}") {:error, "Error communicating with Twitter API: #{inspect(reason)}"} end end @impl Myapp.SocialAuth def get_provider_config do %{ api_key: api_key(), api_secret: api_secret(), redirect_uri: redirect_uri() } end @impl Myapp.SocialAuth def get_provider_name, do: :twitter # Generate a random state parameter for CSRF protection defp generate_state_param do :crypto.strong_rand_bytes(16) |> Base.url_encode64(padding: false) end # Generate code challenge for PKCE defp generate_code_challenge do verifier = :crypto.strong_rand_bytes(32) |> Base.url_encode64(padding: false) :crypto.hash(:sha256, verifier) |> Base.url_encode64(padding: false) |> String.replace("+", "-") |> String.replace("/", "_") |> String.replace("=", "") end # Get the API key from configuration defp api_key do Application.get_env(:myapp, :twitter_api)[:api_key] end # Get the API secret from configuration defp api_secret do Application.get_env(:myapp, :twitter_api)[:api_secret] end # Get the redirect URI from configuration defp redirect_uri do Application.get_env(:myapp, :twitter_api)[:redirect_uri] end end
```

# lib/myapp/social_media_config_sample.ex

```ex
defmodule Myapp.SocialMediaConfigSample do @moduledoc """ Sample configuration file for social media integrations. This file demonstrates how to configure social media integrations in a centralized way. Copy this file to your config.exs (or the appropriate environment config file) and update the values with your actual credentials. """ def sample_config do """ # Social Media Configuration # Add this to your config.exs, dev.exs, prod.exs, etc. # Centralized social media configuration config :myapp, :social_media, providers: [:twitter, :tiktok, :instagram, :youtube, :thread], default_scopes: %{ twitter: ["tweet.read", "tweet.write", "users.read", "offline.access"], tiktok: ["user.info.basic", "video.upload", "video.list"], instagram: ["user_profile", "user_media"], youtube: ["youtube.readonly", "youtube.upload"], thread: ["threads.read", "threads.write"] }, # Map of provider to implementation modules implementations: %{ twitter: %{ auth: Myapp.SocialAuth.Twitter, api: Myapp.SocialMedia.Twitter }, tiktok: %{ auth: Myapp.SocialAuth.Tiktok, api: Myapp.SocialMedia.Tiktok }, instagram: %{ auth: Myapp.SocialAuth.Instagram, api: Myapp.SocialMedia.Instagram }, youtube: %{ auth: Myapp.SocialAuth.Youtube, api: Myapp.SocialMedia.Youtube }, thread: %{ auth: Myapp.SocialAuth.Thread, api: Myapp.SocialMedia.Thread } } # Twitter API credentials config :myapp, :twitter_api, api_key: System.get_env("TWITTER_API_KEY"), api_secret: System.get_env("TWITTER_API_SECRET"), redirect_uri: System.get_env("TWITTER_REDIRECT_URI"), version: "2.0" # TikTok API credentials config :myapp, :tiktok_api, client_key: System.get_env("TIKTOK_CLIENT_KEY"), client_secret: System.get_env("TIKTOK_CLIENT_SECRET"), redirect_uri: System.get_env("TIKTOK_REDIRECT_URI") # Instagram API credentials config :myapp, :instagram_api, client_id: System.get_env("INSTAGRAM_CLIENT_ID"), client_secret: System.get_env("INSTAGRAM_CLIENT_SECRET"), redirect_uri: System.get_env("INSTAGRAM_REDIRECT_URI") # YouTube API credentials config :myapp, :youtube_api, client_id: System.get_env("YOUTUBE_CLIENT_ID"), client_secret: System.get_env("YOUTUBE_CLIENT_SECRET"), redirect_uri: System.get_env("YOUTUBE_REDIRECT_URI"), api_key: System.get_env("YOUTUBE_API_KEY") # Thread API credentials config :myapp, :thread_api, client_id: System.get_env("THREAD_CLIENT_ID"), client_secret: System.get_env("THREAD_CLIENT_SECRET"), redirect_uri: System.get_env("THREAD_REDIRECT_URI") # Common configurations for all social media platforms config :myapp, :social_media_common, timeout: 30_000, max_retries: 3, media_storage: %{ temp_dir: System.get_env("MEDIA_TEMP_DIR") || "/tmp/myapp/social_media", max_file_size: 15_000_000, # 15MB allowed_extensions: [".jpg", ".jpeg", ".png", ".gif", ".mp4", ".mov"] }, rate_limiting: %{ default_limit: 100, window_size: 3_600_000, # 1 hour in milliseconds provider_limits: %{ twitter: 300, tiktok: 200, instagram: 200, youtube: 100, thread: 150 } } """ end end
```

# lib/myapp/social_media_config.ex

```ex
defmodule Myapp.SocialMediaConfig do @moduledoc """ Centralized configuration management for social media integrations. This module provides a standardized interface for retrieving and validating social media platform configurations and credentials. """ @doc """ Returns the configuration for a specific provider. ## Examples iex> SocialMediaConfig.get_provider_config(:twitter) %{ auth_module: Myapp.SocialAuth.Twitter, api_module: Myapp.SocialMedia.Twitter, api_key: "your_api_key", api_secret: "your_api_secret", redirect_uri: "your_redirect_uri" } """ def get_provider_config(provider) when provider in [:twitter, :tiktok, :instagram, :youtube, :thread] do Application.get_env(:myapp, :social_media)[provider] || raise "Configuration for provider #{provider} not found" end @doc """ Returns credentials for a specific provider. ## Examples iex> SocialMediaConfig.get_credentials(:twitter) %{ api_key: "your_api_key", api_secret: "your_api_secret", redirect_uri: "your_redirect_uri" } """ def get_credentials(provider) do config = get_provider_config(provider) %{ api_key: config[:api_key], api_secret: config[:api_secret], redirect_uri: config[:redirect_uri] } end @doc """ Returns the auth module for a specific provider. ## Examples iex> SocialMediaConfig.get_auth_module(:twitter) Myapp.SocialAuth.Twitter """ def get_auth_module(provider) do get_provider_config(provider)[:auth_module] end @doc """ Returns the API module for a specific provider. ## Examples iex> SocialMediaConfig.get_api_module(:twitter) Myapp.SocialMedia.Twitter """ def get_api_module(provider) do get_provider_config(provider)[:api_module] end @doc """ Validates the configuration for a specific provider. Returns :ok if the configuration is valid, or {:error, reason} if invalid. ## Examples iex> SocialMediaConfig.validate_config(:twitter) :ok iex> SocialMediaConfig.validate_config(:unknown_provider) {:error, "Provider :unknown_provider is not supported"} """ def validate_config(provider) do try do config = get_provider_config(provider) # Check required keys required_keys = [:auth_module, :api_module, :api_key, :api_secret, :redirect_uri] missing_keys = Enum.filter(required_keys, fn key -> is_nil(config[key]) end) if Enum.empty?(missing_keys) do :ok else {:error, "Missing required configuration keys: #{inspect(missing_keys)}"} end rescue e -> {:error, Exception.message(e)} end end @doc """ Validates the configuration for all providers. Returns a map with the validation result for each provider. ## Examples iex> SocialMediaConfig.validate_all_configs() %{ twitter: :ok, tiktok: :ok, instagram: {:error, "Missing required configuration keys: [:api_secret]"} } """ def validate_all_configs do [:twitter, :tiktok, :instagram, :youtube, :thread] |> Enum.map(fn provider -> {provider, validate_config(provider)} end) |> Enum.into(%{}) end @doc """ Lists all configured providers. ## Examples iex> SocialMediaConfig.list_providers() [:twitter, :tiktok, :instagram, :youtube, :thread] """ def list_providers do (Application.get_env(:myapp, :social_media) || %{}) |> Map.keys() end @doc """ Checks if a provider is configured and available. ## Examples iex> SocialMediaConfig.provider_available?(:twitter) true iex> SocialMediaConfig.provider_available?(:unknown_provider) false """ def provider_available?(provider) do case validate_config(provider) do :ok -> true _ -> false end end end
```

# lib/myapp/social_media_utils.ex

```ex
defmodule Myapp.SocialMediaUtils do @moduledoc """ Provides common utility functions for social media operations across different platforms. Contains shared functionality for file handling, HTTP requests, rate limiting, and error normalization. """ require Logger alias Myapp.SocialMediaConfig @doc """ Validates file types for social media uploads. Returns `{:ok, mimetype}` if the file is valid, or `{:error, reason}` if not. ## Examples iex> validate_file_type(%{"content_type" => "image/jpeg"}) {:ok, "image/jpeg"} iex> validate_file_type(%{"content_type" => "application/exe"}) {:error, :invalid_file_type} """ def validate_file_type(%{"content_type" => content_type}) do valid_types = [ # Images "image/jpeg", "image/png", "image/gif", # Videos "video/mp4", "video/quicktime", "video/x-msvideo", # Audio "audio/mpeg", "audio/mp4", "audio/wav" ] if content_type in valid_types do {:ok, content_type} else {:error, :invalid_file_type} end end def validate_file_type(_), do: {:error, :invalid_file} @doc """ Validates file size for social media uploads. Returns `:ok` if the file size is valid, or `{:error, reason}` if not. ## Examples iex> validate_file_size(%{size: 1_000_000}, :image) :ok iex> validate_file_size(%{size: 100_000_000}, :image) {:error, :file_too_large} """ def validate_file_size(%{size: size}, media_type) do max_size = case media_type do :image -> 10 * 1024 * 1024 # 10MB for images :video -> 500 * 1024 * 1024 # 500MB for videos :audio -> 50 * 1024 * 1024 # 50MB for audio _ -> 5 * 1024 * 1024 # 5MB default end if size <= max_size do :ok else {:error, :file_too_large} end end def validate_file_size(_, _), do: {:error, :invalid_file} @doc """ Processes a file from a Phoenix upload and prepares it for social media posting. Returns `{:ok, binary, filename}` or `{:error, reason}`. """ def process_upload_file(upload, opts \\ []) do with {:ok, content_type} <- validate_file_type(upload), media_type = determine_media_type(content_type), :ok <- validate_file_size(upload, media_type), {:ok, binary} <- File.read(upload.path) do filename = opts[:filename] || Path.basename(upload.filename) {:ok, binary, filename} else {:error, reason} -> {:error, reason} end end @doc """ Determines the media type (image, video, audio) from a content type. """ def determine_media_type(content_type) do cond do String.starts_with?(content_type, "image/") -> :image String.starts_with?(content_type, "video/") -> :video String.starts_with?(content_type, "audio/") -> :audio true -> :other end end @doc """ Makes an HTTP request with retry logic and rate limiting awareness. """ def make_request(method, url, body \\ "", headers \\ [], opts \\ []) do max_retries = opts[:max_retries] || 3 retry_delay = opts[:retry_delay] || 1000 do_request(method, url, body, headers, max_retries, retry_delay) end defp do_request(_method, _url, _body, _headers, 0, _retry_delay) do {:error, :max_retries_reached} end defp do_request(method, url, body, headers, retries, retry_delay) do response = HTTPoison.request(method, url, body, headers) case response do {:ok, %{status_code: status_code, body: body}} when status_code in 200..299 -> {:ok, body} {:ok, %{status_code: 429}} -> # Rate limited - wait and retry Logger.warn("Rate limited by API. Retrying after delay...") :timer.sleep(retry_delay) do_request(method, url, body, headers, retries - 1, retry_delay * 2) {:ok, %{status_code: status_code, body: body}} -> {:error, normalize_error(status_code, body)} {:error, %{reason: reason}} -> if retries > 1 do Logger.warn("HTTP request failed: #{inspect(reason)}. Retrying...") :timer.sleep(retry_delay) do_request(method, url, body, headers, retries - 1, retry_delay) else {:error, reason} end end end @doc """ Normalizes errors from different social media APIs into a consistent format. """ def normalize_error(status_code, body) do # Attempt to parse the body as JSON case Jason.decode(body) do {:ok, parsed_body} -> %{ status_code: status_code, error_type: extract_error_type(parsed_body), message: extract_error_message(parsed_body), raw: parsed_body } _ -> %{ status_code: status_code, error_type: :unknown_error, message: "Unknown error occurred", raw: body } end end defp extract_error_type(parsed_body) do cond do # Twitter style Map.has_key?(parsed_body, "errors") -> get_in(parsed_body, ["errors", Access.at(0), "code"]) || :api_error # Facebook/Instagram style Map.has_key?(parsed_body, "error") -> get_in(parsed_body, ["error", "type"]) || :api_error # TikTok style Map.has_key?(parsed_body, "error_code") -> parsed_body["error_code"] || :api_error true -> :unknown_error end end defp extract_error_message(parsed_body) do cond do # Twitter style Map.has_key?(parsed_body, "errors") -> get_in(parsed_body, ["errors", Access.at(0), "message"]) || "Unknown error" # Facebook/Instagram style Map.has_key?(parsed_body, "error") -> get_in(parsed_body, ["error", "message"]) || "Unknown error" # TikTok style Map.has_key?(parsed_body, "error_message") -> parsed_body["error_message"] || "Unknown error" true -> "Unknown error" end end @doc """ Implements a token bucket rate limiter for API calls. """ def check_rate_limit(bucket, tokens_per_interval, interval_ms) do now = :os.system_time(:milli_seconds) case :ets.lookup(:social_media_rate_limits, bucket) do [] -> # First request, initialize the bucket :ets.insert(:social_media_rate_limits, {bucket, now, tokens_per_interval - 1}) :ok [{^bucket, last_updated, tokens}] -> time_passed = now - last_updated periods_passed = div(time_passed, interval_ms) new_tokens = min(tokens_per_interval, tokens + periods_passed * tokens_per_interval) if new_tokens > 0 do :ets.insert(:social_media_rate_limits, {bucket, now, new_tokens - 1}) :ok else # Calculate time until next token is available wait_time = interval_ms - rem(time_passed, interval_ms) {:rate_limited, wait_time} end end end @doc """ Initializes the rate limiting ETS table. Should be called when the application starts. """ def init_rate_limiting do :ets.new(:social_media_rate_limits, [:set, :public, :named_table]) :ok end @doc """ Generates a random string for use in OAuth state parameters or other security needs. """ def random_string(length) do :crypto.strong_rand_bytes(length) |> Base.url_encode64() |> binary_part(0, length) end @doc """ Builds a query string from a map of parameters. """ def build_query_string(params) when is_map(params) do params |> Enum.map(fn {k, v} -> "#{URI.encode_www_form(to_string(k))}=#{URI.encode_www_form(to_string(v))}" end) |> Enum.join("&") end @doc """ Handles common social media API errors and translates them to user-friendly messages. """ def user_friendly_error_message(error) do case error do {:error, :invalid_file_type} -> "The file type you've selected isn't supported. Please use JPEG, PNG, GIF, MP4, or other common media formats." {:error, :file_too_large} -> "The file you've selected is too large. Images should be under 10MB, videos under 500MB." {:error, :max_retries_reached} -> "We're having trouble connecting to the social media service. Please try again later." {:error, %{error_type: :rate_limit_exceeded}} -> "You've reached the rate limit for this social media platform. Please try again later." {:error, %{error_type: :invalid_token}} -> "Your connection to this social media account has expired. Please reconnect your account." {:error, %{error_type: :permission_denied}} -> "You don't have permission to perform this action. You may need to reconnect your account with additional permissions." {:error, _} -> "An unexpected error occurred. Please try again later." _ -> "An unknown error occurred. Please try again later." end end end
```

# lib/myapp/social_media.ex

```ex
defmodule Myapp.SocialMedia do @moduledoc """ Defines a behavior for common social media operations across different platforms. This behavior defines a standard interface for interacting with various social media platforms, ensuring consistency in operations such as authentication status checks, media uploads, post creation, and profile retrieval. Provider-specific modules (e.g., Myapp.SocialMedia.Twitter, Myapp.SocialMedia.TikTok) should implement this behavior. """ @doc """ Verifies if the user is authenticated with the social media platform. ## Parameters * `user_id` - The ID of the user to check authentication for. ## Returns * `{:ok, %{authenticated: true, details: details}}` - If the user is authenticated. * `{:ok, %{authenticated: false}}` - If the user is not authenticated. * `{:error, reason}` - If an error occurs. """ @callback authenticated?(user_id :: String.t()) :: {:ok, %{authenticated: boolean(), details: map() | nil}} | {:error, any()} @doc """ Creates a post on the social media platform. ## Parameters * `user_id` - The ID of the user creating the post. * `content` - The content of the post. * `media_ids` - Optional list of media IDs to attach to the post. * `options` - Additional platform-specific options. ## Returns * `{:ok, post}` - If the post was created successfully. * `{:error, reason}` - If an error occurs. """ @callback create_post( user_id :: String.t(), content :: String.t(), media_ids :: [String.t()] | nil, options :: keyword() ) :: {:ok, map()} | {:error, any()} @doc """ Uploads media to the social media platform. ## Parameters * `user_id` - The ID of the user uploading the media. * `media_path` - The path to the media file. * `mime_type` - The MIME type of the media file. * `options` - Additional platform-specific options. ## Returns * `{:ok, media_id}` - If the media was uploaded successfully. * `{:error, reason}` - If an error occurs. """ @callback upload_media( user_id :: String.t(), media_path :: String.t(), mime_type :: String.t(), options :: keyword() ) :: {:ok, String.t()} | {:error, any()} @doc """ Deletes a post from the social media platform. ## Parameters * `user_id` - The ID of the user who owns the post. * `post_id` - The ID of the post to delete. ## Returns * `{:ok, result}` - If the post was deleted successfully. * `{:error, reason}` - If an error occurs. """ @callback delete_post(user_id :: String.t(), post_id :: String.t()) :: {:ok, map()} | {:error, any()} @doc """ Retrieves the user's timeline from the social media platform. ## Parameters * `user_id` - The ID of the user whose timeline to retrieve. * `options` - Additional options such as limit, offset, etc. ## Returns * `{:ok, posts}` - If the timeline was retrieved successfully. * `{:error, reason}` - If an error occurs. """ @callback get_timeline(user_id :: String.t(), options :: keyword()) :: {:ok, [map()]} | {:error, any()} @doc """ Retrieves the user's profile from the social media platform. ## Parameters * `user_id` - The ID of the user whose profile to retrieve. ## Returns * `{:ok, profile}` - If the profile was retrieved successfully. * `{:error, reason}` - If an error occurs. """ @callback get_profile(user_id :: String.t()) :: {:ok, map()} | {:error, any()} @doc """ Refreshes the user's authentication tokens if needed. ## Parameters * `user_id` - The ID of the user whose tokens to refresh. ## Returns * `{:ok, tokens}` - If the tokens were refreshed successfully. * `{:ok, :not_needed}` - If token refresh was not needed. * `{:error, reason}` - If an error occurs. """ @callback refresh_tokens(user_id :: String.t()) :: {:ok, map() | :not_needed} | {:error, any()} end
```

# lib/myapp/social_media/twitter.ex

```ex
defmodule Myapp.SocialMedia.Twitter do @moduledoc """ Twitter implementation of the SocialMedia behaviour. This module provides standardized functions for Twitter integration following the SocialMedia behaviour interface. """ @behaviour Myapp.SocialMedia require Logger alias Myapp.Twitter alias Myapp.TwitterOauth @doc """ Checks if the user is authenticated with Twitter. ## Parameters * `user_id` - The ID of the user to check authentication for. ## Returns * `{:ok, %{authenticated: true, details: details}}` - If the user is authenticated. * `{:ok, %{authenticated: false}}` - If the user is not authenticated. * `{:error, reason}` - If an error occurs. """ @impl Myapp.SocialMedia def authenticated?(user_id) do case get_conn_from_user_id(user_id) do {:ok, conn} -> case Twitter.validate_token(conn) do {:ok, true} -> # Get additional profile details if needed case Twitter.get_authenticated_user_id(conn) do {:ok, twitter_user_id} -> {:ok, %{authenticated: true, details: %{twitter_user_id: twitter_user_id}}} {:error, _} -> # Token validated but couldn't get user ID, still consider authenticated {:ok, %{authenticated: true, details: %{}}} end {:ok, false} -> {:ok, %{authenticated: false}} {:error, reason} -> {:error, reason} end {:error, reason} -> {:error, reason} end end @doc """ Creates a post (tweet) on Twitter. ## Parameters * `user_id` - The ID of the user creating the post. * `content` - The content of the post (tweet text). * `media_ids` - Optional list of media IDs to attach to the post. * `options` - Additional Twitter-specific options. ## Returns * `{:ok, post}` - If the post was created successfully. * `{:error, reason}` - If an error occurs. """ @impl Myapp.SocialMedia def create_post(user_id, content, media_ids, options \\ []) do with {:ok, conn} <- get_conn_from_user_id(user_id) do if media_ids && length(media_ids) > 0 do Twitter.post_tweet_with_media(conn, content, media_ids) else Twitter.post_tweet(conn, content) end end end @doc """ Uploads media to Twitter. ## Parameters * `user_id` - The ID of the user uploading the media. * `media_path` - The path to the media file. * `mime_type` - The MIME type of the media file. * `options` - Additional Twitter-specific options. ## Returns * `{:ok, media_id}` - If the media was uploaded successfully. * `{:error, reason}` - If an error occurs. """ @impl Myapp.SocialMedia def upload_media(user_id, media_path, mime_type, options \\ []) do with {:ok, conn} <- get_conn_from_user_id(user_id), {:ok, media_binary} <- File.read(media_path) do Twitter.upload_media(conn, media_binary, mime_type) else {:error, :enoent} -> {:error, "File not found: #{media_path}"} {:error, reason} -> {:error, reason} end end @doc """ Deletes a post (tweet) from Twitter. ## Parameters * `user_id` - The ID of the user who owns the post. * `post_id` - The ID of the post (tweet) to delete. ## Returns * `{:ok, result}` - If the post was deleted successfully. * `{:error, reason}` - If an error occurs. """ @impl Myapp.SocialMedia def delete_post(user_id, post_id) do with {:ok, conn} <- get_conn_from_user_id(user_id) do Twitter.delete_tweet(conn, post_id) end end @doc """ Retrieves the user's timeline from Twitter. ## Parameters * `user_id` - The ID of the user whose timeline to retrieve. * `options` - Additional options such as limit, max_id, etc. ## Returns * `{:ok, posts}` - If the timeline was retrieved successfully. * `{:error, reason}` - If an error occurs. """ @impl Myapp.SocialMedia def get_timeline(user_id, options \\ []) do # Convert keyword list to map for Twitter API opts = Enum.into(options, %{}) with {:ok, conn} <- get_conn_from_user_id(user_id) do Twitter.get_user_timeline(conn, opts) end end @doc """ Retrieves the user's profile from Twitter. ## Parameters * `user_id` - The ID of the user whose profile to retrieve. ## Returns * `{:ok, profile}` - If the profile was retrieved successfully. * `{:error, reason}` - If an error occurs. """ @impl Myapp.SocialMedia def get_profile(user_id) do with {:ok, conn} <- get_conn_from_user_id(user_id), {:ok, token} <- TwitterOauth.get_access_token(conn), {:ok, twitter_user_id} <- Twitter.get_authenticated_user_id(token), {:ok, response} <- Twitter.make_api_call(:get, "/users/#{twitter_user_id}", token, %{ "user.fields" => "name,username,profile_image_url,description,created_at,public_metrics" }) do profile_data = response["data"] if profile_data do {:ok, %{ id: profile_data["id"], username: profile_data["username"], name: profile_data["name"], description: profile_data["description"], profile_image_url: profile_data["profile_image_url"], created_at: profile_data["created_at"], metrics: profile_data["public_metrics"] }} else {:error, "Could not retrieve profile data"} end end end @doc """ Refreshes the user's authentication tokens if needed. ## Parameters * `user_id` - The ID of the user whose tokens to refresh. ## Returns * `{:ok, tokens}` - If the tokens were refreshed successfully. * `{:ok, :not_needed}` - If token refresh was not needed. * `{:error, reason}` - If an error occurs. """ @impl Myapp.SocialMedia def refresh_tokens(user_id) do # Twitter OAuth 2.0 implementation may not support token refresh # without involving the user. This is a placeholder implementation. with {:ok, conn} <- get_conn_from_user_id(user_id), {:ok, true} <- Twitter.validate_token(conn) do # Token is still valid, no refresh needed {:ok, :not_needed} else {:ok, false} -> # Token is invalid, but we can't refresh it automatically in most OAuth 2.0 flows # without redirect. The application may need to initiate a new OAuth flow. {:error, :token_expired_needs_reauthorization} {:error, reason} -> {:error, reason} end end # Helper function to get conn from user_id # In a real application, this would likely retrieve tokens from a database # and construct a conn-like structure for the Twitter module to use defp get_conn_from_user_id(user_id) do # This is a simplification - in a real application, you would: # 1. Retrieve user's Twitter credentials from database based on user_id # 2. Create a mock conn or credential structure that Twitter module can use # Simplified implementation that assumes a token store exists case Myapp.TokenStore.get_twitter_tokens(user_id) do {:ok, tokens} -> # Create a mock conn with session data that TwitterOauth can use {:ok, %{ private: %{ plug_session: %{ "twitter_access_token" => tokens.access_token, "twitter_refresh_token" => tokens.refresh_token } } }} {:error, reason} -> {:error, reason} end # For testing during implementation, you might return a mock: # {:ok, %{private: %{plug_session: %{"twitter_access_token" => "test_token"}}}} end end
```

# lib/myapp/terms_of_services.ex

```ex
defmodule Myapp.TermsOfServices do @versions ["v1", "v1_en"] def get_versions, do: @versions def get_terms_of_services(version) when version in @versions do priv_dir = Application.app_dir(:myapp, "priv") file_path = Path.join([priv_dir, "terms_of_services", "#{version}.json"]) with {:ok, content} <- File.read(file_path), {:ok, term_of_services} <- Jason.decode(content) do {:ok, term_of_services} else {:error, :enoent} -> {:error, :not_found} {:error, %Jason.DecodeError{}} -> {:error, :invalid_json} :error -> {:error, :invalid_format} error -> {:error, error} end end def get_terms_of_services(_version), do: {:error, :invalid_version} end
```

# lib/myapp/thread_api.ex

```ex
defmodule Myapp.ThreadApi do @moduledoc """ Client for interacting with Thread (Meta) API. """ @base_url "https://graph.facebook.com/v19.0" @doc """ Create a new thread. """ def create_thread(text) do request(:post, "/threads", %{text: text}) end @doc """ Reply to a thread. """ def reply_to_thread(thread_id, text) do request(:post, "/#{thread_id}/replies", %{text: text}) end @doc """ Get thread details. """ def get_thread(thread_id) do request(:get, "/#{thread_id}") end @doc """ Delete a thread. """ def delete_thread(thread_id) do request(:delete, "/#{thread_id}") end defp request(method, path, body \\ nil) do url = @base_url <> path headers = [ {"Authorization", "Bearer #{get_access_token()}"}, {"Content-Type", "application/json"} ] body = if body, do: Jason.encode!(body), else: "" case :hackney.request(method, url, headers, body, [:with_body]) do {:ok, status, _headers, response_body} when status in 200..299 -> {:ok, Jason.decode!(response_body)} {:ok, _status, _headers, response_body} -> {:error, Jason.decode!(response_body)} {:error, reason} -> {:error, reason} end end defp get_access_token do Application.get_env(:myapp, :thread_api)[:access_token] end end
```

# lib/myapp/threads.ex

```ex
defmodule Myapp.Threads do @moduledoc """ The Threads context. """ alias Myapp.ThreadApi @doc """ Creates a new thread. ## Examples iex> create_thread("Hello, Thread!") {:ok, %{"id" => "123", ...}} iex> create_thread("") {:error, %{"error" => %{"message" => "Invalid text"}}} """ def create_thread(text) when is_binary(text) and text != "" do ThreadApi.create_thread(text) end def create_thread(_), do: {:error, "Text is required"} @doc """ Replies to a thread. ## Examples iex> reply_to_thread("123", "This is a reply") {:ok, %{"id" => "456", ...}} iex> reply_to_thread("invalid", "Reply") {:error, %{"error" => %{"message" => "Thread not found"}}} """ def reply_to_thread(thread_id, text) when is_binary(thread_id) and is_binary(text) and text != "" do ThreadApi.reply_to_thread(thread_id, text) end def reply_to_thread(_, _), do: {:error, "Thread ID and text are required"} @doc """ Gets a thread by ID. ## Examples iex> get_thread("123") {:ok, %{"id" => "123", ...}} iex> get_thread("invalid") {:error, %{"error" => %{"message" => "Thread not found"}}} """ def get_thread(thread_id) when is_binary(thread_id) do ThreadApi.get_thread(thread_id) end def get_thread(_), do: {:error, "Thread ID is required"} @doc """ Deletes a thread. ## Examples iex> delete_thread("123") {:ok, %{"success" => true}} iex> delete_thread("invalid") {:error, %{"error" => %{"message" => "Thread not found"}}} """ def delete_thread(thread_id) when is_binary(thread_id) do ThreadApi.delete_thread(thread_id) end def delete_thread(_), do: {:error, "Thread ID is required"} end
```

# lib/myapp/tiktok_oauth.ex

```ex
defmodule Myapp.TiktokOauth do @moduledoc """ TikTok OAuth2 strategy for authorization and token handling. Used for authenticating with TikTok API for video uploads. """ use OAuth2.Strategy def client do OAuth2.Client.new( strategy: __MODULE__, client_id: System.get_env("TIKTOK_CLIENT_ID"), client_secret: System.get_env("TIKTOK_CLIENT_SECRET"), redirect_uri: System.get_env("TIKTOK_REDIRECT_URI"), site: "https://open-api.tiktok.com", authorize_url: "/platform/oauth/connect/", token_url: "/oauth/access_token/" ) end def authorize_url do OAuth2.Client.authorize_url!(client(), scope: "video.upload,video.publish,user.info.basic" ) end def get_token(code) do OAuth2.Client.get_token(client(), code: code) end # OAuth2.Strategy implementation @impl OAuth2.Strategy def authorize_url(client, params) do OAuth2.Strategy.AuthCode.authorize_url(client, params) end @impl OAuth2.Strategy def get_token(client, params, headers) do client |> OAuth2.Client.put_param(:client_secret, client.client_secret) |> OAuth2.Client.put_header("Accept", "application/json") |> OAuth2.Strategy.AuthCode.get_token(params, headers) end end
```

# lib/myapp/tiktok.ex

```ex
defmodule Myapp.Tiktok do @moduledoc """ TikTok API integration for video uploads and management. This module provides functions for authenticating with TikTok, uploading videos, checking video status, and managing uploads. ## API Token Usage All functions accept an `:access_token` parameter in their options. The token can be provided in two ways: 1. Server Configuration: Configure a default access token in your application config: \`\`\`elixir config :myapp, Myapp.Tiktok, access_token: System.get_env("TIKTOK_ACCESS_TOKEN"), client_key: System.get_env("TIKTOK_CLIENT_KEY"), client_secret: System.get_env("TIKTOK_CLIENT_SECRET") \`\`\` 2. Per-Request Token: Provide an access token directly in the function call: \`\`\`elixir Tiktok.upload_video("path/to/video.mp4", access_token: "your_tiktok_token") \`\`\` At least one of these methods must be used. If neither is provided, an error will be raised. The per-request token takes precedence over the server configuration when both are present. """ require Logger @base_url "https://open-api.tiktok.com/v2" @doc """ Uploads a video to TikTok. ## Parameters * `video_path` - Path to the video file to upload * `opts` - Optional parameters: * `:access_token` - TikTok access token * `:title` - Video title/caption (default: "") * `:privacy_level` - Privacy level ("public", "friends", "private") (default: "private") * `:disable_comments` - Whether to disable comments (default: false) * `:disable_duet` - Whether to disable duets (default: false) * `:disable_stitch` - Whether to disable stitches (default: false) ## Returns * `{:ok, video_id}` - Successfully uploaded * `{:error, reason}` - Upload failed """ def upload_video(video_path, opts \\ []) do case validate_access_token(opts) do {:ok, access_token} -> if File.exists?(video_path) do # First initialize the upload with TikTok to get an upload_id case init_upload(access_token) do {:ok, %{"data" => %{"upload_id" => upload_id}}} -> # Prepare video file for upload video_data = File.read!(video_path) # Upload the video data case upload_video_chunks(upload_id, video_data, access_token) do :ok -> # Once upload is complete, finalize the video post finalize_upload( upload_id, Keyword.get(opts, :title, ""), Keyword.get(opts, :privacy_level, "private"), Keyword.get(opts, :disable_comments, false), Keyword.get(opts, :disable_duet, false), Keyword.get(opts, :disable_stitch, false), access_token ) error -> error end error -> error end else {:error, "Video file not found: #{video_path}"} end {:error, message} -> {:error, message} end end @doc """ Initializes a video upload to get an upload_id. ## Parameters * `access_token` - TikTok access token ## Returns * `{:ok, response}` - Successfully initialized upload * `{:error, reason}` - Initialization failed """ def init_upload(access_token) do url = "#{@base_url}/video/upload/" headers = [ {"Authorization", "Bearer #{access_token}"}, {"Content-Type", "application/json"} ] case HTTPoison.post(url, "{}", headers) do {:ok, %HTTPoison.Response{status_code: status_code, body: body}} when status_code in 200..299 -> case Jason.decode(body) do {:ok, response} -> {:ok, response} {:error, _} -> {:error, "Failed to parse TikTok response"} end {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid access token. Please check your credentials."} {:ok, %HTTPoison.Response{status_code: 403}} -> {:error, "Permission denied. Your app may not have video upload permission."} {:ok, %HTTPoison.Response{status_code: status_code, body: body}} -> Logger.error("TikTok API error: Status #{status_code}, Body: #{body}") {:error, "TikTok API error: #{status_code}"} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("TikTok API connection error: #{inspect(reason)}") {:error, "Failed to connect to TikTok API. Please check your internet connection."} end end @doc """ Uploads video data in chunks. This is an internal function that handles chunking of large video files. ## Parameters * `upload_id` - Upload ID from init_upload * `video_data` - Binary data of the video file * `access_token` - TikTok access token ## Returns * `:ok` - Successfully uploaded all chunks * `{:error, reason}` - Upload failed """ def upload_video_chunks(upload_id, video_data, access_token) do # TikTok recommends 5MB chunks, so we'll use that size chunk_size = 5 * 1024 * 1024 total_size = byte_size(video_data) # Split the video into chunks and upload each Enum.reduce_while(0..(div(total_size - 1, chunk_size)), {:ok, 0}, fn chunk_index, {:ok, offset} -> chunk_start = chunk_index * chunk_size chunk_end = min(chunk_start + chunk_size, total_size) chunk = binary_part(video_data, chunk_start, chunk_end - chunk_start) case upload_chunk(upload_id, chunk, chunk_index, chunk_start, chunk_end, total_size, access_token) do :ok -> {:cont, {:ok, chunk_end}} error -> {:halt, error} end end) |> case do {:ok, _} -> :ok error -> error end end @doc """ Uploads a single chunk of a video file. ## Parameters * Various chunk parameters and the access token ## Returns * `:ok` - Chunk uploaded successfully * `{:error, reason}` - Chunk upload failed """ def upload_chunk(upload_id, chunk_data, chunk_index, chunk_start, chunk_end, total_size, access_token) do url = "#{@base_url}/video/upload/#{upload_id}/" headers = [ {"Authorization", "Bearer #{access_token}"}, {"Content-Type", "application/octet-stream"}, {"Content-Range", "bytes #{chunk_start}-#{chunk_end-1}/#{total_size}"} ] case HTTPoison.post(url, chunk_data, headers) do {:ok, %HTTPoison.Response{status_code: status_code}} when status_code in 200..299 -> :ok {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid access token. Please check your credentials."} {:ok, %HTTPoison.Response{status_code: status_code, body: body}} -> Logger.error("TikTok chunk upload error: Status #{status_code}, Body: #{body}") {:error, "Chunk upload failed: #{status_code}"} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("TikTok API connection error: #{inspect(reason)}") {:error, "Failed to connect to TikTok API. Please check your internet connection."} end end @doc """ Finalizes a video upload, making it visible on TikTok. ## Parameters * `upload_id` - Upload ID from init_upload * `title` - Video caption/title * `privacy_level` - Privacy level ("public", "friends", "private") * `disable_comments` - Whether to disable comments * `disable_duet` - Whether to disable duets * `disable_stitch` - Whether to disable stitches * `access_token` - TikTok access token ## Returns * `{:ok, %{"data" => %{"video_id" => video_id}}}` - Successfully finalized * `{:error, reason}` - Finalization failed """ def finalize_upload(upload_id, title, privacy_level, disable_comments, disable_duet, disable_stitch, access_token) do url = "#{@base_url}/video/publish/" payload = %{ upload_id: upload_id, title: title, privacy_level: privacy_level, disable_comments: disable_comments, disable_duet: disable_duet, disable_stitch: disable_stitch } headers = [ {"Authorization", "Bearer #{access_token}"}, {"Content-Type", "application/json"} ] body = Jason.encode!(payload) case HTTPoison.post(url, body, headers) do {:ok, %HTTPoison.Response{status_code: status_code, body: response_body}} when status_code in 200..299 -> case Jason.decode(response_body) do {:ok, response} -> {:ok, response} {:error, _} -> {:error, "Failed to parse TikTok response"} end {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid access token. Please check your credentials."} {:ok, %HTTPoison.Response{status_code: 403}} -> {:error, "Permission denied. Your app may not have video publish permission."} {:ok, %HTTPoison.Response{status_code: status_code, body: body}} -> Logger.error("TikTok video publish error: Status #{status_code}, Body: #{body}") {:error, "TikTok API error: #{status_code}"} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("TikTok API connection error: #{inspect(reason)}") {:error, "Failed to connect to TikTok API. Please check your internet connection."} end end @doc """ Gets information about a specific video. ## Parameters * `video_id` - ID of the video to get information about * `opts` - Optional parameters: * `:access_token` - TikTok access token ## Returns * `{:ok, video_info}` - Successfully retrieved video info * `{:error, reason}` - Retrieval failed """ def get_video(video_id, opts \\ []) do case validate_access_token(opts) do {:ok, access_token} -> url = "#{@base_url}/video/info/?video_id=#{video_id}" headers = [ {"Authorization", "Bearer #{access_token}"}, {"Content-Type", "application/json"} ] case HTTPoison.get(url, headers) do {:ok, %HTTPoison.Response{status_code: status_code, body: body}} when status_code in 200..299 -> case Jason.decode(body) do {:ok, response} -> {:ok, response} {:error, _} -> {:error, "Failed to parse TikTok response"} end {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid access token. Please check your credentials."} {:ok, %HTTPoison.Response{status_code: 404}} -> {:error, "Video not found"} {:ok, %HTTPoison.Response{status_code: status_code, body: response_body}} -> Logger.error("TikTok API error: Status #{status_code}, Body: #{response_body}") {:error, "TikTok API error: #{status_code}"} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("TikTok API connection error: #{inspect(reason)}") {:error, "Failed to connect to TikTok API. Please check your internet connection."} end {:error, message} -> {:error, message} end end @doc """ Lists videos for the authenticated user. ## Parameters * `opts` - Optional parameters: * `:access_token` - TikTok access token * `:cursor` - Pagination cursor * `:max_count` - Maximum number of videos to return (default: 20) ## Returns * `{:ok, %{"data" => %{"videos" => [...], "cursor" => cursor}}}` - Successfully retrieved videos * `{:error, reason}` - Retrieval failed """ def list_videos(opts \\ []) do case validate_access_token(opts) do {:ok, access_token} -> cursor = Keyword.get(opts, :cursor, "0") max_count = Keyword.get(opts, :max_count, 20) url = "#{@base_url}/video/list/?cursor=#{cursor}&max_count=#{max_count}" headers = [ {"Authorization", "Bearer #{access_token}"}, {"Content-Type", "application/json"} ] case HTTPoison.get(url, headers) do {:ok, %HTTPoison.Response{status_code: status_code, body: body}} when status_code in 200..299 -> case Jason.decode(body) do {:ok, response} -> {:ok, response} {:error, _} -> {:error, "Failed to parse TikTok response"} end {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid access token. Please check your credentials."} {:ok, %HTTPoison.Response{status_code: status_code, body: response_body}} -> Logger.error("TikTok API error: Status #{status_code}, Body: #{response_body}") {:error, "TikTok API error: #{status_code}"} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("TikTok API connection error: #{inspect(reason)}") {:error, "Failed to connect to TikTok API. Please check your internet connection."} end {:error, message} -> {:error, message} end end @doc """ Validates the access token from options or application config. Checks for a token in the following order: 1. The `:access_token` option passed to the function 2. The application configuration ## Parameters * `opts` - Options keyword list which may contain `:access_token` ## Returns * `{:ok, access_token}` - Valid access token found * `{:error, reason}` - No valid token found """ def validate_access_token(opts) do # First check if token was provided in function options case Keyword.get(opts, :access_token) do nil -> # If not in options, check application config case Application.get_env(:myapp, __MODULE__) do nil -> {:error, "TikTok access token not configured. Please provide an access token."} config -> case Keyword.get(config, :access_token) do nil -> {:error, "TikTok access token not configured. Please provide an access token."} "" -> {:error, "TikTok access token is empty. Please provide a valid access token."} access_token -> {:ok, access_token} end end "" -> {:error, "TikTok access token is empty. Please provide a valid access token."} access_token -> {:ok, access_token} end end @doc """ Deletes a video from TikTok. ## Parameters * `video_id` - ID of the video to delete * `opts` - Optional parameters: * `:access_token` - TikTok access token ## Returns * `{:ok, response}` - Successfully deleted * `{:error, reason}` - Deletion failed """ def delete_video(video_id, opts \\ []) do case validate_access_token(opts) do {:ok, access_token} -> url = "#{@base_url}/video/delete/" payload = %{ video_id: video_id } headers = [ {"Authorization", "Bearer #{access_token}"}, {"Content-Type", "application/json"} ] body = Jason.encode!(payload) case HTTPoison.post(url, body, headers) do {:ok, %HTTPoison.Response{status_code: status_code, body: response_body}} when status_code in 200..299 -> case Jason.decode(response_body) do {:ok, response} -> {:ok, response} {:error, _} -> {:error, "Failed to parse TikTok response"} end {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid access token. Please check your credentials."} {:ok, %HTTPoison.Response{status_code: 404}} -> {:error, "Video not found"} {:ok, %HTTPoison.Response{status_code: status_code, body: body}} -> Logger.error("TikTok video deletion error: Status #{status_code}, Body: #{body}") {:error, "TikTok API error: #{status_code}"} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("TikTok API connection error: #{inspect(reason)}") {:error, "Failed to connect to TikTok API. Please check your internet connection."} end {:error, message} -> {:error, message} end end @doc """ Checks if TikTok API credentials are configured and valid. ## Parameters * `opts` - Optional parameters: * `:access_token` - TikTok access token to validate ## Returns * `{:ok, "TikTok API credentials are valid"}` - Credentials are valid * `{:error, reason}` - Credentials are invalid or missing """ def check_credentials(opts \\ []) do case validate_access_token(opts) do {:ok, access_token} -> # Make a simple API call to verify the token is working url = "#{@base_url}/user/info/" headers = [ {"Authorization", "Bearer #{access_token}"}, {"Content-Type", "application/json"} ] case HTTPoison.get(url, headers) do {:ok, %HTTPoison.Response{status_code: status_code}} when status_code in 200..299 -> {:ok, "TikTok API credentials are valid"} {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid access token. Please check your credentials."} {:ok, %HTTPoison.Response{status_code: status_code, body: body}} -> Logger.error("TikTok API credential check error: Status #{status_code}, Body: #{body}") {:error, "TikTok API error: #{status_code}"} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("TikTok API connection error: #{inspect(reason)}") {:error, "Failed to connect to TikTok API. Please check your internet connection."} end {:error, message} -> {:error, message} end end end
```

# lib/myapp/token_store.ex

```ex
defmodule Myapp.TokenStore do @moduledoc """ Provides functions for storing and retrieving authentication tokens for various social media providers. This module uses ETS tables for token storage. """ require Logger @doc """ Retrieves Twitter tokens for a given user ID. ## Parameters * `user_id` - The ID of the user whose tokens to retrieve ## Returns * `{:ok, tokens}` - If tokens were found, where tokens is a map with `access_token` and `refresh_token` fields * `{:error, :not_found}` - If no tokens were found for the user * `{:error, reason}` - If an error occurred """ def get_twitter_tokens(user_id) do try do case :ets.lookup(:twitter_tokens, user_id) do [{^user_id, tokens}] -> # Ensure the tokens map has the expected structure tokens = normalize_tokens(tokens) {:ok, tokens} [] -> Logger.warning("No Twitter tokens found for user ID: #{inspect(user_id)}") {:error, :not_found} end rescue e in ArgumentError -> Logger.error("TokenStore error: ETS table :twitter_tokens may not exist - #{inspect(e)}") {:error, "Token store not initialized"} e -> Logger.error("Failed to retrieve Twitter tokens: #{inspect(e)}") {:error, "Failed to retrieve tokens"} end end # Ensures tokens have the expected structure defp normalize_tokens(tokens) when is_map(tokens) do # Make sure we have atom keys for access_token and refresh_token tokens |> ensure_atom_key("access_token") |> ensure_atom_key("refresh_token") end defp normalize_tokens(tokens), do: tokens # Converts string keys to atom keys if needed defp ensure_atom_key(map, key) when is_binary(key) do atom_key = String.to_atom(key) cond do Map.has_key?(map, atom_key) -> map Map.has_key?(map, key) -> Map.put(map, atom_key, Map.get(map, key)) true -> map end end end
```

# lib/myapp/twitter_oauth.ex

```ex
defmodule Myapp.TwitterOauth do @moduledoc """ Twitter OAuth 2.0 implementation for authentication and token management. """ require Logger @doc """ Generates an OAuth URL for Twitter authentication. """ def generate_oauth_url(scope \\ "tweet.read tweet.write users.read offline.access") do query_params = URI.encode_query(%{ "response_type" => "code", "client_id" => api_key(), "redirect_uri" => redirect_uri(), "scope" => scope, "state" => generate_state_param(), "code_challenge" => generate_code_challenge(), "code_challenge_method" => "S256" }) "https://twitter.com/i/oauth2/authorize?#{query_params}" end @doc """ Exchanges an authorization code for an access token. """ def exchange_code_for_token(code) do url = "https://api.twitter.com/2/oauth2/token" form_data = [ client_id: api_key(), client_secret: api_secret(), grant_type: "authorization_code", code: code, redirect_uri: redirect_uri() ] headers = [ {"Content-Type", "application/x-www-form-urlencoded"} ] case HTTPoison.post(url, URI.encode_query(form_data), headers) do {:ok, %{status_code: 200, body: body}} -> {:ok, Jason.decode!(body)} {:ok, %{status_code: status_code, body: body}} -> Logger.error("Twitter OAuth token exchange failed: HTTP #{status_code}, #{body}") {:error, "Failed to exchange code for token: HTTP #{status_code}"} {:error, %{reason: reason}} -> Logger.error("Twitter OAuth token exchange error: #{inspect(reason)}") {:error, "Error communicating with Twitter API: #{inspect(reason)}"} end end @doc """ Refreshes an expired access token using a refresh token. """ def refresh_token(refresh_token) do url = "https://api.twitter.com/2/oauth2/token" form_data = [ client_id: api_key(), client_secret: api_secret(), grant_type: "refresh_token", refresh_token: refresh_token ] headers = [ {"Content-Type", "application/x-www-form-urlencoded"} ] case HTTPoison.post(url, URI.encode_query(form_data), headers) do {:ok, %{status_code: 200, body: body}} -> {:ok, Jason.decode!(body)} {:ok, %{status_code: status_code, body: body}} -> Logger.error("Twitter OAuth token refresh failed: HTTP #{status_code}, #{body}") {:error, "Failed to refresh token: HTTP #{status_code}"} {:error, %{reason: reason}} -> Logger.error("Twitter OAuth token refresh error: #{inspect(reason)}") {:error, "Error communicating with Twitter API: #{inspect(reason)}"} end end @doc """ Validates an access token by making a test request to the Twitter API. """ def validate_token(access_token) do url = "https://api.twitter.com/2/users/me" headers = [ {"Authorization", "Bearer #{access_token}"} ] case HTTPoison.get(url, headers) do {:ok, %{status_code: 200}} -> {:ok, "Token is valid"} {:ok, %{status_code: 401}} -> {:error, :token_invalid} {:ok, %{status_code: status_code, body: body}} -> Logger.warn("Twitter OAuth token validation failed: HTTP #{status_code}, #{body}") {:error, "Token validation failed: HTTP #{status_code}"} {:error, %{reason: reason}} -> Logger.error("Twitter OAuth token validation error: #{inspect(reason)}") {:error, "Error communicating with Twitter API: #{inspect(reason)}"} end end # Generate a random state parameter for CSRF protection defp generate_state_param do :crypto.strong_rand_bytes(16) |> Base.url_encode64(padding: false) end # Generate code challenge for PKCE defp generate_code_challenge do verifier = :crypto.strong_rand_bytes(32) |> Base.url_encode64(padding: false) :crypto.hash(:sha256, verifier) |> Base.url_encode64(padding: false) |> String.replace("+", "-") |> String.replace("/", "_") |> String.replace("=", "") end # Get the API key from configuration defp api_key do Application.get_env(:myapp, :twitter_api)[:api_key] end # Get the API secret from configuration defp api_secret do Application.get_env(:myapp, :twitter_api)[:api_secret] end # Get the redirect URI from configuration defp redirect_uri do Application.get_env(:myapp, :twitter_api)[:redirect_uri] end end
```

# lib/myapp/twitter.ex

```ex
defmodule Myapp.Twitter do @moduledoc """ Module for interacting with the Twitter/X API. Provides functions for posting tweets, retrieving timeline, and deleting tweets. """ require Logger alias Myapp.TwitterOauth @base_url "https://api.twitter.com/2" @doc """ Posts a new tweet with the given text content. ## Parameters * `conn` - The connection struct * `text` - The text content of the tweet ## Returns * `{:ok, response}` - If the tweet was successfully posted * `{:error, reason}` - If there was an error posting the tweet """ def post_tweet(conn, text) when is_binary(text) do with {:ok, token} <- TwitterOauth.get_access_token(conn), {:ok, response} <- make_api_call(:post, "/tweets", token, %{text: text}) do {:ok, response} else {:error, reason} -> {:error, reason} end end @doc """ Posts a new tweet with media attachments. ## Parameters * `conn` - The connection struct * `text` - The text content of the tweet * `media_ids` - List of media IDs to attach to the tweet ## Returns * `{:ok, response}` - If the tweet was successfully posted * `{:error, reason}` - If there was an error posting the tweet """ def post_tweet_with_media(conn, text, media_ids) when is_binary(text) and is_list(media_ids) do payload = %{ text: text, media: %{ media_ids: media_ids } } with {:ok, token} <- TwitterOauth.get_access_token(conn), {:ok, response} <- make_api_call(:post, "/tweets", token, payload) do {:ok, response} else {:error, reason} -> {:error, reason} end end @doc """ Uploads media to Twitter for later use in tweets. ## Parameters * `conn` - The connection struct * `media_binary` - Binary data of the media to upload * `mime_type` - MIME type of the media ## Returns * `{:ok, media_id}` - If the media was successfully uploaded * `{:error, reason}` - If there was an error uploading the media """ def upload_media(conn, media_binary, mime_type) do with {:ok, token} <- TwitterOauth.get_access_token(conn), {:ok, response} <- do_upload_media(token, media_binary, mime_type) do {:ok, response["media_id_string"]} else {:error, reason} -> {:error, reason} end end defp do_upload_media(token, media_binary, mime_type) do # Twitter has a separate upload API endpoint url = "https://upload.twitter.com/1.1/media/upload.json" headers = [ {"Authorization", "Bearer #{token}"}, {"Content-Type", "multipart/form-data"} ] # This is simplified - actual implementation would use proper multipart handling body = %{ media: media_binary, media_type: mime_type } case HTTPoison.post(url, body, headers) do {:ok, %HTTPoison.Response{status_code: status, body: body}} when status in 200..299 -> {:ok, Jason.decode!(body)} {:ok, %HTTPoison.Response{status_code: status, body: body}} -> {:error, "HTTP Error #{status}: #{body}"} {:error, %HTTPoison.Error{reason: reason}} -> {:error, "Network Error: #{reason}"} end end @doc """ Retrieves the user's timeline (recent tweets). ## Parameters * `conn` - The connection struct * `opts` - Optional parameters such as count, max_id, etc. ## Returns * `{:ok, tweets}` - If the timeline was successfully retrieved * `{:error, reason}` - If there was an error retrieving the timeline """ def get_user_timeline(conn, opts \\ %{}) do with {:ok, token} <- TwitterOauth.get_access_token(conn), {:ok, user_id} <- get_authenticated_user_id(token), {:ok, response} <- make_api_call(:get, "/users/#{user_id}/tweets", token, opts) do {:ok, response["data"] || []} else {:error, reason} -> {:error, reason} end end @doc """ Gets the authenticated user's ID. ## Parameters * `token` - The access token ## Returns * `{:ok, user_id}` - If the user ID was successfully retrieved * `{:error, reason}` - If there was an error retrieving the user ID """ def get_authenticated_user_id(token) do with {:ok, response} <- make_api_call(:get, "/users/me", token, %{}) do {:ok, response["data"]["id"]} else {:error, reason} -> {:error, reason} end end @doc """ Deletes a tweet by its ID. ## Parameters * `conn` - The connection struct * `tweet_id` - The ID of the tweet to delete ## Returns * `{:ok, response}` - If the tweet was successfully deleted * `{:error, reason}` - If there was an error deleting the tweet """ def delete_tweet(conn, tweet_id) when is_binary(tweet_id) do with {:ok, token} <- TwitterOauth.get_access_token(conn), {:ok, response} <- make_api_call(:delete, "/tweets/#{tweet_id}", token) do {:ok, response} else {:error, reason} -> {:error, reason} end end @doc """ Validates if the current access token is still valid. ## Parameters * `conn` - The connection struct ## Returns * `{:ok, is_valid}` - If the validation was successful * `{:error, reason}` - If there was an error validating the token """ def validate_token(conn) do with {:ok, token} <- TwitterOauth.get_access_token(conn), {:ok, _response} <- make_api_call(:get, "/users/me", token, %{}) do {:ok, true} else {:error, _reason} -> {:ok, false} end end @doc """ Makes an API call to the Twitter/X API. ## Parameters * `method` - HTTP method (:get, :post, :delete, etc.) * `endpoint` - API endpoint (e.g., "/tweets") * `token` - Access token * `params` - Parameters to include in the request ## Returns * `{:ok, response}` - If the API call was successful * `{:error, reason}` - If there was an error with the API call """ def make_api_call(method, endpoint, token, params \\ %{}) do url = @base_url <> endpoint headers = [ {"Authorization", "Bearer #{token}"}, {"Content-Type", "application/json"} ] request_body = if method in [:post, :put, :patch], do: Jason.encode!(params), else: "" query_params = if method == :get, do: URI.encode_query(params), else: "" full_url = if query_params != "", do: "#{url}?#{query_params}", else: url request_fun = case method do :get -> &HTTPoison.get/3 :post -> &HTTPoison.post/3 :put -> &HTTPoison.put/3 :delete -> &HTTPoison.delete/3 :patch -> &HTTPoison.patch/3 end case request_fun.(full_url, request_body, headers) do {:ok, %HTTPoison.Response{status_code: status, body: body}} when status in 200..299 -> {:ok, Jason.decode!(body)} {:ok, %HTTPoison.Response{status_code: 401}} -> # Handle token refresh here if needed {:error, :unauthorized} {:ok, %HTTPoison.Response{status_code: status, body: body}} -> error_msg = case Jason.decode(body) do {:ok, decoded} -> Map.get(decoded, "errors", "Unknown error") _ -> "Error parsing response: #{body}" end Logger.error("Twitter API error: #{status} - #{error_msg}") {:error, error_msg} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("Twitter API network error: #{inspect(reason)}") {:error, "Network error: #{inspect(reason)}"} end end end
```

# lib/myapp/youtube_oauth.ex

```ex
defmodule Myapp.YoutubeOauth do @moduledoc """ YouTube OAuth2 strategy for authorization and token handling. """ use OAuth2.Strategy def client do OAuth2.Client.new( strategy: __MODULE__, client_id: System.get_env("YOUTUBE_CLIENT_ID"), client_secret: System.get_env("YOUTUBE_CLIENT_SECRET"), redirect_uri: System.get_env("YOUTUBE_REDIRECT_URI"), site: "https://accounts.google.com", authorize_url: "/o/oauth2/auth", token_url: "/o/oauth2/token" ) end def authorize_url do OAuth2.Client.authorize_url!(client(), scope: "https://www.googleapis.com/auth/youtube.readonly" ) end def get_token(code) do OAuth2.Client.get_token(client(), code: code) end # OAuth2.Strategy implementation @impl OAuth2.Strategy def authorize_url(client, params) do OAuth2.Strategy.AuthCode.authorize_url(client, params) end @impl OAuth2.Strategy def get_token(client, params, headers) do client |> OAuth2.Client.put_param(:client_secret, client.client_secret) |> OAuth2.Client.put_header("Accept", "application/json") |> OAuth2.Strategy.AuthCode.get_token(params, headers) end end
```

# lib/myapp/youtube.ex

```ex
defmodule Myapp.Youtube do @moduledoc """ YouTube API integration using the YouTube Data API v3. Handles video searches, playlist management, and quota tracking. ## API Key Usage All functions accept an `:api_key` parameter in their options. The API key can be provided in two ways: 1. Server Configuration: Configure a default API key in your application config: \`\`\`elixir config :myapp, Myapp.Youtube, api_key: System.get_env("YOUTUBE_API_KEY") \`\`\` 2. Per-Request Key: Provide an API key directly in the function call: \`\`\`elixir Youtube.search_videos("query", api_key: "your_youtube_api_key") \`\`\` At least one of these methods must be used - either configure a server-side API key or provide one in the function call. If neither is provided, an error will be raised. The per-request API key takes precedence over the server configuration when both are present. This allows users to use their own API keys and quotas instead of the server's. """ use GenServer require Logger @quota_limit 10_000 # Client API def start_link(opts \\ []) do GenServer.start_link(__MODULE__, opts, name: __MODULE__) end @impl true def init(_opts) do {:ok, %{quota_used: 0}} end @doc """ Search for YouTube videos with quota tracking. Returns videos matching the query with pagination support. ## Options * `:max_results` - Maximum number of results to return (default: 25) * `:page_token` - Token for getting the next page of results * `:api_key` - Optional YouTube API key to use instead of server's key """ def search_videos(query, opts \\ []) do case validate_api_key(opts) do {:ok, api_key} -> url = "https://www.googleapis.com/youtube/v3/search?" <> URI.encode_query(%{ "part" => "snippet", "q" => query, "type" => "video", "key" => api_key, "maxResults" => "9" }) case HTTPoison.get(url, [], []) do {:ok, %HTTPoison.Response{status_code: 200, body: body}} -> case Jason.decode(body) do {:ok, response} -> videos = Enum.map(response["items"], fn item -> %{ id: item["id"]["videoId"], title: item["snippet"]["title"], description: item["snippet"]["description"], thumbnail: item["snippet"]["thumbnails"]["high"]["url"], channel_title: item["snippet"]["channelTitle"], published_at: item["snippet"]["publishedAt"] } end) {:ok, videos} _ -> {:error, "Failed to parse YouTube response"} end {:ok, %HTTPoison.Response{status_code: 400}} -> {:error, "Invalid request. Please check your search query."} {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid API key. Please check your API key and try again."} {:ok, %HTTPoison.Response{status_code: 403}} -> {:error, "API quota exceeded. Please try again later."} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("YouTube API error: #{inspect(reason)}") {:error, "Failed to connect to YouTube. Please check your internet connection."} _ -> {:error, "An unexpected error occurred. Please try again later."} end {:error, message} -> {:error, message} end end @doc """ Get detailed information about a specific video. Includes statistics and content details. ## Options * `:api_key` - Optional YouTube API key to use instead of server's key """ def get_video_details(video_id, opts \\ []) do case validate_api_key(opts) do {:ok, api_key} -> url = "https://www.googleapis.com/youtube/v3/videos?" <> URI.encode_query(%{ "part" => "snippet,contentDetails,statistics", "id" => video_id, "key" => api_key }) case HTTPoison.get(url, [], []) do {:ok, %HTTPoison.Response{status_code: 200, body: body}} -> case Jason.decode(body) do {:ok, response} -> case response["items"] do [item | _] -> {:ok, %{ id: video_id, title: item["snippet"]["title"], description: item["snippet"]["description"], duration: item["contentDetails"]["duration"], view_count: String.to_integer(item["statistics"]["viewCount"]), published_at: item["snippet"]["publishedAt"], tags: Map.get(item["snippet"], "tags", []) }} [] -> {:error, "Video not found"} end _ -> {:error, "Failed to parse YouTube response"} end {:ok, %HTTPoison.Response{status_code: 400}} -> {:error, "Invalid request. Please check the video ID."} {:ok, %HTTPoison.Response{status_code: 401}} -> {:error, "Invalid API key. Please check your API key and try again."} {:ok, %HTTPoison.Response{status_code: 403}} -> {:error, "API quota exceeded. Please try again later."} {:error, %HTTPoison.Error{reason: reason}} -> Logger.error("YouTube API error: #{inspect(reason)}") {:error, "Failed to connect to YouTube. Please check your internet connection."} _ -> {:error, "An unexpected error occurred. Please try again later."} end {:error, message} -> {:error, message} end end @doc """ Create a new playlist for the authenticated user. Requires OAuth2 authentication. ## Options * `:privacy_status` - Privacy status of the playlist (default: "private") * `:api_key` - Optional YouTube API key to use instead of server's key """ def create_playlist(title, description, opts \\ []) do case validate_api_key(opts) do {:ok, api_key} -> case get_connection(api_key) do nil -> {:error, "No YouTube API key provided. Either configure server API key or provide a user API key."} connection -> GenServer.call(__MODULE__, {:track_quota, 50}, :infinity) |> case do :ok -> case GoogleApi.YouTube.V3.Api.Playlists.youtube_playlists_insert( connection, ["snippet,status"], body: %GoogleApi.YouTube.V3.Model.Playlist{ snippet: %GoogleApi.YouTube.V3.Model.PlaylistSnippet{ title: title, description: description }, status: %GoogleApi.YouTube.V3.Model.PlaylistStatus{ privacyStatus: Keyword.get(opts, :privacy_status, "private") } } ) do {:ok, response} -> {:ok, response} {:error, %{body: body}} -> {:error, body} error -> {:error, "API request failed: #{inspect(error)}"} end {:error, :quota_exceeded} -> {:error, "Daily quota exceeded"} end end {:error, message} -> {:error, message} end end @doc """ List playlists for the authenticated user or a specific channel. ## Options * `:api_key` - Optional YouTube API key to use instead of server's key """ def list_playlists(channel_id \\ "mine", opts \\ []) do case validate_api_key(opts) do {:ok, api_key} -> case get_connection(api_key) do nil -> {:error, "No YouTube API key provided. Either configure server API key or provide a user API key."} connection -> GenServer.call(__MODULE__, {:track_quota, 1}, :infinity) |> case do :ok -> case GoogleApi.YouTube.V3.Api.Playlists.youtube_playlists_list( connection, ["snippet,contentDetails"], channelId: channel_id, maxResults: 50 ) do {:ok, response} -> playlists = Enum.map(response.items, fn item -> %{ id: item.id, title: item.snippet.title, description: item.snippet.description, thumbnail: item.snippet.thumbnails.default.url, item_count: item.contentDetails.itemCount } end) {:ok, playlists} {:error, %{body: body}} -> {:error, body} error -> {:error, "API request failed: #{inspect(error)}"} end {:error, :quota_exceeded} -> {:error, "Daily quota exceeded"} end end {:error, message} -> {:error, message} end end @doc """ Add a video to a playlist. ## Options * `:api_key` - Optional YouTube API key to use instead of server's key """ def add_to_playlist(playlist_id, video_id, opts \\ []) do case validate_api_key(opts) do {:ok, api_key} -> case get_connection(api_key) do nil -> {:error, "No YouTube API key provided. Either configure server API key or provide a user API key."} connection -> GenServer.call(__MODULE__, {:track_quota, 50}, :infinity) |> case do :ok -> playlist_item = %GoogleApi.YouTube.V3.Model.PlaylistItem{ snippet: %GoogleApi.YouTube.V3.Model.PlaylistItemSnippet{ playlistId: playlist_id, resourceId: %GoogleApi.YouTube.V3.Model.ResourceId{ kind: "youtube#video", videoId: video_id } } } case GoogleApi.YouTube.V3.Api.PlaylistItems.youtube_playlist_items_insert( connection, ["snippet"], body: playlist_item ) do {:ok, response} -> {:ok, response} {:error, %{body: body}} -> {:error, body} error -> {:error, "API request failed: #{inspect(error)}"} end {:error, :quota_exceeded} -> {:error, "Daily quota exceeded"} end end {:error, message} -> {:error, message} end end # Server Callbacks @impl true def handle_call({:track_quota, cost}, _from, state) do today = Date.utc_today() state = if today != state.last_reset, do: %{state | quota_used: 0, last_reset: today}, else: state new_quota = state.quota_used + cost if new_quota > @quota_limit do {:reply, {:error, :quota_exceeded}, state} else {:reply, :ok, %{state | quota_used: new_quota}} end end @impl true def handle_call(:get_connection, _from, %{connection: connection} = state) do {:reply, connection, state} end # Private Functions defp get_connection(nil) do # When no user API key is provided, try server's key case GenServer.call(__MODULE__, :get_connection) do nil -> nil connection -> connection end end defp get_connection("") do # Return nil for empty string API key (initial page load) nil end defp get_connection(api_key) when is_binary(api_key) do # Create a new connection with user-provided API key GoogleApi.YouTube.V3.Connection.new(api_key) end defp get_connection(_) do # Return nil for any other invalid input nil end defp validate_api_key(opts) when is_list(opts) do case Keyword.get(opts, :api_key) do nil -> {:error, "Please enter your YouTube API key"} "" -> {:error, "Please enter your YouTube API key"} key -> validate_api_key_format(key) end end defp validate_api_key(_), do: {:error, "Invalid options provided"} defp validate_api_key_format(key) do # YouTube API keys are typically 39 characters long case String.length(key) do 39 -> {:ok, key} _ -> {:error, "Invalid API key format. Please check your API key."} end end # Removed the unused parse_duration function # If needed in the future, you can add it back end
```

# merged_privacy_policy.md

```md
# Privacy Policy *Effective Date: February 1, 2025* *Version: 3.0.0* ## Definitions and Scope ### Definitions - **Service**: The ingrey application, website, and related services provided by the Company. - **User**: Any individual who accesses or uses the Service. - **Personal Information**: Any information relating to an identified or identifiable natural person. - **Social Media Platforms**: Third-party services including but not limited to TikTok, YouTube, Facebook, and Instagram. - **Content**: Any material uploaded, shared, or created through the Service, including text, images, videos, and audio. ### Scope This Privacy Policy applies to all users of the Service, regardless of how they access it (website, mobile application, API, etc.). It covers the collection, use, and sharing of personal information by the Company and its relationship with connected Social Media Platforms. ## Introduction ingrey (hereinafter referred to as 'the Company') values your personal information and makes efforts to comply with relevant laws such as the 'Personal Information Protection Act' and the 'Act on Promotion of Information and Communications Network Utilization and Information Protection'. Through this Privacy Policy, the Company informs users about the categories of personal information collected, the purpose of collection and use, retention and disposal, third-party disclosure, and other matters related to personal information. ## Table of Contents 1. [Collection and Use of Personal Information](#1-collection-and-use-of-personal-information) 2. [Purpose of Processing Personal Information](#2-purpose-of-processing-personal-information) 3. [Disclosure of Personal Information to Third Parties](#3-disclosure-of-personal-information-to-third-parties) 4. [Retention and Disposal of Personal Information](#4-retention-and-disposal-of-personal-information) 5. [Rights of Data Subjects and How to Exercise Them](#5-rights-of-data-subjects-and-how-to-exercise-them) 6. [Technical and Administrative Protection Measures](#6-technical-and-administrative-protection-measures) 7. [Privacy Policy Manager and Contact Information](#7-privacy-policy-manager-and-contact-information) 8. [Privacy Policy Changes](#8-privacy-policy-changes) ## Social Media Platform Integrations ### TikTok Integration When you connect your TikTok account to our Service: - We request access to your public profile information, content, and engagement metrics. - We may collect and process your TikTok account information, content (including videos, comments, and captions), analytics data, and follower information. - Your use of TikTok features through our Service is subject to TikTok's Terms of Service and Privacy Policy. - You can revoke access anytime by disconnecting your TikTok account in the Service settings or through TikTok's security settings. ### YouTube API Services Our Service uses YouTube API Services. By using YouTube-related functions in our Service: - We access your YouTube account information, channel data, videos, analytics, and comments as authorized by you. - Your information is processed according to our Privacy Policy and Google's Privacy Policy. - You can revoke access to your YouTube account at any time by visiting [Google Security Settings](https://security.google.com/settings/security/permissions). Click [here](https://policies.google.com/privacy) to read about Google's Privacy Policy. By using YouTube API Services, you are deemed to have agreed to Google's Privacy Policy. ### Facebook Integration When connecting Facebook accounts to our Service: - We access profile information, pages you manage, posts, engagement metrics, and advertising data as authorized. - We collect and process your Facebook pages data, posts, analytics, audience information, and ad performance. - Your Facebook data usage through our Service is subject to Facebook's Data Policy. - You can disconnect your Facebook account at any time through our Service or Facebook's App settings. ### Instagram Integration When connecting Instagram accounts to our Service: - We access your profile data, media, comments, and analytics as authorized by you. - We collect and process your posts, stories, audience demographics, and engagement metrics. - Your Instagram data usage is governed by Instagram's Data Policy. - You can revoke access at any time through our Service settings or Instagram's Authorized Apps section. ## 1. Collection and Use of Personal Information ### 1.1 Categories of Personal Information Collected The Company collects the following personal information for membership registration, service use, customer support, etc. 1. **Required information**: Name, ID, password, email address, date of birth 2. **Optional information**: Nickname, profile image, occupation, areas of interest 3. **Information automatically generated and collected during service use**: IP address, cookies, visit date and time, service usage records, inappropriate usage records ### 1.2 Methods of Personal Information Collection The Company collects personal information through the following methods: 1. Collection with user consent during membership registration and service use through website and mobile application 2. Automatic collection through data collection tools ## 2. Purpose of Processing Personal Information ### 2.1 Use of Collected Personal Information The Company uses the collected personal information for the following purposes. All information provided by users will not be used for purposes other than those listed below, and prior consent will be sought if the purpose of use changes. ### 2.2 Purposes of Use 1. **Member Management** - Verification of membership registration intent, provision of membership services, maintenance and management of membership qualifications, prevention of service misuse, various notifications and announcements 2. **Service Provision** - Provision of social media management tool services, content provision, customized service provision 3. **Marketing and Advertising** - Development of new services and provision of customized services, provision of event and advertising information and participation opportunities, verification of service validity, analysis of access frequency, statistics on members' service usage ## 3. Disclosure of Personal Information to Third Parties ### 3.1 Principles of Personal Information Disclosure to Third Parties The Company processes users' personal information only within the scope specified in this Privacy Policy and does not process it beyond the original scope or disclose it to third parties without users' prior consent. However, personal information may be processed in the following cases. When you connect your social media accounts (TikTok, YouTube, Facebook, Instagram) to our Service, certain information may be shared with these platforms based on your authorization and their respective APIs. This data exchange is necessary for providing our social media management functionality. ### 3.2 Cases Where Third-Party Disclosure is Possible 1. When the user has given prior consent to third-party disclosure 2. When required by law 3. When necessary for statistical compilation or academic research purposes, and the personal information is provided in a form that cannot identify specific individuals 4. Other cases specified by law ### 3.3 Outsourcing of Personal Information Processing The Company outsources personal information processing tasks as follows for smooth service provision: 1. Payment service providers: Payment processing 2. Hosting service providers: Server operation and management 3. Customer support companies: Customer inquiry handling and service guidance 4. Social media platforms (TikTok, YouTube, Facebook, Instagram): Content publication, analytics retrieval, and account management functions ## 4. Retention and Disposal of Personal Information ### 4.1 Retention Period of Personal Information In principle, the Company promptly disposes of personal information once the purpose of collection and use has been achieved. However, information is retained for the duration required by relevant laws. ### 4.2 Retention Periods Required by Law 1. Records on contracts or subscription withdrawals: 5 years 2. Records on payment and supply of goods: 5 years 3. Records on consumer complaints or dispute handling: 3 years 4. Website visit records: 3 months ### 4.3 Personal Information Disposal Procedures and Methods The procedures and methods for disposing of personal information are as follows: 1. **Disposal Procedure**: Personal information that has achieved its purpose or whose retention period has expired is promptly disposed of according to the Company's internal policies. 2. **Disposal Method**: Personal information stored in electronic files is securely deleted using technical methods that prevent recovery, and information printed on paper is shredded or incinerated. ## 5. Rights of Data Subjects and How to Exercise Them ### 5.1 Rights of Data Subjects Users can exercise the following rights regarding their personal information at any time: ### 5.2 Details of Data Subject Rights 1. Right to access personal information 2. Right to request correction of errors 3. Right to request deletion 4. Right to request suspension of processing ### 5.3 How to Exercise Rights Users can exercise their rights through the following methods: 1. Personal information manager: Through written request, phone, or email to support@ingrey.me 2. My Page > Personal Information Management: Through the online service **For Data Deletion Requests**: To request the deletion of your personal information, please send an email to support@ingrey.me with the subject line "Personal Data Deletion Request" and include your account information. We will process your request within 30 days. ### 5.4 Remedies for Rights Infringement Users can seek remedies for personal information infringement by applying for dispute resolution or consultation from organizations such as the Personal Information Dispute Mediation Committee and the Korea Internet & Security Agency's Personal Information Infringement Reporting Center. Additionally, if rights or interests are infringed due to the disposition or inaction of a public institution's head regarding requests for access, correction/deletion, or suspension of processing of personal information, an administrative appeal may be filed according to the Administrative Appeals Act. ## 6. Technical and Administrative Protection Measures ### 6.1 Technical Measures The Company implements the following technical measures to protect personal information: 1. Encryption of personal information: Encrypting users' personal information such as passwords 2. Hacking prevention system: Installing security programs and regularly updating them 3. Access control: Minimizing the number of employees handling personal information and implementing access restrictions ### 6.2 Administrative Measures The Company implements the following administrative measures to protect personal information: 1. Regular employee training: Conducting personal information protection training for employees 2. Management of outsourcing companies: Supervising outsourcing companies that handle personal information 3. Regular inspections: Conducting regular inspections on personal information protection ## 7. Privacy Policy Manager and Contact Information ### 7.1 Privacy Policy Manager The Company designates a privacy policy manager responsible for overseeing tasks related to personal information processing and handling user complaints and remedies for damages related to personal information processing. ### 7.2 Privacy Policy Manager Information 1. **Privacy Policy Manager** - Name: Hong Gil-dong - Position: Privacy Protection Officer - Contact: support@ingrey.me 2. **Privacy Protection Department** - Department Name: Privacy Protection Team - Contact: 02-123-4567 ## 8. Privacy Policy Changes This Privacy Policy is effective from February 1, 2025, and any changes due to the amendment of laws or policies will be announced through the website at least 7 days before implementation. However, significant changes to user rights will be announced at least 30 days in advance. Previous versions of the Privacy Policy can be viewed below: - January 13, 2024 - January 31, 2025 (Click)
```

# mix.exs

```exs
defmodule Myapp.MixProject do use Mix.Project def project do [ app: :myapp, version: "0.1.0", elixir: "~> 1.14", elixirc_paths: elixirc_paths(Mix.env()), start_permanent: Mix.env() == :prod, aliases: aliases(), deps: deps() ] end # Configuration for the OTP application. # # Type `mix help compile.app` for more information. def application do [ mod: {Myapp.Application, []}, extra_applications: [:logger, :runtime_tools] ] end # Specifies which paths to compile per environment. defp elixirc_paths(:test), do: ["lib", "test/support"] defp elixirc_paths(_), do: ["lib"] # Specifies your project dependencies. # # Type `mix help deps` for examples and options. defp deps do [ {:argon2_elixir, "~> 3.0"}, {:phoenix, "~> 1.7.17"}, {:phoenix_ecto, "~> 4.5"}, {:ecto_sql, "~> 3.10"}, {:postgrex, ">= 0.0.0"}, {:phoenix_html, "~> 4.1"}, {:phoenix_live_reload, "~> 1.2", only: :dev}, {:phoenix_live_view, "~> 1.0.0"}, {:floki, ">= 0.30.0", only: :test}, {:phoenix_live_dashboard, "~> 0.8.3"}, {:esbuild, "~> 0.8", runtime: Mix.env() == :dev}, {:tailwind, "~> 0.2", runtime: Mix.env() == :dev}, {:heroicons, github: "tailwindlabs/heroicons", tag: "v2.1.1", sparse: "optimized", app: false, compile: false, depth: 1}, {:swoosh, "~> 1.5"}, {:finch, "~> 0.13"}, {:telemetry_metrics, "~> 1.0"}, {:telemetry_poller, "~> 1.0"}, {:gettext, "~> 0.20"}, {:jason, "~> 1.4"}, {:dns_cluster, "~> 0.1.1"}, {:bandit, "~> 1.5"}, {:aws, "~> 1.0.0"}, {:hackney, "~> 1.18"}, {:google_api_you_tube, "~> 0.53.0"}, {:oauth2, "~> 2.1"}, {:httpoison, "~> 2.0"}, {:earmark, "~> 1.4"} ] end # Aliases are shortcuts or tasks specific to the current project. # For example, to install project dependencies and perform other setup tasks, run: # # $ mix setup # # See the documentation for `Mix` for more info on aliases. defp aliases do [ setup: ["deps.get", "ecto.setup", "assets.setup", "assets.build"], "ecto.setup": ["ecto.create", "ecto.migrate", "run priv/repo/seeds.exs"], "ecto.reset": ["ecto.drop", "ecto.setup"], test: ["ecto.create --quiet", "ecto.migrate --quiet", "test"], "assets.setup": ["tailwind.install --if-missing", "esbuild.install --if-missing"], "assets.build": ["tailwind myapp", "esbuild myapp"], "assets.deploy": [ "tailwind myapp --minify", "esbuild myapp --minify", "phx.digest" ] ] end end
```

# mix.lock

```lock
%{ "argon2_elixir": {:hex, :argon2_elixir, "3.2.1", "f47740bf9f2a39ffef79ba48eb25dea2ee37bcc7eadf91d49615591d1a6fce1a", [:make, :mix], [{:comeonin, "~> 5.3", [hex: :comeonin, repo: "hexpm", optional: false]}, {:elixir_make, "~> 0.6", [hex: :elixir_make, repo: "hexpm", optional: false]}], "hexpm", "a813b78217394530b5fcf4c8070feee43df03ffef938d044019169c766315690"}, "aws": {:hex, :aws, "1.0.4", "17af14644b93d8249de2d730528ab0f7289817e626eb51460f6451b2cdbb5574", [:mix], [{:aws_signature, "~> 0.3", [hex: :aws_signature, repo: "hexpm", optional: false]}, {:finch, "~> 0.13", [hex: :finch, repo: "hexpm", optional: true]}, {:hackney, "~> 1.20", [hex: :hackney, repo: "hexpm", optional: true]}, {:jason, "~> 1.2", [hex: :jason, repo: "hexpm", optional: false]}], "hexpm", "925722950c085e246ad2e346c847a3f6c8edcf41ac78dcb82b68813a797dc0e2"}, "aws_signature": {:hex, :aws_signature, "0.3.3", "5844bee0d3cc42eefd21d236bbfaa8aa9b16e2f2b7ee79edaecb321db3fb6adf", [:rebar3], [], "hexpm", "87e8f42b8e49002aa8d0350a71d13d69ea91b9afb4ca9b526ae36db1d585c924"}, "bandit": {:hex, :bandit, "1.6.7", "42f30e37a1c89a2a12943c5dca76f731a2313e8a2e21c1a95dc8241893e922d1", [:mix], [{:hpax, "~> 1.0", [hex: :hpax, repo: "hexpm", optional: false]}, {:plug, "~> 1.14", [hex: :plug, repo: "hexpm", optional: false]}, {:telemetry, "~> 0.4 or ~> 1.0", [hex: :telemetry, repo: "hexpm", optional: false]}, {:thousand_island, "~> 1.0", [hex: :thousand_island, repo: "hexpm", optional: false]}, {:websock, "~> 0.5", [hex: :websock, repo: "hexpm", optional: false]}], "hexpm", "551ba8ff5e4fc908cbeb8c9f0697775fb6813a96d9de5f7fe02e34e76fd7d184"}, "castore": {:hex, :castore, "1.0.11", "4bbd584741601eb658007339ea730b082cc61f3554cf2e8f39bf693a11b49073", [:mix], [], "hexpm", "e03990b4db988df56262852f20de0f659871c35154691427a5047f4967a16a62"}, "certifi": {:hex, :certifi, "2.12.0", "2d1cca2ec95f59643862af91f001478c9863c2ac9cb6e2f89780bfd8de987329", [:rebar3], [], "hexpm", "ee68d85df22e554040cdb4be100f33873ac6051387baf6a8f6ce82272340ff1c"}, "comeonin": {:hex, :comeonin, "5.5.1", "5113e5f3800799787de08a6e0db307133850e635d34e9fab23c70b6501669510", [:mix], [], "hexpm", "65aac8f19938145377cee73973f192c5645873dcf550a8a6b18187d17c13ccdb"}, "db_connection": {:hex, :db_connection, "2.7.0", "b99faa9291bb09892c7da373bb82cba59aefa9b36300f6145c5f201c7adf48ec", [:mix], [{:telemetry, "~> 0.4 or ~> 1.0", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "dcf08f31b2701f857dfc787fbad78223d61a32204f217f15e881dd93e4bdd3ff"}, "decimal": {:hex, :decimal, "2.3.0", "3ad6255aa77b4a3c4f818171b12d237500e63525c2fd056699967a3e7ea20f62", [:mix], [], "hexpm", "a4d66355cb29cb47c3cf30e71329e58361cfcb37c34235ef3bf1d7bf3773aeac"}, "dns_cluster": {:hex, :dns_cluster, "0.1.3", "0bc20a2c88ed6cc494f2964075c359f8c2d00e1bf25518a6a6c7fd277c9b0c66", [:mix], [], "hexpm", "46cb7c4a1b3e52c7ad4cbe33ca5079fbde4840dedeafca2baf77996c2da1bc33"}, "earmark": {:hex, :earmark, "1.4.47", "7e7596b84fe4ebeb8751e14cbaeaf4d7a0237708f2ce43630cfd9065551f94ca", [:mix], [], "hexpm", "3e96bebea2c2d95f3b346a7ff22285bc68a99fbabdad9b655aa9c6be06c698f8"}, "ecto": {:hex, :ecto, "3.12.5", "4a312960ce612e17337e7cefcf9be45b95a3be6b36b6f94dfb3d8c361d631866", [:mix], [{:decimal, "~> 2.0", [hex: :decimal, repo: "hexpm", optional: false]}, {:jason, "~> 1.0", [hex: :jason, repo: "hexpm", optional: true]}, {:telemetry, "~> 0.4 or ~> 1.0", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "6eb18e80bef8bb57e17f5a7f068a1719fbda384d40fc37acb8eb8aeca493b6ea"}, "ecto_sql": {:hex, :ecto_sql, "3.12.1", "c0d0d60e85d9ff4631f12bafa454bc392ce8b9ec83531a412c12a0d415a3a4d0", [:mix], [{:db_connection, "~> 2.4.1 or ~> 2.5", [hex: :db_connection, repo: "hexpm", optional: false]}, {:ecto, "~> 3.12", [hex: :ecto, repo: "hexpm", optional: false]}, {:myxql, "~> 0.7", [hex: :myxql, repo: "hexpm", optional: true]}, {:postgrex, "~> 0.19 or ~> 1.0", [hex: :postgrex, repo: "hexpm", optional: true]}, {:tds, "~> 2.1.1 or ~> 2.2", [hex: :tds, repo: "hexpm", optional: true]}, {:telemetry, "~> 0.4.0 or ~> 1.0", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "aff5b958a899762c5f09028c847569f7dfb9cc9d63bdb8133bff8a5546de6bf5"}, "elixir_make": {:hex, :elixir_make, "0.9.0", "6484b3cd8c0cee58f09f05ecaf1a140a8c97670671a6a0e7ab4dc326c3109726", [:mix], [], "hexpm", "db23d4fd8b757462ad02f8aa73431a426fe6671c80b200d9710caf3d1dd0ffdb"}, "esbuild": {:hex, :esbuild, "0.9.0", "f043eeaca4932ca8e16e5429aebd90f7766f31ac160a25cbd9befe84f2bc068f", [:mix], [{:jason, "~> 1.4", [hex: :jason, repo: "hexpm", optional: false]}], "hexpm", "b415027f71d5ab57ef2be844b2a10d0c1b5a492d431727f43937adce22ba45ae"}, "expo": {:hex, :expo, "1.1.0", "f7b9ed7fb5745ebe1eeedf3d6f29226c5dd52897ac67c0f8af62a07e661e5c75", [:mix], [], "hexpm", "fbadf93f4700fb44c331362177bdca9eeb8097e8b0ef525c9cc501cb9917c960"}, "file_system": {:hex, :file_system, "1.1.0", "08d232062284546c6c34426997dd7ef6ec9f8bbd090eb91780283c9016840e8f", [:mix], [], "hexpm", "bfcf81244f416871f2a2e15c1b515287faa5db9c6bcf290222206d120b3d43f6"}, "finch": {:hex, :finch, "0.19.0", "c644641491ea854fc5c1bbaef36bfc764e3f08e7185e1f084e35e0672241b76d", [:mix], [{:mime, "~> 1.0 or ~> 2.0", [hex: :mime, repo: "hexpm", optional: false]}, {:mint, "~> 1.6.2 or ~> 1.7", [hex: :mint, repo: "hexpm", optional: false]}, {:nimble_options, "~> 0.4 or ~> 1.0", [hex: :nimble_options, repo: "hexpm", optional: false]}, {:nimble_pool, "~> 1.1", [hex: :nimble_pool, repo: "hexpm", optional: false]}, {:telemetry, "~> 0.4 or ~> 1.0", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "fc5324ce209125d1e2fa0fcd2634601c52a787aff1cd33ee833664a5af4ea2b6"}, "floki": {:hex, :floki, "0.37.0", "b83e0280bbc6372f2a403b2848013650b16640cd2470aea6701f0632223d719e", [:mix], [], "hexpm", "516a0c15a69f78c47dc8e0b9b3724b29608aa6619379f91b1ffa47109b5d0dd3"}, "gettext": {:hex, :gettext, "0.26.2", "5978aa7b21fada6deabf1f6341ddba50bc69c999e812211903b169799208f2a8", [:mix], [{:expo, "~> 0.5.1 or ~> 1.0", [hex: :expo, repo: "hexpm", optional: false]}], "hexpm", "aa978504bcf76511efdc22d580ba08e2279caab1066b76bb9aa81c4a1e0a32a5"}, "google_api_you_tube": {:hex, :google_api_you_tube, "0.53.0", "7892c3ceb373a67bd2bbc188e7635449c88a262b5796caed85d72623f4ac3d6b", [:mix], [{:google_gax, "~> 0.4", [hex: :google_gax, repo: "hexpm", optional: false]}], "hexpm", "640f0fa60dbc20a1b5a349b0d240598b1f4700c1a2e7a9d8b8f8731bdac998c9"}, "google_gax": {:hex, :google_gax, "0.4.1", "310105070626013712c56f8007b6ff7b4ead02ecad1efe7888350c6eaba52783", [:mix], [{:mime, "~> 1.0", [hex: :mime, repo: "hexpm", optional: false]}, {:poison, ">= 3.0.0 and < 5.0.0", [hex: :poison, repo: "hexpm", optional: false]}, {:tesla, "~> 1.2", [hex: :tesla, repo: "hexpm", optional: false]}], "hexpm", "aef7dce7e04840c0e611f962475e3223d27d50ebd5e7d8e9e963c5e9e3b1ca79"}, "hackney": {:hex, :hackney, "1.20.1", "8d97aec62ddddd757d128bfd1df6c5861093419f8f7a4223823537bad5d064e2", [:rebar3], [{:certifi, "~> 2.12.0", [hex: :certifi, repo: "hexpm", optional: false]}, {:idna, "~> 6.1.0", [hex: :idna, repo: "hexpm", optional: false]}, {:metrics, "~> 1.0.0", [hex: :metrics, repo: "hexpm", optional: false]}, {:mimerl, "~> 1.1", [hex: :mimerl, repo: "hexpm", optional: false]}, {:parse_trans, "3.4.1", [hex: :parse_trans, repo: "hexpm", optional: false]}, {:ssl_verify_fun, "~> 1.1.0", [hex: :ssl_verify_fun, repo: "hexpm", optional: false]}, {:unicode_util_compat, "~> 0.7.0", [hex: :unicode_util_compat, repo: "hexpm", optional: false]}], "hexpm", "fe9094e5f1a2a2c0a7d10918fee36bfec0ec2a979994cff8cfe8058cd9af38e3"}, "heroicons": {:git, "https://github.com/tailwindlabs/heroicons.git", "88ab3a0d790e6a47404cba02800a6b25d2afae50", [tag: "v2.1.1", sparse: "optimized", depth: 1]}, "hpax": {:hex, :hpax, "1.0.2", "762df951b0c399ff67cc57c3995ec3cf46d696e41f0bba17da0518d94acd4aac", [:mix], [], "hexpm", "2f09b4c1074e0abd846747329eaa26d535be0eb3d189fa69d812bfb8bfefd32f"}, "httpoison": {:hex, :httpoison, "2.2.1", "87b7ed6d95db0389f7df02779644171d7319d319178f6680438167d7b69b1f3d", [:mix], [{:hackney, "~> 1.17", [hex: :hackney, repo: "hexpm", optional: false]}], "hexpm", "51364e6d2f429d80e14fe4b5f8e39719cacd03eb3f9a9286e61e216feac2d2df"}, "idna": {:hex, :idna, "6.1.1", "8a63070e9f7d0c62eb9d9fcb360a7de382448200fbbd1b106cc96d3d8099df8d", [:rebar3], [{:unicode_util_compat, "~> 0.7.0", [hex: :unicode_util_compat, repo: "hexpm", optional: false]}], "hexpm", "92376eb7894412ed19ac475e4a86f7b413c1b9fbb5bd16dccd57934157944cea"}, "jason": {:hex, :jason, "1.4.4", "b9226785a9aa77b6857ca22832cffa5d5011a667207eb2a0ad56adb5db443b8a", [:mix], [{:decimal, "~> 1.0 or ~> 2.0", [hex: :decimal, repo: "hexpm", optional: true]}], "hexpm", "c5eb0cab91f094599f94d55bc63409236a8ec69a21a67814529e8d5f6cc90b3b"}, "metrics": {:hex, :metrics, "1.0.1", "25f094dea2cda98213cecc3aeff09e940299d950904393b2a29d191c346a8486", [:rebar3], [], "hexpm", "69b09adddc4f74a40716ae54d140f93beb0fb8978d8636eaded0c31b6f099f16"}, "mime": {:hex, :mime, "1.6.0", "dabde576a497cef4bbdd60aceee8160e02a6c89250d6c0b29e56c0dfb00db3d2", [:mix], [], "hexpm", "31a1a8613f8321143dde1dafc36006a17d28d02bdfecb9e95a880fa7aabd19a7"}, "mimerl": {:hex, :mimerl, "1.3.0", "d0cd9fc04b9061f82490f6581e0128379830e78535e017f7780f37fea7545726", [:rebar3], [], "hexpm", "a1e15a50d1887217de95f0b9b0793e32853f7c258a5cd227650889b38839fe9d"}, "mint": {:hex, :mint, "1.7.1", "113fdb2b2f3b59e47c7955971854641c61f378549d73e829e1768de90fc1abf1", [:mix], [{:castore, "~> 0.1.0 or ~> 1.0", [hex: :castore, repo: "hexpm", optional: true]}, {:hpax, "~> 0.1.1 or ~> 0.2.0 or ~> 1.0", [hex: :hpax, repo: "hexpm", optional: false]}], "hexpm", "fceba0a4d0f24301ddee3024ae116df1c3f4bb7a563a731f45fdfeb9d39a231b"}, "nimble_options": {:hex, :nimble_options, "1.1.1", "e3a492d54d85fc3fd7c5baf411d9d2852922f66e69476317787a7b2bb000a61b", [:mix], [], "hexpm", "821b2470ca9442c4b6984882fe9bb0389371b8ddec4d45a9504f00a66f650b44"}, "nimble_pool": {:hex, :nimble_pool, "1.1.0", "bf9c29fbdcba3564a8b800d1eeb5a3c58f36e1e11d7b7fb2e084a643f645f06b", [:mix], [], "hexpm", "af2e4e6b34197db81f7aad230c1118eac993acc0dae6bc83bac0126d4ae0813a"}, "oauth2": {:hex, :oauth2, "2.1.0", "beb657f393814a3a7a8a15bd5e5776ecae341fd344df425342a3b6f1904c2989", [:mix], [{:tesla, "~> 1.5", [hex: :tesla, repo: "hexpm", optional: false]}], "hexpm", "8ac07f85b3307dd1acfeb0ec852f64161b22f57d0ce0c15e616a1dfc8ebe2b41"}, "parse_trans": {:hex, :parse_trans, "3.4.1", "6e6aa8167cb44cc8f39441d05193be6e6f4e7c2946cb2759f015f8c56b76e5ff", [:rebar3], [], "hexpm", "620a406ce75dada827b82e453c19cf06776be266f5a67cff34e1ef2cbb60e49a"}, "phoenix": {:hex, :phoenix, "1.7.19", "36617efe5afbd821099a8b994ff4618a340a5bfb25531a1802c4d4c634017a57", [:mix], [{:castore, ">= 0.0.0", [hex: :castore, repo: "hexpm", optional: false]}, {:jason, "~> 1.0", [hex: :jason, repo: "hexpm", optional: true]}, {:phoenix_pubsub, "~> 2.1", [hex: :phoenix_pubsub, repo: "hexpm", optional: false]}, {:phoenix_template, "~> 1.0", [hex: :phoenix_template, repo: "hexpm", optional: false]}, {:phoenix_view, "~> 2.0", [hex: :phoenix_view, repo: "hexpm", optional: true]}, {:plug, "~> 1.14", [hex: :plug, repo: "hexpm", optional: false]}, {:plug_cowboy, "~> 2.7", [hex: :plug_cowboy, repo: "hexpm", optional: true]}, {:plug_crypto, "~> 1.2 or ~> 2.0", [hex: :plug_crypto, repo: "hexpm", optional: false]}, {:telemetry, "~> 0.4 or ~> 1.0", [hex: :telemetry, repo: "hexpm", optional: false]}, {:websock_adapter, "~> 0.5.3", [hex: :websock_adapter, repo: "hexpm", optional: false]}], "hexpm", "ba4dc14458278773f905f8ae6c2ec743d52c3a35b6b353733f64f02dfe096cd6"}, "phoenix_ecto": {:hex, :phoenix_ecto, "4.6.3", "f686701b0499a07f2e3b122d84d52ff8a31f5def386e03706c916f6feddf69ef", [:mix], [{:ecto, "~> 3.5", [hex: :ecto, repo: "hexpm", optional: false]}, {:phoenix_html, "~> 2.14.2 or ~> 3.0 or ~> 4.1", [hex: :phoenix_html, repo: "hexpm", optional: true]}, {:plug, "~> 1.9", [hex: :plug, repo: "hexpm", optional: false]}, {:postgrex, "~> 0.16 or ~> 1.0", [hex: :postgrex, repo: "hexpm", optional: true]}], "hexpm", "909502956916a657a197f94cc1206d9a65247538de8a5e186f7537c895d95764"}, "phoenix_html": {:hex, :phoenix_html, "4.2.0", "83a4d351b66f472ebcce242e4ae48af1b781866f00ef0eb34c15030d4e2069ac", [:mix], [], "hexpm", "9713b3f238d07043583a94296cc4bbdceacd3b3a6c74667f4df13971e7866ec8"}, "phoenix_live_dashboard": {:hex, :phoenix_live_dashboard, "0.8.6", "7b1f0327f54c9eb69845fd09a77accf922f488c549a7e7b8618775eb603a62c7", [:mix], [{:ecto, "~> 3.6.2 or ~> 3.7", [hex: :ecto, repo: "hexpm", optional: true]}, {:ecto_mysql_extras, "~> 0.5", [hex: :ecto_mysql_extras, repo: "hexpm", optional: true]}, {:ecto_psql_extras, "~> 0.7", [hex: :ecto_psql_extras, repo: "hexpm", optional: true]}, {:ecto_sqlite3_extras, "~> 1.1.7 or ~> 1.2.0", [hex: :ecto_sqlite3_extras, repo: "hexpm", optional: true]}, {:mime, "~> 1.6 or ~> 2.0", [hex: :mime, repo: "hexpm", optional: false]}, {:phoenix_live_view, "~> 0.19 or ~> 1.0", [hex: :phoenix_live_view, repo: "hexpm", optional: false]}, {:telemetry_metrics, "~> 0.6 or ~> 1.0", [hex: :telemetry_metrics, repo: "hexpm", optional: false]}], "hexpm", "1681ab813ec26ca6915beb3414aa138f298e17721dc6a2bde9e6eb8a62360ff6"}, "phoenix_live_reload": {:hex, :phoenix_live_reload, "1.5.3", "f2161c207fda0e4fb55165f650f7f8db23f02b29e3bff00ff7ef161d6ac1f09d", [:mix], [{:file_system, "~> 0.3 or ~> 1.0", [hex: :file_system, repo: "hexpm", optional: false]}, {:phoenix, "~> 1.4", [hex: :phoenix, repo: "hexpm", optional: false]}], "hexpm", "b4ec9cd73cb01ff1bd1cac92e045d13e7030330b74164297d1aee3907b54803c"}, "phoenix_live_view": {:hex, :phoenix_live_view, "1.0.4", "327491b033e79db2f887b065c5a2993228449091883d74cfa1baa12f8c98d5eb", [:mix], [{:floki, "~> 0.36", [hex: :floki, repo: "hexpm", optional: true]}, {:jason, "~> 1.0", [hex: :jason, repo: "hexpm", optional: true]}, {:phoenix, "~> 1.6.15 or ~> 1.7.0", [hex: :phoenix, repo: "hexpm", optional: false]}, {:phoenix_html, "~> 3.3 or ~> 4.0", [hex: :phoenix_html, repo: "hexpm", optional: false]}, {:phoenix_template, "~> 1.0", [hex: :phoenix_template, repo: "hexpm", optional: false]}, {:phoenix_view, "~> 2.0", [hex: :phoenix_view, repo: "hexpm", optional: true]}, {:plug, "~> 1.15", [hex: :plug, repo: "hexpm", optional: false]}, {:telemetry, "~> 0.4.2 or ~> 1.0", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "a9865316ddf8d78f382d63af278d20436b52d262b60239956817a61279514366"}, "phoenix_pubsub": {:hex, :phoenix_pubsub, "2.1.3", "3168d78ba41835aecad272d5e8cd51aa87a7ac9eb836eabc42f6e57538e3731d", [:mix], [], "hexpm", "bba06bc1dcfd8cb086759f0edc94a8ba2bc8896d5331a1e2c2902bf8e36ee502"}, "phoenix_template": {:hex, :phoenix_template, "1.0.4", "e2092c132f3b5e5b2d49c96695342eb36d0ed514c5b252a77048d5969330d639", [:mix], [{:phoenix_html, "~> 2.14.2 or ~> 3.0 or ~> 4.0", [hex: :phoenix_html, repo: "hexpm", optional: true]}], "hexpm", "2c0c81f0e5c6753faf5cca2f229c9709919aba34fab866d3bc05060c9c444206"}, "plug": {:hex, :plug, "1.16.1", "40c74619c12f82736d2214557dedec2e9762029b2438d6d175c5074c933edc9d", [:mix], [{:mime, "~> 1.0 or ~> 2.0", [hex: :mime, repo: "hexpm", optional: false]}, {:plug_crypto, "~> 1.1.1 or ~> 1.2 or ~> 2.0", [hex: :plug_crypto, repo: "hexpm", optional: false]}, {:telemetry, "~> 0.4.3 or ~> 1.0", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "a13ff6b9006b03d7e33874945b2755253841b238c34071ed85b0e86057f8cddc"}, "plug_crypto": {:hex, :plug_crypto, "2.1.0", "f44309c2b06d249c27c8d3f65cfe08158ade08418cf540fd4f72d4d6863abb7b", [:mix], [], "hexpm", "131216a4b030b8f8ce0f26038bc4421ae60e4bb95c5cf5395e1421437824c4fa"}, "poison": {:hex, :poison, "4.0.1", "bcb755a16fac91cad79bfe9fc3585bb07b9331e50cfe3420a24bcc2d735709ae", [:mix], [], "hexpm", "ba8836feea4b394bb718a161fc59a288fe0109b5006d6bdf97b6badfcf6f0f25"}, "postgrex": {:hex, :postgrex, "0.20.0", "363ed03ab4757f6bc47942eff7720640795eb557e1935951c1626f0d303a3aed", [:mix], [{:db_connection, "~> 2.1", [hex: :db_connection, repo: "hexpm", optional: false]}, {:decimal, "~> 1.5 or ~> 2.0", [hex: :decimal, repo: "hexpm", optional: false]}, {:jason, "~> 1.0", [hex: :jason, repo: "hexpm", optional: true]}, {:table, "~> 0.1.0", [hex: :table, repo: "hexpm", optional: true]}], "hexpm", "d36ef8b36f323d29505314f704e21a1a038e2dc387c6409ee0cd24144e187c0f"}, "ssl_verify_fun": {:hex, :ssl_verify_fun, "1.1.7", "354c321cf377240c7b8716899e182ce4890c5938111a1296add3ec74cf1715df", [:make, :mix, :rebar3], [], "hexpm", "fe4c190e8f37401d30167c8c405eda19469f34577987c76dde613e838bbc67f8"}, "swoosh": {:hex, :swoosh, "1.17.10", "3bfce0e716f92c85579c8b7bb390f1d287f388e4961bfb9343fe191ec4214225", [:mix], [{:bandit, ">= 1.0.0", [hex: :bandit, repo: "hexpm", optional: true]}, {:cowboy, "~> 1.1 or ~> 2.4", [hex: :cowboy, repo: "hexpm", optional: true]}, {:ex_aws, "~> 2.1", [hex: :ex_aws, repo: "hexpm", optional: true]}, {:finch, "~> 0.6", [hex: :finch, repo: "hexpm", optional: true]}, {:gen_smtp, "~> 0.13 or ~> 1.0", [hex: :gen_smtp, repo: "hexpm", optional: true]}, {:hackney, "~> 1.9", [hex: :hackney, repo: "hexpm", optional: true]}, {:jason, "~> 1.0", [hex: :jason, repo: "hexpm", optional: false]}, {:mail, "~> 0.2", [hex: :mail, repo: "hexpm", optional: true]}, {:mime, "~> 1.1 or ~> 2.0", [hex: :mime, repo: "hexpm", optional: false]}, {:mua, "~> 0.2.3", [hex: :mua, repo: "hexpm", optional: true]}, {:multipart, "~> 0.4", [hex: :multipart, repo: "hexpm", optional: true]}, {:plug, "~> 1.9", [hex: :plug, repo: "hexpm", optional: true]}, {:plug_cowboy, ">= 1.0.0", [hex: :plug_cowboy, repo: "hexpm", optional: true]}, {:req, "~> 0.5 or ~> 1.0", [hex: :req, repo: "hexpm", optional: true]}, {:telemetry, "~> 0.4.2 or ~> 1.0", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "277f86c249089f4fc7d70944987151b76424fac1d348d40685008ba88e0a2717"}, "tailwind": {:hex, :tailwind, "0.2.4", "5706ec47182d4e7045901302bf3a333e80f3d1af65c442ba9a9eed152fb26c2e", [:mix], [{:castore, ">= 0.0.0", [hex: :castore, repo: "hexpm", optional: false]}], "hexpm", "c6e4a82b8727bab593700c998a4d98cf3d8025678bfde059aed71d0000c3e463"}, "telemetry": {:hex, :telemetry, "1.3.0", "fedebbae410d715cf8e7062c96a1ef32ec22e764197f70cda73d82778d61e7a2", [:rebar3], [], "hexpm", "7015fc8919dbe63764f4b4b87a95b7c0996bd539e0d499be6ec9d7f3875b79e6"}, "telemetry_metrics": {:hex, :telemetry_metrics, "1.1.0", "5bd5f3b5637e0abea0426b947e3ce5dd304f8b3bc6617039e2b5a008adc02f8f", [:mix], [{:telemetry, "~> 0.4 or ~> 1.0", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "e7b79e8ddfde70adb6db8a6623d1778ec66401f366e9a8f5dd0955c56bc8ce67"}, "telemetry_poller": {:hex, :telemetry_poller, "1.1.0", "58fa7c216257291caaf8d05678c8d01bd45f4bdbc1286838a28c4bb62ef32999", [:rebar3], [{:telemetry, "~> 1.0", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "9eb9d9cbfd81cbd7cdd24682f8711b6e2b691289a0de6826e58452f28c103c8f"}, "tesla": {:hex, :tesla, "1.14.0", "2abcc2a5cf45b9b351f0dd3a03d2a1511cc25bb6000b5c65def9093e0535a9d7", [:mix], [{:castore, "~> 0.1 or ~> 1.0", [hex: :castore, repo: "hexpm", optional: true]}, {:exjsx, ">= 3.0.0", [hex: :exjsx, repo: "hexpm", optional: true]}, {:finch, "~> 0.13", [hex: :finch, repo: "hexpm", optional: true]}, {:fuse, "~> 2.4", [hex: :fuse, repo: "hexpm", optional: true]}, {:gun, ">= 1.0.0", [hex: :gun, repo: "hexpm", optional: true]}, {:hackney, "~> 1.6", [hex: :hackney, repo: "hexpm", optional: true]}, {:ibrowse, "4.4.2", [hex: :ibrowse, repo: "hexpm", optional: true]}, {:jason, ">= 1.0.0", [hex: :jason, repo: "hexpm", optional: true]}, {:mime, "~> 1.0 or ~> 2.0", [hex: :mime, repo: "hexpm", optional: false]}, {:mint, "~> 1.0", [hex: :mint, repo: "hexpm", optional: true]}, {:mox, "~> 1.0", [hex: :mox, repo: "hexpm", optional: true]}, {:msgpax, "~> 2.3", [hex: :msgpax, repo: "hexpm", optional: true]}, {:poison, ">= 1.0.0", [hex: :poison, repo: "hexpm", optional: true]}, {:telemetry, "~> 0.4 or ~> 1.0", [hex: :telemetry, repo: "hexpm", optional: true]}], "hexpm", "1c5a8575fb1d990100f016fe0bae70a0902ce01dec5fc693f694d09161142e18"}, "thousand_island": {:hex, :thousand_island, "1.3.10", "a9971ebab1dfb36e2710a86b37c3f54973fbc9470d892035334415521fb53328", [:mix], [{:telemetry, "~> 0.4 or ~> 1.0", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "17ab1f1b13aadb1f4b4c8e5b59c06874d701119fed082884c9c6d38addad254f"}, "unicode_util_compat": {:hex, :unicode_util_compat, "0.7.0", "bc84380c9ab48177092f43ac89e4dfa2c6d62b40b8bd132b1059ecc7232f9a78", [:rebar3], [], "hexpm", "25eee6d67df61960cf6a794239566599b09e17e668d3700247bc498638152521"}, "websock": {:hex, :websock, "0.5.3", "2f69a6ebe810328555b6fe5c831a851f485e303a7c8ce6c5f675abeb20ebdadc", [:mix], [], "hexpm", "6105453d7fac22c712ad66fab1d45abdf049868f253cf719b625151460b8b453"}, "websock_adapter": {:hex, :websock_adapter, "0.5.8", "3b97dc94e407e2d1fc666b2fb9acf6be81a1798a2602294aac000260a7c4a47d", [:mix], [{:bandit, ">= 0.6.0", [hex: :bandit, repo: "hexpm", optional: true]}, {:plug, "~> 1.14", [hex: :plug, repo: "hexpm", optional: false]}, {:plug_cowboy, "~> 2.6", [hex: :plug_cowboy, repo: "hexpm", optional: true]}, {:websock, "~> 0.5", [hex: :websock, repo: "hexpm", optional: false]}], "hexpm", "315b9a1865552212b5f35140ad194e67ce31af45bcee443d4ecb96b5fd3f3782"}, }
```

# phoenix_static_buildpack.config

```config
node_version=12.16.3
```

# priv/gettext/default.pot

```pot
## This file is a PO Template file. ## ## "msgid"s here are often extracted from source code. ## Add new messages manually only if they're dynamic ## messages that can't be statically extracted. ## ## Run "mix gettext.extract" to bring this file up to ## date. Leave "msgstr"s empty as changing them here has no ## effect: edit them in PO (.po) files instead. # msgid "" msgstr "" #: lib/myapp_web/components/core_components.ex:482 #, elixir-autogen, elixir-format msgid "Actions" msgstr "" #: lib/myapp_web/components/core_components.ex:160 #, elixir-autogen, elixir-format msgid "Attempting to reconnect" msgstr "" #: lib/myapp_web/components/core_components.ex:151 #, elixir-autogen, elixir-format msgid "Error!" msgstr "" #: lib/myapp_web/components/core_components.ex:172 #, elixir-autogen, elixir-format msgid "Hang in there while we get back on track" msgstr "" #: lib/myapp_web/components/core_components.ex:167 #, elixir-autogen, elixir-format msgid "Something went wrong!" msgstr "" #: lib/myapp_web/components/core_components.ex:150 #, elixir-autogen, elixir-format msgid "Success!" msgstr "" #: lib/myapp_web/components/core_components.ex:155 #, elixir-autogen, elixir-format msgid "We can't find the internet" msgstr "" #: lib/myapp_web/components/core_components.ex:76 #: lib/myapp_web/components/core_components.ex:130 #, elixir-autogen, elixir-format msgid "close" msgstr "" #: lib/myapp_web/controllers/test_html/test.html.heex:28 #, elixir-autogen, elixir-format msgid "%{user} sent %{recipient} a message" msgstr "" #: lib/myapp_web/controllers/test_html/test.html.heex:2 #, elixir-autogen, elixir-format msgid "Hello World!" msgstr "" #: lib/myapp_web/controllers/test_html/test.html.heex:22 #, elixir-autogen, elixir-format msgid "Today is %{date}" msgstr "" #: lib/myapp_web/controllers/test_html/test.html.heex:5 #, elixir-autogen, elixir-format msgid "Welcome %{name}!" msgstr "" #: lib/myapp_web/controllers/test_html/test.html.heex:9 #, elixir-autogen, elixir-format msgid "You have %{count} message." msgid_plural "You have %{count} messages." msgstr[0] "" msgstr[1] ""
```

# priv/gettext/en/LC_MESSAGES/default.po

```po
## "msgid"s in this file come from POT (.pot) files. ### ### Do not add, change, or remove "msgid"s manually here as ### they're tied to the ones in the corresponding POT file ### (with the same domain). ### ### Use "mix gettext.extract --merge" or "mix gettext.merge" ### to merge POT files into PO files. msgid "" msgstr "" "Language: en\n" "Plural-Forms: nplurals=2; plural=(n != 1);\n" #: lib/myapp_web/components/core_components.ex:482 #, elixir-autogen, elixir-format msgid "Actions" msgstr "" #: lib/myapp_web/components/core_components.ex:160 #, elixir-autogen, elixir-format msgid "Attempting to reconnect" msgstr "" #: lib/myapp_web/components/core_components.ex:151 #, elixir-autogen, elixir-format msgid "Error!" msgstr "" #: lib/myapp_web/components/core_components.ex:172 #, elixir-autogen, elixir-format msgid "Hang in there while we get back on track" msgstr "" #: lib/myapp_web/components/core_components.ex:167 #, elixir-autogen, elixir-format msgid "Something went wrong!" msgstr "" #: lib/myapp_web/components/core_components.ex:150 #, elixir-autogen, elixir-format msgid "Success!" msgstr "" #: lib/myapp_web/components/core_components.ex:155 #, elixir-autogen, elixir-format msgid "We can't find the internet" msgstr "" #: lib/myapp_web/components/core_components.ex:76 #: lib/myapp_web/components/core_components.ex:130 #, elixir-autogen, elixir-format msgid "close" msgstr "" msgid "Privacy Policy" msgstr "" msgid "This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website." msgstr "" msgid "We may collect personal data such as your name, email address, and phone number." msgstr "" msgid "We may collect information about your interactions with our website, such as your IP address, browser type, and pages visited." msgstr "" msgid "We use the information we collect to provide, maintain, and improve our services." msgstr "" msgid "We may use your information to communicate with you about updates, promotions, and other information." msgstr "" msgid "We do not share your personal information with third parties except as described in this policy." msgstr "" msgid "We may disclose your information if required to do so by law or in response to valid requests by public authorities." msgstr "" msgid "We implement appropriate security measures to protect your information from unauthorized access, alteration, disclosure, or destruction." msgstr "" msgid "You have the right to access the personal information we hold about you." msgstr "" msgid "You have the right to request the correction of inaccurate personal information." msgstr "" msgid "You have the right to request the deletion of your personal information." msgstr "" msgid "We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on our website." msgstr "" msgid "contact@example.com" msgstr "contact@example.com" msgid "+1-234-567-890" msgstr "+1-234-567-890"
```

# priv/gettext/en/LC_MESSAGES/errors.po

```po
## `msgid`s in this file come from POT (.pot) files. ## ## Do not add, change, or remove `msgid`s manually here as ## they're tied to the ones in the corresponding POT file ## (with the same domain). ## ## Use `mix gettext.extract --merge` or `mix gettext.merge` ## to merge POT files into PO files. msgid "" msgstr "" "Language: en\n" ## From Ecto.Changeset.cast/4 msgid "can't be blank" msgstr "" ## From Ecto.Changeset.unique_constraint/3 msgid "has already been taken" msgstr "" ## From Ecto.Changeset.put_change/3 msgid "is invalid" msgstr "" ## From Ecto.Changeset.validate_acceptance/3 msgid "must be accepted" msgstr "" ## From Ecto.Changeset.validate_format/3 msgid "has invalid format" msgstr "" ## From Ecto.Changeset.validate_subset/3 msgid "has an invalid entry" msgstr "" ## From Ecto.Changeset.validate_exclusion/3 msgid "is reserved" msgstr "" ## From Ecto.Changeset.validate_confirmation/3 msgid "does not match confirmation" msgstr "" ## From Ecto.Changeset.no_assoc_constraint/3 msgid "is still associated with this entry" msgstr "" msgid "are still associated with this entry" msgstr "" ## From Ecto.Changeset.validate_length/3 msgid "should have %{count} item(s)" msgid_plural "should have %{count} item(s)" msgstr[0] "" msgstr[1] "" msgid "should be %{count} character(s)" msgid_plural "should be %{count} character(s)" msgstr[0] "" msgstr[1] "" msgid "should be %{count} byte(s)" msgid_plural "should be %{count} byte(s)" msgstr[0] "" msgstr[1] "" msgid "should have at least %{count} item(s)" msgid_plural "should have at least %{count} item(s)" msgstr[0] "" msgstr[1] "" msgid "should be at least %{count} character(s)" msgid_plural "should be at least %{count} character(s)" msgstr[0] "" msgstr[1] "" msgid "should be at least %{count} byte(s)" msgid_plural "should be at least %{count} byte(s)" msgstr[0] "" msgstr[1] "" msgid "should have at most %{count} item(s)" msgid_plural "should have at most %{count} item(s)" msgstr[0] "" msgstr[1] "" msgid "should be at most %{count} character(s)" msgid_plural "should be at most %{count} character(s)" msgstr[0] "" msgstr[1] "" msgid "should be at most %{count} byte(s)" msgid_plural "should be at most %{count} byte(s)" msgstr[0] "" msgstr[1] "" ## From Ecto.Changeset.validate_number/3 msgid "must be less than %{number}" msgstr "" msgid "must be greater than %{number}" msgstr "" msgid "must be less than or equal to %{number}" msgstr "" msgid "must be greater than or equal to %{number}" msgstr "" msgid "must be equal to %{number}" msgstr ""
```

# priv/gettext/errors.pot

```pot
## This is a PO Template file. ## ## `msgid`s here are often extracted from source code. ## Add new translations manually only if they're dynamic ## translations that can't be statically extracted. ## ## Run `mix gettext.extract` to bring this file up to ## date. Leave `msgstr`s empty as changing them here has no ## effect: edit them in PO (`.po`) files instead. ## From Ecto.Changeset.cast/4 msgid "can't be blank" msgstr "" ## From Ecto.Changeset.unique_constraint/3 msgid "has already been taken" msgstr "" ## From Ecto.Changeset.put_change/3 msgid "is invalid" msgstr "" ## From Ecto.Changeset.validate_acceptance/3 msgid "must be accepted" msgstr "" ## From Ecto.Changeset.validate_format/3 msgid "has invalid format" msgstr "" ## From Ecto.Changeset.validate_subset/3 msgid "has an invalid entry" msgstr "" ## From Ecto.Changeset.validate_exclusion/3 msgid "is reserved" msgstr "" ## From Ecto.Changeset.validate_confirmation/3 msgid "does not match confirmation" msgstr "" ## From Ecto.Changeset.no_assoc_constraint/3 msgid "is still associated with this entry" msgstr "" msgid "are still associated with this entry" msgstr "" ## From Ecto.Changeset.validate_length/3 msgid "should have %{count} item(s)" msgid_plural "should have %{count} item(s)" msgstr[0] "" msgstr[1] "" msgid "should be %{count} character(s)" msgid_plural "should be %{count} character(s)" msgstr[0] "" msgstr[1] "" msgid "should be %{count} byte(s)" msgid_plural "should be %{count} byte(s)" msgstr[0] "" msgstr[1] "" msgid "should have at least %{count} item(s)" msgid_plural "should have at least %{count} item(s)" msgstr[0] "" msgstr[1] "" msgid "should be at least %{count} character(s)" msgid_plural "should be at least %{count} character(s)" msgstr[0] "" msgstr[1] "" msgid "should be at least %{count} byte(s)" msgid_plural "should be at least %{count} byte(s)" msgstr[0] "" msgstr[1] "" msgid "should have at most %{count} item(s)" msgid_plural "should have at most %{count} item(s)" msgstr[0] "" msgstr[1] "" msgid "should be at most %{count} character(s)" msgid_plural "should be at most %{count} character(s)" msgstr[0] "" msgstr[1] "" msgid "should be at most %{count} byte(s)" msgid_plural "should be at most %{count} byte(s)" msgstr[0] "" msgstr[1] "" ## From Ecto.Changeset.validate_number/3 msgid "must be less than %{number}" msgstr "" msgid "must be greater than %{number}" msgstr "" msgid "must be less than or equal to %{number}" msgstr "" msgid "must be greater than or equal to %{number}" msgstr "" msgid "must be equal to %{number}" msgstr "" #: lib/myapp_web/controllers/test_html/test.html.heex:17 #, elixir-autogen, elixir-format msgid "Invalid credentials" msgstr ""
```

# priv/gettext/ko/LC_MESSAGES/default.po

```po
## "msgid"s in this file come from POT (.pot) files. ### ### Do not add, change, or remove "msgid"s manually here as ### they're tied to the ones in the corresponding POT file ### (with the same domain). ### ### Use "mix gettext.extract --merge" or "mix gettext.merge" ### to merge POT files into PO files. msgid "" msgstr "" "Language: ko\n" "Plural-Forms: nplurals=1; plural=0;\n" #: lib/myapp_web/components/core_components.ex:482 #, elixir-autogen, elixir-format msgid "Actions" msgstr "액션" #: lib/myapp_web/components/core_components.ex:160 #, elixir-autogen, elixir-format msgid "Attempting to reconnect" msgstr "재연결" #: lib/myapp_web/components/core_components.ex:151 #, elixir-autogen, elixir-format msgid "Error!" msgstr "오류!" #: lib/myapp_web/components/core_components.ex:172 #, elixir-autogen, elixir-format msgid "Hang in there while we get back on track" msgstr "잠시 기다려주세요." #: lib/myapp_web/components/core_components.ex:167 #, elixir-autogen, elixir-format msgid "Something went wrong!" msgstr "문제가 발생했습니다!" #: lib/myapp_web/components/core_components.ex:150 #, elixir-autogen, elixir-format msgid "Success!" msgstr "성공!" #: lib/myapp_web/components/core_components.ex:155 #, elixir-autogen, elixir-format msgid "We can't find the internet" msgstr "인터넷을 찾을 수 없습니다." #: lib/myapp_web/components/core_components.ex:76 #: lib/myapp_web/components/core_components.ex:130 #, elixir-autogen, elixir-format msgid "close" msgstr "닫기" #: lib/myapp_web/controllers/test_html/test.html.heex:28 #, elixir-autogen, elixir-format msgid "%{user} sent %{recipient} a message" msgstr "%{user}가 %{recipient}에게 메시지를 보냈습니다." #: lib/myapp_web/controllers/test_html/test.html.heex:2 #, elixir-autogen, elixir-format msgid "Hello World!" msgstr "안녕하세요!" #: lib/myapp_web/controllers/test_html/test.html.heex:22 #, elixir-autogen, elixir-format msgid "Today is %{date}" msgstr "오늘은 %{date}입니다." #: lib/myapp_web/controllers/test_html/test.html.heex:5 #, elixir-autogen, elixir-format msgid "Welcome %{name}!" msgstr "환영합니다 %{name}!" #: lib/myapp_web/controllers/test_html/test.html.heex:9 #, elixir-autogen, elixir-format msgid "You have %{count} message." msgid_plural "You have %{count} messages." msgstr[0] "%{count}개의 메시지를 가지고 있습니다."
```

# priv/gettext/ko/LC_MESSAGES/errors.po

```po
## "msgid"s in this file come from POT (.pot) files. ### ### Do not add, change, or remove "msgid"s manually here as ### they're tied to the ones in the corresponding POT file ### (with the same domain). ### ### Use "mix gettext.extract --merge" or "mix gettext.merge" ### to merge POT files into PO files. msgid "" msgstr "" "Language: ko\n" "Plural-Forms: nplurals=1; plural=0;\n" msgid "can't be blank" msgstr "" msgid "has already been taken" msgstr "" msgid "is invalid" msgstr "" msgid "must be accepted" msgstr "" msgid "has invalid format" msgstr "" msgid "has an invalid entry" msgstr "" msgid "is reserved" msgstr "" msgid "does not match confirmation" msgstr "" msgid "is still associated with this entry" msgstr "" msgid "are still associated with this entry" msgstr "" msgid "should have %{count} item(s)" msgid_plural "should have %{count} item(s)" msgstr[0] "" msgid "should be %{count} character(s)" msgid_plural "should be %{count} character(s)" msgstr[0] "" msgid "should be %{count} byte(s)" msgid_plural "should be %{count} byte(s)" msgstr[0] "" msgid "should have at least %{count} item(s)" msgid_plural "should have at least %{count} item(s)" msgstr[0] "" msgid "should be at least %{count} character(s)" msgid_plural "should be at least %{count} character(s)" msgstr[0] "" msgid "should be at least %{count} byte(s)" msgid_plural "should be at least %{count} byte(s)" msgstr[0] "" msgid "should have at most %{count} item(s)" msgid_plural "should have at most %{count} item(s)" msgstr[0] "" msgid "should be at most %{count} character(s)" msgid_plural "should be at most %{count} character(s)" msgstr[0] "" msgid "should be at most %{count} byte(s)" msgid_plural "should be at most %{count} byte(s)" msgstr[0] "" msgid "must be less than %{number}" msgstr "" msgid "must be greater than %{number}" msgstr "" msgid "must be less than or equal to %{number}" msgstr "" msgid "must be greater than or equal to %{number}" msgstr "" msgid "must be equal to %{number}" msgstr "" #: lib/myapp_web/controllers/test_html/test.html.heex:17 #, elixir-autogen, elixir-format msgid "Invalid credentials" msgstr ""
```

# priv/privacy_policy/v1_en.json

```json
{ "metadata": { "version": "3.0.0", "schemaVersion": "2024.2", "releaseDate": "2025-01-26", "effectiveDate": "2025-02-01", "language": "en", "revisionHistory": [ { "version": "2.0.0", "date": "2025-01-26", "changes": "Content restructuring and enhanced privacy descriptions" }, { "version": "1.0.0", "date": "2025-01-13", "changes": "Initial release" } ], "availableLanguages": ["en", "ko"], "accessibility": { "role": "document", "lang": "en-US", "ariaLabel": "Privacy Policy", "structure": { "landmarks": true, "headings": true } }, "formatting": { "supported": ["text", "list", "link", "heading"], "schema": "https://schema.org/PrivacyPolicy" } }, "document": { "index": { "type": "navigation", "title": "Table of Contents and Quick Links", "subtitle": "Main Sections", "items": [ { "id": "section-1", "title": "Collection and Use of Personal Information", "ref": "#section-1" }, { "id": "section-2", "title": "Purpose of Processing Personal Information", "ref": "#section-2" }, { "id": "section-3", "title": "Disclosure of Personal Information to Third Parties", "ref": "#section-3" }, { "id": "section-4", "title": "Retention and Disposal of Personal Information", "ref": "#section-4" }, { "id": "section-5", "title": "Rights of Data Subjects and How to Exercise Them", "ref": "#section-5" }, { "id": "section-6", "title": "Technical and Administrative Protection Measures", "ref": "#section-6" } ] }, "introduction": { "type": "section", "content": [ { "type": "text", "value": "ingrey (hereinafter referred to as 'the Company') values your personal information and makes efforts to comply with relevant laws such as the 'Personal Information Protection Act' and the 'Act on Promotion of Information and Communications Network Utilization and Information Protection'." }, { "type": "text", "value": "Through this Privacy Policy, the Company informs users about the categories of personal information collected, the purpose of collection and use, retention and disposal, third-party disclosure, and other matters related to personal information." } ] }, "third-party": [ { "type": "section", "title": "YouTube API Services", "link": { "text": "here", "href": "https://policies.google.com/privacy", "value": " to read about Google's Privacy Policy. By using YouTube API Services, you are deemed to have agreed to Google's Privacy Policy." } } ], "sections": [ { "id": "section-1", "type": "section", "number": "1", "title": "Collection and Use of Personal Information", "chapters": [ { "id": "chapter-1", "type": "chapter", "number": "1", "title": "Categories of Personal Information Collected", "content": { "type": "list", "items": [ { "text": "The Company collects the following personal information for membership registration, service use, customer support, etc.", "subItems": [ { "text": "1. Required information: Name, ID, password, email address, date of birth" }, { "text": "2. Optional information: Nickname, profile image, occupation, areas of interest" }, { "text": "3. Information automatically generated and collected during service use: IP address, cookies, visit date and time, service usage records, inappropriate usage records" } ] } ] } }, { "id": "chapter-2", "type": "chapter", "number": "2", "title": "Methods of Personal Information Collection", "content": { "type": "list", "items": [ { "text": "The Company collects personal information through the following methods:", "subItems": [ { "text": "1. Collection with user consent during membership registration and service use through website and mobile application" }, { "text": "2. Automatic collection through data collection tools" } ] } ] } } ] }, { "id": "section-2", "type": "section", "number": "2", "title": "Purpose of Processing Personal Information", "chapters": [ { "id": "chapter-3", "type": "chapter", "number": "3", "title": "Use of Collected Personal Information", "content": { "type": "text", "value": "The Company uses the collected personal information for the following purposes. All information provided by users will not be used for purposes other than those listed below, and prior consent will be sought if the purpose of use changes." } }, { "id": "chapter-4", "type": "chapter", "number": "4", "title": "Purposes of Use", "content": { "type": "list", "items": [ { "text": "1. Member Management", "subItems": [ { "text": "Verification of membership registration intent, provision of membership services, maintenance and management of membership qualifications, prevention of service misuse, various notifications and announcements" } ] }, { "text": "2. Service Provision", "subItems": [ { "text": "Provision of social media management tool services, content provision, customized service provision" } ] }, { "text": "3. Marketing and Advertising", "subItems": [ { "text": "Development of new services and provision of customized services, provision of event and advertising information and participation opportunities, verification of service validity, analysis of access frequency, statistics on members' service usage" } ] } ] } } ] }, { "id": "section-3", "type": "section", "number": "3", "title": "Disclosure of Personal Information to Third Parties", "chapters": [ { "id": "chapter-5", "type": "chapter", "number": "5", "title": "Principles of Personal Information Disclosure to Third Parties", "content": { "type": "text", "value": "The Company processes users' personal information only within the scope specified in this Privacy Policy and does not process it beyond the original scope or disclose it to third parties without users' prior consent. However, personal information may be processed in the following cases." } }, { "id": "chapter-6", "type": "chapter", "number": "6", "title": "Cases Where Third-Party Disclosure is Possible", "content": { "type": "list", "items": [ { "text": "1. When the user has given prior consent to third-party disclosure" }, { "text": "2. When required by law" }, { "text": "3. When necessary for statistical compilation or academic research purposes, and the personal information is provided in a form that cannot identify specific individuals" }, { "text": "4. Other cases specified by law" } ] } }, { "id": "chapter-7", "type": "chapter", "number": "7", "title": "Outsourcing of Personal Information Processing", "content": { "type": "list", "items": [ { "text": "The Company outsources personal information processing tasks as follows for smooth service provision:", "subItems": [ { "text": "1. Payment service providers: Payment processing" }, { "text": "2. Hosting service providers: Server operation and management" }, { "text": "3. Customer support companies: Customer inquiry handling and service guidance" } ] } ] } } ] }, { "id": "section-4", "type": "section", "number": "4", "title": "Retention and Disposal of Personal Information", "chapters": [ { "id": "chapter-8", "type": "chapter", "number": "8", "title": "Retention Period of Personal Information", "content": { "type": "text", "value": "In principle, the Company promptly disposes of personal information once the purpose of collection and use has been achieved. However, information is retained for the duration required by relevant laws." } }, { "id": "chapter-9", "type": "chapter", "number": "9", "title": "Retention Periods Required by Law", "content": { "type": "list", "items": [ { "text": "1. Records on contracts or subscription withdrawals: 5 years" }, { "text": "2. Records on payment and supply of goods: 5 years" }, { "text": "3. Records on consumer complaints or dispute handling: 3 years" }, { "text": "4. Website visit records: 3 months" } ] } }, { "id": "chapter-10", "type": "chapter", "number": "10", "title": "Personal Information Disposal Procedures and Methods", "content": { "type": "list", "items": [ { "text": "The procedures and methods for disposing of personal information are as follows:", "subItems": [ { "text": "1. Disposal Procedure: Personal information that has achieved its purpose or whose retention period has expired is promptly disposed of according to the Company's internal policies." }, { "text": "2. Disposal Method: Personal information stored in electronic files is securely deleted using technical methods that prevent recovery, and information printed on paper is shredded or incinerated." } ] } ] } } ] }, { "id": "section-5", "type": "section", "number": "5", "title": "Rights of Data Subjects and How to Exercise Them", "chapters": [ { "id": "chapter-11", "type": "chapter", "number": "11", "title": "Rights of Data Subjects", "content": { "type": "text", "value": "Users can exercise the following rights regarding their personal information at any time:" } }, { "id": "chapter-12", "type": "chapter", "number": "12", "title": "Details of Data Subject Rights", "content": { "type": "list", "items": [ { "text": "1. Right to access personal information" }, { "text": "2. Right to request correction of errors" }, { "text": "3. Right to request deletion" }, { "text": "4. Right to request suspension of processing" } ] } }, { "id": "chapter-13", "type": "chapter", "number": "13", "title": "How to Exercise Rights", "content": { "type": "list", "items": [ { "text": "Users can exercise their rights through the following methods:", "subItems": [ { "text": "1. Personal information manager: Through written request, phone, or email" }, { "text": "2. My Page > Personal Information Management: Through the online service" } ] } ] } } ] }, { "id": "section-6", "type": "section", "number": "6", "title": "Technical and Administrative Protection Measures", "chapters": [ { "id": "chapter-14", "type": "chapter", "number": "14", "title": "Technical Measures", "content": { "type": "list", "items": [ { "text": "The Company implements the following technical measures to protect personal information:", "subItems": [ { "text": "1. Encryption of personal information: Encrypting users' personal information such as passwords" }, { "text": "2. Hacking prevention system: Installing security programs and regularly updating them" }, { "text": "3. Access control: Minimizing the number of employees handling personal information and implementing access restrictions" } ] } ] } }, { "id": "chapter-15", "type": "chapter", "number": "15", "title": "Administrative Measures", "content": { "type": "list", "items": [ { "text": "The Company implements the following administrative measures to protect personal information:", "subItems": [ { "text": "1. Regular employee training: Conducting personal information protection training for employees" }, { "text": "2. Management of outsourcing companies: Supervising outsourcing companies that handle personal information" }, { "text": "3. Regular inspections: Conducting regular inspections on personal information protection" } ] } ] } }, { "id": "chapter-16", "type": "chapter", "number": "16", "title": "Privacy Policy Changes", "content": { "type": "text", "value": "This Privacy Policy is effective from the date indicated at the top, and any changes due to the amendment of laws or policies will be announced through the website at least 7 days before implementation. However, significant changes to user rights will be announced at least 30 days in advance." } } ] } ] } }
```

# priv/privacy_policy/v1.json

```json
{ "metadata": { "version": "3.0.0", "schemaVersion": "2024.2", "releaseDate": "2025-01-26", "effectiveDate": "2025-02-01", "language": "ko", "revisionHistory": [ { "version": "2.0.0", "date": "2025-01-26", "changes": "Content restructuring and enhanced privacy descriptions" }, { "version": "1.0.0", "date": "2025-01-13", "changes": "Initial release" } ], "availableLanguages": ["ko"], "accessibility": { "role": "document", "lang": "ko-KR", "ariaLabel": "개인정보 처리방침", "structure": { "landmarks": true, "headings": true } }, "formatting": { "supported": ["text", "list", "link", "heading"], "schema": "https://schema.org/PrivacyPolicy" } }, "document": { "index": { "type": "navigation", "title": "목차 및 빠른 링크", "subtitle": "주요 섹션", "items": [ { "id": "section-1", "title": "개인정보 수집 및 이용", "ref": "#section-1" }, { "id": "section-2", "title": "개인정보의 처리 목적", "ref": "#section-2" }, { "id": "section-3", "title": "개인정보의 제3자 제공", "ref": "#section-3" }, { "id": "section-4", "title": "개인정보의 보유 및 파기", "ref": "#section-4" } ] }, "introduction": { "type": "section", "content": [ { "type": "text", "value": "ingrey(이하 '회사')는 이용자의 개인정보를 중요시하며, 「개인정보 보호법」, 「정보통신망 이용촉진 및 정보보호 등에 관한 법률」 등 관련 법령을 준수하기 위하여 노력하고 있습니다." }, { "type": "text", "value": "회사는 개인정보처리방침을 통하여 회사가 이용자로부터 수집하는 개인정보의 항목, 개인정보의 수집 및 이용목적, 개인정보의 보유 및 파기, 제3자 제공 등에 관한 사항을 이용자에게 안내하고 있습니다." } ] }, "third-party": [ { "type": "section", "title": "YouTube API 서비스", "link": { "text": "여기", "href": "https://policies.google.com/privacy", "value": "를 클릭하여 Google 개인정보처리방침에 대해 읽어보세요. YouTube API 서비스를 사용하는 경우, 귀하는 Google 개인정보처리방침에 동의한 것으로 간주됩니다." } } ], "sections": [ { "id": "section-1", "type": "section", "number": "1", "title": "개인정보 수집 및 이용", "chapters": [ { "id": "chapter-1", "type": "chapter", "number": "1", "title": "수집하는 개인정보 항목", "content": { "type": "list", "items": [ { "text": "회사는 회원가입, 서비스 이용, 고객상담 등을 위해 다음과 같은 개인정보를 수집하고 있습니다.", "subItems": [ { "text": "1. 필수항목: 성명, 아이디(ID), 비밀번호, 이메일 주소, 생년월일" }, { "text": "2. 선택항목: 닉네임(별명), 프로필 이미지, 직업, 관심분야" }, { "text": "3. 서비스 이용 과정에서 자동으로 생성되어 수집되는 정보: IP 주소, 쿠키, 방문 일시, 서비스 이용 기록, 불량 이용 기록" } ] } ] } }, { "id": "chapter-2", "type": "chapter", "number": "2", "title": "개인정보 수집방법", "content": { "type": "list", "items": [ { "text": "회사는 다음과 같은 방법으로 개인정보를 수집합니다.", "subItems": [ { "text": "1. 홈페이지, 모바일 애플리케이션을 통한 회원가입 및 서비스 이용 과정에서 이용자의 동의를 얻어 수집" }, { "text": "2. 생성정보 수집 툴을 통한 자동 수집" } ] } ] } } ] }, { "id": "section-2", "type": "section", "number": "2", "title": "개인정보의 처리 목적", "chapters": [ { "id": "chapter-3", "type": "chapter", "number": "3", "title": "수집한 개인정보의 이용", "content": { "type": "text", "value": "회사는 수집한 개인정보를 다음의 목적을 위해 이용합니다. 이용자가 제공한 모든 정보는 다음의 목적 이외의 용도로는 사용되지 않으며 이용 목적이 변경될 시에는 사전 동의를 구할 것입니다." } }, { "id": "chapter-4", "type": "chapter", "number": "4", "title": "이용 목적", "content": { "type": "list", "items": [ { "text": "1. 회원 관리", "subItems": [ { "text": "회원 가입의사 확인, 회원제 서비스 제공, 회원자격 유지·관리, 서비스 부정이용 방지, 각종 고지·통지" } ] }, { "text": "2. 서비스 제공", "subItems": [ { "text": "소셜 미디어 관리 도구 서비스 제공, 콘텐츠 제공, 맞춤형 서비스 제공" } ] }, { "text": "3. 마케팅 및 광고에 활용", "subItems": [ { "text": "신규 서비스 개발 및 맞춤 서비스 제공, 이벤트 및 광고성 정보 제공 및 참여기회 제공, 서비스의 유효성 확인, 접속빈도 파악, 회원의 서비스 이용에 대한 통계" } ] } ] } } ] }, { "id": "section-3", "type": "section", "number": "3", "title": "개인정보의 제3자 제공", "chapters": [ { "id": "chapter-5", "type": "chapter", "number": "5", "title": "개인정보의 제3자 제공 원칙", "content": { "type": "text", "value": "회사는 이용자의 개인정보를 본 개인정보처리방침에서 명시한 범위 내에서만 처리하며, 이용자의 사전 동의 없이는 본래의 범위를 초과하여 처리하거나 제3자에게 제공하지 않습니다. 단, 다음의 경우에는 개인정보를 처리할 수 있습니다." } }, { "id": "chapter-6", "type": "chapter", "number": "6", "title": "제3자 제공이 가능한 경우", "content": { "type": "list", "items": [ { "text": "1. 이용자가 사전에 제3자 제공에 동의한 경우" }, { "text": "2. 법령에 의한 경우" }, { "text": "3. 통계작성 및 학술연구 등의 목적을 위하여 필요한 경우로서 특정 개인을 알아볼 수 없는 형태로 개인정보를 제공하는 경우" }, { "text": "4. 기타 법률에서 정한 경우" } ] } }, { "id": "chapter-7", "type": "chapter", "number": "7", "title": "개인정보 처리위탁", "content": { "type": "list", "items": [ { "text": "회사는 원활한 서비스 제공을 위해 다음과 같이 개인정보 처리업무를 위탁하고 있습니다.", "subItems": [ { "text": "1. 결제대행업체: 결제처리" }, { "text": "2. 호스팅 서비스 제공업체: 서버 운영 및 관리" }, { "text": "3. 고객상담 업체: 고객문의 응대 및 서비스 안내" } ] } ] } } ] }, { "id": "section-4", "type": "section", "number": "4", "title": "개인정보의 보유 및 파기", "chapters": [ { "id": "chapter-8", "type": "chapter", "number": "8", "title": "개인정보의 보유 기간", "content": { "type": "text", "value": "회사는 원칙적으로 개인정보의 수집 및 이용목적이 달성된 후에는 해당 정보를 지체 없이 파기합니다. 단, 관련 법령에 따라 보존하여야 하는 경우에는 그 기간 동안 보관합니다." } }, { "id": "chapter-9", "type": "chapter", "number": "9", "title": "법령에 따른 보존기간", "content": { "type": "list", "items": [ { "text": "1. 계약 또는 청약철회 등에 관한 기록: 5년" }, { "text": "2. 대금결제 및 재화 등의 공급에 관한 기록: 5년" }, { "text": "3. 소비자의 불만 또는 분쟁처리에 관한 기록: 3년" }, { "text": "4. 웹사이트 방문 기록: 3개월" } ] } }, { "id": "chapter-10", "type": "chapter", "number": "10", "title": "개인정보 파기 절차 및 방법", "content": { "type": "list", "items": [ { "text": "개인정보의 파기 절차 및 방법은 다음과 같습니다.", "subItems": [ { "text": "1. 파기절차: 이용자가 입력한 정보는 목적 달성 후 별도의 DB에 옮겨져 내부 방침 및 관련 법령에 따라 일정 기간 저장된 후 혹은 즉시 파기됩니다." }, { "text": "2. 파기방법: 전자적 파일 형태의 정보는 기록을 재생할 수 없는 기술적 방법을 사용하여 삭제하며, 종이에 출력된 개인정보는 분쇄기로 분쇄하거나 소각을 통하여 파기합니다." } ] } ] } } ] }, { "id": "section-5", "type": "section", "number": "5", "title": "개인정보 관리 책임자 및 연락처", "chapters": [ { "id": "chapter-11", "type": "chapter", "number": "11", "title": "개인정보 관리 책임자", "content": { "type": "text", "value": "회사는 개인정보 처리에 관한 업무를 총괄해서 책임지고, 개인정보 처리와 관련한 이용자의 불만처리 및 피해구제 등을 위하여 아래와 같이 개인정보 관리책임자를 지정하고 있습니다." } }, { "id": "chapter-12", "type": "chapter", "number": "12", "title": "개인정보 관리 책임자 정보", "content": { "type": "list", "items": [ { "text": "1. 개인정보 관리책임자", "subItems": [ { "text": "이름: 홍길동" }, { "text": "직위: 개인정보보호 책임자" }, { "text": "연락처: privacy@ingrey.com" } ] }, { "text": "2. 개인정보 보호 담당부서", "subItems": [ { "text": "부서명: 개인정보보호팀" }, { "text": "연락처: 02-123-4567" } ] } ] } }, { "id": "chapter-13", "type": "chapter", "number": "13", "title": "권익침해 구제방법", "content": { "type": "text", "value": "이용자는 개인정보침해로 인한 구제를 받기 위하여 개인정보분쟁조정위원회, 한국인터넷진흥원 개인정보침해신고센터 등에 분쟁해결이나 상담 등을 신청할 수 있습니다. 또한 개인정보의 열람, 정정·삭제, 처리정지 등에 대한 정보주체의 요구에 대하여 공공기관의 장이 행한 처분 또는 부작위로 인하여 권리 또는 이익을 침해 받은 자는 행정심판법이 정하는 바에 따라 행정심판을 청구할 수 있습니다." } } ] }, { "id": "section-6", "type": "section", "number": "6", "title": "개인정보 처리방침 변경", "chapters": [ { "id": "chapter-14", "type": "chapter", "number": "14", "title": "개인정보 처리방침 변경에 관한 사항", "content": { "type": "list", "items": [ { "text": "1. 이 개인정보 처리방침은 2025년 2월 1일부터 적용됩니다." }, { "text": "2. 이전의 개인정보 처리방침은 아래에서 확인하실 수 있습니다.", "subItems": [ { "text": "2024년 1월 13일 ~ 2025년 1월 31일 적용 (클릭)" } ] } ] } } ] } ] } }
```

# priv/privacy_policy/v2_en.json

```json
{ "metadata": { "version": "3.0.0", "schemaVersion": "2024.2", "releaseDate": "2025-01-26", "effectiveDate": "2025-02-01", "language": "en", "revisionHistory": [ { "version": "3.0.0", "date": "2025-01-26", "changes": "Added social media platform integrations and enhanced privacy descriptions" }, { "version": "2.0.0", "date": "2025-01-20", "changes": "Content restructuring and enhanced privacy descriptions" }, { "version": "1.0.0", "date": "2025-01-13", "changes": "Initial release" } ], "availableLanguages": [ "en", "ko" ], "accessibility": { "role": "document", "lang": "en-US", "ariaLabel": "Privacy Policy", "structure": { "landmarks": true, "headings": true } }, "formatting": { "supported": [ "text", "list", "link", "heading" ], "schema": "https://schema.org/PrivacyPolicy" } }, "document": { "index": { "type": "navigation", "title": "Table of Contents", "subtitle": "Main Sections", "items": [ { "id": "section-1", "title": "Collection and Use of Personal Information", "ref": "#section-1" }, { "id": "section-2", "title": "Purpose of Processing Personal Information", "ref": "#section-2" }, { "id": "section-3", "title": "Disclosure of Personal Information to Third Parties", "ref": "#section-3" }, { "id": "section-4", "title": "Retention and Disposal of Personal Information", "ref": "#section-4" }, { "id": "section-5", "title": "Rights of Data Subjects and How to Exercise Them", "ref": "#section-5" }, { "id": "section-6", "title": "Technical and Administrative Protection Measures", "ref": "#section-6" }, { "id": "section-7", "title": "Privacy Policy Manager and Contact Information", "ref": "#section-7" }, { "id": "section-8", "title": "Privacy Policy Changes", "ref": "#section-8" }, { "id": "section-9", "title": "Social Media Platform Integrations", "ref": "#section-social-media" } ] }, "introduction": { "type": "section", "content": [ { "type": "text", "value": "ingrey (hereinafter referred to as 'the Company') values your personal information and makes efforts to comply with relevant laws such as the 'Personal Information Protection Act' and the 'Act on Promotion of Information and Communications Network Utilization and Information Protection'." }, { "type": "text", "value": "Through this Privacy Policy, the Company informs users about the categories of personal information collected, the purpose of collection and use, retention and disposal, third-party disclosure, and other matters related to personal information." } ] }, "definitions": { "type": "section", "title": "Definitions and Scope", "content": [ { "type": "chapter", "title": "Definitions", "content": { "type": "list", "items": [ { "text": "Service: The ingrey application, website, and related services provided by the Company." }, { "text": "User: Any individual who accesses or uses the Service." }, { "text": "Personal Information: Any information relating to an identified or identifiable natural person." }, { "text": "Social Media Platforms: Third-party services including but not limited to TikTok, YouTube, Facebook, and Instagram." }, { "text": "Content: Any material uploaded, shared, or created through the Service, including text, images, videos, and audio." } ] } }, { "type": "chapter", "title": "Scope", "content": { "type": "text", "value": "This Privacy Policy applies to all users of the Service, regardless of how they access it (website, mobile application, API, etc.). It covers the collection, use, and sharing of personal information by the Company and its relationship with connected Social Media Platforms." } } ] }, "sections": [ { "id": "section-1", "type": "section", "number": "1", "title": "Collection and Use of Personal Information", "chapters": [ { "id": "chapter-1", "type": "chapter", "number": "1", "title": "Categories of Personal Information Collected", "content": { "type": "list", "items": [ { "text": "The Company collects the following personal information for membership registration, service use, customer support, etc.", "subItems": [ { "text": "1. Required information: Name, ID, password, email address, date of birth" }, { "text": "2. Optional information: Nickname, profile image, occupation, areas of interest" }, { "text": "3. Information automatically generated and collected during service use: IP address, cookies, visit date and time, service usage records, inappropriate usage records" } ] } ] } }, { "id": "chapter-2", "type": "chapter", "number": "2", "title": "Methods of Personal Information Collection", "content": { "type": "list", "items": [ { "text": "The Company collects personal information through the following methods:", "subItems": [ { "text": "1. Collection with user consent during membership registration and service use through website and mobile application" }, { "text": "2. Automatic collection through data collection tools" } ] } ] } } ] }, { "id": "section-2", "type": "section", "number": "2", "title": "Purpose of Processing Personal Information", "chapters": [ { "id": "chapter-3", "type": "chapter", "number": "3", "title": "Use of Collected Personal Information", "content": { "type": "text", "value": "The Company uses the collected personal information for the following purposes. All information provided by users will not be used for purposes other than those listed below, and prior consent will be sought if the purpose of use changes." } }, { "id": "chapter-4", "type": "chapter", "number": "4", "title": "Purposes of Use", "content": { "type": "list", "items": [ { "text": "1. Member Management", "subItems": [ { "text": "Verification of membership registration intent, provision of membership services, maintenance and management of membership qualifications, prevention of service misuse, various notifications and announcements" } ] }, { "text": "2. Service Provision", "subItems": [ { "text": "Provision of social media management tool services, content provision, customized service provision" } ] }, { "text": "3. Marketing and Advertising", "subItems": [ { "text": "Development of new services and provision of customized services, provision of event and advertising information and participation opportunities, verification of service validity, analysis of access frequency, statistics on members' service usage" } ] } ] } } ] }, { "id": "section-3", "type": "section", "number": "3", "title": "Disclosure of Personal Information to Third Parties", "chapters": [ { "id": "chapter-5", "type": "chapter", "number": "5", "title": "Principles of Personal Information Disclosure to Third Parties", "content": { "type": "text", "value": "The Company processes users' personal information only within the scope specified in this Privacy Policy and does not process it beyond the original scope or disclose it to third parties without users' prior consent. However, personal information may be processed in the following cases." } }, { "id": "chapter-6", "type": "chapter", "number": "6", "title": "Cases Where Third-Party Disclosure is Possible", "content": { "type": "list", "items": [ { "text": "1. When the user has given prior consent to third-party disclosure" }, { "text": "2. When required by law" }, { "text": "3. When necessary for statistical compilation or academic research purposes, and the personal information is provided in a form that cannot identify specific individuals" }, { "text": "4. Other cases specified by law" } ] } }, { "id": "chapter-7", "type": "chapter", "number": "7", "title": "Outsourcing of Personal Information Processing", "content": { "type": "list", "items": [ { "text": "The Company outsources personal information processing tasks as follows for smooth service provision:", "subItems": [ { "text": "1. Payment service providers: Payment processing" }, { "text": "2. Hosting service providers: Server operation and management" }, { "text": "3. Customer support companies: Customer inquiry handling and service guidance" }, { "text": "4. Social media platforms (TikTok, YouTube, Facebook, Instagram): Content publication, analytics retrieval, and account management functions" } ] } ] } } ] }, { "id": "section-4", "type": "section", "number": "4", "title": "Retention and Disposal of Personal Information", "chapters": [ { "id": "chapter-8", "type": "chapter", "number": "8", "title": "Retention and Disposal Period of Personal Information", "content": { "type": "list", "items": [ { "text": "The Company retains and uses personal information for the following periods:", "subItems": [ { "text": "1. Membership information: Until withdrawal of membership (immediately deleted upon request for membership withdrawal)" }, { "text": "2. Information required by relevant laws: For periods specified by relevant laws" } ] } ] } }, { "id": "chapter-9", "type": "chapter", "number": "9", "title": "Procedure and Method for Disposal of Personal Information", "content": { "type": "text", "value": "In principle, the Company immediately destroys personal information after the purpose of collection and use has been fulfilled. The disposal process and method are as follows." } }, { "id": "chapter-10", "type": "chapter", "number": "10", "title": "Disposal Process and Method", "content": { "type": "list", "items": [ { "text": "1. Disposal Process: Personal information that has fulfilled its retention period is transferred to a separate database (or separate document box for paper documents) and destroyed after a certain period according to internal policies and other relevant laws." }, { "text": "2. Disposal Method: Personal information stored in electronic files is deleted using technical methods that prevent recovery. Personal information printed on paper is shredded or incinerated." } ] } } ] }, { "id": "section-5", "type": "section", "number": "5", "title": "Rights of Data Subjects and How to Exercise Them", "chapters": [ { "id": "chapter-11", "type": "chapter", "number": "11", "title": "Rights of Users", "content": { "type": "text", "value": "Users can exercise the following rights regarding their personal information at any time." } }, { "id": "chapter-12", "type": "chapter", "number": "12", "title": "Types of Rights and How to Exercise Them", "content": { "type": "list", "items": [ { "text": "1. Right to access personal information" }, { "text": "2. Right to rectify errors in personal information" }, { "text": "3. Right to deletion of personal information" }, { "text": "4. Right to suspension of processing of personal information" }, { "text": "Users can exercise these rights by contacting the personal information protection officer by email at support@ingrey.me" } ] } }, { "id": "chapter-13", "type": "chapter", "number": "13", "title": "Procedure for Requesting Personal Information Access", "content": { "type": "list", "items": [ { "text": "1. Users can request access to their personal information through the service's 'Profile Settings > Personal Information' section." }, { "text": "2. The Company will process requests promptly in accordance with relevant laws." }, { "text": "3. To request deletion of account information, users must email support@ingrey.me with the subject 'Account Deletion Request' and include their username and email address." } ] } } ] }, { "id": "section-6", "type": "section", "number": "6", "title": "Technical and Administrative Protection Measures", "chapters": [ { "id": "chapter-14", "type": "chapter", "number": "14", "title": "Technical Measures", "content": { "type": "list", "items": [ { "text": "1. Encryption of personal information: Users' personal information such as passwords are encrypted and stored using one-way encryption." }, { "text": "2. Countermeasures against hacking: The Company uses security programs to prevent leakage or damage of personal information due to hacking or computer viruses." }, { "text": "3. Access control: The Company minimizes the handling of users' personal information by limiting access rights to personal information and manages them through access control." } ] } }, { "id": "chapter-15", "type": "chapter", "number": "15", "title": "Administrative Measures", "content": { "type": "list", "items": [ { "text": "1. Regular employee training on personal information protection" }, { "text": "2. Formulation and implementation of internal management plans for personal information protection" }, { "text": "3. Regular inspection of personal information handling status" } ] } } ] }, { "id": "section-7", "type": "section", "number": "7", "title": "Privacy Policy Manager and Contact Information", "chapters": [ { "id": "chapter-16", "type": "chapter", "number": "16", "title": "Privacy Policy Manager", "content": { "type": "text", "value": "The Company has appointed the following department and officer to protect users' personal information and handle complaints related to personal information." } }, { "id": "chapter-17", "type": "chapter", "number": "17", "title": "Contact Information", "content": { "type": "list", "items": [ { "text": "1. Personal Information Protection Officer: Privacy Team", "subItems": [ { "text": "Name: Privacy Protection Team" }, { "text": "Email: support@ingrey.me" } ] } ] } } ] }, { "id": "section-8", "type": "section", "number": "8", "title": "Privacy Policy Changes", "chapters": [ { "id": "chapter-18", "type": "chapter", "number": "18", "title": "Policy Updates", "content": { "type": "text", "value": "This Privacy Policy may be changed in accordance with the Company's policies or changes in related laws. If there are additions, deletions, or modifications to the Privacy Policy, the Company will notify users of the changes at least 7 days before the changes take effect through announcements on the service." } }, { "id": "chapter-19", "type": "chapter", "number": "19", "title": "Effective Date", "content": { "type": "text", "value": "This Privacy Policy is effective from February 1, 2025." } } ] }, { "id": "section-9", "type": "section", "number": "9", "title": "Social Media Platform Integrations", "chapters": [ { "id": "social-tiktok", "type": "chapter", "number": "21", "title": "TikTok Integration", "content": { "type": "list", "items": [ { "text": "When you connect your TikTok account to our Service:", "subItems": [ { "text": "We request access to your public profile information, content, and engagement metrics." }, { "text": "We may collect and process your TikTok account information, content (including videos, comments, and captions), analytics data, and follower information." }, { "text": "Your use of TikTok features through our Service is subject to TikTok's Terms of Service and Privacy Policy." }, { "text": "You can revoke access anytime by disconnecting your TikTok account in the Service settings or through TikTok's security settings." }, { "link": { "text": "TikTok Privacy Policy", "href": "https://www.tiktok.com/legal/privacy-policy" } } ] } ] } }, { "id": "social-youtube", "type": "chapter", "title": "YouTube API Services", "number": "22", "content": { "type": "list", "items": [ { "text": "Our Service uses YouTube API Services. By using YouTube-related functions in our Service:", "subItems": [ { "text": "We access your YouTube account information, channel data, videos, analytics, and comments as authorized by you." }, { "text": "Your information is processed according to our Privacy Policy and Google's Privacy Policy." }, { "text": "You can revoke access to your YouTube account at any time by visiting Google Security Settings." }, { "link": { "text": "YouTube Privacy Policy", "href": "https://policies.google.com/privacy" } } ] } ] } }, { "id": "social-facebook", "type": "chapter", "title": "Facebook Integration", "number": "23", "content": { "type": "list", "items": [ { "text": "When connecting Facebook accounts to our Service:", "subItems": [ { "text": "We access profile information, pages you manage, posts, engagement metrics, and advertising data as authorized." }, { "text": "We collect and process your Facebook pages data, posts, analytics, audience information, and ad performance." }, { "text": "Your Facebook data usage through our Service is subject to Facebook's Data Policy." }, { "text": "You can disconnect your Facebook account at any time through our Service or Facebook's App settings." }, { "link": { "text": "Facebook Privacy Policy", "href": "https://www.facebook.com/privacy/policy/" } } ] } ] } }, { "id": "social-instagram", "type": "chapter", "title": "Instagram Integration", "number": "24", "content": { "type": "list", "items": [ { "text": "When connecting Instagram accounts to our Service:", "subItems": [ { "text": "We access your profile data, media, comments, and analytics as authorized by you." }, { "text": "We collect and process your posts, stories, audience demographics, and engagement metrics." }, { "text": "Your Instagram data usage is governed by Instagram's Data Policy." }, { "text": "You can revoke access at any time through our Service settings or Instagram's Authorized Apps section." }, { "link": { "text": "Instagram Privacy Policy", "href": "https://www.facebook.com/privacy/policy/" } } ] } ] } } ] } ] } }
```

# priv/privacy_policy/v2.json

```json
{ "metadata": { "version": "3.0.0", "schemaVersion": "2024.2", "releaseDate": "2025-01-26", "effectiveDate": "2025-02-01", "language": "ko", "revisionHistory": [ { "version": "3.0.0", "date": "2025-01-26", "changes": "소셜 미디어 플랫폼 통합 및 개인정보 보호 설명 강화" }, { "version": "2.0.0", "date": "2025-01-20", "changes": "콘텐츠 재구성 및 개인정보 보호 설명 강화" }, { "version": "1.0.0", "date": "2025-01-13", "changes": "최초 출시" } ], "availableLanguages": [ "en", "ko" ], "accessibility": { "role": "document", "lang": "ko-KR", "ariaLabel": "개인정보 처리방침", "structure": { "landmarks": true, "headings": true } }, "formatting": { "supported": [ "text", "list", "link", "heading" ], "schema": "https://schema.org/PrivacyPolicy" } }, "document": { "index": { "type": "navigation", "title": "목차", "subtitle": "주요 섹션", "items": [ { "id": "section-1", "title": "개인정보 수집 및 이용", "ref": "#section-1" }, { "id": "section-2", "title": "개인정보의 처리 목적", "ref": "#section-2" }, { "id": "section-3", "title": "개인정보의 제3자 제공", "ref": "#section-3" }, { "id": "section-4", "title": "개인정보의 보유 및 파기", "ref": "#section-4" }, { "id": "section-5", "title": "정보주체의 권리 및 행사 방법", "ref": "#section-5" }, { "id": "section-6", "title": "기술적·관리적 보호조치", "ref": "#section-6" }, { "id": "section-7", "title": "개인정보 보호책임자 및 연락처", "ref": "#section-7" }, { "id": "section-8", "title": "개인정보 처리방침 변경", "ref": "#section-8" }, { "id": "section-social-media", "title": "소셜 미디어 플랫폼 통합", "ref": "#section-social-media" } ] }, "introduction": { "type": "section", "content": [ { "type": "text", "value": "ingrey(이하 '회사')는 이용자의 개인정보를 중요시하며, 「개인정보 보호법」, 「정보통신망 이용촉진 및 정보보호 등에 관한 법률」 등 관련 법령을 준수하기 위하여 노력하고 있습니다." }, { "type": "text", "value": "회사는 개인정보처리방침을 통하여 회사가 이용자로부터 수집하는 개인정보의 항목, 개인정보의 수집 및 이용목적, 개인정보의 보유 및 파기, 제3자 제공 등에 관한 사항을 이용자에게 안내하고 있습니다." } ] }, "definitions": { "type": "section", "title": "정의 및 범위", "content": [ { "type": "chapter", "title": "정의", "content": { "type": "list", "items": [ { "text": "서비스: 회사가 제공하는 ingrey 애플리케이션, 웹사이트 및 관련 서비스." }, { "text": "이용자: 서비스에 접근하거나 이용하는 모든 개인." }, { "text": "개인정보: 식별된 또는 식별 가능한 자연인에 관한 모든 정보." }, { "text": "소셜 미디어 플랫폼: TikTok, YouTube, Facebook, Instagram 등을 포함한 제3자 서비스." }, { "text": "콘텐츠: 텍스트, 이미지, 동영상, 오디오를 포함하여 서비스를 통해 업로드, 공유 또는 생성된 모든 자료." } ] } }, { "type": "chapter", "title": "범위", "content": { "type": "text", "value": "본 개인정보 처리방침은 서비스 접근 방식(웹사이트, 모바일 애플리케이션, API 등)에 관계없이 모든 서비스 이용자에게 적용됩니다. 본 방침은 회사의 개인정보 수집, 이용 및 공유와 연결된 소셜 미디어 플랫폼과의 관계를 다룹니다." } } ] }, "sections": [ { "id": "section-1", "type": "section", "number": "1", "title": "개인정보 수집 및 이용", "chapters": [ { "id": "chapter-1", "type": "chapter", "number": "1", "title": "수집하는 개인정보 항목", "content": { "type": "list", "items": [ { "text": "회사는 회원가입, 서비스 이용, 고객상담 등을 위해 다음과 같은 개인정보를 수집하고 있습니다.", "subItems": [ { "text": "1. 필수항목: 성명, 아이디(ID), 비밀번호, 이메일 주소, 생년월일" }, { "text": "2. 선택항목: 닉네임(별명), 프로필 이미지, 직업, 관심분야" }, { "text": "3. 서비스 이용 과정에서 자동으로 생성되어 수집되는 정보: IP 주소, 쿠키, 방문 일시, 서비스 이용 기록, 불량 이용 기록" } ] } ] } }, { "id": "chapter-2", "type": "chapter", "number": "2", "title": "개인정보 수집방법", "content": { "type": "list", "items": [ { "text": "회사는 다음과 같은 방법으로 개인정보를 수집합니다.", "subItems": [ { "text": "1. 홈페이지, 모바일 애플리케이션을 통한 회원가입 및 서비스 이용 과정에서 이용자 동의를 받아 수집" }, { "text": "2. 데이터 수집 도구를 통한 자동 수집" } ] } ] } } ] }, { "id": "section-2", "type": "section", "number": "2", "title": "개인정보의 처리 목적", "chapters": [ { "id": "chapter-3", "type": "chapter", "number": "3", "title": "수집한 개인정보의 이용", "content": { "type": "text", "value": "회사는 수집한 개인정보를 다음의 목적을 위해 활용합니다. 이용자가 제공한 모든 정보는 아래 목적 이외의 용도로는 사용되지 않으며, 이용 목적이 변경될 경우에는 사전 동의를 구할 것입니다." } }, { "id": "chapter-4", "type": "chapter", "number": "4", "title": "이용 목적", "content": { "type": "list", "items": [ { "text": "1. 회원 관리", "subItems": [ { "text": "회원가입 의사 확인, 회원제 서비스 제공, 회원자격 유지 및 관리, 서비스 부정이용 방지, 각종 고지 및 통지" } ] }, { "text": "2. 서비스 제공", "subItems": [ { "text": "소셜 미디어 관리 도구 서비스 제공, 콘텐츠 제공, 맞춤 서비스 제공" } ] }, { "text": "3. 마케팅 및 광고", "subItems": [ { "text": "신규 서비스 개발 및 맞춤 서비스 제공, 이벤트 및 광고성 정보 제공 및 참여 기회 제공, 서비스의 유효성 확인, 접속 빈도 분석, 회원의 서비스 이용에 대한 통계" } ] } ] } } ] }, { "id": "section-3", "type": "section", "number": "3", "title": "개인정보의 제3자 제공", "chapters": [ { "id": "chapter-5", "type": "chapter", "number": "5", "title": "개인정보 제3자 제공의 원칙", "content": { "type": "text", "value": "회사는 이용자의 개인정보를 본 개인정보처리방침에서 명시한 범위 내에서만 처리하며, 이용자의 사전 동의 없이는 본래의 범위를 초과하여 처리하거나 제3자에게 제공하지 않습니다. 단, 다음의 경우에는 개인정보를 처리할 수 있습니다." } }, { "id": "chapter-6", "type": "chapter", "number": "6", "title": "제3자 제공이 가능한 경우", "content": { "type": "list", "items": [ { "text": "1. 이용자가 사전에 제3자 제공에 동의한 경우" }, { "text": "2. 법률에 특별한 규정이 있는 경우" }, { "text": "3. 통계작성 및 학술연구 등의 목적을 위하여 필요한 경우로서 특정 개인을 알아볼 수 없는 형태로 개인정보를 제공하는 경우" }, { "text": "4. 법령에서 정하는 기타 사유에 해당하는 경우" } ] } }, { "id": "chapter-7", "type": "chapter", "number": "7", "title": "개인정보 처리 위탁", "content": { "type": "list", "items": [ { "text": "회사는 원활한 서비스 제공을 위해 다음과 같이 개인정보 처리 업무를 위탁하고 있습니다:", "subItems": [ { "text": "1. 결제 서비스 제공업체: 결제 처리" }, { "text": "2. 호스팅 서비스 제공업체: 서버 운영 및 관리" }, { "text": "3. 고객지원 업체: 고객 문의 처리 및 서비스 안내" }, { "text": "4. 소셜 미디어 플랫폼(TikTok, YouTube, Facebook, Instagram): 콘텐츠 게시, 분석 정보 조회 및 계정 관리 기능" } ] } ] } } ] }, { "id": "section-4", "type": "section", "number": "4", "title": "개인정보의 보유 및 파기", "chapters": [ { "id": "chapter-8", "type": "chapter", "number": "8", "title": "개인정보의 보유 및 파기 기간", "content": { "type": "list", "items": [ { "text": "회사는 개인정보를 다음과 같은 기간 동안 보유 및 이용합니다:", "subItems": [ { "text": "1. 회원 정보: 회원 탈퇴 시까지(회원 탈퇴 요청 시 즉시 삭제)" }, { "text": "2. 관련 법령에 따라 보존이 필요한 정보: 관련 법령이 정한 기간" } ] } ] } }, { "id": "chapter-9", "type": "chapter", "number": "9", "title": "개인정보의 파기 절차 및 방법", "content": { "type": "text", "value": "회사는 원칙적으로 개인정보 수집 및 이용목적이 달성된 후에는 해당 정보를 지체 없이 파기합니다. 파기 절차 및 방법은 다음과 같습니다." } }, { "id": "chapter-10", "type": "chapter", "number": "10", "title": "파기 절차 및 방법", "content": { "type": "list", "items": [ { "text": "1. 파기 절차: 보유기간이 만료된 개인정보는 별도의 데이터베이스(종이의 경우 별도의 문서함)로 옮겨져 내부 방침 및 기타 관련 법령에 따라 일정 기간 저장된 후 파기됩니다." }, { "text": "2. 파기 방법: 전자적 파일 형태로 저장된 개인정보는 복구할 수 없는 기술적 방법을 사용하여 삭제합니다. 종이에 출력된 개인정보는 분쇄기로 분쇄하거나 소각합니다." } ] } } ] }, { "id": "section-5", "type": "section", "number": "5", "title": "정보주체의 권리 및 행사 방법", "chapters": [ { "id": "chapter-11", "type": "chapter", "number": "11", "title": "이용자의 권리", "content": { "type": "text", "value": "이용자는 개인정보에 대해 언제든지 다음과 같은 권리를 행사할 수 있습니다." } }, { "id": "chapter-12", "type": "chapter", "number": "12", "title": "권리의 종류 및 행사 방법", "content": { "type": "list", "items": [ { "text": "1. 개인정보 열람 요구" }, { "text": "2. 개인정보 오류 정정 요구" }, { "text": "3. 개인정보 삭제 요구" }, { "text": "4. 개인정보 처리정지 요구" }, { "text": "이용자는 이러한 권리를 행사하기 위하여 개인정보 보호책임자에게 이메일(support@ingrey.me)로 연락하시면 됩니다." } ] } }, { "id": "chapter-13", "type": "chapter", "number": "13", "title": "개인정보 열람 요청 절차", "content": { "type": "list", "items": [ { "text": "1. 이용자는 서비스의 '프로필 설정 > 개인정보' 메뉴를 통해 개인정보 열람을 요청할 수 있습니다." }, { "text": "2. 회사는 관련 법령에 따라 요청을 신속하게 처리합니다." }, { "text": "3. 계정 정보 삭제를 요청하려면 이용자는 'Account Deletion Request'라는 제목으로 사용자 이름과 이메일 주소를 포함하여 support@ingrey.me로 이메일을 보내야 합니다." } ] } } ] }, { "id": "section-6", "type": "section", "number": "6", "title": "기술적·관리적 보호조치", "chapters": [ { "id": "chapter-14", "type": "chapter", "number": "14", "title": "기술적 조치", "content": { "type": "list", "items": [ { "text": "1. 개인정보의 암호화: 이용자의 비밀번호 등 개인정보는 일방향 암호화되어 저장 및 관리됩니다." }, { "text": "2. 해킹 등에 대비한 대책: 회사는 해킹이나 컴퓨터 바이러스 등에 의한 개인정보 유출 및 훼손을 방지하기 위하여 보안프로그램을 설치하고 있습니다." }, { "text": "3. 접근 제한: 회사는 개인정보 취급자를 최소화하여 이용자의 개인정보 접근 권한을 제한하고 있으며, 접근 통제를 시행하고 있습니다." } ] } }, { "id": "chapter-15", "type": "chapter", "number": "15", "title": "관리적 조치", "content": { "type": "list", "items": [ { "text": "1. 개인정보 보호에 관한 정기적인 교육: 회사는 개인정보를 취급하는 직원들에게 개인정보 보호에 관한 정기적인 교육을 실시하고 있습니다." }, { "text": "2. 내부관리계획의 수립 및 시행: 회사는 개인정보의 안전한 처리를 위하여 내부관리계획을 수립하고 시행하고 있습니다." }, { "text": "3. 정기적인 점검: 회사는 이용자의 개인정보 보호를 위해 정기적인 자체 감사를 실시하고 있습니다." } ] } } ] }, { "id": "section-7", "type": "section", "number": "7", "title": "개인정보 보호책임자 및 연락처", "chapters": [ { "id": "chapter-16", "type": "chapter", "number": "16", "title": "개인정보 보호책임자", "content": { "type": "text", "value": "회사는 개인정보 처리에 관한 업무를 총괄해서 책임지고, 개인정보 처리와 관련한 이용자의 불만처리 및 피해구제 등을 위하여 아래와 같이 개인정보 보호책임자를 지정하고 있습니다." } }, { "id": "chapter-17", "type": "chapter", "number": "17", "title": "개인정보 보호책임자 정보", "content": { "type": "list", "items": [ { "text": "성명: [보호책임자명]" }, { "text": "직책: 개인정보 보호책임자" }, { "text": "이메일: support@ingrey.me" } ] } }, { "id": "chapter-18", "type": "chapter", "number": "18", "title": "개인정보 침해 신고 및 상담", "content": { "type": "text", "value": "이용자는 개인정보침해로 인한 신고 및 상담이 필요하신 경우 회사 개인정보 보호책임자에게 문의하시거나, 한국인터넷진흥원(KISA) 개인정보침해신고센터 등으로 문의하실 수 있습니다." } } ] }, { "id": "section-8", "type": "section", "number": "8", "title": "개인정보 처리방침 변경", "chapters": [ { "id": "chapter-19", "type": "chapter", "number": "19", "title": "처리방침의 변경 절차", "content": { "type": "text", "value": "이 개인정보 처리방침은 법령 및 방침에 따라 변경될 수 있으며, 변경 시 회사는 변경 이유와 내용을 알기 쉽게 공지사항을 통하여 고지할 것입니다." } }, { "id": "chapter-20", "type": "chapter", "number": "20", "title": "개인정보 처리방침 시행일", "content": { "type": "text", "value": "본 개인정보 처리방침은 2025년 2월 1일부터 적용됩니다." } } ] }, { "id": "section-9", "type": "section", "number": "9", "title": "소셜 미디어 플랫폼 통합", "chapters": [ { "id": "social-tiktok", "type": "chapter", "title": "TikTok", "number": "21", "content": { "type": "list", "items": [ { "text": "TikTok 계정을 당사 서비스에 연결할 때:", "subItems": [ { "text": "당사는 귀하의 공개 프로필 정보, 콘텐츠 및 참여 지표에 대한 접근을 요청합니다." }, { "text": "당사는 귀하의 TikTok 계정 정보, 콘텐츠(동영상, 댓글, 캡션 포함), 분석 데이터 및 팔로워 정보를 수집하고 처리할 수 있습니다." }, { "text": "당사 서비스를 통한 TikTok 기능 사용은 TikTok의 서비스 약관 및 개인정보 처리방침의 적용을 받습니다." }, { "text": "서비스 설정에서 TikTok 계정 연결을 해제하거나 TikTok의 보안 설정을 통해 언제든지 접근 권한을 취소할 수 있습니다." }, { "text": "TikTok의 개인정보 처리방침은 다음에서 확인할 수 있습니다: ", "link": { "text": "TikTok 개인정보처리방침", "href": "https://www.tiktok.com/legal/privacy-policy-kr" } } ] } ] } }, { "id": "social-youtube", "type": "chapter", "title": "YouTube", "number": "22", "content": { "type": "list", "items": [ { "text": "당사 서비스는 YouTube API 서비스를 사용합니다. 당사 서비스에서 YouTube 관련 기능을 사용함으로써:", "subItems": [ { "text": "당사는 귀하가 승인한 대로 YouTube 계정 정보, 채널 데이터, 동영상, 분석 및 댓글에 접근합니다." }, { "text": "귀하의 정보는 당사의 개인정보 처리방침 및 Google의 개인정보 처리방침에 따라 처리됩니다." }, { "text": "Google 보안 설정을 방문하여 언제든지 YouTube 계정에 대한 접근을 취소할 수 있습니다." }, { "text": "YouTube는 Google의 제품이며, YouTube 데이터 처리에 관한 자세한 내용은 다음에서 확인할 수 있습니다: ", "link": { "text": "Google 개인정보처리방침", "href": "https://policies.google.com/privacy" } } ] } ] } }, { "id": "social-facebook", "type": "chapter", "title": "Facebook", "number": "23", "content": { "type": "list", "items": [ { "text": "Facebook 계정을 당사 서비스에 연결할 때:", "subItems": [ { "text": "당사는 승인된 대로 프로필 정보, 관리하는 페이지, 게시물, 참여 지표 및 광고 데이터에 접근합니다." }, { "text": "당사는 Facebook 페이지 데이터, 게시물, 분석, 사용자 정보 및 광고 성과를 수집하고 처리합니다." }, { "text": "당사 서비스를 통한 Facebook 데이터 사용은 Facebook의 데이터 정책의 적용을 받습니다." }, { "text": "당사 서비스 또는 Facebook의 앱 설정을 통해 언제든지 Facebook 계정 연결을 해제할 수 있습니다." }, { "text": "Facebook의 개인정보 처리방침은 다음에서 확인할 수 있습니다: ", "link": { "text": "Meta 개인정보처리방침", "href": "https://www.facebook.com/privacy/policy/" } } ] } ] } }, { "id": "social-instagram", "type": "chapter", "title": "Instagram", "number": "24", "content": { "type": "list", "items": [ { "text": "Instagram 계정을 당사 서비스에 연결할 때:", "subItems": [ { "text": "당사는 승인된 대로 Instagram 프로필 정보, 미디어(사진, 동영상), 참여 지표 및 분석 데이터에 접근합니다." }, { "text": "당사는 Instagram 콘텐츠, 댓글, 분석 데이터 및 참여 정보를 수집하고 처리합니다." }, { "text": "당사 서비스를 통한 Instagram 데이터 사용은 Instagram의 데이터 정책의 적용을 받습니다." }, { "text": "당사 서비스 또는 Instagram의 앱 설정을 통해 언제든지 Instagram 계정 연결을 해제할 수 있습니다." }, { "text": "Instagram은 Meta의 제품이며, Instagram의 개인정보 처리방침은 다음에서 확인할 수 있습니다: ", "link": { "text": "Meta 개인정보처리방침", "href": "https://www.facebook.com/privacy/policy/" } } ] } ] } } ] } ] } }
```

# priv/repo/migrations/20241226072000_create_users_auth_tables.exs

```exs
defmodule Myapp.Repo.Migrations.CreateUsersAuthTables do use Ecto.Migration def change do execute "CREATE EXTENSION IF NOT EXISTS citext", "" create table(:users) do add :email, :citext, null: false add :hashed_password, :string, null: false add :confirmed_at, :utc_datetime timestamps(type: :utc_datetime) end create unique_index(:users, [:email]) create table(:users_tokens) do add :user_id, references(:users, on_delete: :delete_all), null: false add :token, :binary, null: false add :context, :string, null: false add :sent_to, :string timestamps(type: :utc_datetime, updated_at: false) end create index(:users_tokens, [:user_id]) create unique_index(:users_tokens, [:context, :token]) end end
```

# priv/repo/seeds.exs

```exs
# Script for populating the database. You can run it as: # # mix run priv/repo/seeds.exs # # Inside the script, you can read and write to any of your # repositories directly: # # Myapp.Repo.insert!(%Myapp.SomeSchema{}) # # We recommend using the bang functions (`insert!`, `update!` # and so on) as they will fail if something goes wrong.
```

# priv/terms_of_services/Paid Terms of Services.md

```md
### 1. 총칙 제1조 (목적) 이 약관은 0000(이하 “회사”라 합니다)에서 제공하는 사용자가 소셜 플랫폼에 게시물을 예약하여 업로드하고, 콘텐츠 분석 및 디자 인 도구를 제공하여 소셜 미디어 콘텐츠를 강화할 수 있도록 돕는 소셜 미디어 관리 도구(웹, 모바일 웹•앱 서비스를 포함합니다.)인 00서비스(이하 ‘서비스'라 합니다) 및 관련 제반 서비스의 유료서비스를 이용함에 있어 회원과 회사간의 권리, 의무 및 책임사항, 서비스 이용조건 및 절차 등 기본적인 사항을 규정함을 목적으로 합니다. 제2조 (용어의 정의) 1. 이 약관에서 사용되는 용어의 정의는 다음과 같습니다. 1. ‘회원가입’이라 함은 00 서비스 또는 유료서비스를 이용하고자 하는 자(‘고객’이라고도 합니다)가 00 이용약관에 동의하고 회사와 그 이용계약을 체결하는 것을 의미합니다. 회원가입을 하는 경우 고객은 서비스 회원이 됩니다. 2. ‘회원탈퇴’라 함은 회원이 00 이용약관 또는 00유료서비스약관의 체결로 발생한 제반 권리와 의무 등의 법률관계를 자의로 영구히 종료하거나, 포기하는 것을 의미합니다. 3. ‘유료서비스’라 함은 회원이 회사에 일정 금액을 지불해야만 이용할 수 있는 회사의 서비스 또는 이용권(상품)을 의미하거나, 회사 또는 제3자와의 거래 내지 약정 조건을 수락하는 대가로 이용하게 되는 회사의 서비스 또는 이용권(상품)을 의미합니다. 유료서비스의 세부내용은 각각의 서비스 또는 이용권(상품) 구매 페이지 및 해당 서비스 또는 이용권(상품)의 결제 페이지에 상세히 설명되어 있습니다. 4. ‘유료회원’이라 함은 별도의 금액을 지불하여 유료서비스를 구매한 회원 및 회사 또는 제3자가 정하는 이벤트, 마케팅에 참여하는 등의 방법으로 회사의 유료서비스를 이용하는 회원을 말합니다. 5. ‘무료회원’이라 함은 유료회원이 아닌 회원으로 회원가입 이후에 기본적으로 모든 회원에게 부여되는 자격을 가진 회원을 의미합니다. 6. ‘결제’라 함은 회원이 특정 유료서비스를 이용하기 위하여 각종 지불수단을 통하여 회사가 정한 일정 금액을 회사에 지불하는 것을 의미합니다. 2. 이 약관에서 사용하는 용어의 정의는 제1항에서 정하는 것을 제외하고는 관계 법령 및 서비스별 안내에서 정하는 바에 의합니다. 제3조 (약관의 효력/변경 등) 1. 이 약관은 유료서비스를 이용하기를 희망하는 회원이 동의함으로써 효력이 발생하며, 회원이 이 약관에 대하여 “동의하기” 버튼을 클릭한 경우, 이 약관의 내용을 충분히 이해하고 그 적용에 동의한 것으로 봅니다. 2. 회사는 관련 법령을 위배하지 않는 범위에서 이 약관을 개정할 수 있습니다. 회사가 약관을 개정하는 경우에는 적용일자 및 변경사유를 명시하여 그 적용일자 15일 전부터 홈페이지에 공지합니다. 다만, 회원에게 불리한 약관의 변경의 경우에는 그 개정 내용을 고객이 알기 쉽게 표시하여 그 적용일자 30일 전부터 공지하며, 이메일 주소, 문자메시지 등으로 회원에게 개별 통지합니다. 회원의 연락처 미기재, 변경 등으로 인하여 개별 통지가 어려운 경우, 회원이 등록한 연락처로 공지를 하였음에도 2회 이상 반송된 경우 이 약관에 의한 공지를 함으로써 개별 통지한 것으로 간주합니다. 3. 회사가 제3항의 공지 또는 통보를 하면서 개정 약관의 적용/시행일까지 회원이 거부 의사를 표시하지 아니할 경우 약관의 개정에 동의한 것으로 간주한다는 내용을 고지하였으나, 회원이 명시적으로 약관 변경에 대한 거부의사를 표시하지 아니하면, 회사는 회원이 적용/시행일자 부로 변경 약관에 동의한 것으로 간주합니다. 개정/변경 약관에 대하여 거부의사를 표시한 회원은 계약의 해지 또는 회원 탈퇴를 선택할 수 있습니다. 4. 회사는 이 약관을 회원이 그 전부를 인쇄할 수 있고 확인할 수 있도록 필요한 기술적 조치를 취합니다. 5. 이 약관은 회원이 이 약관에 동의한 날로부터 회원 탈퇴 시까지 적용하는 것을 원칙으로 합니다. 단, 이 약관의 일부 조항은 회원이 탈퇴 후에도 유효하게 적용될 수 있습니다. 6. 이 유료서비스약관의 제반 규정은, 멜론 이용약관의 관련 규정에 우선 적용되며, 이용약관과 이 약관의 정의, 내용 등이 서로 상충되는 경우 이 약관의 관련 규정을 적용합니다. 이 약관에 명시되지 아니한 사항에 대하여는 콘텐츠산업진흥법, 전자상거래 등에서의 소비자 보호에 관한 법률, 약관의 규제에 관한 법률 등 관련 법령에 따릅니다. ### 2. 유료서비스 이용 계약 제4조 (유료서비스 이용계약의 성립 및 승낙의 제한) 1. 유료서비스에 대한 이용계약은 이 약관에 동의한다는 의사표시(동의함을 선택)와 함께 이용 신청을 하고 회사가 이를 승낙함으로써 비로소 성립합니다. 2. 회원은 유료서비스 이용계약을 체결하기 전에 해당 유료서비스에 대하여 이 약관에서 회사가 명시, 고지하는 사항을 숙지하고, 착오 없이 정확히 거래할 수 있도록 하여야 합니다. 3. 회사와 회원간 유료서비스 이용계약은 회사의 승낙이 회원에게 도달한 시점(유료서비스의 “구매/결제완료 등”의 표시가 회원에게 절차상 표시된 시점)에 성립합니다. 4. 회사는 00 이용약관 제8조(이용신청에 대한 승낙의 제한)에서 정하는 사유가 발생하는 경우, 이용신청을 승낙하지 아니하거나 소정의 조건 성취 또는 제한 사유가 해소될 때까지 일정 기간 동안 승낙을 유보할 수 있습니다. 5. 회원은 유료서비스 이용 신청을 위한 제반 사항을 기재할 경우 회원의 현재의 사실과 일치하는 정보를 기재하여야 하며, 회원이 이용하고자 하는 유료서비스의 결제방법의 선택 및 선택한 결제방법에 필요한 결제정보를 정확히 회사에 제공하여야 하며, 해당 사항이 변경될 경우 지체 없이 회사가 정한 절차에 따라 변경사항을 고지, 반영하여야 합니다. 6. 회사는 00 이용약관 <mark style="background: #BBFABBA6;">제6조(이용신청)</mark>의 기재사항 이외에 회원의 서비스 이용에 필요한 최소한의 정보를 수집할 수 있습니다. 이를 위해 회사가 문의한 사항에 대해 회원은 성실하게 고지합니다. 회사는 이 경우 수집하는 회원의 정보를 00 이용약관, 개인정보취급방침 및 정보통신망의 이용촉진 및 정보보호 등에 관한 법률이 정한 바에 따라 이용, 관리합니다. 제5조 (결제수단 등) 1. 회원이 유료서비스의 결제를 위하여 이용할 수 있는 지불수단은 다음 각 호와 같습니다. 1. 제휴된 신용카드 2. 기타 회사가 제3자와 제휴계약 등을 체결하여 회원에게 결제 가능 여부 및 그 방법을 안내하게 되는 결제 수단에 의한 대금 지급 2. 결제를 통해 회원은 아래와 같은 행위를 할 수 있습니다. 1. 유료서비스의 가입 및 구입 2. 선물하기 이용 3. 회사는 유료서비스를 이용하는 회원의 거래금액에 대하여 내부정책 및 외부 결제업체(은행사, 카드사 등), 기타 관련 법령의 변경에 따라 회원 당 월 누적 결제액, 결제한도 등의 거래한도를 정할 수 있으며, 회원은 회사가 정한 거래한도를 초과하는 범위의 유료서비스를 이용하고자 할 경우 거래한도의 초과로 인하여 유료서비스의 추가 이용이 불가능할 수 있습니다. 3. 제3항의 사정이 발생하게 될 경우, 회사는 회원이 결제시 해당 결제창에서 결제 가능 여부를 확인할 수 있도록 회원에게 안내합니다. ### 3. 유료서비스 이용 제6조 (유료서비스와 유료회원) 1. 회사가 회원의 이용신청을 승낙한 때(신규 및 일부 서비스의 경우, 이용 신청 접수 후 사전 공지한 지정된 일자)로부터 유료서비스는 개시되며, 회사의 기술적 사유 등 기타 사정에 의하여 서비스를 개시할 수 없는 경우에는 제3조(약관의 효력/변경 등)의 방법에 따라 회원에게 사전 공지합니다. 2. 회사는 회원의 이용신청이 있게 되는 경우, 그 사실을 통지하며, 회사의 통지를 받은 회원은 의사표시의 불일치 등이 있는 경우 불일치 사실을 정정 또는 수정을 요청하여야 하며, 회사는 회원의 요청에 따라 처리하여야 합니다. 다만, 이미 대금을 지불한 경우에는 청약 철회 등에 관한 <mark style="background: #FFB8EBA6;">**제9조**</mark>(청약 철회 및 서비스 이용계약의 해제 • 해지)의 규정에 따릅니다. 3. 회사는 다음 각 호와 같은 유료서비스를 제공하며, 회사의 사정, 기타 제반 여건에 따라 서비스 내용을 추가하거나 변경할 수 있습니다<mark style="background: #FFB8EBA6;">. 각 유료서비스의 내용은 해당 유료서비스 구매페이지, 고객센터(FAQ) 등에서 회원에게 자세히 표시하고 있습니다.</mark> 1. 1.이용권/서비스의 내용/속성에 따른 분류 1. 2. 선물하기 : 회원의 비용 부담으로 서비스/이용권을 제3자에게 제공하는 서비스 2. 2.이용권/서비스의 이용기간/정기결제 여부에 따른 분류 1. 기간만료형 이용권 : 이용 가능 기간이 만료되는 경우, 유료서비스의 이용이 종료되는 서비스 2. 정기결제형 이용권 : 회원이 등록한 결제수단을 통하여 월 단위로 이용요금이 자동으로 결제되고 이용기간이 자동 갱신되는 서비스 4. 회사는 기타 콘텐츠나 부가서비스가 함께 제공되는 결합 서비스, 다른 회사와의 계약을 통한 제휴 서비스 등을 제공할 수 있습니다. 5. 회사는 서비스의 특정 기능을 제한하거나 수정, 중단할 권리를 보유합니다. 이러한 변경에 책임지지 않으며 유료서비스 비용은 환불되지 않습니다. 제7조 (B2B 거래) 1. B2B 거래란 특정 법인에게 00 유료서비스를 대량으로 판매하는 거래를 말합니다. 2. B2B 거래 시 거래량 및 해당 이용권의 용도에 따라 일정 수준의 할인율을 적용할 수 있습니다. ### 4. 유료서비스의 변경, 청약 철회, 해지, 정지 및 중단 제8조 (회원의 유료서비스 변경 예약, 즉시 변경 등) 1. 회원이 이미 구매/가입한 유료서비스는 원칙적으로 변경 처리가 되지 않고 해지 후 익월 다른 이용권으로 가입하도록 되어 있으나, 회사가 사전에 공지하고 정하는 일부 이용권에 한하여 회원이 변경 신청할 경우, 1개월 후 변경 예약(이하 ‘변경 예약’) 또는 즉시 변경 처리(이하 ‘즉시 변경’)를 할 수 있습니다. 2. 변경 예약의 경우, 회원이 변경 요청한 달의 이용기간이 만료되는 날까지 기존 구매/가입한 이용권을 이용할 수 있으며, 이용기간 만료일 익일부터 변경 요청한 이용권으로 변경 적용됩니다. 3. 즉시 변경의 경우, 회원이 즉시 변경 신청을 하면 회사가 접수 완료 후, 즉시 기존 구매/가입한 이용권의 이용이 중단되고, 신청한 이용권으로 변경 적용됩니다. 4. 모든 이용권의 ‘변경 예약’의 경우에는 이용권 변경 속성상 환불이 일체 이루어 지지 않습니다. 이용권의 ‘즉시’ 변경의 경우로서 다음과 같은 경우, 회원의 즉시 변경 신청 적용일 현재 변경 전 이용권에 잔여 금액이 있을 경우, 차액 만큼 회원에게 반환하거나, 추가 결제합니다. 5. 회사는 유료서비스 이용권에 대한 변경이 있게 될 경우, 이 약관 제3조(약관의 효력/변경 등)가 정하는 방법에 따라 그 사실 및 내용, 변경일자를 사전에 고지합니다. 제9조 (청약 철회 및 서비스 이용계약의 해제 • 해지) 1. 유료회원 해당 유료서비스 내지 이용권을 전혀 사용하지 아니하였을 경우에 한하여 결제일로부터 7일 이내에 회사에 결제 취소(청약 철회)를 요청할 수 있습니다. 단, 유료회원은 해당 유료서비스 내지 이용권의 내용이 표시•광고 내용과 다르거나 계약 내용과 다르게 이행된 경우에는 해당 콘텐츠를 공급받은 날로부터 3월 내지, 그 사실을 안 날 또는 알 수 있었던 날로부터 30일 이내에 청약철회 등을 할 수 있습니다. 2. 유료회원이 제1항의 청약 철회가 가능한 유료서비스 또는 이용권에 대하여 청약 철회 가능한 기간(결제일로부터 7일 이내)을 경과하여 청약 철회를 신청하거나, 전자상거래 등에서의 소비자 보호에 관한 법률, 콘텐츠산업진흥법, 콘텐츠이용자보호지침 등 기타 관계 법령에서 정한 청약 철회 제한 사유에 해당하는 콘텐츠의 경우에 해당하는 경우에는 청약 철회가 제한됩니다. 3. 회사는 회원이 유료서비스 내지 이용권을 구매하기 전 이용 화면 등에 아래 각 호의 사항을 회원이 알 수 있도록 안내하며, 회원의 착오 구매를 방지하기 위하여 해당 콘텐츠에 대한 한시적 또는 일부의 방법으로써 서비스체험을 제공합니다. 4. 청약 철회는 회원이 전화, 전자우편 등의 방법으로 할 수 있으며, 회사에 의사를 표시하여 회사에 도달될 때 그 효력이 발생하고, 회사는 회원의 의사표시를 수령한 후 지체 없이 이러한 사실을 회원에게 회신합니다. 5. 회사는 회원이 청약 철회, 해지/해제 신청을 확인 후 환불 금액이 있을 경우, 원칙적으로 회원의 해당 의사표시를 수령한 날로부터 3영업일 이내에 결제수단 별 사업자에게 대금의 청구 정지 내지 취소를 요청하고, 회원이 결제한 동일 결제수단으로 환불함을 원칙으로 합니다. 단, 회사가 사전에 회원에게 공지한 경우 및 아래의 각 경우와 같이 개별 결제 수단별 환불 방법, 환불 가능 기간 등이 차이가 있을 수 있습니다. 1. 신용카드 등 수납 확인이 필요한 결제수단의 경우에는 수납 확인일로부터 3영업일 이내 2. 결제수단 별 사업자가 회사와의 약정을 통하여 사전에 대금 청구 정지 내지 결제 취소 가능 기한 등을 미리 정하여 둔 경우로 해당 기한을 지난 환불의 경우 3. 회원이 유료서비스/ 이용권의 이용 결과, 얻은 이익이 있거나 중도 해지의 경우 4. 회원이 환불 처리에 필요한 정보 내지 자료를 회사에 즉시 제공하지 않는 경우 (현금 환불 시 신청인의 계좌 및 신분증 사본을 제출하지 아니하거나, 타인 명의의 계좌를 제공하는 경우 등) 5. 해당 회원의 명시적 의사표시가 있는 경우 6. 이용권을 구매한 회원이 해당 이용권을 중도 해지한 경우, 회사는 회원이 구매한 대금에서 회원이 실제 콘텐츠를 업로드한 건 수, 이용한 기간 등 서비스 또는 이용권을 통하여 취득한 이익을 감안, 합리적인 범위 내에서 회사가 적용하는 소정의 기준율을 적용하여 차감하고 환불합니다. 7. 회사는 콘텐츠이용자보호지침 등에 따라, 회사가 부담하였거나 부담할 부대비용, 수수료를 차감하여 환불할 수 있습니다. 8. 회원이 유료서비스 또는 이용권을 선물 받거나, 프로모션 등을 통해 무료/무상으로 취득하는 등 회원이 직접 비용을 지불하지 아니한 서비스에 대하여는 회사는 환불 의무를 부담하지 않습니다. 9. 회원이 이 약관에서 정하는 회원의 의무를 위반하였을 경우, 계약을 해제, 해지하거나 서비스 이용 제한, 손해배상 청구 등의 조치를 취할 수 있으며, 계약 해지 후 환불하여야 할 금액이 있을 경우에는 일정한 범위 내에서 회원이 부담할 금액을 공제하고 환불합니다. 이 경우 회원은 해당 회사의 조치에 대하여 회사가 정한 절차에 따라 이의 신청을 할 수 있으며, 회사는 정당하다고 확인하는 경우 서비스 이용 재개 등을 할 수 있으며, 이용자가 자신의 고의, 과실 없었음을 입증한 경우 회사는 서비스를 정지한 기간만큼 이용 기간을 연장합니다. 10. 회원의 신청 또는 동의에 따라 월 정기결제 중인 유료서비스의 경우, 해당 회원이 유료서비스의 이용요금을 체납하는 경우 연체가 발생한 날 자동으로 이용권 해지가 될 수 있으므로, 월 정기결제를 통한 혜택을 유지하고자 하는 회원은 이용요금의 체납 또는 결제수단의 연체가 발생하지 않도록 사전에 조치하여야 합니다. 11. 월 정기결제 유료서비스를 이용 중인 회원이 탈퇴하는 경우 해당 이용권은 즉시 해지되며, 이 경우 회원의 정보와 이용내용은 관련 법령이 정하는 경우를 제외하고는 이용약관 및 이 약관에 따릅니다. 제10조 (과오금) 1. 회사는 유료서비스 결제와 관련하여 과오금이 발생한 경우 이용대금의 결제와 동일한 방법으로 과오금 전액을 환불합니다. 다만, 동일한 방법으로 환불이 불가능할 때는 이를 사전에 고지합니다. 2. 회사의 귀책사유로 과오금이 발생한 경우 과오금 전액을 환불합니다. 단, 회원의 귀책사유로 과오금이 발생한 경우, 회사가 과오금을 환불하는데 소요되는 비용은 합리적인 범위 내에서 이용자가 부담하여야 하며, 회사는 해당 비용을 차감 후 과오금을 환불할 수 있습니다. 3. 회사는 회원이 요구하는 과오금에 대하여 환불을 거부할 경우, 정당하게 유료서비스 요금이 부과되었음을 입증할 책임을 부담합니다. 4. 회사는 과오금의 세부 환불절차 및 기타 사항에 대하여 다음과 같이 콘텐츠 이용자보호지침이 정하는 바에 따릅니다. 1. 회사나 회원이 과오금의 발생사실을 안 때에는 전화, 전자우편 등 회사가 제시한 방법에 따라 상대방에게 통보 2. 회사는 회원에게 환불에 필요한 정보를 요청(회원 성명, 결제증빙서류, 전화번호, 환불 요청 계좌 등) 3. 회원은 환불에 필요한 2호의 정보를 회사에 제공 4. 회사는 이용자의 정보 제공일로부터 7일 이내 환불 처리 (회원의 명시적 의사표시가 있는 경우 차회 요금에서 상계) 제11조 (유료서비스의 정지, 중단) 1. 회사는 원칙적으로 연중무휴 1일 24시간 유료서비스를 제공합니다. 2. 회사는 이용자에 대한 서비스 개선을 목적으로 하는 설비 점검 및 보수 시에는 유료서비스의 전부 또는 일부의 제공을 제한, 중지, 중단할 수 있습니다. 이 경우 회사는 가능한 한 그 중단사유, 중단 기간 등을 이 약관 제2조(약관의 효력/변경 등)의 방법을 통하여 사전에 회원에게 공지하며, 아래 각 호의 불가피한 경우에는 경위와 원인이 확인된 즉시 사후에 공지할 수 있습니다. 1. 회원, 기타 불특정 제3자의 불법, 범죄행위로 인하여 기술적으로 정상적인 서비스의 제공이 어려운 경우 2. 시스템 또는 기타 서비스 설비의 장애, 유무선 Network 장애 또는 유료서비스 이용의 폭주 등으로 정상적인 유료서비스 제공이 불가능할 경우 3. 기타 천재지변, 국가비상사태, 정전 등 회사가 통제할 수 없는 불가항력적 사유로 인한 경우 3. 회사는 제2항의 각 호에 해당하는 사유가 아닌 회사의 귀책사유로 서비스의 제공이 중단됨으로 인하여 회원이 입은 손해에 대하여 아래와 같이 콘텐츠 이용자보호지침에서 정하는 바에 따라 배상합니다. 다만, 천재지변 등 불가항력으로 인한 경우는 아래 이용중지 또는 장애발생 시간에 산입하지 아니합니다. 또한, 각 호를 적용함에 있어 사전고지는 서비스 중지, 장애시점을 기준으로 24시간 이전에 고지된 것에 한합니다. 1. 사업자가 서비스의 중지•장애에 대하여 사전고지 하지 않은 경우에 있어서 이용자의 피해구제 등은 다음 각호에 의합니다. 다만, 이용자의 책임 있는 사유로 인하여 서비스가 중지되거나 장애가 발생한 경우 서비스 중지•장애시간에 포함하지 아니합니다. 1) 1개월 동안의 서비스 중지•장애발생 누적시간이 72시간을 초과한 경우 : 계약해제 또는 해지 및 미이용기간을 포함한 잔여기간에 대한 이용료 환급 및 손해배상(단, 사업자가 고의 또는 과실 없음을 입증한 경우 손해배상책임을 지지 않음) 2) 사업자의 책임 있는 사유로 인한 서비스 중지 또는 장애의 경우 : 서비스 중지•장애시간의 3배를 무료로 연장 3) 불가항력 또는 제3자의 불법행위 등으로 인해 서비스의 중지 또는 장애가 발생한 경우 : 계약을 해제할 수는 없지만, 서비스의 중지 또는 장애시간만큼 무료로 이용기간을 연장 사업자가 서비스의 중지•장애에 대하여 사전고지한 경우에 있어서 이용자의 피해구제 등은 다음 각호에 의합니다. 다만, 서비스 개선을 목적으로 한 설비 점검 및 보수시 1개월을 기준으로 최대 24시간은 중지•장애 시간에 포함하지 아니합니다. 1. 가) 1개월을 기준으로 서비스 중지•장애시간이 10시간을 초과하는 경우 : 10시간과 이를 초과한 시간의 2배의 시간만큼 이용기간을 무료로 연장 2. 나) 1개월을 기준으로 서비스 중지•장애시간이 10시간을 초과하지 않은 경우 : 중지•장애 시간에 해당하는 시간을 무료로 연장 4. 회사는 무료로 제공되는 서비스의 일부 또는 전부를 회사의 정책, 운영상의 긴요한 사유로 수정, 중단, 변경할 수 있으며, 이에 대하여 관련 법령에 별도 규정이 있지 아니하는 한 별도의 보상을 하지 않습니다. ### 5. 계약당사자의 의무, 손해배상 등 제12조 (회원의 의무, 위반시 회사의 조치 등) 1. 회원은 회사가 제공하는 유료서비스 이용 시 관계법령, 약관, 세부이용지침, 서비스 이용안내 및 사이트 내 공지한 주의사항, 회사가 서비스 이용과 관련하여 회원에게 통지하는 사항 등을 준수하여야 하며, 기타 회사 및 타인의 명예를 훼손하거나 멜론캐시 및 서비스 운영 기타 업무수행에 지장을 초래하는 행위를 해서는 안됩니다. 2. 회원은 아이디 및 비밀번호를 관리할 책임이 있으며, 본인이 아닌 타인이 사용하게 하여서는 안됩니다. 이를 위반하여 회원의 개인정보를 타인이 사용하여 유료서비스 이용함으로써 발생한 결과에 대한 책임은 회원에게 있습니다. 회원은 타인의 명의, 아이디, 비밀번호, 휴대폰번호, 계좌번호, 신용카드번호 등 개인정보를 도용하거나 부정하게 사용하여서는 안됩니다. 3. 회원은 회사가 사전에 허용한 경우를 제외하고는 유료서비스를 영업활동 등 영리목적으로 이용하거나 이 약관에서 금지하는 행위를 하거나 허용하는 범위를 벗어난 이용행위를 하여서는 안됩니다. 4. 회원은 유료서비스 이용과정에서 위법행위 또는 선량한 풍속 기타 사회질서에 반하는 행위를 하여서는 안되며, 유료서비스를 이용하여 얻은 정보를 회사의 사전 승낙 없이 서비스의 이용 이외의 목적으로 사용하여서는 안됩니다. 5. 회사는 제1항 내지 제4항의 회원의 위반 행위가 있는 경우 해당 회원에 대하여 위반 사실을 고지하고 서비스 제공을 1개월간 정지시킬 수 있고, 동위반행위가 재발할 경우 서비스 이용계약을 해제 또는 해지할 수 있습니다. 본항의 회사의 의사표시는 회원에게 도달한 날로부터 효력이 발생합니다. 회사의 해제/해지 및 이용 정지에 대하여 회원은 회사가 정한 절차에 따라 이의신청할 수 있습니다. 이 경우 이용자가 자신의 고의, 과실 없었음을 입증하거나 회원의 이의가 정당하다고 회사가 인정하는 경우 회사는 계정을 정지한 기간만큼 이용기간을 연장합니다. 6. 유료서비스 이용과 관련하여 진실한 정보를 입력하지 않은 회원은 법적인 보호를 받을 수 없으며, 서비스 이용에 제한을 받을 수 있습니다. 7. 민법에 의한 미성년회원이 유료서비스 내지 이용권을 이용하고자 하는 경우, 법정대리인(부모님)의 동의를 얻거나 계약 체결 후 추인을 얻지 않으면 미성년자 본인 또는 법정대리인이 그 계약을 취소할 수 있습니다. 만 14세 미만 아동은 서비스를 이용할 수 없습니다. 8. 회원은 다음을 포함한 금지된 행위를 하지 않을 것에 동의합니다: 1) 불법 목적을 위해 서비스 사용. 2) 제3자 지적 재산권 침해. 3) 서비스의 보안 기능을 우회하거나 방해. 4) 바이러스 또는 악성 코드를 업로드하여 서비스에 손상 초래. 제13조 (손해배상) 1. 회사는 서비스의 결함에 의하여 회사가 제공하는 유료서비스의 내용인 콘텐츠가 손상, 훼손, 삭제되어 서비스 이용에 손해를 입은 회원에게 해당 콘텐츠의 복원 등으로 배상합니다. 회원에게 손해가 발생한 경우 회사는 회원에게 실제 발생한 손해만을 배상합니다. 다만, 회사의 고의 또는 과실 없이 회원에게 발생한 일체의 손해에 대하여는 책임을 지지 아니합니다. 회사는 이 약관에서 명시되지 아니한 회사의 귀책사유로 인하여 유료서비스의 이용 회원에게 손해가 발생한 경우 회사의 배상 책임과 관련하여 회사는 '콘텐츠 이용자 보호지침'의 관련 규정 및 기타 상관례를 따릅니다. 2. 고객이 이 약관의 이용 제한 관련 각 규정에 근거, 서비스의 이용이 제한되거나 이용계약이 해지된 경우, 고객이 보유한 모든 디지털콘텐츠의 사용권은 상실되며 회사는 해당 디지털콘텐츠의 구매대금을 반환할 의무를 부담하지 아니합니다. 3. 회원이 이 약관상의 의무를 위반함으로 인하여 회사에 손해가 발생한 경우 또는 회원이 이용권 적립 또는 유료서비스를 이용함에 있어 회사에 손해를 입힌 경우, 회원은 회사에 그 손해를 배상하여야 합니다. 제14조 (면책) 1. 회사는 다음 각 호의 사유로 인하여 회원 또는 제3자에게 발생한 손해에 대하여는 그 책임을 지지 아니합니다. 1. 1.천재지변 또는 이에 준하는 불가항력으로 인해 유료서비스를 제공할 수 없는 경우 2. 2.회원이 자신의 아이디 또는 비밀번호 등의 관리를 소홀히 한 경우 3. 3.회사의 관리영역이 아닌 공중통신선로의 장애로 서비스이용이 불가능한 경우 4. 4.기타 회사의 귀책사유가 없는 통신서비스 등의 장애로 인한 경우 2. 회사는 회원이 유료서비스를 이용하여 기대하는 수익을 얻지 못하거나 상실한 것, 서비스에 게시된 게시물에 대한 취사 선택 또는 이용으로 발생하는 손해 등에 대해서는 책임을 지지 않습니다. 3. 회사는 회원 상호간 또는 회원과 제3자 상호간에 유료서비스와 관련하여 발생한 분쟁에 대하여 개입할 의무가 없으며, 회사에 귀책사유가 없는 한 이로 인하여 발생한 손해를 배상할 책임이 없습니다. 제15조 (분쟁의 해결) 1. 유료서비스 이용과 관련하여 회사와 회원 사이에 분쟁이 발생한 경우, 회사와 회원은 분쟁의 해결을 위해 성실히 협의하고, 협의가 안될 경우 콘텐츠산업진흥법 상 콘텐츠분쟁 조정 위원회에 분쟁조정을 신청할 수 있습니다. 2. 전항에 따라 분쟁이 해결되지 않을 경우 양 당사자는 소를 제기할 수 있으며, 회사와 회원 간의 소의 관할은 제소 당시의 이용자의 주소에 의하고, 주소가 없는 경우 거소를 관할하는 지방법원의 전속 관할로 합니다. 3. 제소 당시 회원의 주소 또는 거소가 분명하지 않은 경우에는 민사소송법에 따라 관할법원을 정합니다.
```

# priv/terms_of_services/v1_en.json

```json
{ "metadata": { "version": "3.0.0", "schemaVersion": "2024.2", "releaseDate": "2025-01-26", "effectiveDate": "2025-02-01", "language": "en", "revisionHistory": [ { "version": "2.0.0", "date": "2025-01-26", "changes": "Content restructuring and enhanced accessibility features" }, { "version": "1.0.0", "date": "2025-01-13", "changes": "Initial release" } ], "availableLanguages": ["en", "ko"], "accessibility": { "role": "document", "lang": "en-US", "ariaLabel": "Terms of Service", "structure": { "landmarks": true, "headings": true } }, "formatting": { "supported": ["text", "list", "link", "heading"], "schema": "https://schema.org/TermsOfService" } }, "document": { "index": { "type": "navigation", "title": "Table of Contents and Quick Links", "subtitle": "Main Sections", "items": [ { "id": "section-1", "title": "General Provisions", "ref": "#section-1" }, { "id": "section-2", "title": "Service Usage Agreement", "ref": "#section-2" }, { "id": "section-3", "title": "Service Usage", "ref": "#section-3" }, { "id": "section-4", "title": "Service Usage Fees", "ref": "#section-4" }, { "id": "section-5", "title": "Miscellaneous", "ref": "#section-5" } ] }, "introduction": { "type": "section", "content": [ { "type": "text", "value": "Welcome ('Members'). Thank you for using ingrey (hereinafter referred to as 'Service'). These terms and conditions explain the relationship between ingrey (hereinafter 'ingrey'), which provides ingrey services, and ingrey service members (hereinafter 'members') or non-members who use these services, and include useful information that can help you use ingrey services." }, { "type": "text", "value": "When you use ingrey services or sign up as an ingrey service member, you will be required to review and agree to these terms and conditions and related operating policies, so please take a moment to carefully review them." } ] }, "third-party": [ { "type": "section", "title": "YouTube Terms of Service", "link": { "text": "here", "href": "https://policies.google.com/privacy", "value": " to read about YouTube Terms of Service. By using the YouTube API Client, you are deemed to have agreed to the YouTube Terms of Service." } } ], "sections": [ { "id": "section-1", "type": "section", "number": "1", "title": "General Provisions", "chapters": [ { "id": "chapter-1", "type": "chapter", "number": "1", "title": "Purpose", "content": { "type": "text", "value": "These terms and conditions establish the basic provisions regarding the rights, obligations, and responsibilities between members and the company, as well as the conditions and procedures for using the service when members use the social media management tool (including web, mobile web, and app services) provided by ingrey (hereinafter referred to as the 'Company'). This service allows users to schedule and upload posts to social platforms, and provides content analysis and design tools to enhance social media content (hereinafter referred to as the 'Service')." } }, { "id": "chapter-2", "type": "chapter", "number": "2", "title": "Effect and Amendment of Terms", "content": { "type": "list", "items": [ { "text": "1. These terms are effective for all members who wish to use the service within the Republic of Korea. Furthermore, when the company makes the service available in other countries through contracts with overseas rights holders, these terms will also be effective for all members who wish to use the service within those countries." }, { "text": "2. The contents of these terms are posted on the service screen or otherwise made public to members, and become effective when members who agree to them join the service. Before members agree, the company provides separate linked screens or popup screens to ensure that members can easily understand the terms and conduct transactions without errors, seeking member confirmation." }, { "text": "3. The company may modify these terms when deemed necessary, within the scope that does not violate relevant laws such as the 'Act on the Regulation of Terms and Conditions,' 'Act on Promotion of Information and Communications Network Utilization and Information Protection,' 'Content Industry Promotion Act,' and 'Act on Consumer Protection in Electronic Commerce.' When modifying the terms, the company will specify the effective date and reasons for modification and announce them on the service site from 15 days before the effective date. For modifications disadvantageous to members, the company will clearly display the modified content from 30 days before the effective date and individually notify members via email address, text message, etc. If individual notification is difficult due to changes in member contact information, or if notifications are returned more than twice despite being sent to the registered contact information, the notification as per these terms shall be deemed as individual notification." }, { "text": "4. If the company notifies or announces the modified terms according to Paragraph 3 and informs members that they will be deemed to have agreed to the changes if they do not express their objection by the effective date of the modified terms, and if members do not explicitly express their objection to the modified terms, the company shall deem that members have agreed to the modified terms." }, { "text": "5. Members who express objection to the modified terms may choose to terminate the contract or withdraw their membership. Regarding the effectiveness of terminating individual usage rights, the provisions of the relevant clauses in the 00 Paid Service Terms shall apply." }, { "text": "6. The company shall take necessary technical measures to ensure that members can print and verify these terms in their entirety." }, { "text": "7. In principle, these terms apply from the date members agree to them until they withdraw their membership. However, some provisions of these terms may remain valid even after membership withdrawal." } ] } }, { "id": "chapter-3", "type": "chapter", "number": "3", "title": "Standards Outside Terms", "content": { "type": "text", "value": "Matters not specified in these terms shall be governed by the provisions of relevant laws such as the Content Industry Promotion Act, Act on Consumer Protection in Electronic Commerce, Copyright Act, and general commercial practices." } }, { "id": "chapter-4", "type": "chapter", "number": "4", "title": "Definition of Terms", "content": { "type": "list", "items": [ { "text": "1. The definitions of terms used in these terms are as follows:", "subItems": [ { "text": "1. Member: All customers who access the service site to use the service and enter into a service usage contract by agreeing to these terms or completing other procedures requested by the company" }, { "text": "2. ID: A combination of letters and numbers selected by the member and approved by the company for member identification and service use" }, { "text": "3. Password: A combination of characters and numbers set by members themselves to protect their information" }, { "text": "4. Nickname: A unique alternate name designated by the member separately from their ID" }, { "text": "5. Operator: A person selected by the company for overall management and smooth operation of the service" }, { "text": "6. Service Suspension: The act of providing service according to certain requirements set by the company during normal use" }, { "text": "7. Text Message Authentication: A member verification process where a random number is sent via mobile phone text message, and the customer registers that number on the site" } ] } ] } } ] }, { "id": "section-2", "type": "section", "number": "2", "title": "Service Usage Agreement", "chapters": [ { "id": "chapter-5", "type": "chapter", "number": "5", "title": "Establishment of Paid Service Usage Contract", "content": { "type": "list", "items": [ { "text": "1. Users shall apply for usage through the following or similar procedures provided by the 'Company'. Before concluding the contract, the 'Company' shall provide information so that 'Users' can accurately understand and transact without mistakes or errors regarding the following matters:", "subItems": [ { "text": "① Confirmation and selection of paid service content, types, prices, and provision period" }, { "text": "② Input of identity verification information (name, mobile phone number)" }, { "text": "Confirmation of paid service usage application and terms of use, or consent to the company's confirmation, and selection of payment method and input of payment information" } ] }, { "text": "2. The 'Company' may not accept or reserve acceptance if the 'User's' usage application falls under any of the following cases:", "subItems": [ { "text": "- When using a false name or another person's name" }, { "text": "- When providing false information or failing to provide information required by the 'Company'" }, { "text": "- When a minor attempts to use 'Content' prohibited by the Juvenile Protection Act" }, { "text": "- When there is insufficient service-related equipment capacity, or technical or operational issues exist" } ] }, { "text": "3. The contract shall be deemed established when the 'Company's' acceptance reaches the 'User' in the form of a receipt confirmation notice under Article 14, Paragraph 1." }, { "text": "4. The 'Company's' expression of acceptance includes information about confirmation of the 'User's' usage application, service availability, correction of usage application, cancellation, etc." } ] } }, { "id": "chapter-6", "type": "chapter", "number": "6", "title": "Service Usage Application", "content": { "type": "list", "items": [ { "text": "1. Most service functions require account registration.", "subItems": [ { "text": "1. Users are solely responsible for securely managing their account and password." }, { "text": "2. Users must immediately notify the 'Company' if any account security threat occurs." } ] }, { "text": "2. The usage application is made by customers recording the following information in the registration form on the service's user registration screen:", "subItems": [ { "text": "1. Name" }, { "text": "2. ID" }, { "text": "3. Nickname" }, { "text": "4. Password" }, { "text": "5. Date of birth" }, { "text": "6. Service access country" }, { "text": "7. Email address" }, { "text": "8. Other information deemed necessary by the company" } ] } ] } }, { "id": "chapter-7", "type": "chapter", "number": "7", "title": "Acceptance of Service Usage Application", "content": { "type": "list", "items": [ { "text": "1. The company accepts service usage applications from customers who accurately provide the information specified in Article 6 and complete the authentication procedures set by the company, such as email address approval or text message verification." }, { "text": "2. The service usage agreement between the company and members is established when the company's acceptance reaches the member (in the case of paid services, when the 'Purchase/Payment Complete' or similar indication is procedurally displayed to the member)." }, { "text": "3. When there is a paid service usage application from a user, the company sends a receipt notification to the user." }, { "text": "4. Users who receive a confirmation notification may request changes or cancellations to their paid service usage application immediately upon receiving the confirmation notification if there are discrepancies in the expression of intent, etc. The company must process such requests without delay if received before providing the paid service. However, if payment has already been made, the provisions of Chapter 4 of the Paid Service Terms of Use regarding withdrawal of subscription shall apply." } ] } }, { "id": "chapter-8", "type": "chapter", "number": "8", "title": "Restrictions on Service Usage Application Acceptance", "content": { "type": "list", "items": [ { "text": "1. The company may restrict registration, reserve acceptance for a certain period, or claim damages depending on the severity of the case if any of the following circumstances occur:", "subItems": [ { "text": "1. When service provision is impossible due to business or technical circumstances of the company" }, { "text": "2. When approval is impossible due to user's fault, such as omitting or incorrectly entering user registration information, or attaching false documents" }, { "text": "3. When the application is made to disturb or with the purpose of disturbing social peace, order, or public morals" }, { "text": "4. In the case of children under 14 years of age" }, { "text": "When membership was previously terminated under <bold>Article 27 (Contract Termination and Usage Restrictions)</bold>. However, exceptions may be made for those who have received company approval for re-registration after more than one year has passed since the loss of qualification." }, { "text": "6. When service fees charged by the company are not paid without valid reason due to arbitrary cancellation, suspension of payment, or inability to pay with the payment method registered by the member after using the service" }, { "text": "7. When the person resides or stays in a country where the company has not been granted service business rights or copyrights, or accesses the site from such countries" }, { "text": "8. When there is a history of membership loss (withdrawal) due to criminal activities, repeated paid membership registration and cancellation within a specific period clearly indicating use other than normal purposes, or interference with company services" }, { "text": "9. When other usage application requirements set by the company are not satisfied" } ] }, { "text": "2. <bold>If any of the circumstances in Paragraph 1 are discovered after accepting the usage application, the company may terminate or suspend the service usage agreement concluded under these terms.</bold>" }, { "text": "3. The company may restrict part of the service usage based on user qualification or age.", "subItems": [ { "text": "1. Members under 19 years of age (excluding those who reach January 1st of the year they turn 19, same applies throughout this article) cannot access media harmful to juveniles according to the Act on Promotion of Information and Communications Network Utilization and Information Protection and the Juvenile Protection Act." }, { "text": "2. To access media harmful to juveniles, members must be 19 years or older and must verify their identity and age through real-name authentication as required by the Act on Promotion of Information and Communications Network Utilization and Information Protection and the Juvenile Protection Act. Without authentication, access to relevant services will be restricted." } ] } ] } }, { "id": "chapter-9", "type": "chapter", "number": "9", "title": "Service Usage Fees", "content": { "type": "text", "value": "The 'Company' may integrate third-party software or services, and the 'User' is responsible for complying with the terms of service of such third-party services." } }, { "id": "chapter-10", "type": "chapter", "number": "10", "title": "Special Provisions for Minor Membership Registration", "content": { "type": "list", "items": [ { "text": "1. 'Users' under the age of 14 must fully understand the purpose of collecting and using personal information and obtain consent from their parents or legal guardians before applying for membership and providing their personal information." }, { "text": "2. The company will cancel or deny membership for users under 14 years of age who have not completed the verification process for parental or legal guardian consent." }, { "text": "3. Parents or legal guardians of 'Users' under 14 years of age may request to view, correct, or update the child's personal information, or withdraw consent for membership registration, and in such cases, the 'Company' must take necessary measures without delay." } ] } }, { "id": "chapter-11", "type": "chapter", "number": "11", "title": "Changes to Contract Details", "content": { "type": "text", "value": "Members must update their information using the designated usage method and prescribed format when there are changes to the details provided during the service usage application." } } ] }, { "id": "section-3", "type": "section", "number": "3", "title": "Service Usage", "chapters": [ { "id": "chapter-12", "type": "chapter", "number": "12", "title": "Service Usage Commencement", "content": { "type": "list", "items": [ { "text": "1. The company begins providing services from the moment it accepts a member's usage application. However, some services may begin from a designated date, and paid services become available after payment is completed through means specified by the company." }, { "text": "2. If the service cannot be initiated due to business or technical difficulties of the company, this will be posted on the site or notified to members." } ] } }, { "id": "chapter-13", "type": "chapter", "number": "13", "title": "Service Usage Hours", "content": { "type": "list", "items": [ { "text": "1. The service is available 24 hours a day, 365 days a year in principle. However, the service may be temporarily suspended due to regular maintenance or other business or technical reasons, and may also be temporarily suspended during periods determined by the company for operational purposes. In such cases, the company will, in principle, announce the fact of temporary suspension and the suspension period in advance, but if there are urgent or unavoidable circumstances that prevent prior notice, it will be announced immediately afterward." }, { "text": "2. The company may divide the service into certain ranges and set separate available times for each range, in which case the details will be announced." } ] } }, { "id": "chapter-14", "type": "chapter", "number": "14", "title": "Service Changes and Suspension", "content": { "type": "list", "items": [ { "text": "1. The company may change the service according to operational and technical needs when there is reasonable cause, and in such cases, will notify members of the content of the changes and the provision date in the manner specified in Article 2 (Effect and Amendment of Terms) Paragraph 3. However, if the changed content is significant or disadvantageous to members, the company will notify and obtain consent from members in the manner specified in these terms or the 00 paid service terms." }, { "text": "2. The company may temporarily restrict or suspend all or part of the service in the following cases:", "subItems": [ { "text": "1. When unavoidable due to maintenance or construction of service facilities" }, { "text": "2. When a member intentionally interferes with the company's normal business and service provision activities, such as repeatedly registering and canceling specific services within a certain period" }, { "text": "3. When normal service use is hindered due to power outages, facility failures, or traffic surges" }, { "text": "4. When the service cannot be maintained due to various circumstances of the company, such as termination of contracts with service providers" }, { "text": "5. When there are force majeure reasons beyond the company's control, such as natural disasters, national emergencies, administrative or judicial dispositions by national institutions like the Korea Communications Commission, Korea Internet & Security Agency, government organizations, investigative agencies, courts, etc." } ] }, { "text": "3. In case of service suspension under Paragraph 2, the company will notify users in the manner specified in Article 2 (Effect and Amendment of Terms) Paragraph 3. However, if prior notification is difficult, urgent, or unavoidable, notification may be made afterward." }, { "text": "4. The company may modify, suspend, or change all or part of the services provided free of charge based on company policy and operational needs, and no separate compensation will be provided to members for this." }, { "text": "5. All matters related to the suspension or termination of paid services shall be governed by Article 00 of the 00 Paid Service Terms." } ] } }, { "id": "chapter-15", "type": "chapter", "number": "15", "title": "Member's Obligations and Responsibilities Regarding Email", "content": { "type": "list", "items": [ { "text": "1. The company may provide email services for each site to members. The company does not edit or monitor members' email content, and each member is responsible for their email content." }, { "text": "2. Members must not use the company's email to send pornographic or inappropriate content, junk mail, spam mail, chain letters, or emails that promote pyramid schemes, cause harm to others, or violate public morals." }, { "text": "3. All responsibility for violations of Paragraph 2 lies with the member, and in such cases, the company may provide the member's personal information, such as ID and PASSWORD, to investigative agencies according to procedures specified by relevant laws." } ] } }, { "id": "chapter-16", "type": "chapter", "number": "16", "title": "Information Provision and Advertisement Posting", "content": { "type": "list", "items": [ { "text": "1. The company may post various information or advertisements on the service screen or provide them to members through email, postal mail, text messages, KakaoTalk channel messages, etc." }, { "text": "2. Regarding Paragraph 1, members may refuse to receive emails at any time, except for transaction-related information and responses to customer inquiries as required by relevant laws, and the company will specify the method of refusal. However, when the company sends advertisements through telephone, fax machines, etc., excluding transaction-related information and customer inquiries exempt from consent obligations under relevant laws, it will obtain prior consent from members." }, { "text": "3. All interactions between users and advertisers through paths provided in videos, images, banners, etc., regarding advertisements posted on the service are matters between the 'User' and the advertiser, and the 'Company' bears no responsibility in this regard." } ] } }, { "id": "chapter-17", "type": "chapter", "number": "17", "title": "Company's Obligations", "content": { "type": "list", "items": [ { "text": "1. The 'Company' must faithfully exercise rights and fulfill obligations as stipulated by laws and these terms in good faith." }, { "text": "2. The 'Company' must maintain security systems for personal information (including credit information) protection to ensure that 'Users' can safely use the service, and must publish and comply with its personal information processing policy." }, { "text": "3. The 'Company' shall enable 'Users' to check their service usage and payment details at any time." }, { "text": "4. The 'Company' shall process without delay any opinions or complaints raised by 'Users' regarding service use if deemed legitimate. For opinions or complaints raised by 'Users', the bulletin board will be utilized for responses." } ] } }, { "id": "chapter-18", "type": "chapter", "number": "18", "title": "User's Obligations", "content": { "type": "list", "items": [ { "text": "1. 'Users' must not engage in the following actions:", "subItems": [ { "text": "Providing false information during application or modification" }, { "text": "Impersonating others" }, { "text": "Modifying information posted by the 'Company'" }, { "text": "Transmitting or posting information (including computer programs) prohibited by the 'Company'" }, { "text": "Infringing on intellectual property rights, including copyrights, of the 'Company' and other third parties" }, { "text": "Damaging the reputation of or interfering with the operations of the 'Company' and other third parties" }, { "text": "Distributing obscene or violent words, text, images, sounds, or other information contrary to public morals through public posting, email transmission, or other methods on the 'Company's' site" }, { "text": "Engaging in sales activities or other business activities using the service without prior approval from the 'Company'" }, { "text": "Using the 'Service' provided by the 'Company' beyond private use, such as public reproduction in public places, commercial establishments, stores, etc., or other illegal activities" } ] }, { "text": "2. 'Users' must comply with relevant laws, provisions of these terms, usage guidelines, precautions announced in relation to the service, matters notified by the 'Company', etc., and must not engage in any activities that interfere with the company's operations." } ] } }, { "id": "chapter-19", "type": "chapter", "number": "19", "title": "Article 19 (Paid Service Terms)", "content": { "type": "text", "value": "Separate terms and conditions, such as paid service terms, may exist for service use. Separate terms may be established according to additional paid services, and in case of conflict between the terms of use and 00 paid service terms, the 00 paid service terms shall take precedence." } }, { "id": "chapter-20", "type": "chapter", "number": "20", "title": "Service Usage Payment Methods", "content": { "type": "list", "items": [ { "text": "Payment methods for service usage can be made through any available methods specified in the paid service terms." }, { "text": "• Paid Service Terms", "subItems": [ { "text": "All fees are displayed in Korean Won and are non-refundable." }, { "text": "The 'Company' will provide advance notice of any fee changes." }, { "text": "Payment Authorization - 'Users' authorize the 'Company' to charge fees using the payment method specified in their account." }, { "text": "Subscription - Subscription services include automatic payment.", "subItems": [ { "text": "The next fee will be charged unless cancelled before subscription renewal." }, { "text": "Cancellation can be processed through the website or account settings." } ] }, { "text": "Delinquent Accounts - Service may be suspended or terminated for delinquent accounts." } ] } ] } }, { "id": "chapter-21", "type": "chapter", "number": "21", "title": "User Content", "content": { "type": "list", "items": [ { "text": "'Users' retain ownership of content uploaded through the 00 service ('User Content'), but must grant certain rights to the 'Company' to provide the service." }, { "text": "License Granted to the 'Company'", "subItems": [ { "text": "'Users' grant the 'Company' the right to store, display, and reproduce user content." } ] }, { "text": "User Content Restrictions", "subItems": [ { "text": "'Users' may not upload content that infringes on third-party rights or is illegal or unethical." } ] }, { "text": "Company's Rights", "subItems": [ { "text": "The 'Company' reserves the right to monitor or delete user content." }, { "text": "The 'Company' may delete posts made by members whose accounts have been terminated by themselves or for legitimate reasons." } ] } ] } }, { "id": "chapter-22", "type": "chapter", "number": "22", "title": "Personal Information Protection", "content": { "type": "list", "items": [ { "text": "3. The 'Company' complies with the Personal Information Protection Act regarding the collection, use, provision, and other processing and protection of personal information." }, { "text": "4. 'Users' rights regarding access to, correction of, and suspension of processing of their personal information are protected under the Personal Information Protection Act." }, { "text": "5. The 'Company' is not responsible for risks associated with 'Personal Information' voluntarily provided by 'Users' through online means such as bulletin boards, mail, chat, etc., which may be collected and used by others." } ] } }, { "id": "chapter-23", "type": "chapter", "number": "23", "title": "Advertisement Posting and Transactions with Advertisers", "content": { "type": "list", "items": [ { "text": "1. The 'Company' may post advertisements on content playback or usage screens, homepages, etc., for both paid and free service 'Users'." }, { "text": "2. Personalized and behavior-based advertising materials may be selected and provided to offer optimized advertisements to members." }, { "text": "3. Personalized and behavior-based advertising materials under Paragraph 2 will only be provided with the member's prior consent." }, { "text": "4. 'Members' can refuse the selection and provision of personalized and behavior-based advertising materials in the user information management screen. If refused, personalized and behavior-based advertising materials will not be provided, but advertisement provision may continue." }, { "text": "5. All interactions between users and advertisers through paths provided in videos, images, banners, etc., regarding advertisements posted on this service are matters between the 'User' and the advertiser, and the 'Company' bears no responsibility in this regard." } ] } } ] }, { "id": "section-4", "type": "section", "number": "4", "title": "Obligations of Contracting Parties", "chapters": [ { "id": "chapter-24", "type": "chapter", "number": "24", "title": "Obligations and Responsibilities for Member ID and Password Management", "content": { "type": "list", "items": [ { "text": "1. As the company may charge usage fees for certain service requests within the site, members must strictly manage their member ID and password." }, { "text": "2. Members are responsible for all consequences arising from negligent management of their member ID and password, while the company is responsible for issues arising from causes attributable to the company, such as system failures." }, { "text": "3. Members must not allow third parties to use their ID and password, and if members become aware that their ID and password have been stolen or are being used by a third party, they must immediately notify the company and follow the company's guidance if provided." }, { "text": "4. In cases under Paragraph 3, the company is not responsible for any disadvantages arising from the member's failure to notify of ID theft or failure to follow the company's guidance after notification." }, { "text": "5. Member IDs cannot be changed without prior consent from the company." } ] } }, { "id": "chapter-25", "type": "chapter", "number": "25", "title": "Protection of User Personal Information", "content": { "type": "list", "items": [ { "text": "The company strives to protect members' personal information, including member registration information, in accordance with relevant laws. The protection of members' personal information is governed by relevant laws and the company's 'Personal Information Processing Policy'. In particular, the company complies with the Act on Promotion of Information and Communications Network Utilization and Information Protection and other relevant laws regarding the collection, storage, processing, use, and protection of personal information." } ] } }, { "id": "chapter-26", "type": "chapter", "number": "26", "title": "Notice to Members", "content": { "type": "list", "items": [ { "text": "1. The company may send notices to members through email addresses registered by the members." }, { "text": "2. When sending notices to all members, the company may replace individual notices by posting on the service screen for more than one week." } ] } }, { "id": "chapter-27", "type": "chapter", "number": "27", "title": "Withdrawal of Service Usage Agreement, Contract Termination, Cancellation, and Usage Restrictions", "content": { "type": "list", "items": [ { "text": "1. Members may request termination of their service usage agreement at any time through the member information management screen, and the company shall process such requests according to prescribed procedures." }, { "text": "2. When a member's service usage agreement is terminated, all member data will be deleted, except for information that must be retained in accordance with relevant laws." }, { "text": "3. If a member violates the obligations under these terms, the company may restrict or suspend service usage or terminate the service usage agreement after giving notice." } ] } } ] }, { "id": "section-5", "type": "section", "number": "5", "title": "Miscellaneous", "chapters": [ { "id": "chapter-28", "type": "chapter", "number": "28", "title": "Posting of Terms and Conditions", "content": { "type": "list", "items": [ { "text": "1. The company shall post these terms and conditions within the service where members can easily view them." }, { "text": "2. The company may revise these terms and conditions to the extent not violating relevant laws such as the Act on the Regulation of Terms and Conditions, the Framework Act on Electronic Documents and Electronic Transactions, the Electronic Signature Act, the Act on Promotion of Information and Communications Network Utilization and Information Protection, the Act on Door-to-Door Sales, and the Electronic Commerce Act." }, { "text": "3. When the company revises the terms and conditions, it shall notify the effective date and reasons for revision at least 7 days prior to the effective date. However, when revising terms and conditions disadvantageous to members, the company shall notify at least 30 days in advance." }, { "text": "4. When the company notifies the revision of terms and conditions according to Paragraph 3 and the member does not express explicit intent to refuse within 7 days from the date of notice to the effective date of the revised terms and conditions, it shall be deemed that the member has agreed to the revision of the terms and conditions." } ] } }, { "id": "chapter-29", "type": "chapter", "number": "29", "title": "Dispute Resolution", "content": { "type": "list", "items": [ { "text": "1. The company shall establish and operate a grievance handling department to handle members' legitimate complaints and grievances regarding the service." }, { "text": "2. The company shall immediately process complaints or grievances raised by members. However, if immediate processing is difficult, the company shall notify the member of the reason and processing schedule." }, { "text": "3. For disputes arising from electronic transactions between the company and members, the Electronic Commerce Mediation Committee may be requested for mediation." } ] } }, { "id": "chapter-30", "type": "chapter", "number": "30", "title": "Jurisdiction and Governing Law", "content": { "type": "list", "items": [ { "text": "1. Lawsuits concerning disputes between the company and members shall be filed in the court having jurisdiction over the member's address at the time of filing the lawsuit. However, if the member's address is unknown at the time of filing the lawsuit, it shall be filed in the competent court according to the Civil Procedure Act." }, { "text": "2. The governing law for electronic transactions between the company and members shall be the laws of the Republic of Korea." } ] } } ] } ] } }
```

# priv/terms_of_services/v1.json

```json
{ "metadata": { "version": "3.0.0", "schemaVersion": "2024.2", "releaseDate": "2025-01-26", "effectiveDate": "2025-02-01", "language": "ko", "revisionHistory": [ { "version": "2.0.0", "date": "2025-01-26", "changes": "Content restructuring and enhanced accessibility features" }, { "version": "1.0.0", "date": "2025-01-13", "changes": "Initial release" } ], "availableLanguages": ["ko"], "accessibility": { "role": "document", "lang": "ko-KR", "ariaLabel": "서비스 이용약관", "structure": { "landmarks": true, "headings": true } }, "formatting": { "supported": ["text", "list", "link", "heading"], "schema": "https://schema.org/TermsOfService" } }, "document": { "index": { "type": "navigation", "title": "목차 및 빠른 링크", "subtitle": "주요 섹션", "items": [ { "id": "section-1", "title": "총칙", "ref": "#section-1" }, { "id": "section-2", "title": "서비스 이용 계약", "ref": "#section-2" }, { "id": "section-3", "title": "서비스 이용", "ref": "#section-3" }, { "id": "section-4", "title": "서비스 이용 대금", "ref": "#section-4" } ] }, "introduction": { "type": "section", "content": [ { "type": "text", "value": "여러분('회원')을 환영합니다. ingrey(이하 '서비스')을 이용해 주셔서 감사합니다. 본 약관은 다양한 ingrey 서비스의 이용과 관련하여 ingrey서비스를 제공하는 ingrey(이하 'ingrey')와 이를 이용하는 ingrey 서비스 회원(이하 '회원') 또는 비회원과의 관계를 설명하며, 아울러 여러분의 ingrey 서비스 이용에 도움이 될 수 있는 유익한 정보를 포함하고 있습니다." }, { "type": "text", "value": "ingrey 서비스를 이용하시거나 ingrey 서비스 회원으로 가입하실 경우 여러분은 본 약관 및 관련 운영 정책을 확인하거나 동의하게 되므로, 잠시 시간을 내시어 주의 깊게 살펴봐 주시기 바랍니다" } ] }, "third-party": [ { "type": "section", "title": "YouTube 서비스 약관", "link": { "text": "여기", "href": "https://policies.google.com/privacy", "value": "를 클릭하여 YouTube 서비스 약관에 대해 읽어보세요. YouTube API 클라이언트를 사용 하는 경우, 귀하는 YouTube 서비스 약관에 동의한 것으로 간주됩니다." } } ], "sections": [ { "id": "section-1", "type": "section", "number": "1", "title": "총칙", "chapters": [ { "id": "chapter-1", "type": "chapter", "number": "1", "title": "목적", "content": { "type": "text", "value": "이 약관은 회원이 ingrey(이하 '회사'라 합니다)에서 제공하는 사용자가 소셜 플랫폼에 게시물을 예약하여 업로드하고, 콘텐츠 분석 및 디자인 도구를 제공하여 소셜 미디어 콘텐츠를 강화할 수 있도록 돕는 소셜 미디어 관리 도구(웹, 모바일 웹•앱 서비스를 포함합니다.)인 00서비스(이하 '서비스'라 합니다) 및 00 관련 제반 서비스를 이용함에 있어 회원과 회사간의 권리, 의무 및 책임사항, 서비스 이용조건 및 절차 등 기본적인 사항을 규정함을 목적으로 합니다." } }, { "id": "chapter-2", "type": "chapter", "number": "2", "title": "약관의 효력 및 변경", "content": { "type": "list", "items": [ { "text": "1. 이 약관은 대한민국 내에서 서비스를 이용하고자 하는 모든 회원에 대하여 그 효력을 발생합니다. 한편, 회사가 해외 권리자 등과의 계약 체결을 통하여 해당 국가에서의 서비스가 가능한 경우 이 약관은 해당 국가 내에서 서비스를 이용하고자 하는 모든 회원에 대하여도 그 효력을 발생합니다." }, { "text": "2. 이 약관의 내용은 서비스 화면에 게시하거나 기타의 방법으로 회원에게 공시하고, 이에 동의한 회원이 서비스에 가입함으로써 효력이 발생합니다. 회사는 회원이 동의하기에 앞서 약관의 내용을 회원이 쉽게 이해하여 착오 없이 거래할 수 있도록 별도의 연결화면 또는 팝업화면 등을 제공하여 회원의 확인을 구합니다." }, { "text": "3. 회사는 필요하다고 인정하는 경우, “약관의규제에관한법률”, “정보통신망이용촉진및정보보호에관한법률”, “콘텐츠산업진흥법”, “전자상거래등에서의소비자보호에관한법률” 등 관련 법령을 위반하지 않는 범위에서 이 약관을 변경할 수 있으며, 회사가 약관을 변경하는 경우에는 적용일자 및 변경사유를 명시하여 그 적용일자 15일 전부터 서비스 사이트에 공지하고, 회원에게 불리한 약관의 변경의 경우 개정 내용을 회원이 알기 쉽게 표시하여 그 적용일자 30일 전부터 공지하며, 이메일 주소, 문자메시지 등으로 회원에게 개별 통지합니다. 회원의 연락처 변경 등으로 인하여 개별 통지가 어려운 경우, 회원이 등록한 연락처로 공지를 하였음에도 2회 이상 반송된 경우 이 약관에 의한 공지를 함으로써 개별 통지한 것으로 간주합니다." }, { "text": "4. 회사가 제3항에 따라 변경 약관을 공지 또는 통지하면서 회원에게 약관 변경 적용 일까지 거부의사를 표시하지 아니할 경우, 약관의 변경에 동의한 것으로 간주한다는 내용을 공지 또는 통지하였음에도 회원이 명시적으로 약관 변경에 대한 거부의사를 표시하지 아니하면, 회사는 회원이 변경 약관에 동의한 것으로 간주합니다." }, { "text": "5. 변경된 약관에 대하여 거부의사를 표시한 회원은 계약의 해지 또는 회원 탈퇴를 선택할 수 있습니다. 개별 이용권의 해지 효력과 관련하여서는 00 유료서비스 약관 관련 조항의 내용을 따릅니다." }, { "text": "6. 회사는 이 약관을 회원이 그 전부를 인쇄할 수 있고 확인할 수 있도록 필요한 기술적 조치를 취합니다." }, { "text": "7. 이 약관은 회원이 이 약관에 동의한 날로부터 회원 탈퇴 시까지 적용하는 것을 원칙으로 합니다. 단, 이 약관의 일부 조항은 회원이 탈퇴 후에도 유효하게 적용될 수 있습니다." } ] } }, { "id": "chapter-3", "type": "chapter", "number": "3", "title": "약관 외 준칙", "content": { "type": "text", "value": "이 약관에 명시되지 않은 사항은 콘텐츠산업진흥법, 전자상거래등에서의소비자보호에관한법률, 저작권법 등 관련 법령의 규정과 일반 상관례에 의합니다." } }, { "id": "chapter-4", "type": "chapter", "number": "4", "title": "용어의 정의", "content": { "type": "list", "items": [ { "text": "1. 이 약관에서 사용하는 용어의 정의는 다음과 같습니다.", "subItems": [ { "text": "1. 회원 : 서비스를 이용하기 위하여 서비스 사이트에 접속하여 이 약관에 동의하거나 기타 회사가 요청하는 절차를 거쳐 서비스 이용 계약을 체결하여 서비스를 이용하는 모든 고객" }, { "text": "2. 아이디(ID) : 회원 식별과 회원의 서비스 이용을 위하여 회원이 선정하고 회사가 승인하는 영문자와 숫자의 조합" }, { "text": "3. 비밀번호(PASSWORD) : 회원의 정보 보호를 위해 회원 자신이 설정한 문자와 숫자의 조합" }, { "text": "4. 닉네임(별명) : 회원이 아이디(ID) 외에 별도로 지정한 고유의 별도명칭" }, { "text": "5. 운영자 : 서비스의 전반적인 관리와 원활한 운영을 위하여 회사가 선정한 자" }, { "text": "6. 서비스 중지 : 정상 이용 중 회사가 정한 일정한 요건에 따라 서비스를 제공하는 것" }, { "text": "7. 문자메시지 인증 : 이동전화로 문자메시지 난수를 발송, 고객이 해당 번호를 사이트에 등록하도록 함으로써 회원 인증을 하는 것" } ] }, { "text": "2. 제1항에서 정하는 사항 이외의 약관 내 용어의 정의는 관계 법령 및 서비스 안내에서 정하는 바에 의합니다." } ] } } ] }, { "id": "section-2", "type": "section", "number": "2", "title": "서비스 이용 계약", "chapters": [ { "id": "chapter-5", "type": "chapter", "number": "5", "title": "유료서비스 이용계약의 성립", "content": { "type": "list", "items": [ { "text": "1. 이용자는 “회사”가 제공하는 다음 또는 이와 유사한 절차에 의하여 이용신청을 합니다.“회사”는 계약 체결 전에 각 호의 사항에 관하여 “이용자”가 정확하게 이해하고 실수 또는 착오 없이 거래할 수 있도록 정보 를 제공합니다.", "subItems": [ { "text": "⓵ 유료서비스의 내용 및 종류, 가격, 제공기간의 확인 및 선택" }, { "text": "⓶ 본인인증 정보(성명 휴대전화번호) 입력" }, { "text": "“유료서비스”의 이용신청 및 이용약관에 관한 확인 또는 “회사”의 확인에 대한 동의와 결제방법의 선택 및 결제정보의 입력" } ] }, { "text": "2. “회사”는 “이용자”의 이용신청이 다음 각 호에 해당하는 경우에는 승낙하지 않거나 승낙을 유보할 수 있습니다.", "subItems": [ { "text": "- 실명이 아니거나 타인의 명의를 이용한 경우" }, { "text": "- 허위의 정보를 기재하거나, “회사”가 제시하는 내용을 기재하지 않은 경우" }, { "text": "- 미성년자가 청소년보호법에 의해서 이용이 금지되는 “콘텐츠”를 이용하고자 하는 경우" }, { "text": "- 서비스 관련 설비의 여유가 없거나, 기술상 또는 업무상 문제가 있는 경우" } ] }, { "text": "3. “회사”의 승낙이 제14조 제1항의 수신확인통지형태로 “이용자”에게 도달한 시점에 계약이 성립한 것으로 봅니다." }, { "text": "4. “회사”의 승낙의 의사표시에는 “이용자”의 이용신청에 대한 확인 및 서비스제공 가능여부, 이용신청의 정정, 취소 등에 관한 정보 등을 포함합니다" } ] } }, { "id": "chapter-6", "type": "chapter", "number": "6", "title": "이용신청", "content": { "type": "list", "items": [ { "text": "1. 서비스의 대부분 기능에 접근하려면 계정을 등록해야합니다.", "subItems": [ { "text": "1. 이용자의 계정 및 비밀번호를 안전하게 관리할 책임은 전적으로 이용자에게 있습니다." }, { "text": "2. 계정 보안 위협이 발생하면 즉시 “회사”에 알려야 합니다." } ] }, { "text": "2. 이용신청은 서비스의 이용자 등록 화면에서 고객이 다음 사항을 가입신청 양식에 기록하는 방식으로 행합니다.", "subItems": [ { "text": "1. 성명" }, { "text": "2. 아이디(ID)" }, { "text": "3. 닉네임(별명)" }, { "text": "4. 비밀번호(Password)" }, { "text": "5. 생년월일" }, { "text": "6. 서비스 접속 국가" }, { "text": "7. 이메일(전자우편) 주소" }, { "text": "8. 기타 회사가 필요하다고 인정하는 사항" } ] } ] } }, { "id": "chapter-7", "type": "chapter", "number": "7", "title": "이용신청의 승낙", "content": { "type": "list", "items": [ { "text": "1. 회사는 제6조에서 정한 사항을 정확히 기재하고, 이메일 주소 승인 또는 문자메시지 인증 등 회사가 정한 인증 절차를 완료한 고객에 대하여 서비스 이용 신청을 승낙합니다." }, { "text": "2. 회사와 회원간 서비스 이용계약은 회사의 승낙이 회원에게 도달한 시점(유료서비스의 경우, ‘구매/결제완료’ 등의 표시가 회원에게 절차상 표시된 시점)에 성립합니다." }, { "text": "3. 회사는 이용자의 유료서비스 이용신청이 있는 경우 이용자에게 수취인통지를 합니다." }, { "text": "4. 수신확인통지를 받은 이용자는 의사표시의 불일치 등이 있는 경우에는 수신확인통지를 받은 즉시 유료서비스 이용신청 변경 및 취소를 요청할 수 있고, 회사는 유료서비스제공 전에 이용자의 요청이 있는 경우에는 지체없이 그 요청에 따라 처리하여야합니다. 다만, 이미 대금을 지불한 경우에는 청약철회 등에 관한 유료서비스 이용약관 4장의 규정에 따릅니다." } ] } }, { "id": "chapter-8", "type": "chapter", "number": "8", "title": "이용신청에 대한 승낙의 제한", "content": { "type": "list", "items": [ { "text": "1. 회사는 다음 각 호에 해당하는 사유가 발생할 경우 이용신청에 대한 승낙 또는 일정시간 동안 승낙을 유보하는 등 가입을 제한하거나, 사안의 경중에 따라서는 손해배상을 청구할 수 있습니다.", "subItems": [ { "text": "1. 회사의 업무상, 기술상의 사정으로 서비스 제공이 불가능한 경우" }, { "text": "2. 이용자 등록 사항을 누락하거나 오기하여 신청하는 경우, 허위서류를 첨부하는 경우 등 이용자의 귀책사유로 인하여 승인이 불가능한 경우" }, { "text": "3. 사회의 안녕, 질서 또는 미풍양속을 저해하거나, 저해할 목적으로 신청한 경우" }, { "text": "4. 만 14세 미만 아동의 경우" }, { "text": "<bold>제27조(계약해지 및 이용제한)</bold>에 의하여 이전에 회원 자격을 상실한 적이 있는 경우. 다만, 동 자격 상실 이후 1년 이상 경과한 자로 회사의 회원 재가입 승낙을 받은 경우는 예외로 합니다." }, { "text": "6. 서비스 이용 후 회원이 회사에 등록한 결제수단의 임의 해지 및 지급 정지, 지불 불능 등의 사유로 정당한 사유 없이 회사가 청구한 서비스 요금을 납부하지 아니한 경우" }, { "text": "7. 회사가 서비스 사업권 내지 저작권을 허락 받지 아니한 국가에 거주, 체류 중인 자이거나 동 국가에서 사이트에 접속하는 경우" }, { "text": "8. 범죄행위, 특정한 일정 기간 동안에 유료회원 가입, 해지를 반복하여 정상적인 용도 이외로 사용한 경우가 명백한 경우 등 회사의 서비스 방해 등의 사유로 회원자격 상실(탈퇴) 이력이 있는 경우" }, { "text": "9. 기타 회사가 정한 이용신청 요건이 만족되지 않았을 경우" } ] }, { "text": "2. <bold> 이용신청에 대한 승낙 후에 제1항 각호의 1에 해당하는 사유가 발견되는 경우, 회사는 이 약관에 따라 체결된 서비스 이용계약을 해지하거나 중단할 수 있습니다.</bold>" }, { "text": "3. 회사는 이용자의 자격 혹은 나이에 따라 서비스 이용의 일부가 제한될 수 있습니다.", "subItems": [ { "text": "1. 만19세 미만의 회원은(단, 만 19세에 도달하는 해의 1월 1일을 맞이한 자는 제외, 이하 본 조에서 동일함) 정보통신망이용촉진및정보보호등에관한법률 및 청소년보호법의규정에 의하여 청소년유해매체물은 이용할 수 없습니다." }, { "text": "2. 청소년 유해매체물을 이용하시기 위해서는 만 19세 이상의 회원이어야 하며, 정보통신망이용촉진및정보보호등에관한법률 및 청소년보호법의 규정에 의하여 실명인증을 통해 본인 및 연령 인증을 받으셔야 합니다. 인증을 받지 않으시면, 해당 서비스의 이용이 제한됩니다." } ] } ] } }, { "id": "chapter-9", "type": "chapter", "number": "9", "title": "서비스 이용 대금", "content": { "type": "text", "value": "“회사”는 제3자 소프트웨어 또는 서비스를 통합할 수 있으며, “이용자”는 해당 제3자 서비스 약관을 따를 책임이 있습니다." } }, { "id": "chapter-10", "type": "chapter", "number": "10", "title": "미성년자 회원가입에 대한 특치사항", "content": { "type": "list", "items": [ { "text": "1. 만 14세 미만의 “이용자”는 개인정보의 수집 및 이용목적에 대하여 충분히 숙지하고 부모 등 법정대리인의 동의를 얻은 후에 회원가입을 신청하고 본인의 개인정보를 제공하여야 합니다." }, { "text": "2. 회사는 부모 등 법정대리인의 동의에 대한 확인절차를 거치지 않은 만 14세 미만 이용자에 대하여는 가입을 취소 또는 불허합니다." }, { "text": "3. 만 14세 미만 “이용자”의 부모 등 법정대리인은 아동에 대한 개인정보의 열람, 정정, 갱신을 요청하거나 회원가입에 대한 동의를 철회할 수 있으며, 이러한 경우에 “회사”는 지체 없이 필요한 조치를 취해야 합니다." } ] } }, { "id": "chapter-11", "type": "chapter", "number": "11", "title": "계약 사항의 변경", "content": { "type": "text", "value": "회원은 이용신청 시 기재한 사항이 변경되었을 경우 회사가 정한 별도의 이용방법으로 정해진 양식 및 방법에 의하여 수정하여야 합니다." } } ] }, { "id": "section-3", "type": "section", "number": "3", "title": "서비스 이용", "chapters": [ { "id": "chapter-12", "type": "chapter", "number": "12", "title": "서비스의 이용 게시", "content": { "type": "list", "items": [ { "text": "1. 회사는 회원의 이용신청을 승낙한 때부터 서비스를 개시합니다. 단, 일부 서비스의 경우에는 지정된 일자부터 서비스를 개시하며, 유료서비스의 경우 회사가 지정하는 수단으로 결제가 완료된 후 이용 가능합니다." }, { "text": "2. 회사의 업무상 또는 기술상의 장애로 인하여 서비스를 개시하지 못하는 경우에는 사이트에 공시하거나 회원에게 이를 통지합니다." } ] } }, { "id": "chapter-13", "type": "chapter", "number": "13", "title": "서비스의 이용시간", "content": { "type": "list", "items": [ { "text": "1. 서비스의 이용은 연중무휴 1일 24시간을 원칙으로 합니다. 다만, 정기점검 등 회사의 업무상 또는 기술상의 이유로 서비스가 일시 중지될 수 있으며, 운영상의 목적으로 회사가 정한 기간에는 서비스가 일시 중지될 수 있습니다. 이러한 경우 회사는 원칙적으로 서비스의 일시 중지 사실 및 중지 기간을 사전에 공지하되, 이를 미리 공지할 수 없는 급박하거나 불가피한 사정이 있을 때에는 사후에 즉시 공지합니다." }, { "text": "2. 회사는 서비스를 일정범위로 분할하여 각 범위 별로 이용 가능한 시간을 별도로 정할 수 있으며 이 경우 그 내용을 공지합니다." } ] } }, { "id": "chapter-14", "type": "chapter", "number": "14", "title": "서비스의 변경 및 중지", "content": { "type": "list", "items": [ { "text": "1. 회사는 상당한 이유가 있는 경우 운영상, 기술상 필요에 따라 서비스를 변경할 수 있으며, 이 경우 변경될 서비스의 내용 및 제공일자를 제2조(약관의 효력 및 변경) 제3항에서 정한 방법으로 회원에게 통지합니다. 단 변경된 내용이 중대하거나 회원에게 불리한 경우에는 회사가 회원으로부터 이 약관 또는 00 유료서비스 약관에서 정한 방법으로 통지하고 동의를 받습니다." }, { "text": "2. 회사는 다음 각 호에 해당하는 경우 서비스의 전부 또는 일부를 일시적으로 제한하거나 중지할 수 있습니다.", "subItems": [ { "text": "1. 서비스용 설비의 보수 등 공사로 인한 부득이한 경우" }, { "text": "2. 회원이 의도적으로 일정기간 내 특정서비스의 가입 및 해지를 반복하는 등 회사의 정상적 영업 및 서비스 제공 활동을 방해하는 경우" }, { "text": "3. 정전, 제반 설비의 장애 또는 이용량의 폭주 등으로 정상적인 서비스 이용에 지장이 있는 경우" }, { "text": "4. 서비스 제공업자와의 계약 종료 등과 같은 회사의 제반 사정으로 서비스를 유지할 수 없는 경우" }, { "text": "5. 기타 천재지변, 국가비상사태, 방송통신위원회, 한국정보보호진흥원 등 국가기관, 정부조직, 수사기관, 법원 등의 행정ㆍ사법 처분 등 행정행위로 인한 서비스 중단 등 회사가 통제할 수 없는 불가항력적 사유가 있는 경우" } ] }, { "text": "3. 제2항에 의한 서비스 중단의 경우에는 회사가 제2조(약관의 효력 및 변경) 제3항에서 정한 방법으로 이용자에게 통지합니다. 다만, 미리 통지하는 것이 곤란하거나 급박하거나 불가피한 사정이 있는 경우에는 사후에 통지할 수 있습니다. " }, { "text": "4. 회사는 무료로 제공되는 서비스의 일부 또는 전부를 회사의 정책 및 운영의 필요상 수정, 중단, 변경할 수 있으며, 이에 대하여 회원에게 별도의 보상을 하지 않습니다." }, { "text": "5. 유료서비스의 정지 또는 중단과 관련한 제반 사항에 대하여는 00 유료서비스 약관 제00조를 적용합니다." } ] } }, { "id": "chapter-15", "type": "chapter", "number": "15", "title": "이메일에 대한 회원의 의무와 책임", "content": { "type": "list", "items": [ { "text": "1. 회사는 회원에게 사이트별로 이메일 서비스를 제공할 수 있습니다. 회사는 회원의 이메일 내용을 편집하거나 감시하지 않으며 메일 내용에 대한 책임은 각 회원에게 있습니다." }, { "text": "2. 회원은 회사의 이메일을 통하여 음란물이나 불온한 내용, 정크메일(Junk Mail), 스팸메일(Spam Mail), 행운의 편지(chain letters) 등을 발송하거나 피라미드 조직 등을 권유하거나 타인에게 피해를 주거나 미풍양속을 해치는 메일을 보내서는 안됩니다." }, { "text": "3. 본 조 제2항을 위반하여 발생되는 모든 책임은 회원에게 있으며 이 경우 회사는 관련 법령에 정한 절차에 따라 회원의 아이디(ID) 비밀번호(PASSWORD) 등 회원의 개인정보를 수사기관에 제공할 수 있습니다." } ] } }, { "id": "chapter-16", "type": "chapter", "number": "16", "title": "정보의 제공 및 광고의 게재", "content": { "type": "list", "items": [ { "text": "1. 회사는 서비스를 운영함에 있어 각종 정보나 광고 등을 서비스 화면에 게재하거나 이메일 및 서신우편, 문자메시지, 카카오톡 채널메시지 등의 방법으로 회원에게 제공할 수 있습니다." }, { "text": "2. 제1항과 관련하여 회원은 관련 법령에 따른 거래 관련 정보 및 고객 문의 등에 대한 답변 등을 제외하고는 언제든지 이메일 등에 대하여 수신을 거절할 수 있으며, 회사는 수신거절 방법을 명시합니다. 단, 회사는 관련 법령에 따라 동의 의무가 면제되는 거래관련 정보 및 고객 문의 사항 등을 제외한 광고 등을 전화, 모사전송기기 등을 통하여 회원에게 전송할 경우 회원의 사전 수신 동의를 받아서 전송합니다." }, { "text": "3. 회사가 서비스상에 게재되어 있는 광고에 관하여 영상, 이미지, 배너 등에서 제공된 경로를 통해 진행하는 이용자와 광고주 간의 모든 상호작용은 “이용자”와 광고주 사이의 문제로서 “회사”는 이와 관련하여 어떠한 책임도 지지 않습니다." } ] } }, { "id": "chapter-17", "type": "chapter", "number": "17", "title": "“회사”의 의무", "content": { "type": "list", "items": [ { "text": "1. “회사”는 법령과 이 약관이 정하는 권리의 행사와 의무의 이행을 신의에 좇아 성실하게 하여야 합니다." }, { "text": "2. “회사”는 “이용자”가 안전하게 서비스를 이용할 수 있도록 개인정보(신용정보 포함)보호를 위해 보안시스템을 갖추어야 하며 개인정보처리방침을 공시하고 준수합니다." }, { "text": "3. “회사”는 “이용자”가 서비스 이용 및 그 대금내역을 수시로 확인할 수 있도록 조치합니다." }, { "text": "4. “회사”는 서비스 이용과 관련하여 “이용자”로부터 제기된 의견이나 불만이 정당하다고 인정할 경우에는 이를 지체 없이 처리합니다. “이용자”가 제기한 의견이나 불만사항에 대해서는 게시판을 활용하거나 전자우 편 등을 통하여 그 처리과정 및 결과를 전달합니다." } ] } }, { "id": "chapter-18", "type": "chapter", "number": "18", "title": "“이용자”의 의무", "content": { "type": "list", "items": [ { "text": "1. “이용자”는 다음 행위를 하여서는 안됩니다.", "subItems": [ { "text": "신청 또는 변경 시 허위내용의 기재" }, { "text": "타인의 정보도용" }, { "text": "“회사”에 게시된 정보의 변경" }, { "text": "“회사”가 금지한 정보(컴퓨터 프로그램 등)의 송신 또는 게시" }, { "text": "“회사” 및 기타 제3자의 저작권 등 지적재산권에 대한 침해" }, { "text": "“회사” 및 기타 제3자의 명예를 손상시키거나 업무를 방해하는 행위" }, { "text": "외설 또는 폭력적인 말이나 글, 화상, 음향, 기타 공서양속에 반하는 정보를 “회사” 의 사이트에 공개, 게시, 전자우편 전송 또는 기타 방법으로 타인에 유포하는 행위" }, { "text": "“회사”의 사전승낙 없이 서비스를 이용하여 상품의 판매 등 영업활동을 하는 행위" }, { "text": "“회사”가 제공하는 “서비스”를 공공장소 및 영리를 목적으로 하는 영업장, 매장 등에서 공중에 대한 공개 재현용 등 사적인 이용을 벗어난 범위에서의 이용하는 행위 기타 불법적인 행위" } ] }, { "text": "2. “이용자”는 관계법령, 이 약관의 규정, 이용안내 및 서비스와 관련하여 공지한 주의사항, “회사”가 통지하는 사항 등을 준수하여야 하며, 기타 회사의 업무에 방해되는 행위를 하여서는 안됩니다." } ] } }, { "id": "chapter-19", "type": "chapter", "number": "19", "title": "제19조(유료서비스 약관)", "content": { "type": "text", "value": "서비스 이용을 위하여 유료서비스 약관등 별도의 약관이 존재할 수 있습니다. 추가되는 유료서비스에 따라 별도의 약관을 제정할 수 있으며, 이용약관과 00 유료서비스 약관의 내용이 상충될 경우 00유료서비스 약관이 우선 적용됩니다." } }, { "id": "chapter-20", "type": "chapter", "number": "20", "title": "서비스 이용 대금 지급방법", "content": { "type": "list", "items": [ { "text": "서비스의 이용에 대한 대금지급방법은 유료이용약관에서 정한 방법 중 가능한 방법으로 할 수 있습니다." }, { "text": "• 유료이용약관", "subItems": [ { "text": "모든 요금은 원화로 표시되며, 환불되지 않습니다." }, { "text": "“회사”는 요금 변경시 사전 고지를 통해 변경 사항을 안내합니다." }, { "text": "결제승인 - “이용자”가 계정에 지정된 결제 방법으로 “회사”가 요금을 청구할 권한을 부여합니다." }, { "text": "구독 - 구독 서비스는 자동결제가 포함됩니다.", "subItems": [ { "text": "구독 갱신 전에 취소하지 않으면 다음 요금이 청구됩니다." }, { "text": "취소는 웹사이트 또는 계정 설정에서 진행할 수 있습니다." } ] }, { "text": "연체계정 - 연체 계정은 서비스 이용이 정지되거나 종료될 수 있습니다." } ] } ] } }, { "id": "chapter-21", "type": "chapter", "number": "21", "title": "사용자 콘텐츠", "content": { "type": "list", "items": [ { "text": "“이용자”가 00서비스를 통해 업로드한 콘텐츠(“사용자콘텐츠”)에 대한 소유권은 유지되지만, 서비스를 제공하기 위해 “회사”에 특정 권한을 부여해야합니다." }, { "text": "“회사”에 제공한 라이선스", "subItems": [ { "text": "“이용자”는 사용자 콘텐츠를 저장, 표시, 재생산할 권리를 “회사”에 부여합니다." } ] }, { "text": "사용자 콘텐츠 제한", "subItems": [ { "text": "“이용자”는 제3자의 권리를 침해하거나 불법적, 비윤리적 콘텐츠를 업로드할 수 없습니다." } ] }, { "text": "“회사”의 권리", "subItems": [ { "text": "“회사”는 사용자 콘텐츠를 모니터링하거나 삭제할 권리를 보유합니다." }, { "text": "“회사”는 “회원”이 해지하거나 적법한 사유로 해지 된 경우, 해당 회원이 게시하였던 게시물을 삭제할 수 있습니다." } ] } ] } }, { "id": "chapter-22", "type": "chapter", "number": "22", "title": "개인정보보호", "content": { "type": "list", "items": [ { "text": "3. “회사”는 개인정보의 수집 • 이용, 제공 등 개인정보의 처리 및 보호와 관련하여 개인정보 보호법을 준수합니다." }, { "text": "4. “이용자”의 개인정보의 열람, 정정, 처리정지 등 “이용자”의 권리는 개인정보 보호법에 따라 보호받습니다." }, { "text": "5. “이용자”가 게시판, 메일, 채팅 등 온라인상에서 자발적으로 제공하는 “개인정보”는 다른 사람이 수집하여 사용할 가능성이 있으며 이러한 위험까지 “회사”가 부담하지는 않습니다." } ] } }, { "id": "chapter-23", "type": "chapter", "number": "23", "title": "광고 게재 및 광고주와의 거래", "content": { "type": "list", "items": [ { "text": "1. “회사”는 유무료 서비스 “이용자”들의 “콘텐츠” 재생 또는 이용 화면, 홈페이지 등에 광고를 게재할 수 있습니다." }, { "text": "2. 회원에게 최적화된 광고를 제공하기 위해 개인화 및 행동 기반 광고소재가 선택 및 제공될 수 있습니다." }, { "text": "3. 제2항의 개인화 및 행동 기반의 광고소재의 경우 회원의 사전 동의를 받은 경우에 한하여 제공합니다." }, { "text": "4. “회원”은 이용자정보관리화면에서 개인화 및 행동 기반 광고소재의 선택 및 제공에 대하여 거부할 수 있습니다. 거부하는 경우, 개인화 및 행동 기반 광고소재는 제공되지 않으나 광고 제공은 계속될 수 있습니다." }, { "text": "5. 본 서비스 상에 게재되어 있는 광고에 관하여 영상, 이미지, 배너 등에서 제공된 경로를 통해 진행하는 이용자와 광고주 간의 모든 상호작용은 “이용자”와 광고주 사이의 문제로서 “회사”는 이와 관련하여 어떠한 책임도 지지 않습니다." } ] } } ] }, { "id": "section-4", "type": "section", "number": "4", "title": "계약당사자의 의무", "chapters": [ { "id": "chapter-24", "type": "chapter", "number": "24", "title": "회원 아이디(ID)와 비밀번호(Password)관리에 대한 의무와 책임", "content": { "type": "list", "items": [ { "text": "1. 회사는 사이트 내에서 일부 서비스 신청 시 이용요금을 부과할 수 있으므로, 회원은 회원 아이디(ID) 및 비밀번호(Password) 관리를 철저히 해야 합니다." }, { "text": "2. 회원 아이디(ID)와 비밀번호(Password)의 관리 소홀로 인하여 발생하는 모든 결과에 대한 책임은 회원 본인에게 있으며, 회사의 시스템 고장 등 회사의 책임 있는 사유로 발생하는 문제에 대해서는 회사가 책임을 집니다. " }, { "text": "3. 회원은 본인의 아이디(ID) 및 비밀번호(Password)를 제3자에게 이용하게 해서는 안되며, 회원 본인의 아이디(ID) 및 비밀번호(Password)를 도난 당하거나 제3자가 사용하고 있음을 인지하는 경우에는 바로 회사에 통보하고 회사의 안내가 있는 경우 그에 따라야 합니다." }, { "text": "4. 제3항의 경우 해당 회원이 아이디(ID) 등의 도용 등의 사실을 통지하지 않거나, 통지한 경우에도 회사의 안내에 따르지 않아 발생한 불이익에 대하여는 회사는 책임을 지지 않습니다. " }, { "text": "5. 회원의 아이디(ID)는 회사의 사전 동의 없이 변경할 수 없습니다." } ] } }, { "id": "chapter-25", "type": "chapter", "number": "25", "title": "이용자의 개인정보보호", "content": { "type": "list", "items": [ { "text": "회사는 관련 법령이 정하는 바에 따라서 회원 등록정보를 포함한 회원의 개인정보를 보호하기 위하여 노력합니다. 회원의 개인정보보호에 관해서는 관련법령 및 회사가 정하는 “개인정보처리방침”에 정한 바에 의합니다. 특히, 회사는 정보통신망이용촉진및정보보호등에관한법률 등 관계 법령에 따라 회원의 사전 동의를 얻은 경우, 동의를 받은 범위 내에서 회원의 개인정보를 제3자에게 제공하며, 회사의 ‘개인정보침처리방침’에 그 절차와 방법 등에 대하여 상세히 기재하도록 합니다." }, { "text": "회사가 서비스 홈페이지를 통하여 게재, 공시하는 ‘개인정보침처리방침’은 이 약관의 일부를 구성하며, 회원은 이에 동의합니다." } ] } }, { "id": "chapter-26", "type": "chapter", "number": "26", "title": "개인정보의 수집, 제공 및 취급 위탁", "content": { "type": "text", "value": "회사는 수집된 개인정보의 취급 및 관리 등의 업무(이하 “업무”)를 스스로 수행함을 원칙으로 하나, 필요한 경우 업무의 일부 또는 전부를 회사가 선정한 제3자 등에게 위탁할 수 있으며, 개인정보의 취급 및 관리 등의 업무를 제3자 등에게 위탁하게 될 경우, 회사가 정하는 “개인정보처리방침”에 제반 사항을 기재하여 회원에게 고지, 안내하고 있습니다." } }, { "id": "chapter-27", "type": "chapter", "number": "27", "title": "서비스 이용계약의 청약철회, 계약해제, 해지 및 이용제한", "content": { "type": "list", "items": [ { "text": "1. “이용자”의 청약철회, 계약해제, 해지는 유료서비스 이용약관에 따릅니다." }, { "text": "2. 회원이 계약을 해지할 경우 관련 법령 및 회사의 개인정보 취급방침에 따라 회사가 회원정보를 보유하는 경우를 제외하고는 해지 즉시 회원의 모든 개인정보 및 데이터는 삭제되므로, 해지, 탈퇴 시 사전 확인하기 바라며, 이에 대하여 회사가 데이터 등의 삭제를 안내하였음에도 불구하고 회원이 개인 데이터의 보존 등 적절한 조치를 취하지 아니하는 경우에는 회사는 책임을 지지 않습니다." }, { "text": "3. 회사는 회원이 이용계약을 체결하여 아이디(ID)와 비밀번호(Password)를 부여 받은 후에라도 회원의 자격에 따른 서비스 이용을 제한할 수 있습니다." }, { "text": "4. 회사는 회원 가입 후 5년 이상 연속하여 서비스 사용 이력이 없는 회원에 대해 사용의사를 묻는 고지를 하고, 회사가 정한 기한 내에 답변이 없는 경우 이용계약을 해지할 수 있습니다." } ] } }, { "id": "chapter-28", "type": "chapter", "number": "28", "title": "양도 금지", "content": { "type": "text", "value": "회원은 서비스의 이용권한, 기타 이용 계약상 지위를 타인에게 양도, 증여할 수 없으며 게시물에 대한 저작권을 포함한 모든 권리 및 책임은 이를 게시한 회원에게 있습니다." } } ] }, { "id": "section-5", "type": "section", "number": "5", "title": "손해배상 등", "chapters": [ { "id": "chapter-29", "type": "chapter", "number": "29", "title": "손해 배상", "content": { "type": "list", "items": [ { "text": "1. 회사의 고의 또는 중대한 과실로 인하여 회원에게 손해가 발생한 경우 회사는 회원에게 실제 발생한 손해만을 배상합니다." }, { "text": "2. 회원이 서비스를 이용함에 있어 행한 불법행위나 이 약관 위반행위로 인하여 회사가 당해 회원 이외의 제3자로부터 손해배상 청구 또는 소송을 비롯한 각종 이의제기를 받는 경우 당해 회원은自己的 책임과 비용으로 회사를 면책하여야 하며, 회사가 면책되지 못한 경우 당해 회원은 그로 인하여 회사에 발생한 모든 손해를 배상하여야 합니다." } ] } }, { "id": "chapter-30", "type": "chapter", "number": "30", "title": "면책사항", "content": { "type": "list", "items": [ { "text": "1. 회사는 천재지변 또는 이에 준하는 불가항력으로 인하여 서비스의 이용이 불가능한 경우에는 서비스 제공에 관한 책임이 면제됩니다." }, { "text": "2. 회사는 회원의 귀책사유로 인한 서비스의 이용장애에 대하여 책임을 지지 않습니다." }, { "text": "3. 회사는 회원이 서비스를 이용하여 기대하는 수익을 상실한 것에 대하여 책임을 지지 않으며 그 밖에 서비스를 통하여 얻은 자료로 인한 손해 등에 대하여도 책임을 지지 않습니다. 회사는 회원이 사이트에 게재한 정보, 자료, 사실의 신뢰도 및 정확성 등 내용에 대하여는 책임을 지지 않습니다." }, { "text": "4. 회사는 회원 상호간 또는 회원과 제3자 상호간에 서비스를 매개로 발생한 분쟁에 대해서는 개입할 의무가 없으며 이로 인한 손해를 배상할 책임도 없습니다." } ] } }, { "id": "chapter-31", "type": "chapter", "number": "31", "title": "관할법원", "content": { "type": "list", "items": [ { "text": "1. 서비스 이용과 관련하여 회사와 회원 사이에 분쟁이 발생한 경우, 회사와 회원은 분쟁의 해결을 위해 성실히 협의하고, 협의가 안될 경우 콘텐츠산업진흥법상 콘텐츠분쟁조정위원회에 분쟁조정을 신청할 수 있습니다." }, { "text": "2. 본 조 제1항의 협의에서도 분쟁이 해결되지 않을 경우 양 당사자는 소를 제기할 수 있으며, 회사와 회원 간의 소의 관할은 제소 당시의 이용자의 주소에 의하고, 주소가 없는 경우 거소를 관할하는 지방법원의 전속 관할로 합니다." }, { "text": "3. 제소 당시 회원의 주소 또는 거소가 분명하지 않은 경우에는 민사소송법에 따라 관할법원을 정합니다." } ] } } ] } ] } }
```

# README.md

```md
# Phoenix Documentation Project A Phoenix-based project for creating and displaying documentation for various services and platforms. ## Features - **Phoenix Framework**: Built with Elixir and Phoenix for robustness and scalability - **LiveView**: Real-time updates without refreshing the page - **Documentation System**: Comprehensive markdown-based documentation for various services - **Responsive Design**: Fully responsive documentation UI that works across all device sizes ## Quick Start 1. **Setup Development Environment** \`\`\`bash # Install dependencies mix deps.get # Setup database mix ecto.setup # Install Node.js dependencies cd assets && npm install && cd .. # Start Phoenix server mix phx.server \`\`\` 2. Visit [`localhost:4000`](http://localhost:4000) in your browser ## Documentation This project contains documentation for various platforms: - [Claude-Code](docs/Claude-Code.md) - Documentation for Claude AI coding capabilities - [Cloudflare](docs/Cloudflare.md) - Cloudflare service documentation - [Instagram](docs/Instagram.md) - Instagram platform documentation - [LLC](docs/LLC.md) - LLC formation documentation - [TikTok](docs/Tiktok.md) - TikTok platform documentation - [YouTube](docs/Youtube.md) - YouTube platform documentation ## Development The documentation UI components have been improved with: - Fully responsive design across all device sizes - Proper handling of code blocks and tables with horizontal scrolling - Dynamic table of contents generation based on headings - Optimized content layout with better spacing - Enhanced visual indicators for scrollable content ## Project Structure The project follows the standard Phoenix structure with the following key directories: - `assets/` - Frontend assets (CSS, JS) - `config/` - Application configuration - `docs/` - Markdown documentation files - `lib/` - Elixir source code - `priv/` - Private application files - `test/` - Test files ## Contributing We welcome contributions to our documentation! Please see our guidelines for details. ## License This project is licensed under the MIT License - see the LICENSE file for details. ## Learn More - [Phoenix Framework](https://www.phoenixframework.org/) - [Phoenix LiveView](https://hexdocs.pm/phoenix_live_view) - [Elixir Language](https://elixir-lang.org/)
```

# rel/env.sh.eex

```eex
#!/bin/sh # configure node for distributed erlang with IPV6 support export ERL_AFLAGS="-proto_dist inet6_tcp" export ECTO_IPV6="true" export DNS_CLUSTER_QUERY="${FLY_APP_NAME}.internal" export RELEASE_DISTRIBUTION="name" export RELEASE_NODE="${FLY_APP_NAME}-${FLY_IMAGE_REF##*-}@${FLY_PRIVATE_IP}" # Uncomment to send crash dumps to stderr # This can be useful for debugging, but may log sensitive information # export ERL_CRASH_DUMP=/dev/stderr # export ERL_CRASH_DUMP_BYTES=4096
```

# test_markdown.exs

```exs
# First, test available docs IO.puts("Testing the MarkdownRenderer:") docs = Myapp.MarkdownRenderer.get_available_docs() IO.puts("Available docs: #{inspect(docs)}") # Then, test rendering LLC.md llc_path = Myapp.MarkdownRenderer.get_doc_path("LLC") IO.puts("LLC document path: #{llc_path}") case Myapp.MarkdownRenderer.render_markdown_file(llc_path) do {:ok, html_content} -> IO.puts("Successfully rendered LLC.md to HTML") IO.puts("First 100 characters: #{String.slice(html_content, 0..100)}") {:error, reason} -> IO.puts("Error rendering LLC.md: #{reason}") end
```

# test/myapp_web/channels/chat_channel_test.exs

```exs
defmodule MyappWeb.ChatChannelTest do use MyappWeb.ChannelCase setup do {:ok, _, socket} = MyappWeb.UserSocket |> socket("user_id", %{some: :assign}) |> subscribe_and_join(MyappWeb.ChatChannel, "chat:lobby") %{socket: socket} end test "ping replies with status ok", %{socket: socket} do ref = push(socket, "ping", %{"hello" => "there"}) assert_reply ref, :ok, %{"hello" => "there"} end test "shout broadcasts to chat:lobby", %{socket: socket} do push(socket, "shout", %{"hello" => "all"}) assert_broadcast "shout", %{"hello" => "all"} end test "broadcasts are pushed to the client", %{socket: socket} do broadcast_from!(socket, "broadcast", %{"some" => "data"}) assert_push "broadcast", %{"some" => "data"} end end
```

# test/myapp_web/controllers/error_html_test.exs

```exs
defmodule MyappWeb.ErrorHTMLTest do use MyappWeb.ConnCase, async: true # Bring render_to_string/4 for testing custom views import Phoenix.Template test "renders 404.html" do assert render_to_string(MyappWeb.ErrorHTML, "404", "html", []) == "Not Found" end test "renders 500.html" do assert render_to_string(MyappWeb.ErrorHTML, "500", "html", []) == "Internal Server Error" end end
```

# test/myapp_web/controllers/error_json_test.exs

```exs
defmodule MyappWeb.ErrorJSONTest do use MyappWeb.ConnCase, async: true test "renders 404" do assert MyappWeb.ErrorJSON.render("404.json", %{}) == %{errors: %{detail: "Not Found"}} end test "renders 500" do assert MyappWeb.ErrorJSON.render("500.json", %{}) == %{errors: %{detail: "Internal Server Error"}} end end
```

# test/myapp_web/controllers/page_controller_test.exs

```exs
defmodule MyappWeb.PageControllerTest do use MyappWeb.ConnCase test "GET /", %{conn: conn} do conn = get(conn, ~p"/") assert html_response(conn, 200) =~ "Peace of mind from prototype to production" end end
```

# test/myapp_web/controllers/user_session_controller_test.exs

```exs
defmodule MyappWeb.UserSessionControllerTest do use MyappWeb.ConnCase, async: true import Myapp.AccountsFixtures setup do %{user: user_fixture()} end describe "POST /users/log_in" do test "logs the user in", %{conn: conn, user: user} do conn = post(conn, ~p"/users/log_in", %{ "user" => %{"email" => user.email, "password" => valid_user_password()} }) assert get_session(conn, :user_token) assert redirected_to(conn) == ~p"/" # Now do a logged in request and assert on the menu conn = get(conn, ~p"/") response = html_response(conn, 200) assert response =~ user.email assert response =~ ~p"/users/settings" assert response =~ ~p"/users/log_out" end test "logs the user in with remember me", %{conn: conn, user: user} do conn = post(conn, ~p"/users/log_in", %{ "user" => %{ "email" => user.email, "password" => valid_user_password(), "remember_me" => "true" } }) assert conn.resp_cookies["_myapp_web_user_remember_me"] assert redirected_to(conn) == ~p"/" end test "logs the user in with return to", %{conn: conn, user: user} do conn = conn |> init_test_session(user_return_to: "/foo/bar") |> post(~p"/users/log_in", %{ "user" => %{ "email" => user.email, "password" => valid_user_password() } }) assert redirected_to(conn) == "/foo/bar" assert Phoenix.Flash.get(conn.assigns.flash, :info) =~ "Welcome back!" end test "login following registration", %{conn: conn, user: user} do conn = conn |> post(~p"/users/log_in", %{ "_action" => "registered", "user" => %{ "email" => user.email, "password" => valid_user_password() } }) assert redirected_to(conn) == ~p"/" assert Phoenix.Flash.get(conn.assigns.flash, :info) =~ "Account created successfully" end test "login following password update", %{conn: conn, user: user} do conn = conn |> post(~p"/users/log_in", %{ "_action" => "password_updated", "user" => %{ "email" => user.email, "password" => valid_user_password() } }) assert redirected_to(conn) == ~p"/users/settings" assert Phoenix.Flash.get(conn.assigns.flash, :info) =~ "Password updated successfully" end test "redirects to login page with invalid credentials", %{conn: conn} do conn = post(conn, ~p"/users/log_in", %{ "user" => %{"email" => "invalid@email.com", "password" => "invalid_password"} }) assert Phoenix.Flash.get(conn.assigns.flash, :error) == "Invalid email or password" assert redirected_to(conn) == ~p"/users/log_in" end end describe "DELETE /users/log_out" do test "logs the user out", %{conn: conn, user: user} do conn = conn |> log_in_user(user) |> delete(~p"/users/log_out") assert redirected_to(conn) == ~p"/" refute get_session(conn, :user_token) assert Phoenix.Flash.get(conn.assigns.flash, :info) =~ "Logged out successfully" end test "succeeds even if the user is not logged in", %{conn: conn} do conn = delete(conn, ~p"/users/log_out") assert redirected_to(conn) == ~p"/" refute get_session(conn, :user_token) assert Phoenix.Flash.get(conn.assigns.flash, :info) =~ "Logged out successfully" end end end
```

# test/myapp_web/live/user_confirmation_instructions_live_test.exs

```exs
defmodule MyappWeb.UserConfirmationInstructionsLiveTest do use MyappWeb.ConnCase, async: true import Phoenix.LiveViewTest import Myapp.AccountsFixtures alias Myapp.Accounts alias Myapp.Repo setup do %{user: user_fixture()} end describe "Resend confirmation" do test "renders the resend confirmation page", %{conn: conn} do {:ok, _lv, html} = live(conn, ~p"/users/confirm") assert html =~ "Resend confirmation instructions" end test "sends a new confirmation token", %{conn: conn, user: user} do {:ok, lv, _html} = live(conn, ~p"/users/confirm") {:ok, conn} = lv |> form("#resend_confirmation_form", user: %{email: user.email}) |> render_submit() |> follow_redirect(conn, ~p"/") assert Phoenix.Flash.get(conn.assigns.flash, :info) =~ "If your email is in our system" assert Repo.get_by!(Accounts.UserToken, user_id: user.id).context == "confirm" end test "does not send confirmation token if user is confirmed", %{conn: conn, user: user} do Repo.update!(Accounts.User.confirm_changeset(user)) {:ok, lv, _html} = live(conn, ~p"/users/confirm") {:ok, conn} = lv |> form("#resend_confirmation_form", user: %{email: user.email}) |> render_submit() |> follow_redirect(conn, ~p"/") assert Phoenix.Flash.get(conn.assigns.flash, :info) =~ "If your email is in our system" refute Repo.get_by(Accounts.UserToken, user_id: user.id) end test "does not send confirmation token if email is invalid", %{conn: conn} do {:ok, lv, _html} = live(conn, ~p"/users/confirm") {:ok, conn} = lv |> form("#resend_confirmation_form", user: %{email: "unknown@example.com"}) |> render_submit() |> follow_redirect(conn, ~p"/") assert Phoenix.Flash.get(conn.assigns.flash, :info) =~ "If your email is in our system" assert Repo.all(Accounts.UserToken) == [] end end end
```

# test/myapp_web/live/user_confirmation_live_test.exs

```exs
defmodule MyappWeb.UserConfirmationLiveTest do use MyappWeb.ConnCase, async: true import Phoenix.LiveViewTest import Myapp.AccountsFixtures alias Myapp.Accounts alias Myapp.Repo setup do %{user: user_fixture()} end describe "Confirm user" do test "renders confirmation page", %{conn: conn} do {:ok, _lv, html} = live(conn, ~p"/users/confirm/some-token") assert html =~ "Confirm Account" end test "confirms the given token once", %{conn: conn, user: user} do token = extract_user_token(fn url -> Accounts.deliver_user_confirmation_instructions(user, url) end) {:ok, lv, _html} = live(conn, ~p"/users/confirm/#{token}") result = lv |> form("#confirmation_form") |> render_submit() |> follow_redirect(conn, "/") assert {:ok, conn} = result assert Phoenix.Flash.get(conn.assigns.flash, :info) =~ "User confirmed successfully" assert Accounts.get_user!(user.id).confirmed_at refute get_session(conn, :user_token) assert Repo.all(Accounts.UserToken) == [] # when not logged in {:ok, lv, _html} = live(conn, ~p"/users/confirm/#{token}") result = lv |> form("#confirmation_form") |> render_submit() |> follow_redirect(conn, "/") assert {:ok, conn} = result assert Phoenix.Flash.get(conn.assigns.flash, :error) =~ "User confirmation link is invalid or it has expired" # when logged in conn = build_conn() |> log_in_user(user) {:ok, lv, _html} = live(conn, ~p"/users/confirm/#{token}") result = lv |> form("#confirmation_form") |> render_submit() |> follow_redirect(conn, "/") assert {:ok, conn} = result refute Phoenix.Flash.get(conn.assigns.flash, :error) end test "does not confirm email with invalid token", %{conn: conn, user: user} do {:ok, lv, _html} = live(conn, ~p"/users/confirm/invalid-token") {:ok, conn} = lv |> form("#confirmation_form") |> render_submit() |> follow_redirect(conn, ~p"/") assert Phoenix.Flash.get(conn.assigns.flash, :error) =~ "User confirmation link is invalid or it has expired" refute Accounts.get_user!(user.id).confirmed_at end end end
```

# test/myapp_web/live/user_forgot_password_live_test.exs

```exs
defmodule MyappWeb.UserForgotPasswordLiveTest do use MyappWeb.ConnCase, async: true import Phoenix.LiveViewTest import Myapp.AccountsFixtures alias Myapp.Accounts alias Myapp.Repo describe "Forgot password page" do test "renders email page", %{conn: conn} do {:ok, lv, html} = live(conn, ~p"/users/reset_password") assert html =~ "Forgot your password?" assert has_element?(lv, ~s|a[href="#{~p"/users/register"}"]|, "Register") assert has_element?(lv, ~s|a[href="#{~p"/users/log_in"}"]|, "Log in") end test "redirects if already logged in", %{conn: conn} do result = conn |> log_in_user(user_fixture()) |> live(~p"/users/reset_password") |> follow_redirect(conn, ~p"/") assert {:ok, _conn} = result end end describe "Reset link" do setup do %{user: user_fixture()} end test "sends a new reset password token", %{conn: conn, user: user} do {:ok, lv, _html} = live(conn, ~p"/users/reset_password") {:ok, conn} = lv |> form("#reset_password_form", user: %{"email" => user.email}) |> render_submit() |> follow_redirect(conn, "/") assert Phoenix.Flash.get(conn.assigns.flash, :info) =~ "If your email is in our system" assert Repo.get_by!(Accounts.UserToken, user_id: user.id).context == "reset_password" end test "does not send reset password token if email is invalid", %{conn: conn} do {:ok, lv, _html} = live(conn, ~p"/users/reset_password") {:ok, conn} = lv |> form("#reset_password_form", user: %{"email" => "unknown@example.com"}) |> render_submit() |> follow_redirect(conn, "/") assert Phoenix.Flash.get(conn.assigns.flash, :info) =~ "If your email is in our system" assert Repo.all(Accounts.UserToken) == [] end end end
```

# test/myapp_web/live/user_login_live_test.exs

```exs
defmodule MyappWeb.UserLoginLiveTest do use MyappWeb.ConnCase, async: true import Phoenix.LiveViewTest import Myapp.AccountsFixtures describe "Log in page" do test "renders log in page", %{conn: conn} do {:ok, _lv, html} = live(conn, ~p"/users/log_in") assert html =~ "Log in" assert html =~ "Register" assert html =~ "Forgot your password?" end test "redirects if already logged in", %{conn: conn} do result = conn |> log_in_user(user_fixture()) |> live(~p"/users/log_in") |> follow_redirect(conn, "/") assert {:ok, _conn} = result end end describe "user login" do test "redirects if user login with valid credentials", %{conn: conn} do password = "123456789abcd" user = user_fixture(%{password: password}) {:ok, lv, _html} = live(conn, ~p"/users/log_in") form = form(lv, "#login_form", user: %{email: user.email, password: password, remember_me: true}) conn = submit_form(form, conn) assert redirected_to(conn) == ~p"/" end test "redirects to login page with a flash error if there are no valid credentials", %{ conn: conn } do {:ok, lv, _html} = live(conn, ~p"/users/log_in") form = form(lv, "#login_form", user: %{email: "test@email.com", password: "123456", remember_me: true} ) conn = submit_form(form, conn) assert Phoenix.Flash.get(conn.assigns.flash, :error) == "Invalid email or password" assert redirected_to(conn) == "/users/log_in" end end describe "login navigation" do test "redirects to registration page when the Register button is clicked", %{conn: conn} do {:ok, lv, _html} = live(conn, ~p"/users/log_in") {:ok, _login_live, login_html} = lv |> element(~s|main a:fl-contains("Sign up")|) |> render_click() |> follow_redirect(conn, ~p"/users/register") assert login_html =~ "Register" end test "redirects to forgot password page when the Forgot Password button is clicked", %{ conn: conn } do {:ok, lv, _html} = live(conn, ~p"/users/log_in") {:ok, conn} = lv |> element(~s|main a:fl-contains("Forgot your password?")|) |> render_click() |> follow_redirect(conn, ~p"/users/reset_password") assert conn.resp_body =~ "Forgot your password?" end end end
```

# test/myapp_web/live/user_registration_live_test.exs

```exs
defmodule MyappWeb.UserRegistrationLiveTest do use MyappWeb.ConnCase, async: true import Phoenix.LiveViewTest import Myapp.AccountsFixtures describe "Registration page" do test "renders registration page", %{conn: conn} do {:ok, _lv, html} = live(conn, ~p"/users/register") assert html =~ "Register" assert html =~ "Log in" end test "redirects if already logged in", %{conn: conn} do result = conn |> log_in_user(user_fixture()) |> live(~p"/users/register") |> follow_redirect(conn, "/") assert {:ok, _conn} = result end test "renders errors for invalid data", %{conn: conn} do {:ok, lv, _html} = live(conn, ~p"/users/register") result = lv |> element("#registration_form") |> render_change(user: %{"email" => "with spaces", "password" => "too short"}) assert result =~ "Register" assert result =~ "must have the @ sign and no spaces" assert result =~ "should be at least 12 character" end end describe "register user" do test "creates account and logs the user in", %{conn: conn} do {:ok, lv, _html} = live(conn, ~p"/users/register") email = unique_user_email() form = form(lv, "#registration_form", user: valid_user_attributes(email: email)) render_submit(form) conn = follow_trigger_action(form, conn) assert redirected_to(conn) == ~p"/" # Now do a logged in request and assert on the menu conn = get(conn, "/") response = html_response(conn, 200) assert response =~ email assert response =~ "Settings" assert response =~ "Log out" end test "renders errors for duplicated email", %{conn: conn} do {:ok, lv, _html} = live(conn, ~p"/users/register") user = user_fixture(%{email: "test@email.com"}) result = lv |> form("#registration_form", user: %{"email" => user.email, "password" => "valid_password"} ) |> render_submit() assert result =~ "has already been taken" end end describe "registration navigation" do test "redirects to login page when the Log in button is clicked", %{conn: conn} do {:ok, lv, _html} = live(conn, ~p"/users/register") {:ok, _login_live, login_html} = lv |> element(~s|main a:fl-contains("Log in")|) |> render_click() |> follow_redirect(conn, ~p"/users/log_in") assert login_html =~ "Log in" end end end
```

# test/myapp_web/live/user_reset_password_live_test.exs

```exs
defmodule MyappWeb.UserResetPasswordLiveTest do use MyappWeb.ConnCase, async: true import Phoenix.LiveViewTest import Myapp.AccountsFixtures alias Myapp.Accounts setup do user = user_fixture() token = extract_user_token(fn url -> Accounts.deliver_user_reset_password_instructions(user, url) end) %{token: token, user: user} end describe "Reset password page" do test "renders reset password with valid token", %{conn: conn, token: token} do {:ok, _lv, html} = live(conn, ~p"/users/reset_password/#{token}") assert html =~ "Reset Password" end test "does not render reset password with invalid token", %{conn: conn} do {:error, {:redirect, to}} = live(conn, ~p"/users/reset_password/invalid") assert to == %{ flash: %{"error" => "Reset password link is invalid or it has expired."}, to: ~p"/" } end test "renders errors for invalid data", %{conn: conn, token: token} do {:ok, lv, _html} = live(conn, ~p"/users/reset_password/#{token}") result = lv |> element("#reset_password_form") |> render_change( user: %{"password" => "secret12", "password_confirmation" => "secret123456"} ) assert result =~ "should be at least 12 character" assert result =~ "does not match password" end end describe "Reset Password" do test "resets password once", %{conn: conn, token: token, user: user} do {:ok, lv, _html} = live(conn, ~p"/users/reset_password/#{token}") {:ok, conn} = lv |> form("#reset_password_form", user: %{ "password" => "new valid password", "password_confirmation" => "new valid password" } ) |> render_submit() |> follow_redirect(conn, ~p"/users/log_in") refute get_session(conn, :user_token) assert Phoenix.Flash.get(conn.assigns.flash, :info) =~ "Password reset successfully" assert Accounts.get_user_by_email_and_password(user.email, "new valid password") end test "does not reset password on invalid data", %{conn: conn, token: token} do {:ok, lv, _html} = live(conn, ~p"/users/reset_password/#{token}") result = lv |> form("#reset_password_form", user: %{ "password" => "too short", "password_confirmation" => "does not match" } ) |> render_submit() assert result =~ "Reset Password" assert result =~ "should be at least 12 character(s)" assert result =~ "does not match password" end end describe "Reset password navigation" do test "redirects to login page when the Log in button is clicked", %{conn: conn, token: token} do {:ok, lv, _html} = live(conn, ~p"/users/reset_password/#{token}") {:ok, conn} = lv |> element(~s|main a:fl-contains("Log in")|) |> render_click() |> follow_redirect(conn, ~p"/users/log_in") assert conn.resp_body =~ "Log in" end test "redirects to registration page when the Register button is clicked", %{ conn: conn, token: token } do {:ok, lv, _html} = live(conn, ~p"/users/reset_password/#{token}") {:ok, conn} = lv |> element(~s|main a:fl-contains("Register")|) |> render_click() |> follow_redirect(conn, ~p"/users/register") assert conn.resp_body =~ "Register" end end end
```

# test/myapp_web/live/user_settings_live_test.exs

```exs
defmodule MyappWeb.UserSettingsLiveTest do use MyappWeb.ConnCase, async: true alias Myapp.Accounts import Phoenix.LiveViewTest import Myapp.AccountsFixtures describe "Settings page" do test "renders settings page", %{conn: conn} do {:ok, _lv, html} = conn |> log_in_user(user_fixture()) |> live(~p"/users/settings") assert html =~ "Change Email" assert html =~ "Change Password" end test "redirects if user is not logged in", %{conn: conn} do assert {:error, redirect} = live(conn, ~p"/users/settings") assert {:redirect, %{to: path, flash: flash}} = redirect assert path == ~p"/users/log_in" assert %{"error" => "You must log in to access this page."} = flash end end describe "update email form" do setup %{conn: conn} do password = valid_user_password() user = user_fixture(%{password: password}) %{conn: log_in_user(conn, user), user: user, password: password} end test "updates the user email", %{conn: conn, password: password, user: user} do new_email = unique_user_email() {:ok, lv, _html} = live(conn, ~p"/users/settings") result = lv |> form("#email_form", %{ "current_password" => password, "user" => %{"email" => new_email} }) |> render_submit() assert result =~ "A link to confirm your email" assert Accounts.get_user_by_email(user.email) end test "renders errors with invalid data (phx-change)", %{conn: conn} do {:ok, lv, _html} = live(conn, ~p"/users/settings") result = lv |> element("#email_form") |> render_change(%{ "action" => "update_email", "current_password" => "invalid", "user" => %{"email" => "with spaces"} }) assert result =~ "Change Email" assert result =~ "must have the @ sign and no spaces" end test "renders errors with invalid data (phx-submit)", %{conn: conn, user: user} do {:ok, lv, _html} = live(conn, ~p"/users/settings") result = lv |> form("#email_form", %{ "current_password" => "invalid", "user" => %{"email" => user.email} }) |> render_submit() assert result =~ "Change Email" assert result =~ "did not change" assert result =~ "is not valid" end end describe "update password form" do setup %{conn: conn} do password = valid_user_password() user = user_fixture(%{password: password}) %{conn: log_in_user(conn, user), user: user, password: password} end test "updates the user password", %{conn: conn, user: user, password: password} do new_password = valid_user_password() {:ok, lv, _html} = live(conn, ~p"/users/settings") form = form(lv, "#password_form", %{ "current_password" => password, "user" => %{ "email" => user.email, "password" => new_password, "password_confirmation" => new_password } }) render_submit(form) new_password_conn = follow_trigger_action(form, conn) assert redirected_to(new_password_conn) == ~p"/users/settings" assert get_session(new_password_conn, :user_token) != get_session(conn, :user_token) assert Phoenix.Flash.get(new_password_conn.assigns.flash, :info) =~ "Password updated successfully" assert Accounts.get_user_by_email_and_password(user.email, new_password) end test "renders errors with invalid data (phx-change)", %{conn: conn} do {:ok, lv, _html} = live(conn, ~p"/users/settings") result = lv |> element("#password_form") |> render_change(%{ "current_password" => "invalid", "user" => %{ "password" => "too short", "password_confirmation" => "does not match" } }) assert result =~ "Change Password" assert result =~ "should be at least 12 character(s)" assert result =~ "does not match password" end test "renders errors with invalid data (phx-submit)", %{conn: conn} do {:ok, lv, _html} = live(conn, ~p"/users/settings") result = lv |> form("#password_form", %{ "current_password" => "invalid", "user" => %{ "password" => "too short", "password_confirmation" => "does not match" } }) |> render_submit() assert result =~ "Change Password" assert result =~ "should be at least 12 character(s)" assert result =~ "does not match password" assert result =~ "is not valid" end end describe "confirm email" do setup %{conn: conn} do user = user_fixture() email = unique_user_email() token = extract_user_token(fn url -> Accounts.deliver_user_update_email_instructions(%{user | email: email}, user.email, url) end) %{conn: log_in_user(conn, user), token: token, email: email, user: user} end test "updates the user email once", %{conn: conn, user: user, token: token, email: email} do {:error, redirect} = live(conn, ~p"/users/settings/confirm_email/#{token}") assert {:live_redirect, %{to: path, flash: flash}} = redirect assert path == ~p"/users/settings" assert %{"info" => message} = flash assert message == "Email changed successfully." refute Accounts.get_user_by_email(user.email) assert Accounts.get_user_by_email(email) # use confirm token again {:error, redirect} = live(conn, ~p"/users/settings/confirm_email/#{token}") assert {:live_redirect, %{to: path, flash: flash}} = redirect assert path == ~p"/users/settings" assert %{"error" => message} = flash assert message == "Email change link is invalid or it has expired." end test "does not update email with invalid token", %{conn: conn, user: user} do {:error, redirect} = live(conn, ~p"/users/settings/confirm_email/oops") assert {:live_redirect, %{to: path, flash: flash}} = redirect assert path == ~p"/users/settings" assert %{"error" => message} = flash assert message == "Email change link is invalid or it has expired." assert Accounts.get_user_by_email(user.email) end test "redirects if user is not logged in", %{token: token} do conn = build_conn() {:error, redirect} = live(conn, ~p"/users/settings/confirm_email/#{token}") assert {:redirect, %{to: path, flash: flash}} = redirect assert path == ~p"/users/log_in" assert %{"error" => message} = flash assert message == "You must log in to access this page." end end end
```

# test/myapp_web/user_auth_test.exs

```exs
defmodule MyappWeb.UserAuthTest do use MyappWeb.ConnCase, async: true alias Phoenix.LiveView alias Myapp.Accounts alias MyappWeb.UserAuth import Myapp.AccountsFixtures @remember_me_cookie "_myapp_web_user_remember_me" setup %{conn: conn} do conn = conn |> Map.replace!(:secret_key_base, MyappWeb.Endpoint.config(:secret_key_base)) |> init_test_session(%{}) %{user: user_fixture(), conn: conn} end describe "log_in_user/3" do test "stores the user token in the session", %{conn: conn, user: user} do conn = UserAuth.log_in_user(conn, user) assert token = get_session(conn, :user_token) assert get_session(conn, :live_socket_id) == "users_sessions:#{Base.url_encode64(token)}" assert redirected_to(conn) == ~p"/" assert Accounts.get_user_by_session_token(token) end test "clears everything previously stored in the session", %{conn: conn, user: user} do conn = conn |> put_session(:to_be_removed, "value") |> UserAuth.log_in_user(user) refute get_session(conn, :to_be_removed) end test "redirects to the configured path", %{conn: conn, user: user} do conn = conn |> put_session(:user_return_to, "/hello") |> UserAuth.log_in_user(user) assert redirected_to(conn) == "/hello" end test "writes a cookie if remember_me is configured", %{conn: conn, user: user} do conn = conn |> fetch_cookies() |> UserAuth.log_in_user(user, %{"remember_me" => "true"}) assert get_session(conn, :user_token) == conn.cookies[@remember_me_cookie] assert %{value: signed_token, max_age: max_age} = conn.resp_cookies[@remember_me_cookie] assert signed_token != get_session(conn, :user_token) assert max_age == 5_184_000 end end describe "logout_user/1" do test "erases session and cookies", %{conn: conn, user: user} do user_token = Accounts.generate_user_session_token(user) conn = conn |> put_session(:user_token, user_token) |> put_req_cookie(@remember_me_cookie, user_token) |> fetch_cookies() |> UserAuth.log_out_user() refute get_session(conn, :user_token) refute conn.cookies[@remember_me_cookie] assert %{max_age: 0} = conn.resp_cookies[@remember_me_cookie] assert redirected_to(conn) == ~p"/" refute Accounts.get_user_by_session_token(user_token) end test "broadcasts to the given live_socket_id", %{conn: conn} do live_socket_id = "users_sessions:abcdef-token" MyappWeb.Endpoint.subscribe(live_socket_id) conn |> put_session(:live_socket_id, live_socket_id) |> UserAuth.log_out_user() assert_receive %Phoenix.Socket.Broadcast{event: "disconnect", topic: ^live_socket_id} end test "works even if user is already logged out", %{conn: conn} do conn = conn |> fetch_cookies() |> UserAuth.log_out_user() refute get_session(conn, :user_token) assert %{max_age: 0} = conn.resp_cookies[@remember_me_cookie] assert redirected_to(conn) == ~p"/" end end describe "fetch_current_user/2" do test "authenticates user from session", %{conn: conn, user: user} do user_token = Accounts.generate_user_session_token(user) conn = conn |> put_session(:user_token, user_token) |> UserAuth.fetch_current_user([]) assert conn.assigns.current_user.id == user.id end test "authenticates user from cookies", %{conn: conn, user: user} do logged_in_conn = conn |> fetch_cookies() |> UserAuth.log_in_user(user, %{"remember_me" => "true"}) user_token = logged_in_conn.cookies[@remember_me_cookie] %{value: signed_token} = logged_in_conn.resp_cookies[@remember_me_cookie] conn = conn |> put_req_cookie(@remember_me_cookie, signed_token) |> UserAuth.fetch_current_user([]) assert conn.assigns.current_user.id == user.id assert get_session(conn, :user_token) == user_token assert get_session(conn, :live_socket_id) == "users_sessions:#{Base.url_encode64(user_token)}" end test "does not authenticate if data is missing", %{conn: conn, user: user} do _ = Accounts.generate_user_session_token(user) conn = UserAuth.fetch_current_user(conn, []) refute get_session(conn, :user_token) refute conn.assigns.current_user end end describe "on_mount :mount_current_user" do test "assigns current_user based on a valid user_token", %{conn: conn, user: user} do user_token = Accounts.generate_user_session_token(user) session = conn |> put_session(:user_token, user_token) |> get_session() {:cont, updated_socket} = UserAuth.on_mount(:mount_current_user, %{}, session, %LiveView.Socket{}) assert updated_socket.assigns.current_user.id == user.id end test "assigns nil to current_user assign if there isn't a valid user_token", %{conn: conn} do user_token = "invalid_token" session = conn |> put_session(:user_token, user_token) |> get_session() {:cont, updated_socket} = UserAuth.on_mount(:mount_current_user, %{}, session, %LiveView.Socket{}) assert updated_socket.assigns.current_user == nil end test "assigns nil to current_user assign if there isn't a user_token", %{conn: conn} do session = conn |> get_session() {:cont, updated_socket} = UserAuth.on_mount(:mount_current_user, %{}, session, %LiveView.Socket{}) assert updated_socket.assigns.current_user == nil end end describe "on_mount :ensure_authenticated" do test "authenticates current_user based on a valid user_token", %{conn: conn, user: user} do user_token = Accounts.generate_user_session_token(user) session = conn |> put_session(:user_token, user_token) |> get_session() {:cont, updated_socket} = UserAuth.on_mount(:ensure_authenticated, %{}, session, %LiveView.Socket{}) assert updated_socket.assigns.current_user.id == user.id end test "redirects to login page if there isn't a valid user_token", %{conn: conn} do user_token = "invalid_token" session = conn |> put_session(:user_token, user_token) |> get_session() socket = %LiveView.Socket{ endpoint: MyappWeb.Endpoint, assigns: %{__changed__: %{}, flash: %{}} } {:halt, updated_socket} = UserAuth.on_mount(:ensure_authenticated, %{}, session, socket) assert updated_socket.assigns.current_user == nil end test "redirects to login page if there isn't a user_token", %{conn: conn} do session = conn |> get_session() socket = %LiveView.Socket{ endpoint: MyappWeb.Endpoint, assigns: %{__changed__: %{}, flash: %{}} } {:halt, updated_socket} = UserAuth.on_mount(:ensure_authenticated, %{}, session, socket) assert updated_socket.assigns.current_user == nil end end describe "on_mount :redirect_if_user_is_authenticated" do test "redirects if there is an authenticated user ", %{conn: conn, user: user} do user_token = Accounts.generate_user_session_token(user) session = conn |> put_session(:user_token, user_token) |> get_session() assert {:halt, _updated_socket} = UserAuth.on_mount( :redirect_if_user_is_authenticated, %{}, session, %LiveView.Socket{} ) end test "doesn't redirect if there is no authenticated user", %{conn: conn} do session = conn |> get_session() assert {:cont, _updated_socket} = UserAuth.on_mount( :redirect_if_user_is_authenticated, %{}, session, %LiveView.Socket{} ) end end describe "redirect_if_user_is_authenticated/2" do test "redirects if user is authenticated", %{conn: conn, user: user} do conn = conn |> assign(:current_user, user) |> UserAuth.redirect_if_user_is_authenticated([]) assert conn.halted assert redirected_to(conn) == ~p"/" end test "does not redirect if user is not authenticated", %{conn: conn} do conn = UserAuth.redirect_if_user_is_authenticated(conn, []) refute conn.halted refute conn.status end end describe "require_authenticated_user/2" do test "redirects if user is not authenticated", %{conn: conn} do conn = conn |> fetch_flash() |> UserAuth.require_authenticated_user([]) assert conn.halted assert redirected_to(conn) == ~p"/users/log_in" assert Phoenix.Flash.get(conn.assigns.flash, :error) == "You must log in to access this page." end test "stores the path to redirect to on GET", %{conn: conn} do halted_conn = %{conn | path_info: ["foo"], query_string: ""} |> fetch_flash() |> UserAuth.require_authenticated_user([]) assert halted_conn.halted assert get_session(halted_conn, :user_return_to) == "/foo" halted_conn = %{conn | path_info: ["foo"], query_string: "bar=baz"} |> fetch_flash() |> UserAuth.require_authenticated_user([]) assert halted_conn.halted assert get_session(halted_conn, :user_return_to) == "/foo?bar=baz" halted_conn = %{conn | path_info: ["foo"], query_string: "bar", method: "POST"} |> fetch_flash() |> UserAuth.require_authenticated_user([]) assert halted_conn.halted refute get_session(halted_conn, :user_return_to) end test "does not redirect if user is authenticated", %{conn: conn, user: user} do conn = conn |> assign(:current_user, user) |> UserAuth.require_authenticated_user([]) refute conn.halted refute conn.status end end end
```

# test/myapp/accounts_test.exs

```exs
defmodule Myapp.AccountsTest do use Myapp.DataCase alias Myapp.Accounts import Myapp.AccountsFixtures alias Myapp.Accounts.{User, UserToken} describe "get_user_by_email/1" do test "does not return the user if the email does not exist" do refute Accounts.get_user_by_email("unknown@example.com") end test "returns the user if the email exists" do %{id: id} = user = user_fixture() assert %User{id: ^id} = Accounts.get_user_by_email(user.email) end end describe "get_user_by_email_and_password/2" do test "does not return the user if the email does not exist" do refute Accounts.get_user_by_email_and_password("unknown@example.com", "hello world!") end test "does not return the user if the password is not valid" do user = user_fixture() refute Accounts.get_user_by_email_and_password(user.email, "invalid") end test "returns the user if the email and password are valid" do %{id: id} = user = user_fixture() assert %User{id: ^id} = Accounts.get_user_by_email_and_password(user.email, valid_user_password()) end end describe "get_user!/1" do test "raises if id is invalid" do assert_raise Ecto.NoResultsError, fn -> Accounts.get_user!(-1) end end test "returns the user with the given id" do %{id: id} = user = user_fixture() assert %User{id: ^id} = Accounts.get_user!(user.id) end end describe "register_user/1" do test "requires email and password to be set" do {:error, changeset} = Accounts.register_user(%{}) assert %{ password: ["can't be blank"], email: ["can't be blank"] } = errors_on(changeset) end test "validates email and password when given" do {:error, changeset} = Accounts.register_user(%{email: "not valid", password: "not valid"}) assert %{ email: ["must have the @ sign and no spaces"], password: ["should be at least 12 character(s)"] } = errors_on(changeset) end test "validates maximum values for email and password for security" do too_long = String.duplicate("db", 100) {:error, changeset} = Accounts.register_user(%{email: too_long, password: too_long}) assert "should be at most 160 character(s)" in errors_on(changeset).email assert "should be at most 72 character(s)" in errors_on(changeset).password end test "validates email uniqueness" do %{email: email} = user_fixture() {:error, changeset} = Accounts.register_user(%{email: email}) assert "has already been taken" in errors_on(changeset).email # Now try with the upper cased email too, to check that email case is ignored. {:error, changeset} = Accounts.register_user(%{email: String.upcase(email)}) assert "has already been taken" in errors_on(changeset).email end test "registers users with a hashed password" do email = unique_user_email() {:ok, user} = Accounts.register_user(valid_user_attributes(email: email)) assert user.email == email assert is_binary(user.hashed_password) assert is_nil(user.confirmed_at) assert is_nil(user.password) end end describe "change_user_registration/2" do test "returns a changeset" do assert %Ecto.Changeset{} = changeset = Accounts.change_user_registration(%User{}) assert changeset.required == [:password, :email] end test "allows fields to be set" do email = unique_user_email() password = valid_user_password() changeset = Accounts.change_user_registration( %User{}, valid_user_attributes(email: email, password: password) ) assert changeset.valid? assert get_change(changeset, :email) == email assert get_change(changeset, :password) == password assert is_nil(get_change(changeset, :hashed_password)) end end describe "change_user_email/2" do test "returns a user changeset" do assert %Ecto.Changeset{} = changeset = Accounts.change_user_email(%User{}) assert changeset.required == [:email] end end describe "apply_user_email/3" do setup do %{user: user_fixture()} end test "requires email to change", %{user: user} do {:error, changeset} = Accounts.apply_user_email(user, valid_user_password(), %{}) assert %{email: ["did not change"]} = errors_on(changeset) end test "validates email", %{user: user} do {:error, changeset} = Accounts.apply_user_email(user, valid_user_password(), %{email: "not valid"}) assert %{email: ["must have the @ sign and no spaces"]} = errors_on(changeset) end test "validates maximum value for email for security", %{user: user} do too_long = String.duplicate("db", 100) {:error, changeset} = Accounts.apply_user_email(user, valid_user_password(), %{email: too_long}) assert "should be at most 160 character(s)" in errors_on(changeset).email end test "validates email uniqueness", %{user: user} do %{email: email} = user_fixture() password = valid_user_password() {:error, changeset} = Accounts.apply_user_email(user, password, %{email: email}) assert "has already been taken" in errors_on(changeset).email end test "validates current password", %{user: user} do {:error, changeset} = Accounts.apply_user_email(user, "invalid", %{email: unique_user_email()}) assert %{current_password: ["is not valid"]} = errors_on(changeset) end test "applies the email without persisting it", %{user: user} do email = unique_user_email() {:ok, user} = Accounts.apply_user_email(user, valid_user_password(), %{email: email}) assert user.email == email assert Accounts.get_user!(user.id).email != email end end describe "deliver_user_update_email_instructions/3" do setup do %{user: user_fixture()} end test "sends token through notification", %{user: user} do token = extract_user_token(fn url -> Accounts.deliver_user_update_email_instructions(user, "current@example.com", url) end) {:ok, token} = Base.url_decode64(token, padding: false) assert user_token = Repo.get_by(UserToken, token: :crypto.hash(:sha256, token)) assert user_token.user_id == user.id assert user_token.sent_to == user.email assert user_token.context == "change:current@example.com" end end describe "update_user_email/2" do setup do user = user_fixture() email = unique_user_email() token = extract_user_token(fn url -> Accounts.deliver_user_update_email_instructions(%{user | email: email}, user.email, url) end) %{user: user, token: token, email: email} end test "updates the email with a valid token", %{user: user, token: token, email: email} do assert Accounts.update_user_email(user, token) == :ok changed_user = Repo.get!(User, user.id) assert changed_user.email != user.email assert changed_user.email == email assert changed_user.confirmed_at assert changed_user.confirmed_at != user.confirmed_at refute Repo.get_by(UserToken, user_id: user.id) end test "does not update email with invalid token", %{user: user} do assert Accounts.update_user_email(user, "oops") == :error assert Repo.get!(User, user.id).email == user.email assert Repo.get_by(UserToken, user_id: user.id) end test "does not update email if user email changed", %{user: user, token: token} do assert Accounts.update_user_email(%{user | email: "current@example.com"}, token) == :error assert Repo.get!(User, user.id).email == user.email assert Repo.get_by(UserToken, user_id: user.id) end test "does not update email if token expired", %{user: user, token: token} do {1, nil} = Repo.update_all(UserToken, set: [inserted_at: ~N[2020-01-01 00:00:00]]) assert Accounts.update_user_email(user, token) == :error assert Repo.get!(User, user.id).email == user.email assert Repo.get_by(UserToken, user_id: user.id) end end describe "change_user_password/2" do test "returns a user changeset" do assert %Ecto.Changeset{} = changeset = Accounts.change_user_password(%User{}) assert changeset.required == [:password] end test "allows fields to be set" do changeset = Accounts.change_user_password(%User{}, %{ "password" => "new valid password" }) assert changeset.valid? assert get_change(changeset, :password) == "new valid password" assert is_nil(get_change(changeset, :hashed_password)) end end describe "update_user_password/3" do setup do %{user: user_fixture()} end test "validates password", %{user: user} do {:error, changeset} = Accounts.update_user_password(user, valid_user_password(), %{ password: "not valid", password_confirmation: "another" }) assert %{ password: ["should be at least 12 character(s)"], password_confirmation: ["does not match password"] } = errors_on(changeset) end test "validates maximum values for password for security", %{user: user} do too_long = String.duplicate("db", 100) {:error, changeset} = Accounts.update_user_password(user, valid_user_password(), %{password: too_long}) assert "should be at most 72 character(s)" in errors_on(changeset).password end test "validates current password", %{user: user} do {:error, changeset} = Accounts.update_user_password(user, "invalid", %{password: valid_user_password()}) assert %{current_password: ["is not valid"]} = errors_on(changeset) end test "updates the password", %{user: user} do {:ok, user} = Accounts.update_user_password(user, valid_user_password(), %{ password: "new valid password" }) assert is_nil(user.password) assert Accounts.get_user_by_email_and_password(user.email, "new valid password") end test "deletes all tokens for the given user", %{user: user} do _ = Accounts.generate_user_session_token(user) {:ok, _} = Accounts.update_user_password(user, valid_user_password(), %{ password: "new valid password" }) refute Repo.get_by(UserToken, user_id: user.id) end end describe "generate_user_session_token/1" do setup do %{user: user_fixture()} end test "generates a token", %{user: user} do token = Accounts.generate_user_session_token(user) assert user_token = Repo.get_by(UserToken, token: token) assert user_token.context == "session" # Creating the same token for another user should fail assert_raise Ecto.ConstraintError, fn -> Repo.insert!(%UserToken{ token: user_token.token, user_id: user_fixture().id, context: "session" }) end end end describe "get_user_by_session_token/1" do setup do user = user_fixture() token = Accounts.generate_user_session_token(user) %{user: user, token: token} end test "returns user by token", %{user: user, token: token} do assert session_user = Accounts.get_user_by_session_token(token) assert session_user.id == user.id end test "does not return user for invalid token" do refute Accounts.get_user_by_session_token("oops") end test "does not return user for expired token", %{token: token} do {1, nil} = Repo.update_all(UserToken, set: [inserted_at: ~N[2020-01-01 00:00:00]]) refute Accounts.get_user_by_session_token(token) end end describe "delete_user_session_token/1" do test "deletes the token" do user = user_fixture() token = Accounts.generate_user_session_token(user) assert Accounts.delete_user_session_token(token) == :ok refute Accounts.get_user_by_session_token(token) end end describe "deliver_user_confirmation_instructions/2" do setup do %{user: user_fixture()} end test "sends token through notification", %{user: user} do token = extract_user_token(fn url -> Accounts.deliver_user_confirmation_instructions(user, url) end) {:ok, token} = Base.url_decode64(token, padding: false) assert user_token = Repo.get_by(UserToken, token: :crypto.hash(:sha256, token)) assert user_token.user_id == user.id assert user_token.sent_to == user.email assert user_token.context == "confirm" end end describe "confirm_user/1" do setup do user = user_fixture() token = extract_user_token(fn url -> Accounts.deliver_user_confirmation_instructions(user, url) end) %{user: user, token: token} end test "confirms the email with a valid token", %{user: user, token: token} do assert {:ok, confirmed_user} = Accounts.confirm_user(token) assert confirmed_user.confirmed_at assert confirmed_user.confirmed_at != user.confirmed_at assert Repo.get!(User, user.id).confirmed_at refute Repo.get_by(UserToken, user_id: user.id) end test "does not confirm with invalid token", %{user: user} do assert Accounts.confirm_user("oops") == :error refute Repo.get!(User, user.id).confirmed_at assert Repo.get_by(UserToken, user_id: user.id) end test "does not confirm email if token expired", %{user: user, token: token} do {1, nil} = Repo.update_all(UserToken, set: [inserted_at: ~N[2020-01-01 00:00:00]]) assert Accounts.confirm_user(token) == :error refute Repo.get!(User, user.id).confirmed_at assert Repo.get_by(UserToken, user_id: user.id) end end describe "deliver_user_reset_password_instructions/2" do setup do %{user: user_fixture()} end test "sends token through notification", %{user: user} do token = extract_user_token(fn url -> Accounts.deliver_user_reset_password_instructions(user, url) end) {:ok, token} = Base.url_decode64(token, padding: false) assert user_token = Repo.get_by(UserToken, token: :crypto.hash(:sha256, token)) assert user_token.user_id == user.id assert user_token.sent_to == user.email assert user_token.context == "reset_password" end end describe "get_user_by_reset_password_token/1" do setup do user = user_fixture() token = extract_user_token(fn url -> Accounts.deliver_user_reset_password_instructions(user, url) end) %{user: user, token: token} end test "returns the user with valid token", %{user: %{id: id}, token: token} do assert %User{id: ^id} = Accounts.get_user_by_reset_password_token(token) assert Repo.get_by(UserToken, user_id: id) end test "does not return the user with invalid token", %{user: user} do refute Accounts.get_user_by_reset_password_token("oops") assert Repo.get_by(UserToken, user_id: user.id) end test "does not return the user if token expired", %{user: user, token: token} do {1, nil} = Repo.update_all(UserToken, set: [inserted_at: ~N[2020-01-01 00:00:00]]) refute Accounts.get_user_by_reset_password_token(token) assert Repo.get_by(UserToken, user_id: user.id) end end describe "reset_user_password/2" do setup do %{user: user_fixture()} end test "validates password", %{user: user} do {:error, changeset} = Accounts.reset_user_password(user, %{ password: "not valid", password_confirmation: "another" }) assert %{ password: ["should be at least 12 character(s)"], password_confirmation: ["does not match password"] } = errors_on(changeset) end test "validates maximum values for password for security", %{user: user} do too_long = String.duplicate("db", 100) {:error, changeset} = Accounts.reset_user_password(user, %{password: too_long}) assert "should be at most 72 character(s)" in errors_on(changeset).password end test "updates the password", %{user: user} do {:ok, updated_user} = Accounts.reset_user_password(user, %{password: "new valid password"}) assert is_nil(updated_user.password) assert Accounts.get_user_by_email_and_password(user.email, "new valid password") end test "deletes all tokens for the given user", %{user: user} do _ = Accounts.generate_user_session_token(user) {:ok, _} = Accounts.reset_user_password(user, %{password: "new valid password"}) refute Repo.get_by(UserToken, user_id: user.id) end end describe "inspect/2 for the User module" do test "does not include password" do refute inspect(%User{password: "123456"}) =~ "password: \"123456\"" end end describe "create_user_api_token/1 and fetch_user_api_token/1" do test "create and fetches by token" do user = user_fixture() token = Accounts.create_user_api_token(user) assert Accounts.fetch_user_by_api_token(token) == {:ok, user} assert Accounts.fetch_user_by_api_token("invalid") == :error end end end
```

# test/support/channel_case.ex

```ex
defmodule MyappWeb.ChannelCase do @moduledoc """ This module defines the test case to be used by channel tests. Such tests rely on `Phoenix.ChannelTest` and also import other functionality to make it easier to build common data structures and query the data layer. Finally, if the test case interacts with the database, we enable the SQL sandbox, so changes done to the database are reverted at the end of every test. If you are using PostgreSQL, you can even run database tests asynchronously by setting `use MyappWeb.ChannelCase, async: true`, although this option is not recommended for other databases. """ use ExUnit.CaseTemplate using do quote do # Import conveniences for testing with channels import Phoenix.ChannelTest import MyappWeb.ChannelCase # The default endpoint for testing @endpoint MyappWeb.Endpoint end end setup tags do Myapp.DataCase.setup_sandbox(tags) :ok end end
```

# test/support/conn_case.ex

```ex
defmodule MyappWeb.ConnCase do @moduledoc """ This module defines the test case to be used by tests that require setting up a connection. Such tests rely on `Phoenix.ConnTest` and also import other functionality to make it easier to build common data structures and query the data layer. Finally, if the test case interacts with the database, we enable the SQL sandbox, so changes done to the database are reverted at the end of every test. If you are using PostgreSQL, you can even run database tests asynchronously by setting `use MyappWeb.ConnCase, async: true`, although this option is not recommended for other databases. """ use ExUnit.CaseTemplate using do quote do # The default endpoint for testing @endpoint MyappWeb.Endpoint use MyappWeb, :verified_routes # Import conveniences for testing with connections import Plug.Conn import Phoenix.ConnTest import MyappWeb.ConnCase end end setup tags do Myapp.DataCase.setup_sandbox(tags) {:ok, conn: Phoenix.ConnTest.build_conn()} end @doc """ Setup helper that registers and logs in users. setup :register_and_log_in_user It stores an updated connection and a registered user in the test context. """ def register_and_log_in_user(%{conn: conn}) do user = Myapp.AccountsFixtures.user_fixture() %{conn: log_in_user(conn, user), user: user} end @doc """ Logs the given `user` into the `conn`. It returns an updated `conn`. """ def log_in_user(conn, user) do token = Myapp.Accounts.generate_user_session_token(user) conn |> Phoenix.ConnTest.init_test_session(%{}) |> Plug.Conn.put_session(:user_token, token) end end
```

# test/support/data_case.ex

```ex
defmodule Myapp.DataCase do @moduledoc """ This module defines the setup for tests requiring access to the application's data layer. You may define functions here to be used as helpers in your tests. Finally, if the test case interacts with the database, we enable the SQL sandbox, so changes done to the database are reverted at the end of every test. If you are using PostgreSQL, you can even run database tests asynchronously by setting `use Myapp.DataCase, async: true`, although this option is not recommended for other databases. """ use ExUnit.CaseTemplate using do quote do alias Myapp.Repo import Ecto import Ecto.Changeset import Ecto.Query import Myapp.DataCase end end setup tags do Myapp.DataCase.setup_sandbox(tags) :ok end @doc """ Sets up the sandbox based on the test tags. """ def setup_sandbox(tags) do pid = Ecto.Adapters.SQL.Sandbox.start_owner!(Myapp.Repo, shared: not tags[:async]) on_exit(fn -> Ecto.Adapters.SQL.Sandbox.stop_owner(pid) end) end @doc """ A helper that transforms changeset errors into a map of messages. assert {:error, changeset} = Accounts.create_user(%{password: "short"}) assert "password is too short" in errors_on(changeset).password assert %{password: ["password is too short"]} = errors_on(changeset) """ def errors_on(changeset) do Ecto.Changeset.traverse_errors(changeset, fn {message, opts} -> Regex.replace(~r"%{(\w+)}", message, fn _, key -> opts |> Keyword.get(String.to_existing_atom(key), key) |> to_string() end) end) end end
```

# test/support/fixtures/accounts_fixtures.ex

```ex
defmodule Myapp.AccountsFixtures do @moduledoc """ This module defines test helpers for creating entities via the `Myapp.Accounts` context. """ def unique_user_email, do: "user#{System.unique_integer()}@example.com" def valid_user_password, do: "hello world!" def valid_user_attributes(attrs \\ %{}) do Enum.into(attrs, %{ email: unique_user_email(), password: valid_user_password() }) end def user_fixture(attrs \\ %{}) do {:ok, user} = attrs |> valid_user_attributes() |> Myapp.Accounts.register_user() user end def extract_user_token(fun) do {:ok, captured_email} = fun.(&"[TOKEN]#{&1}[TOKEN]") [_, token | _] = String.split(captured_email.text_body, "[TOKEN]") token end end
```

# test/support/mocks.ex

```ex
defmodule Myapp.Mocks do @moduledoc """ This module contains mock definitions for external APIs and services used in testing. It uses Mox for defining mock implementations of behavior modules. """ # Import Mox for defining mocks import Mox # Define mock for Instagram API defmock(Myapp.MockInstagram, for: Myapp.InstagramBehaviour) end defmodule Myapp.InstagramBehaviour do @moduledoc """ Behaviour module defining the interface for the Instagram API. This allows mocking the Instagram API for testing without relying on the actual external service. """ @doc """ Validates an Instagram access token. """ @callback validate_access_token(opts :: Keyword.t()) :: {:ok, String.t()} | {:error, String.t()} @doc """ Lists media from an Instagram account. """ @callback list_media() :: {:ok, map()} | {:error, String.t()} @doc """ Posts a photo to Instagram. """ @callback post_photo(image_path :: String.t(), opts :: Keyword.t()) :: {:ok, map()} | {:error, String.t()} @doc """ Posts a video to Instagram. """ @callback post_video(video_path :: String.t(), opts :: Keyword.t()) :: {:ok, map()} | {:error, String.t()} @doc """ Creates a media container for Instagram media upload. """ @callback create_media_container( media_type :: String.t(), media_path :: String.t(), caption :: String.t(), location_id :: String.t() | nil, user_tags :: list() | nil, access_token :: String.t(), cover_image_path :: String.t() | nil ) :: {:ok, map()} | {:error, String.t()} @doc """ Publishes a media container to make it visible on Instagram. """ @callback publish_media(creation_id :: String.t(), access_token :: String.t()) :: {:ok, map()} | {:error, String.t()} @doc """ Gets information about a specific media post. """ @callback get_media(media_id :: String.t(), opts :: Keyword.t()) :: {:ok, map()} | {:error, String.t()} @doc """ Generic upload media function that can be used for testing. """ @callback upload_media(media_path :: String.t(), opts :: Keyword.t()) :: {:ok, map()} | {:error, String.t()} end # Application configuration for tests # This is added to the test config to make the application use the mock instead of the real module config_update = """ # Add the following to your test.exs config file: config :myapp, :instagram_api, Myapp.MockInstagram """
```

# test/test_helper.exs

```exs
ExUnit.start() Ecto.Adapters.SQL.Sandbox.mode(Myapp.Repo, :manual)
```

